28385b7b4b5b5702977f86f1e705d9d857ad45d4
==================================================
Fix some IDE warnings
==================================================
Mark Thomas
==================================================
Thu Nov 12 21:29:46 2015 +0000
==================================================
Request.java
Fix some IDE warnings

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1714123 13f79535-47bb-0310-9956-ffa450edef68



==================================================
DeltaManager.java
index b324de4915..9404fb2ba8 100644
--- a/java/org/apache/catalina/connector/Request.java
+++ b/java/org/apache/catalina/connector/Request.java
@@ -1856,7 +1856,7 @@ public class Request implements HttpServletRequest {
         try {
             // Do not go through the instance manager for internal Tomcat classes since they don't need injection
             if (InternalHttpUpgradeHandler.class.isAssignableFrom(httpUpgradeHandlerClass)) {
-                handler = (T) httpUpgradeHandlerClass.newInstance();
+                handler = httpUpgradeHandlerClass.newInstance();
             } else {
                 instanceManager = getContext().getInstanceManager();
                 handler = (T) instanceManager.newInstance(httpUpgradeHandlerClass);

==================================================
Nio2Endpoint.java
index 522a29b8b9..b68cbc2c54 100644
--- a/java/org/apache/catalina/ha/session/DeltaManager.java
+++ b/java/org/apache/catalina/ha/session/DeltaManager.java
@@ -981,6 +981,7 @@ public class DeltaManager extends ClusterManagerBase{
      *            whether this method has been called during session expiration
      * @return a SessionMessage to be sent,
      */
+    @SuppressWarnings("null") // session can't be null when it is used
     public ClusterMessage requestCompleted(String sessionId, boolean expires) {
         DeltaSession session = null;
         SessionMessage msg = null;

==================================================
OpenSSLKeyManager.java
index 1f62e31db9..0088aa3ce9 100644
--- a/java/org/apache/tomcat/util/net/Nio2Endpoint.java
+++ b/java/org/apache/tomcat/util/net/Nio2Endpoint.java
@@ -1165,9 +1165,7 @@ public class Nio2Endpoint extends AbstractJsseEndpoint<Nio2Channel> {
                 } catch (InterruptedException e) {
                     throw new IOException(e);
                 } catch (TimeoutException e) {
-                    if (integer != null) {
-                        integer.cancel(true);
-                    }
+                    integer.cancel(true);
                     throw new SocketTimeoutException();
                 }
             } else {
@@ -1244,9 +1242,7 @@ public class Nio2Endpoint extends AbstractJsseEndpoint<Nio2Channel> {
             } catch (InterruptedException e) {
                 throw new IOException(e);
             } catch (TimeoutException e) {
-                if (integer != null) {
-                    integer.cancel(true);
-                }
+                integer.cancel(true);
                 throw new SocketTimeoutException();
             }
         }

==================================================
