db59b7958488dfbb79dc5c8d6ebf002594ee4854
==================================================
Partial code clean-up for o.a.catalina.tribes
==================================================
Mark Emlyn
==================================================
Tue Aug 7 17:50:46 2012 +0000
==================================================
NioReceiver.java
Partial code clean-up for o.a.catalina.tribes
 - Add final prompted by UCDetector
 - Java 7 use of <>

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1370396 13f79535-47bb-0310-9956-ffa450edef68



==================================================
NioReplicationTask.java
index cd694cff80..64f8cb7a18 100644
--- a/java/org/apache/catalina/tribes/transport/nio/NioReceiver.java
+++ b/java/org/apache/catalina/tribes/transport/nio/NioReceiver.java
@@ -51,13 +51,14 @@ public class NioReceiver extends ReceiverBase implements Runnable {
     /**
      * The string manager for this package.
      */
-    protected static final StringManager sm = StringManager.getManager(Constants.Package);
+    protected static final StringManager sm =
+            StringManager.getManager(Constants.Package);
 
     private Selector selector = null;
     private ServerSocketChannel serverChannel = null;
     private DatagramChannel datagramChannel = null;
 
-    protected LinkedList<Runnable> events = new LinkedList<Runnable>();
+    protected final LinkedList<Runnable> events = new LinkedList<>();
 
     public NioReceiver() {
     }

==================================================
NioSender.java
index df8437f0cb..7d51d79c09 100644
--- a/java/org/apache/catalina/tribes/transport/nio/NioReplicationTask.java
+++ b/java/org/apache/catalina/tribes/transport/nio/NioReplicationTask.java
@@ -59,9 +59,9 @@ public class NioReplicationTask extends AbstractRxTask {
     private ByteBuffer buffer = null;
     private SelectionKey key;
     private int rxBufSize;
-    private NioReceiver receiver;
-    public NioReplicationTask (ListenCallback callback, NioReceiver receiver)
-    {
+    private final NioReceiver receiver;
+
+    public NioReplicationTask (ListenCallback callback, NioReceiver receiver) {
         super(callback);
         this.receiver = receiver;
     }

==================================================
ParallelNioSender.java
index 055cfbe246..23d252a2c4 100644
--- a/java/org/apache/catalina/tribes/transport/nio/NioSender.java
+++ b/java/org/apache/catalina/tribes/transport/nio/NioSender.java
@@ -63,7 +63,7 @@ public class NioSender extends AbstractSender {
     protected ByteBuffer readbuf = null;
     protected ByteBuffer writebuf = null;
     protected byte[] current = null;
-    protected XByteBuffer ackbuf = new XByteBuffer(128,true);
+    protected final XByteBuffer ackbuf = new XByteBuffer(128,true);
     protected int remaining = 0;
     protected boolean complete;
 

==================================================
