c4f881f5b68809139a3ebfeb3121c50bf9be8ea8
==================================================
Invalid byte sequences result in a 400 response.
==================================================
Mark Thomas
==================================================
Wed Oct 13 18:32:19 2021 +0100
==================================================
CoyoteAdapter.java
Invalid byte sequences result in a 400 response.

This is part of the clarification in Servet 6.0 of the expected
canonicalization Servlet containers are expected to apply to request
URIs.



==================================================
TestCoyoteAdapter.java
index 046cc4c41c..ccfb4d1bdb 100644
--- a/java/org/apache/catalina/connector/CoyoteAdapter.java
+++ b/java/org/apache/catalina/connector/CoyoteAdapter.java
@@ -1087,7 +1087,7 @@ public class CoyoteAdapter implements Adapter {
 
         B2CConverter conv = request.getURIConverter();
         if (conv == null) {
-            conv = new B2CConverter(charset, true);
+            conv = new B2CConverter(charset, false);
             request.setURIConverter(conv);
         } else {
             conv.recycle();

==================================================
