8d82cdf025e62962af93bf6d7a8fc470413341b7
==================================================
StringBuffer -> StringBuilder for o.a.c.manager
==================================================
Mark Emlyn
==================================================
Mon Nov 2 18:32:07 2009 +0000
==================================================
JMXProxyServlet.java
StringBuffer -> StringBuilder for o.a.c.manager

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@832013 13f79535-47bb-0310-9956-ffa450edef68



==================================================
JspHelper.java
index 6801017d77..1c0d5b1401 100644
--- a/java/org/apache/catalina/manager/JMXProxyServlet.java
+++ b/java/org/apache/catalina/manager/JMXProxyServlet.java
@@ -201,7 +201,7 @@ public class JMXProxyServlet extends HttpServlet  {
         if( idx < 0 ) return value;
 
         int prev=0;
-        StringBuffer sb=new StringBuffer();
+        StringBuilder sb=new StringBuilder();
         while( idx >= 0 ) {
             appendHead(sb, value, prev, idx);
 
@@ -215,7 +215,7 @@ public class JMXProxyServlet extends HttpServlet  {
         return sb.toString();
     }
 
-    private void appendHead( StringBuffer sb, String value, int start, int end) {
+    private void appendHead( StringBuilder sb, String value, int start, int end) {
         if (end < 1) return;
 
         int pos=start;

==================================================
ManagerServlet.java
index 8884773db1..bd02bb2df6 100644
--- a/java/org/apache/catalina/manager/JspHelper.java
+++ b/java/org/apache/catalina/manager/JspHelper.java
@@ -104,7 +104,7 @@ public class JspHelper {
     }
 
     public static String secondsToTimeString(long in_seconds) {
-        StringBuffer buff = new StringBuffer(9);
+        StringBuilder buff = new StringBuilder(9);
         long rest = in_seconds;
         long hour = rest / 3600;
         rest = rest % 3600;
@@ -172,16 +172,16 @@ public class JspHelper {
         int start = 0;
         int length = buffer.length();
         char[] arrayBuffer = buffer.toCharArray();
-        StringBuffer escapedBuffer = null;
+        StringBuilder escapedBuffer = null;
 
         for (int i = 0; i < length; i++) {
             char c = arrayBuffer[i];
             if (c <= HIGHEST_SPECIAL) {
                 char[] escaped = specialCharactersRepresentation[c];
                 if (escaped != null) {
-                    // create StringBuffer to hold escaped xml string
+                    // create StringBuilder to hold escaped xml string
                     if (start == 0) {
-                        escapedBuffer = new StringBuffer(length + 5);
+                        escapedBuffer = new StringBuilder(length + 5);
                     }
                     // add unescaped portion
                     if (start < i) {

==================================================
StatusTransformer.java
index ba6737cd5d..fab9c4e2e7 100644
--- a/java/org/apache/catalina/manager/ManagerServlet.java
+++ b/java/org/apache/catalina/manager/ManagerServlet.java
@@ -1041,7 +1041,7 @@ public class ManagerServlet
         if (debug >= 1)
             log("serverinfo");
         try {
-            StringBuffer props = new StringBuffer();
+            StringBuilder props = new StringBuilder();
             props.append("OK - Server info");
             props.append("\nTomcat Version: ");
             props.append(ServerInfo.getServerInfo());

==================================================
HTMLHostManagerServlet.java
index 9b7af0697c..9adf56a49a 100644
--- a/java/org/apache/catalina/manager/StatusTransformer.java
+++ b/java/org/apache/catalina/manager/StatusTransformer.java
@@ -833,7 +833,7 @@ public class StatusTransformer {
 
         char content[] = new char[message.length()];
         message.getChars(0, message.length(), content, 0);
-        StringBuffer result = new StringBuffer(content.length + 50);
+        StringBuilder result = new StringBuilder(content.length + 50);
         for (int i = 0; i < content.length; i++) {
             switch (content[i]) {
             case '<':

==================================================
HostManagerServlet.java
index 4aeb0d8075..dc4756840c 100644
--- a/java/org/apache/catalina/manager/host/HTMLHostManagerServlet.java
+++ b/java/org/apache/catalina/manager/host/HTMLHostManagerServlet.java
@@ -360,7 +360,7 @@ public final class HTMLHostManagerServlet extends HostManagerServlet {
                 args = new Object[2];
                 args[0] = RequestUtil.filter(hostName);
                 String[] aliases = host.findAliases();
-                StringBuffer buf = new StringBuffer();
+                StringBuilder buf = new StringBuilder();
                 if (aliases.length > 0) {
                     buf.append(aliases[0]);
                     for (int j = 1; j < aliases.length; j++) {

==================================================
