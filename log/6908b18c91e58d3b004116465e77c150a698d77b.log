6908b18c91e58d3b004116465e77c150a698d77b
==================================================
https://issues.apache.org/bugzilla/show_bug.cgi?id=46947
==================================================
Timothy A.
==================================================
Wed Nov 4 00:54:02 2009 +0000
==================================================
JMXAccessorTask.java
https://issues.apache.org/bugzilla/show_bug.cgi?id=46947

Code cleanup patch that removes some obsolete null checks




git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@832636 13f79535-47bb-0310-9956-ffa450edef68



==================================================
BioReceiver.java
index 6dc17ee7e1..1fe6da2a2e 100644
--- a/java/org/apache/catalina/ant/jmx/JMXAccessorTask.java
+++ b/java/org/apache/catalina/ant/jmx/JMXAccessorTask.java
@@ -430,10 +430,8 @@ public class JMXAccessorTask extends BaseRedirectorHelperTask {
             try {
                 jmxServerConnection = (MBeanServerConnection) pref;
             } catch (ClassCastException cce) {
-                if (project != null) {
-                    project.log("wrong object reference " + refId + " - "
+                project.log("wrong object reference " + refId + " - "
                             + pref.getClass());
-                }
                 return null;
             }
         }

==================================================
JDBCAccessLogValve.java
index 91e73a9d67..bfed62cdcb 100644
--- a/java/org/apache/catalina/tribes/transport/bio/BioReceiver.java
+++ b/java/org/apache/catalina/tribes/transport/bio/BioReceiver.java
@@ -30,7 +30,7 @@ import org.apache.catalina.tribes.transport.AbstractRxTask;
 /**
  *
  * @author Filip Hanik
- * @version $Revision:$ $Date:$
+ * @version $Revision$ $Date$
  */
 public class BioReceiver extends ReceiverBase implements Runnable, ChannelReceiver, ListenCallback {
 

==================================================
NioBlockingSelector.java
index 87f080ae97..ae501646f3 100644
--- a/java/org/apache/catalina/valves/JDBCAccessLogValve.java
+++ b/java/org/apache/catalina/valves/JDBCAccessLogValve.java
@@ -462,17 +462,13 @@ public final class JDBCAccessLogValve
         
         getNext().invoke(request, response);
 
-        String remoteHost = EMPTY;
+        String remoteHost;
         if(resolveHosts)
             remoteHost = request.getRemoteHost();
         else
             remoteHost = request.getRemoteAddr();
-        String user = EMPTY;
-        if(request != null)
-            user = request.getRemoteUser();
-        String query="";
-        if(request != null)
-            query = request.getRequestURI();
+        String user = request.getRemoteUser();
+        String query=request.getRequestURI();
         
         long bytes = response.getContentCountLong() ;
         if(bytes < 0)
@@ -482,7 +478,7 @@ public final class JDBCAccessLogValve
         String method = EMPTY;
         String referer = EMPTY;
         String userAgent = EMPTY;
-        if (pattern.equals("combined") && request != null) {
+        if (pattern.equals("combined")) {
             virtualHost = request.getServerName();
             method = request.getMethod();
             referer = request.getHeader("referer");

==================================================
