d9df4f27e1ddac93059465c26e42ed6b7f5aa66d
==================================================
Implement the requirements of section 5.2.1 of the WebSocket 1.1 specification and ensure that if the deployment of one Endpoint fails, no Endpoints are deployed for that web application.
==================================================
Mark Thomas
==================================================
Thu Jan 31 14:27:17 2019 +0000
==================================================
WsServerContainer.java
index 20343708e9..d76f79c2a9 100644
--- a/java/org/apache/tomcat/websocket/server/LocalStrings.properties
+++ b/java/org/apache/tomcat/websocket/server/LocalStrings.properties
@@ -17,6 +17,7 @@ serverContainer.addNotAllowed=No further Endpoints may be registered once an att
 serverContainer.configuratorFail=Failed to create configurator of type [{0}] for POJO of type [{1}]
 serverContainer.duplicatePaths=Multiple Endpoints may not be deployed to the same path [{0}] : existing endpoint was [{1}] and new endpoint is [{2}]
 serverContainer.encoderFail=Unable to create encoder of type [{0}]
+serverContainer.failedDeployment=Deployment of WebSocket Endpoints to the web application with path [{0}] in host [{1}] is not permitted due to the failure of a previous deployment
 serverContainer.missingAnnotation=Cannot deploy POJO class [{0}] as it is not annotated with @ServerEndpoint
 serverContainer.missingEndpoint=An Endpoint instance has been request for path [{0}] but no matching Endpoint class was found
 serverContainer.pojoDeploy=POJO class [{0}] deploying to path [{1}] in ServletContext [{2}]

==================================================
