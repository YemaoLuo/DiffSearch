b3fea5cd61bca53113677425a2c27788c40d5c1a
==================================================
Remove Java 5 references
==================================================
Mark Thomas
==================================================
Wed Jul 28 21:20:16 2021 +0100
==================================================
ReplicationValve.java
Remove Java 5 references


==================================================
AprEndpoint.java
index 17ebce0ab3..9060c5b826 100644
--- a/java/org/apache/catalina/ha/tcp/ReplicationValve.java
+++ b/java/org/apache/catalina/ha/tcp/ReplicationValve.java
@@ -345,13 +345,11 @@ public class ReplicationValve
         } finally {
             // Array must be remove: Current master request send endAccess at recycle.
             // Don't register this request session again!
-            if(isCrossContext) {
+            if (isCrossContext) {
                 if(log.isDebugEnabled()) {
                     log.debug(sm.getString("ReplicationValve.crossContext.remove"));
                 }
-                // crossContextSessions.remove() only exist at Java 5
-                // register ArrayList at a pool
-                crossContextSessions.set(null);
+                crossContextSessions.remove();
             }
         }
     }

==================================================
NioEndpoint.java
index bf24e6b548..23160671ff 100644
--- a/java/org/apache/tomcat/util/net/AprEndpoint.java
+++ b/java/org/apache/tomcat/util/net/AprEndpoint.java
@@ -77,8 +77,7 @@ import org.apache.tomcat.util.net.openssl.OpenSSLUtil;
  * <li>Worker threads pool</li>
  * </ul>
  *
- * When switching to Java 5, there's an opportunity to use the virtual
- * machine's thread pool.
+ * TODO: Consider using the virtual machine's thread pool.
  *
  * @author Mladen Turk
  * @author Remy Maucherat

==================================================
