d5b98adbb40e4cc1efbbcf25d7501424b2417544
==================================================
EL 3.0 collections operations.
==================================================
Mark Emlyn
==================================================
Mon Jul 15 20:22:30 2013 +0000
==================================================
Stream.java
EL 3.0 collections operations.
Implement peek.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1503451 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TestCollectionOperations.java
index 267569da2d..9271e7408d 100644
--- a/java/org/apache/el/stream/Stream.java
+++ b/java/org/apache/el/stream/Stream.java
@@ -188,6 +188,22 @@ public class Stream {
     }
 
 
+    public Stream peek(final LambdaExpression le) {
+        Iterator<Object> downStream = new OpIterator() {
+            @Override
+            protected void findNext() {
+                if (iterator.hasNext()) {
+                    Object obj = iterator.next();
+                    le.invoke(obj);
+                    next = obj;
+                    foundNext = true;
+                }
+            }
+        };
+        return new Stream(downStream);
+    }
+
+
     public Iterator<?> iterator() {
         return iterator;
     }

==================================================
