d935f1a29aa61ad7287a1d0e5fdae340b5e84641
==================================================
Expose current state of Lifecycle components via JMX beans (where a component has one). Mainly useful for monitoring web application status.
==================================================
Mark Emlyn
==================================================
Fri Sep 3 09:48:46 2010 +0000
==================================================
Lifecycle.java
Expose current state of Lifecycle components via JMX beans (where a component has one). Mainly useful for monitoring web application status.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@992245 13f79535-47bb-0310-9956-ffa450edef68



==================================================
WebappClassLoader.java
index 7e34065b90..7bea2224b8 100644
--- a/java/org/apache/catalina/ha/tcp/mbeans-descriptors.xml
+++ b/java/org/apache/catalina/ha/tcp/mbeans-descriptors.xml
@@ -54,6 +54,10 @@
       description="notify lifecycleListener from message transfer failure"
       is="true"
       type="boolean"/>
+    <attribute
+      name="stateName"
+      description="The name of the LifecycleState that this component is currently in"
+      type="java.lang.String"/>
     <operation
       name="setProperty"
       description="set a property to all cluster managers (with prefix 'manager.')"
@@ -147,6 +151,10 @@
       name="primaryIndicatorName"
       description="Request attribute name to indicate that request processing is at primary session node"
       type="java.lang.String"/>
+    <attribute
+      name="stateName"
+      description="The name of the LifecycleState that this component is currently in"
+      type="java.lang.String"/>
     <attribute
       name="totalSendTime"
       description="total replicated send time"

==================================================
LifecycleBase.java
index 510fb1a252..464b546622 100644
--- a/java/org/apache/catalina/session/mbeans-descriptors.xml
+++ b/java/org/apache/catalina/session/mbeans-descriptors.xml
@@ -111,6 +111,10 @@
           description="Longest time an expired session had been alive"
                  type="int" />
                  
+    <attribute   name="stateName"
+          description="The name of the LifecycleState that this component is currently in"
+                 type="java.lang.String"/>
+
     <attribute   name="randomFile"
           description="File source of random - /dev/urandom or a pipe"
                  type="java.lang.String"/>
@@ -306,6 +310,10 @@
           description="Longest time an expired session had been alive"
                  type="int" />
                  
+    <attribute   name="stateName"
+          description="The name of the LifecycleState that this component is currently in"
+                 type="java.lang.String"/>
+
     <attribute   name="randomFile"
           description="File source of random - /dev/urandom or a pipe"
                  type="java.lang.String"/>

==================================================
