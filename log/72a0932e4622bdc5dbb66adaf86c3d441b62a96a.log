72a0932e4622bdc5dbb66adaf86c3d441b62a96a
==================================================
Clear remainder of current FindBugs issues in unit tests
==================================================
Mark Emlyn
==================================================
Tue Mar 1 09:33:57 2011 +0000
==================================================
CoordinationDemo.java
index 886ff61eac..92b4e41851 100644
--- a/res/findbugs/filter-false-positives.xml
+++ b/res/findbugs/filter-false-positives.xml
@@ -216,6 +216,15 @@
     <Method name="contextInitialized" />
     <Bug code="ST" />
   </Match>
+  <Match>
+    <Class name="org.apache.catalina.startup.TestTomcatClassLoader$ClassLoaderReport"/>
+    <Bug code="Se"/>
+  </Match>
+  <Match>
+    <Class name="org.apache.catalina.tribes.demos.EchoRpcTest" />
+    <Method name="run"/>
+    <Bug code="REC" />
+  </Match>
   <Match>
     <Class name="org.apache.catalina.tribes.demos.EchoRpcTest$SystemExit" />
     <Bug code="Dm" />
@@ -225,6 +234,23 @@
     <Method name="findMethod"/>
     <Bug code="NP" />
   </Match>
+  <Match>
+    <Class name="org.apache.catalina.tribes.demos.LoadTest" />
+    <Method name="memberAdded"/>
+    <Bug code="NN" />
+  </Match>
+  <Match>
+    <Class name="org.apache.catalina.tribes.demos.LoadTest" />
+    <Method name="run"/>
+    <Or>
+      <Bug code="REC" />
+      <Bug code="UW" />
+    </Or>
+  </Match>
+  <Match>
+    <Class name="org.apache.catalina.tribes.demos.LoadTest$SystemExit" />
+    <Bug code="Dm" />
+  </Match>
   <Match>
     <Class name="org.apache.catalina.tribes.demos.MapDemo$SystemExit" />
     <Bug code="Dm" />

==================================================
TesterSupport.java
index 0bc00e1f18..504c0e10e2 100644
--- a/test/org/apache/catalina/tribes/demos/CoordinationDemo.java
+++ b/test/org/apache/catalina/tribes/demos/CoordinationDemo.java
@@ -113,7 +113,12 @@ public class CoordinationDemo {
         for ( int i=0; i<status.length; i++ ) status[i] = new Status(this);
         printScreen();
         String l = reader.readLine();
-        String[] args = tokenize(l);
+        String[] args;
+        if (l == null) {
+            args = new String[] {};
+        } else {
+            args = tokenize(l);
+        }
         while ( args.length >= 1 && (!"quit".equalsIgnoreCase(args[0]))) {
             if ("start".equalsIgnoreCase(args[0])) {
                 cmdStart(args);
@@ -123,7 +128,9 @@ public class CoordinationDemo {
             }
             printScreen();
             l = reader.readLine();
-            args = tokenize(l);
+            if (l != null) {
+                args = tokenize(l);
+            }
         }
         for ( int i=0; i<status.length; i++ ) status[i].stop();
     }
@@ -275,8 +282,10 @@ public class CoordinationDemo {
                 Member lm = channel.getLocalMember(false);
                 local = lm!=null?lm.getName():"";
                 coord = interceptor!=null && interceptor.getCoordinator()!=null?interceptor.getCoordinator().getName():"";
-                viewId = getByteString(interceptor.getViewId()!=null?interceptor.getViewId().getBytes():new byte[0]);
-                count = String.valueOf(interceptor.getView().length);
+                if (interceptor != null) {
+                    viewId = getByteString(interceptor.getViewId()!=null?interceptor.getViewId().getBytes():new byte[0]);
+                    count = String.valueOf(interceptor.getView().length);
+                }
             }
             buf.append(leftfill(local,30," "));
             buf.append(leftfill(startstatus, 10, " "));

==================================================
