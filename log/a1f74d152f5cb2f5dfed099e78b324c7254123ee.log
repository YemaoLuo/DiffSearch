a1f74d152f5cb2f5dfed099e78b324c7254123ee
==================================================
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48790
==================================================
Mark Emlyn
==================================================
Tue Mar 9 22:19:44 2010 +0000
==================================================
DeltaManager.java
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48790
Make maxActive thread safe. Technically a bug but seems like overkill.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@921166 13f79535-47bb-0310-9956-ffa450edef68



==================================================
ManagerBase.java
index 513a75068c..034710fd2e 100644
--- a/java/org/apache/catalina/ha/session/DeltaManager.java
+++ b/java/org/apache/catalina/ha/session/DeltaManager.java
@@ -1160,7 +1160,7 @@ public class DeltaManager extends ClusterManagerBase{
         rejectedSessions = 0 ;
         sessionReplaceCounter = 0 ;
         counterNoStateTransfered = 0 ;
-        maxActive = getActiveSessions() ;
+        setMaxActive(getActiveSessions());
         sessionCounter = getActiveSessions() ;
         counterReceive_EVT_ALL_SESSION_DATA = 0;
         counterReceive_EVT_GET_ALL_SESSIONS = 0;

==================================================
