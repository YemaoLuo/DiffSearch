d79e61ef57cc3f664f99c8cd2d9f771c0e3f0d39
==================================================
- Reset the elContext field after use.
==================================================
Remy Maucherat
==================================================
Fri Sep 1 22:37:38 2006 +0000
==================================================
JspApplicationContextImpl.java
- Reset the elContext field after use.
- Submitted by Scott Johnson and Stan Silvert.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/tc6.0.x/trunk@439494 13f79535-47bb-0310-9956-ffa450edef68



==================================================
PageContextImpl.java
index ec4e7e4df7..86e582cd7d 100644
--- a/java/org/apache/jasper/runtime/JspApplicationContextImpl.java
+++ b/java/org/apache/jasper/runtime/JspApplicationContextImpl.java
@@ -45,7 +45,7 @@ import org.apache.jasper.el.ELContextImpl;
  */
 public class JspApplicationContextImpl implements JspApplicationContext {
 
-	private final static String KEY = JspApplicationContext.class.getName();
+	private final static String KEY = JspApplicationContextImpl.class.getName();
 
 	private final static ExpressionFactory expressionFactory = new ExpressionFactoryImpl();
 

==================================================
JspServletWrapper.java
index 5008c1a89a..6394373f25 100644
--- a/java/org/apache/jasper/runtime/PageContextImpl.java
+++ b/java/org/apache/jasper/runtime/PageContextImpl.java
@@ -212,6 +212,8 @@ public class PageContextImpl extends PageContext {
 		servlet = null;
 		config = null;
 		context = null;
+        applicationContext = null;
+        elContext = null;
 		needsSession = false;
 		errorPageURL = null;
 		bufferSize = JspWriter.DEFAULT_BUFFER;

==================================================
