d6c0a713f1adcd0167285370a8fa9a39a6bb02bc
==================================================
Fix failing unit tests after refactoring of Jasper to use the JAR abstraction from the JAR scanner.
==================================================
Mark Emlyn
==================================================
Tue Nov 5 12:07:03 2013 +0000
==================================================
JarFactory.java
Fix failing unit tests after refactoring of Jasper to use the JAR abstraction from the JAR scanner.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1538960 13f79535-47bb-0310-9956-ffa450edef68



==================================================
JarFileUrlJar.java
index f90381358c..ab6fda303b 100644
--- a/java/org/apache/tomcat/util/scan/JarFactory.java
+++ b/java/org/apache/tomcat/util/scan/JarFactory.java
@@ -33,10 +33,12 @@ public class JarFactory {
         String jarUrl = url.toString();
         if (jarUrl.startsWith("jar:file:")) {
             if (jarUrl.endsWith("!/")) {
-                return new JarFileUrlJar(url);
+                return new JarFileUrlJar(url, true);
             } else {
                 return new JarFileUrlNestedJar(url);
             }
+        } else if (jarUrl.startsWith("file:")) {
+            return new JarFileUrlJar(url, false);
         } else {
             return new UrlJar(url);
         }

==================================================
