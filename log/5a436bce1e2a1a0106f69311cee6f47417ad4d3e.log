5a436bce1e2a1a0106f69311cee6f47417ad4d3e
==================================================
Better reporting for skipped tests.
==================================================
Konstantin Kolinko
==================================================
Fri Mar 14 15:17:27 2014 +0000
==================================================
TestClientCert.java
Better reporting for skipped tests.
With org.junit.Assume the tests are clearly reported as 'skipped' in JUnit test run summary.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1577565 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TestCustomSsl.java
index bc0229d787..9737004c9f 100644
--- a/test/org/apache/tomcat/util/net/TestClientCert.java
+++ b/test/org/apache/tomcat/util/net/TestClientCert.java
@@ -20,6 +20,7 @@ import java.util.Arrays;
 
 import static org.junit.Assert.assertEquals;
 
+import org.junit.Assume;
 import org.junit.Test;
 
 import org.apache.catalina.startup.Tomcat;
@@ -35,9 +36,8 @@ public class TestClientCert extends TomcatBaseTest {
 
     @Test
     public void testClientCertGet() throws Exception {
-        if (!TesterSupport.isRenegotiationSupported(getTomcatInstance())) {
-            return;
-        }
+        Assume.assumeTrue("SSL renegotiation have to be supported",
+                TesterSupport.isRenegotiationSupported(getTomcatInstance()));
 
         // Unprotected resource
         ByteChunk res =
@@ -72,9 +72,8 @@ public class TestClientCert extends TomcatBaseTest {
 
     private void doTestClientCertPost(int bodySize, boolean expectProtectedFail)
             throws Exception {
-        if (!TesterSupport.isRenegotiationSupported(getTomcatInstance())) {
-            return;
-        }
+        Assume.assumeTrue("SSL renegotiation have to be supported",
+                TesterSupport.isRenegotiationSupported(getTomcatInstance()));
 
         byte[] body = new byte[bodySize];
         Arrays.fill(body, TesterSupport.DATA);

==================================================
TestSsl.java
index a29b8c5f3e..b7f1bf5692 100644
--- a/test/org/apache/tomcat/util/net/TestCustomSsl.java
+++ b/test/org/apache/tomcat/util/net/TestCustomSsl.java
@@ -25,6 +25,7 @@ import static org.junit.Assert.assertEquals;
 import static org.junit.Assert.assertTrue;
 import static org.junit.Assert.fail;
 
+import org.junit.Assume;
 import org.junit.Test;
 
 import org.apache.catalina.Context;
@@ -52,10 +53,9 @@ public class TestCustomSsl extends TomcatBaseTest {
 
         Tomcat tomcat = getTomcatInstance();
         Connector connector = tomcat.getConnector();
-        if (connector.getProtocolHandlerClassName().contains("Apr")) {
-            // This test is only for JSSE based SSL connectors
-            return;
-        }
+
+        Assume.assumeFalse("This test is only for JSSE based SSL connectors",
+                connector.getProtocolHandlerClassName().contains("Apr"));
 
         connector.setProperty("sslImplementationName",
                 "org.apache.tomcat.util.net.jsse.TesterBug50640SslImpl");
@@ -105,9 +105,8 @@ public class TestCustomSsl extends TomcatBaseTest {
 
         Tomcat tomcat = getTomcatInstance();
 
-        if (!TesterSupport.isRenegotiationSupported(getTomcatInstance())) {
-            return;
-        }
+        Assume.assumeTrue("SSL renegotiation have to be supported",
+                TesterSupport.isRenegotiationSupported(getTomcatInstance()));
 
         TesterSupport.configureClientCertContext(tomcat);
 

==================================================
