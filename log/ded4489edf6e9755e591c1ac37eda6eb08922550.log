ded4489edf6e9755e591c1ac37eda6eb08922550
==================================================
Fix some clone usage issues.
==================================================
Remy Maucherat
==================================================
Thu Jul 27 15:15:52 2017 +0000
==================================================
ChannelMessage.java
Fix some clone usage issues.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1803193 13f79535-47bb-0310-9956-ffa450edef68



==================================================
AbstractReplicatedMap.java
index 8ee41b3a17..ab7200f8a1 100644
--- a/java/org/apache/catalina/tribes/ChannelMessage.java
+++ b/java/org/apache/catalina/tribes/ChannelMessage.java
@@ -26,7 +26,7 @@ import org.apache.catalina.tribes.io.XByteBuffer;
  * interceptor and eventually down to the ChannelSender component
  *
  */
-public interface ChannelMessage extends Serializable {
+public interface ChannelMessage extends Serializable, Cloneable {
 
 
     /**

==================================================
ByteChunk.java
index a47c0b9096..048c3fc124 100644
--- a/java/org/apache/catalina/tribes/tipis/LocalStrings.properties
+++ b/java/org/apache/catalina/tribes/tipis/LocalStrings.properties
@@ -33,7 +33,6 @@ abstractReplicatedMap.unable.remove=Unable to replicate out data for a AbstractR
 abstractReplicatedMap.unable.retrieve=Unable to retrieve remote object for key:[{0}]
 abstractReplicatedMap.unable.get=Unable to replicate out data for a AbstractReplicatedMap.get operation
 abstractReplicatedMap.unable.put=Unable to replicate out data for a AbstractReplicatedMap.put operation
-abstractReplicatedMap.unsupport.operation=This operation is not valid on a replicated map
 abstractReplicatedMap.mapMemberAdded.nullMember=Notified member is not registered in the membership:[{0}].
 abstractReplicatedMap.mapMemberAdded.added=Map member added:[{0}]
 abstractReplicatedMap.leftOver.pingMsg=PING message has been received beyond the timeout period. The map member[{0}] might have been removed from the map membership.

==================================================
CharChunk.java
index 150e740ca0..7aed33d1dd 100644
--- a/java/org/apache/tomcat/util/buf/ByteChunk.java
+++ b/java/org/apache/tomcat/util/buf/ByteChunk.java
@@ -148,6 +148,11 @@ public final class ByteChunk implements Cloneable, Serializable {
         allocate( initial, -1 );
     }
 
+    @Override
+    public Object clone() throws CloneNotSupportedException {
+        return super.clone();
+    }
+
     public boolean isNull() {
         return ! isSet; // buff==null;
     }

==================================================
MessageBytes.java
index 7c082b4aee..4a47d779a9 100644
--- a/java/org/apache/tomcat/util/buf/CharChunk.java
+++ b/java/org/apache/tomcat/util/buf/CharChunk.java
@@ -98,6 +98,11 @@ public final class CharChunk implements Cloneable, Serializable, CharSequence {
 
     // --------------------
 
+    @Override
+    public Object clone() throws CloneNotSupportedException {
+        return super.clone();
+    }
+
     public boolean isNull() {
         if( end > 0 ) {
             return false;

==================================================
