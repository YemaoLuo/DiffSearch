307bb441ac6cb0564d43319b64918172988c9df5
==================================================
Better patch for BZ 43675 in response to Remy's -1 to previous patch
==================================================
Mark Emlyn
==================================================
Tue Nov 13 23:13:24 2007 +0000
==================================================
ParserUtils.java
Better patch for BZ 43675 in response to Remy's -1 to previous patch

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@594700 13f79535-47bb-0310-9956-ffa450edef68



==================================================
ServerCookie.java
index e27cc856da..e73f9e4f90 100644
--- a/java/org/apache/jasper/xmlparser/ParserUtils.java
+++ b/java/org/apache/jasper/xmlparser/ParserUtils.java
@@ -191,9 +191,6 @@ public class ParserUtils {
 
 class MyEntityResolver implements EntityResolver {
 
-    // Logger
-    private Log log = LogFactory.getLog(MyEntityResolver.class);
-
     public InputSource resolveEntity(String publicId, String systemId)
             throws SAXException {
         for (int i = 0; i < Constants.CACHED_DTD_PUBLIC_IDS.length; i++) {
@@ -210,6 +207,7 @@ class MyEntityResolver implements EntityResolver {
                 return isrc;
             }
         }
+        Log log = LogFactory.getLog(MyEntityResolver.class);
         if (log.isDebugEnabled())
             log.debug("Resolve entity failed" + publicId + " " + systemId);
         log.error(Localizer.getMessage("jsp.error.parse.xml.invalidPublicId",
@@ -220,10 +218,8 @@ class MyEntityResolver implements EntityResolver {
 
 class MyErrorHandler implements ErrorHandler {
 
-    // Logger
-    private Log log = LogFactory.getLog(MyErrorHandler.class);
-
     public void warning(SAXParseException ex) throws SAXException {
+        Log log = LogFactory.getLog(MyErrorHandler.class);
         if (log.isDebugEnabled())
             log.debug("ParserUtils: warning ", ex);
         // We ignore warnings

==================================================
