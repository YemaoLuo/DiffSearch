ebbe5f1d16c8ee345b3334abc3cd2c20d61171f4
==================================================
Add initial Loom implementation
==================================================
Mark Thomas
==================================================
Wed Oct 12 10:49:31 2022 +0100
==================================================
Http11BioLoomProtocol.java
Add initial Loom implementation

Supports basic HTTP requests. No TLS, no async.


==================================================
Http11LoomProcessor.java
index 9b6efddac6..e3c8acf1e1 100644
--- a/modules/loom/src/main/java/org/apache/coyote/http11/Http11BioLoomProtocol.java
+++ b/modules/loom/src/main/java/org/apache/coyote/http11/Http11BioLoomProtocol.java
@@ -16,13 +16,27 @@
  */
 package org.apache.coyote.http11;
 
-/**
- * Dummy implementation for now that just extends the standard NIO
- * implementation.
- */
-public class Http11BioLoomProtocol extends Http11NioProtocol {
+import java.net.Socket;
+
+import org.apache.coyote.Processor;
+import org.apache.juli.logging.Log;
+import org.apache.juli.logging.LogFactory;
+import org.apache.tomcat.util.net.BioLoomEndpoint;
+
+public class Http11BioLoomProtocol extends AbstractHttp11Protocol<Socket> {
+
+    private static final Log log = LogFactory.getLog(Http11BioLoomProtocol.class);
+
+    public Http11BioLoomProtocol() {
+        super(new BioLoomEndpoint());
+    }
+
+
+    @Override
+    protected Log getLog() {
+        return log;
+    }
 
-    // ----------------------------------------------------- JMX related methods
 
     @Override
     protected String getNamePrefix() {
@@ -32,4 +46,11 @@ public class Http11BioLoomProtocol extends Http11NioProtocol {
             return "http-bio-loom";
         }
     }
+
+
+    @Override
+    protected Processor createProcessor() {
+        Http11Processor processor = new Http11LoomProcessor(this, adapter);
+        return processor;
+    }
 }

==================================================
BioLoomEndpoint.java
new file mode 100644
index 0000000000..cc1e5de4d0
--- /dev/null
+++ b/modules/loom/src/main/java/org/apache/coyote/http11/Http11LoomProcessor.java
@@ -0,0 +1,26 @@
+/*
+ *  Licensed to the Apache Software Foundation (ASF) under one or more
+ *  contributor license agreements.  See the NOTICE file distributed with
+ *  this work for additional information regarding copyright ownership.
+ *  The ASF licenses this file to You under the Apache License, Version 2.0
+ *  (the "License"); you may not use this file except in compliance with
+ *  the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ *  Unless required by applicable law or agreed to in writing, software
+ *  distributed under the License is distributed on an "AS IS" BASIS,
+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ *  See the License for the specific language governing permissions and
+ *  limitations under the License.
+ */
+package org.apache.coyote.http11;
+
+import org.apache.coyote.Adapter;
+
+public class Http11LoomProcessor extends Http11Processor {
+
+    public Http11LoomProcessor(AbstractHttp11Protocol<?> protocol, Adapter adapter) {
+        super(protocol, adapter);
+    }
+}

==================================================
