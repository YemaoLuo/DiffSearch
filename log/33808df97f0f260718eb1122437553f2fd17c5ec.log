33808df97f0f260718eb1122437553f2fd17c5ec
==================================================
Refactor the expectation flag to move it to the request (since it is a property of the request)
==================================================
Mark Thomas
==================================================
Wed Sep 30 23:33:27 2015 +0000
==================================================
Request.java
Refactor the expectation flag to move it to the request (since it is a property of the request)

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1706172 13f79535-47bb-0310-9956-ffa450edef68



==================================================
Http11Processor.java
index 057fceb696..133f9d50c4 100644
--- a/java/org/apache/coyote/Request.java
+++ b/java/org/apache/coyote/Request.java
@@ -121,6 +121,10 @@ public final class Request {
     private long contentLength = -1;
     private MessageBytes contentTypeMB = null;
     private String charEncoding = null;
+    /**
+     * Is there an expectation ?
+     */
+    private boolean expectation = false;
 
     private final ServerCookies serverCookies = new ServerCookies(INITIAL_COOKIE_SIZE);
     private final Parameters parameters = new Parameters();
@@ -344,6 +348,17 @@ public final class Request {
         return headers.getHeader(name);
     }
 
+
+    public void setExpectation(boolean expectation) {
+        this.expectation = expectation;
+    }
+
+
+    public boolean hasExpectation() {
+        return expectation;
+    }
+
+
     // -------------------- Associated response --------------------
 
     public Response getResponse() {
@@ -524,6 +539,7 @@ public final class Request {
         contentLength = -1;
         contentTypeMB = null;
         charEncoding = null;
+        expectation = false;
         headers.recycle();
         serverNameMB.recycle();
         serverPort=-1;

==================================================
