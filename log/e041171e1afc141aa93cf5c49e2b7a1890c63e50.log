e041171e1afc141aa93cf5c49e2b7a1890c63e50
==================================================
Ensure the name of the default SSLHostConfig is always lower case
==================================================
Mark Thomas
==================================================
Thu Jan 28 09:58:43 2021 +0000
==================================================
AbstractEndpoint.java
Ensure the name of the default SSLHostConfig is always lower case

This is the third part of the fix to make mapping of SNI values to SSL
virtual hosts case insensitive.


==================================================
SSLHostConfig.java
index 83b9715e84..868c8b68a3 100644
--- a/java/org/apache/tomcat/util/net/AbstractEndpoint.java
+++ b/java/org/apache/tomcat/util/net/AbstractEndpoint.java
@@ -27,6 +27,7 @@ import java.util.Enumeration;
 import java.util.HashMap;
 import java.util.HashSet;
 import java.util.List;
+import java.util.Locale;
 import java.util.Map;
 import java.util.Set;
 import java.util.concurrent.ConcurrentHashMap;
@@ -212,11 +213,15 @@ public abstract class AbstractEndpoint<S,U> {
     // ----------------------------------------------------------------- Properties
 
     private String defaultSSLHostConfigName = SSLHostConfig.DEFAULT_SSL_HOST_NAME;
+    /**
+     * @return The host name for the default SSL configuration for this endpoint
+     *         - always in lower case.
+     */
     public String getDefaultSSLHostConfigName() {
         return defaultSSLHostConfigName;
     }
     public void setDefaultSSLHostConfigName(String defaultSSLHostConfigName) {
-        this.defaultSSLHostConfigName = defaultSSLHostConfigName;
+        this.defaultSSLHostConfigName = defaultSSLHostConfigName.toLowerCase(Locale.ENGLISH);
     }
 
 

==================================================
