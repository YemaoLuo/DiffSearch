e075c4bb778f4514917caa0d9f1f225db8505652
==================================================
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50192
==================================================
Mark Emlyn
==================================================
Fri Nov 12 18:29:12 2010 +0000
==================================================
ELContextImpl.java
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50192
Improve performance for EL when running under a security manager.
Based on a patch by Robert Goff.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1034500 13f79535-47bb-0310-9956-ffa450edef68



==================================================
ELResolverImpl.java
index ccc296e489..0047708162 100644
--- a/java/org/apache/jasper/el/ELContextImpl.java
+++ b/java/org/apache/jasper/el/ELContextImpl.java
@@ -26,8 +26,6 @@ import javax.el.FunctionMapper;
 import javax.el.ValueExpression;
 import javax.el.VariableMapper;
 
-import org.apache.jasper.Constants;
-
 /**
  * Implementation of ELContext
  * 
@@ -66,22 +64,12 @@ public final class ELContextImpl extends ELContext {
 
     private final ELResolver resolver;
 
-    private FunctionMapper functionMapper;
+    private FunctionMapper functionMapper = NullFunctionMapper;
 
     private VariableMapper variableMapper;
 
     public ELContextImpl() {
         this(ELResolverImpl.getDefaultResolver());
-        if (Constants.IS_SECURITY_ENABLED) {
-            functionMapper = new FunctionMapper() {
-                @Override
-                public Method resolveFunction(String prefix, String localName) {
-                    return null;
-                }
-            };
-        } else {
-            functionMapper = NullFunctionMapper;
-        }
     }
 
     public ELContextImpl(ELResolver resolver) {

==================================================
