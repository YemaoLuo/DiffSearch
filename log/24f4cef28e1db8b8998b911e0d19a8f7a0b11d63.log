24f4cef28e1db8b8998b911e0d19a8f7a0b11d63
==================================================
Be a little more precise in the use of generics. Porting this to Tomcat 7 where <> is not allowed highlighted an issue.
==================================================
Mark Emlyn
==================================================
Fri Aug 16 16:34:45 2013 +0000
==================================================
AsyncChannelWrapper.java
Be a little more precise in the use of generics. Porting this to Tomcat 7 where <> is not allowed highlighted an issue.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1514778 13f79535-47bb-0310-9956-ffa450edef68



==================================================
AsyncChannelWrapperNonSecure.java
index 270c8ac146..d970d75708 100644
--- a/java/org/apache/tomcat/websocket/AsyncChannelWrapper.java
+++ b/java/org/apache/tomcat/websocket/AsyncChannelWrapper.java
@@ -32,14 +32,14 @@ public interface AsyncChannelWrapper {
 
     Future<Integer> read(ByteBuffer dst);
 
-    <A> void read(ByteBuffer dst, A attachment,
-            CompletionHandler<Integer,? super A> handler);
+    <B,A extends B> void read(ByteBuffer dst, A attachment,
+            CompletionHandler<Integer,B> handler);
 
     Future<Integer> write(ByteBuffer src);
 
-    <A> void write(ByteBuffer[] srcs, int offset, int length, long timeout,
-            TimeUnit unit, A attachment,
-            CompletionHandler<Long,? super A> handler);
+    <B,A extends B> void write(ByteBuffer[] srcs, int offset, int length,
+            long timeout, TimeUnit unit, A attachment,
+            CompletionHandler<Long,B> handler);
 
     void close();
 

==================================================
AsyncChannelWrapperSecure.java
index 95076179df..d86c22c14c 100644
--- a/java/org/apache/tomcat/websocket/AsyncChannelWrapperNonSecure.java
+++ b/java/org/apache/tomcat/websocket/AsyncChannelWrapperNonSecure.java
@@ -47,8 +47,8 @@ public class AsyncChannelWrapperNonSecure implements AsyncChannelWrapper {
     }
 
     @Override
-    public <A> void read(ByteBuffer dst, A attachment,
-            CompletionHandler<Integer,? super A> handler) {
+    public <B,A extends B> void read(ByteBuffer dst, A attachment,
+            CompletionHandler<Integer,B> handler) {
         socketChannel.read(dst, attachment, handler);
     }
 
@@ -58,9 +58,9 @@ public class AsyncChannelWrapperNonSecure implements AsyncChannelWrapper {
     }
 
     @Override
-    public <A> void write(ByteBuffer[] srcs, int offset, int length,
+    public <B,A extends B> void write(ByteBuffer[] srcs, int offset, int length,
             long timeout, TimeUnit unit, A attachment,
-            CompletionHandler<Long,? super A> handler) {
+            CompletionHandler<Long,B> handler) {
         socketChannel.write(
                 srcs, offset, length, timeout, unit, attachment, handler);
     }

==================================================
