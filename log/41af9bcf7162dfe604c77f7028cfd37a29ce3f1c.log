41af9bcf7162dfe604c77f7028cfd37a29ce3f1c
==================================================
According to JavaDoc javax.servlet.jsp.PageContext.include(String) and javax.servlet.jsp.PageContext.include(String, boolean) must throw IOException if I/O error occur during the operation.
==================================================
Violeta Georgieva
==================================================
Tue Sep 2 13:11:20 2014 +0000
==================================================
JspServletWrapper.java
According to JavaDoc javax.servlet.jsp.PageContext.include(String) and javax.servlet.jsp.PageContext.include(String, boolean) must throw IOException if I/O error occur during the operation.
When JSPServlet init parameter "development" is "false" then IOException is re-thrown, but when the parameter is "true", JasperException is thrown instead of IOException.
This change guarantees that IOException is always re-thrown.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1621975 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TestPageContextImpl.java
index d336cf9b2d..51b427ae9c 100644
--- a/java/org/apache/jasper/servlet/JspServletWrapper.java
+++ b/java/org/apache/jasper/servlet/JspServletWrapper.java
@@ -456,8 +456,8 @@ public class JspServletWrapper {
             }
             throw ex;
         } catch (IOException ex) {
-            if(options.getDevelopment()) {
-                throw handleJspException(ex);
+            if (options.getDevelopment()) {
+                throw new IOException(handleJspException(ex).getMessage(), ex);
             }
             throw ex;
         } catch (IllegalStateException ex) {

==================================================
