d440ae284cdeb2bf34ceac2161974cb5bfea2795
==================================================
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54888
==================================================
Mark Emlyn
==================================================
Mon Apr 29 13:24:36 2013 +0000
==================================================
ForEach.java
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54888
Support a csv list with the ForEach tag plugin
Based on a patch provided by Sheldon Shao

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1477051 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TestForEach.java
index 6c25497bd3..2605e83954 100644
--- a/java/org/apache/jasper/tagplugins/jstl/core/ForEach.java
+++ b/java/org/apache/jasper/tagplugins/jstl/core/ForEach.java
@@ -155,6 +155,10 @@ public final class ForEach implements TagPlugin {
         ctxt.generateJavaSource("else if (" + itemsV + " instanceof Map)");
         ctxt.generateJavaSource(iterV + "=((Map)" + itemsV + ").entrySet().iterator();");
 
+        // String
+        ctxt.generateJavaSource("else if (" + itemsV + " instanceof String)");
+        ctxt.generateJavaSource(iterV + "=toIterator(new StringTokenizer((String)" + itemsV + ", \",\"));");
+
         // Not null
         ctxt.generateJavaSource("if (" + iterV + " != null) {");
 

==================================================
