57fbd00232633eaadaad0ca54928eeeedbe43dec
==================================================
Make memory leak prevention code that clears ThreadLocal instances more robust against objects with toString() methods that throw exceptions.
==================================================
Mark Emlyn
==================================================
Tue Nov 23 10:38:40 2010 +0000
==================================================
WebappClassLoader.java
index 4350c7196a..47fd08330d 100644
--- a/java/org/apache/catalina/loader/LocalStrings.properties
+++ b/java/org/apache/catalina/loader/LocalStrings.properties
@@ -49,6 +49,9 @@ webappClassLoader.clearThreadLocal=The web application [{0}] created a ThreadLoc
 webappClassLoader.clearThreadLocalDebugClear=To simplify the process of tracing memory leaks, the key has been forcibly removed.
 webappClassLoader.clearThreadLocalClear=To prevent a memory leak, the ThreadLocal has been forcibly removed.
 webappClassLoader.clearThreadLocalFail=Failed to clear ThreadLocal references for web application [{0}]
+webappClassLoader.clearThreadLocal.badKey=Unable to determine string representation of key of type [{0}]
+webappClassLoader.clearThreadLocal.badValue=Unable to determine string representation of value of type [{0}]
+webappClassLoader.clearThreadLocal.unknown=Unknown
 webappClassLoader.stopThreadFail=Failed to terminate thread named [{0}] for web application [{1}]
 webappClassLoader.stopTimerThreadFail=Failed to terminate TimerThread named [{0}] for web application [{1}]
 webappClassLoader.validationErrorJarPath=Unable to validate JAR entry with name {0}

==================================================
