b432fcada6847aa77adf8832030329ff12485f3c
==================================================
Fix FindBugs warnings
==================================================
Mark Emlyn
==================================================
Sun Jan 16 13:54:28 2011 +0000
==================================================
PooledSender.java
Fix FindBugs warnings

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1059560 13f79535-47bb-0310-9956-ffa450edef68



==================================================
BioReceiver.java
index ca20adc304..6d4449140f 100644
--- a/java/org/apache/catalina/tribes/transport/PooledSender.java
+++ b/java/org/apache/catalina/tribes/transport/PooledSender.java
@@ -88,10 +88,12 @@ public abstract class PooledSender extends AbstractSender implements MultiPointS
         return (queue==null)?false:queue.checkIdleKeepAlive();
     }
 
+    @Override
     public void add(Member member) {
         // no op, senders created upon demands
     }
 
+    @Override
     public void remove(Member member) {
         //no op for now, should not cancel out any keys
         //can create serious sync issues
@@ -100,7 +102,7 @@ public abstract class PooledSender extends AbstractSender implements MultiPointS
     }
     //  ----------------------------------------------------- Inner Class
 
-    private class SenderQueue {
+    private static class SenderQueue {
         private int limit = 25;
 
         PooledSender parent = null;

==================================================
BioReplicationTask.java
index 3e70504698..804bb9e3d1 100644
--- a/java/org/apache/catalina/tribes/transport/bio/BioReceiver.java
+++ b/java/org/apache/catalina/tribes/transport/bio/BioReceiver.java
@@ -82,7 +82,11 @@ public class BioReceiver extends ReceiverBase implements Runnable {
         setListen(false);
         try {
             this.serverSocket.close();
-        } catch (Exception x) {/* Ignore */}
+        } catch (Exception x) {
+            if (log.isDebugEnabled()) {
+                log.debug("Failed to close socket", x);
+            }
+        }
         super.stop();
     }
 

==================================================
ParallelNioSender.java
index 50a0edf18e..321d865da1 100644
--- a/java/org/apache/catalina/tribes/transport/bio/BioReplicationTask.java
+++ b/java/org/apache/catalina/tribes/transport/bio/BioReplicationTask.java
@@ -67,8 +67,20 @@ public class BioReplicationTask extends AbstractRxTask {
         } catch ( Exception x ) {
             log.error("Unable to service bio socket", x);
         }finally {
-            try {socket.close();}catch ( Exception e){/* Ignore */}
-            try {reader.close();}catch ( Exception e){/* Ignore */}
+            try {
+                socket.close();
+            }catch (Exception e) {
+                if (log.isDebugEnabled()) {
+                    log.debug("Failed to close socket", e);
+                }
+            }
+            try {
+                reader.close();
+            }catch (Exception e) {
+                if (log.isDebugEnabled()) {
+                    log.debug("Failed to close reader", e);
+                }
+            }
             reader = null;
             socket = null;
         }
@@ -158,8 +170,20 @@ public class BioReplicationTask extends AbstractRxTask {
     @Override
     public void close() {
         setDoRun(false);
-        try {socket.close();}catch ( Exception e){/* Ignore */}
-        try {reader.close();}catch ( Exception e){/* Ignore */}
+        try {
+            socket.close();
+        }catch (Exception e) {
+            if (log.isDebugEnabled()) {
+                log.debug("Failed to close socket", e);
+            }
+        }
+        try {
+            reader.close();
+        }catch (Exception e) {
+            if (log.isDebugEnabled()) {
+                log.debug("Failed to close reader", e);
+            }
+        }
         reader = null;
         socket = null;
         super.close();

==================================================
NioEndpoint.java
index d7c2372802..e855a37ab5 100644
--- a/java/org/apache/catalina/tribes/transport/nio/ParallelNioSender.java
+++ b/java/org/apache/catalina/tribes/transport/nio/ParallelNioSender.java
@@ -288,7 +288,13 @@ public class ParallelNioSender extends AbstractSender implements MultiPointSende
     @Override
     public void finalize() {
         try {disconnect(); }catch ( Exception e){/*Ignore*/}
-        try {selector.close();} catch (Exception e) {/*Ignore*/}
+        try {
+            selector.close();
+        }catch (Exception e) {
+            if (log.isDebugEnabled()) {
+                log.debug("Failed to close selector", e);
+            }
+        }
     }
 
     @Override

==================================================
