ba36136f605c75185cd033602d0f4ce2b298e653
==================================================
Simplify - call socketWrapper.write() directly
==================================================
Mark Thomas
==================================================
Thu Jan 8 13:11:19 2015 +0000
==================================================
Http11OutputBuffer.java
Simplify - call socketWrapper.write() directly

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1650284 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TesterOutputBuffer.java
index dfbdee6071..1390f406bf 100644
--- a/java/org/apache/coyote/http11/Http11OutputBuffer.java
+++ b/java/org/apache/coyote/http11/Http11OutputBuffer.java
@@ -350,7 +350,7 @@ public class Http11OutputBuffer<S> implements OutputBuffer {
 
     public void sendAck() throws IOException {
         if (!committed) {
-            addToBB(Constants.ACK_BYTES, 0, Constants.ACK_BYTES.length);
+            socketWrapper.write(isBlocking(), Constants.ACK_BYTES, 0, Constants.ACK_BYTES.length);
             if (flushBuffer(true)) {
                 throw new IOException(sm.getString("iob.failedwrite.ack"));
             }
@@ -370,7 +370,7 @@ public class Http11OutputBuffer<S> implements OutputBuffer {
 
         if (pos > 0) {
             // Sending the response header buffer
-            addToBB(headerBuffer, 0, pos);
+            socketWrapper.write(isBlocking(), headerBuffer, 0, pos);
         }
     }
 
@@ -587,11 +587,6 @@ public class Http11OutputBuffer<S> implements OutputBuffer {
     }
 
 
-    protected void addToBB(byte[] buf, int offset, int length) throws IOException {
-        socketWrapper.write(isBlocking(), buf, offset, length);
-    }
-
-
     //------------------------------------------------------ Non-blocking writes
 
     protected void registerWriteInterest() {
@@ -668,7 +663,7 @@ public class Http11OutputBuffer<S> implements OutputBuffer {
             int len = chunk.getLength();
             int start = chunk.getStart();
             byte[] b = chunk.getBuffer();
-            addToBB(b, start, len);
+            socketWrapper.write(isBlocking(), b, start, len);
             byteCount += len;
             return len;
         }

==================================================
