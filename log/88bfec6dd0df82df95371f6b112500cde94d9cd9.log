88bfec6dd0df82df95371f6b112500cde94d9cd9
==================================================
Close the session before closing the connection if a low-level I/O error is experienced.
==================================================
Mark Thomas
==================================================
Fri Dec 11 15:31:15 2015 +0000
==================================================
WsSession.java
Close the session before closing the connection if a low-level I/O error is experienced.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1719459 13f79535-47bb-0310-9956-ffa450edef68



==================================================
WsHttpUpgradeHandler.java
index c9863bdbb5..a7f3b2be05 100644
--- a/java/org/apache/tomcat/websocket/server/LocalStrings.properties
+++ b/java/org/apache/tomcat/websocket/server/LocalStrings.properties
@@ -34,6 +34,7 @@ uriTemplate.invalidSegment=The segment [{0}] is not valid in the provided path [
 wsFrameServer.bytesRead=Read [{0}] bytes into input buffer ready for processing
 wsFrameServer.onDataAvailable=Method entry
 
+wsHttpUpgradeHandler.closeOnError=Closing WebSocket connection due to an error
 wsHttpUpgradeHandler.destroyFailed=Failed to close WebConnection while destroying the WebSocket HttpUpgradeHandler
 wsHttpUpgradeHandler.noPreInit=The preInit() method must be called to configure the WebSocket HttpUpgradeHandler before the container calls init(). Usually, this means the Servlet that created the WsHttpUpgradeHandler instance should also call preInit()
 wsHttpUpgradeHandler.serverStop=The server is stopping

==================================================
