1d047375b904fdda0541d6636d2695b321ebf4e8
==================================================
Fix server initiated TLS renegotiation to obtain a client certificate when using NIO/NIO2 and the OpenSSL backed JSSE TLS implementation.
==================================================
Mark Thomas
==================================================
Thu Oct 11 10:18:39 2018 +0000
==================================================
SSL.java
Fix server initiated TLS renegotiation to obtain a client certificate when using NIO/NIO2 and the OpenSSL backed JSSE TLS implementation.
Prior to this fix, the client would send the certs but the server would not read them and would timeout the request.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1843542 13f79535-47bb-0310-9956-ffa450edef68



==================================================
OpenSSLEngine.java
index b21a73320c..6f3858fcc5 100644
--- a/java/org/apache/tomcat/jni/SSL.java
+++ b/java/org/apache/tomcat/jni/SSL.java
@@ -556,6 +556,13 @@ public final class SSL {
      */
     public static native int renegotiate(long ssl);
 
+    /**
+     * SSL_renegotiate_pending
+     * @param ssl the SSL instance (SSL *)
+     * @return the operation status
+     */
+    public static native int renegotiatePending(long ssl);
+
     /**
      * SSL_in_init.
      * @param ssl the SSL instance (SSL *)

==================================================
