73caafb1773a6f4030ac1a060e518b0bddf726f6
==================================================
Partial fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=47577
==================================================
Mark Emlyn
==================================================
Thu Jul 30 18:29:30 2009 +0000
==================================================
ConnectionPool.java
Partial fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=47577
Imports / casts

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@799400 13f79535-47bb-0310-9956-ffa450edef68



==================================================
ConnectionPoolMBean.java
index baf6a4e5f5..42046ec0c7 100644
--- a/modules/jdbc-pool/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java
+++ b/modules/jdbc-pool/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java
@@ -161,7 +161,7 @@ public class ConnectionPool {
      */
     public Connection getConnection() throws SQLException {
         //check out a connection
-        PooledConnection con = (PooledConnection)borrowConnection(-1);
+        PooledConnection con = borrowConnection(-1);
         return setupConnection(con);
     }
 
@@ -770,9 +770,9 @@ public class ConnectionPool {
      */
     protected boolean shouldAbandon() {
         if (poolProperties.getAbandonWhenPercentageFull()==0) return true;
-        float used = (float)busy.size();
-        float max  = (float)poolProperties.getMaxActive();
-        float perc = (float)poolProperties.getAbandonWhenPercentageFull();
+        float used = busy.size();
+        float max  = poolProperties.getMaxActive();
+        float perc = poolProperties.getAbandonWhenPercentageFull();
         return (used/max*100f)>=perc;
     }
     

==================================================
