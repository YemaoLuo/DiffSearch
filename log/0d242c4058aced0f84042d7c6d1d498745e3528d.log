0d242c4058aced0f84042d7c6d1d498745e3528d
==================================================
Add the new ssl methods from tomcat-native ( and few poll methods that seemed to be missing ).
==================================================
Costin Manolache
==================================================
Tue Feb 7 06:13:36 2012 +0000
==================================================
Poll.java
Add the new ssl methods from tomcat-native ( and few poll methods that seemed to be missing ).

APR connector will not work unless you recompile tomcat-native ! ( it is ok to use the current version of 
openssl, but npn methods will not work )



git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1241356 13f79535-47bb-0310-9956-ffa450edef68



==================================================
SSL.java
index c19595e4b2..bced7fc8ef 100644
--- a/java/org/apache/tomcat/jni/Poll.java
+++ b/java/org/apache/tomcat/jni/Poll.java
@@ -154,4 +154,19 @@ public class Poll {
      */
     public static native int pollset(long pollset, long [] descriptors);
 
+    /**
+     * Make poll() return. 
+     * 
+     * @param pollset
+     * @return
+     */
+    public static native int interrupt(long pollset);
+    
+    /**
+     * Check if interrupt() is allowed.
+     * 
+     * @param pollset
+     * @return
+     */
+    public static native boolean wakeable(long pollset);
 }

==================================================
SSLExt.java
index 1b847a05ce..f81269153e 100644
--- a/java/org/apache/tomcat/jni/SSL.java
+++ b/java/org/apache/tomcat/jni/SSL.java
@@ -136,7 +136,8 @@ public final class SSL {
     public static final int SSL_OP_NO_SSLv2                         = 0x01000000;
     public static final int SSL_OP_NO_SSLv3                         = 0x02000000;
     public static final int SSL_OP_NO_TLSv1                         = 0x04000000;
-
+    public static final int SSL_OP_NO_TICKET                        = 0x00004000;
+    
     /* The next flag deliberately changes the ciphertest, this is a check
      * for the PKCS#1 attack */
     public static final int SSL_OP_PKCS1_CHECK_1                    = 0x08000000;

==================================================
