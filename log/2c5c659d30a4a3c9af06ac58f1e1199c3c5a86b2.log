2c5c659d30a4a3c9af06ac58f1e1199c3c5a86b2
==================================================
Fix https://bz.apache.org/bugzilla/show_bug.cgi?id=61778
==================================================
Mark Thomas
==================================================
Mon Nov 20 12:57:22 2017 +0000
==================================================
AuthConfigFactoryImpl.java
Fix https://bz.apache.org/bugzilla/show_bug.cgi?id=61778
Correct the return value when detaching a JASPIC RegistrationListener.
Patch provided by Lazar.
This closes #86

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1815800 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TestAuthConfigFactoryImpl.java
index e2c7e311d5..6d028f9b16 100644
--- a/java/org/apache/catalina/authenticator/jaspic/AuthConfigFactoryImpl.java
+++ b/java/org/apache/catalina/authenticator/jaspic/AuthConfigFactoryImpl.java
@@ -454,6 +454,7 @@ public class AuthConfigFactoryImpl extends AuthConfigFactory {
             for (RegistrationListenerWrapper wrapper : listeners) {
                 if (wrapper.getListener().equals(listener)) {
                     listeners.remove(wrapper);
+                    result = true;
                 }
             }
             return result;

==================================================
