9e945175430f992c4829bf638b5876a54d36dc27
==================================================
Restoring updating / setting of home/base system properties after they
==================================================
Mark Emlyn
==================================================
Fri Feb 3 18:48:52 2012 +0000
==================================================
Bootstrap.java
Restoring updating / setting of home/base system properties after they
have been processed in case other components depend on the updated
values.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1240290 13f79535-47bb-0310-9956-ffa450edef68



==================================================
Tomcat.java
index 0ad90a54c3..d0746363b1 100644
--- a/java/org/apache/catalina/startup/Bootstrap.java
+++ b/java/org/apache/catalina/startup/Bootstrap.java
@@ -116,6 +116,8 @@ public final class Bootstrap {
         }
 
         catalinaHomeFile = homeFile;
+        System.setProperty(
+                Globals.CATALINA_HOME_PROP, catalinaHomeFile.getPath());
 
         // Then base
         String base = System.getProperty(Globals.CATALINA_BASE_PROP);
@@ -130,6 +132,8 @@ public final class Bootstrap {
             }
             catalinaBaseFile = baseFile;
         }
+        System.setProperty(
+                Globals.CATALINA_BASE_PROP, catalinaBaseFile.getPath());
     }
 
     // -------------------------------------------------------------- Variables

==================================================
