5a9dc8e5d88a0df16f3ee3301006eb31f915c8bf
==================================================
add block/no block flag to flushing the SSL buffer
==================================================
Filip Hanik
==================================================
Mon May 21 09:54:46 2007 +0000
==================================================
InternalNioOutputBuffer.java
add block/no block flag to flushing the SSL buffer


git-svn-id: https://svn.apache.org/repos/asf/tomcat/tc6.0.x/trunk@540093 13f79535-47bb-0310-9956-ffa450edef68



==================================================
NioChannel.java
index e54d2d2792..a7cbf6db5e 100644
--- a/java/org/apache/coyote/http11/InternalNioOutputBuffer.java
+++ b/java/org/apache/coyote/http11/InternalNioOutputBuffer.java
@@ -433,7 +433,7 @@ public class InternalNioOutputBuffer
             written = getSelectorPool().write(bytebuffer, socket, selector, writeTimeout);
             //make sure we are flushed 
             do {
-                if (socket.flush(selector)) break;
+                if (socket.flush(true,selector,writeTimeout)) break;
             }while ( true );
         }finally { 
             if ( selector != null ) getSelectorPool().put(selector);

==================================================
SecureNioChannel.java
index ce341546e4..901ef5f66b 100644
--- a/java/org/apache/tomcat/util/net/NioChannel.java
+++ b/java/org/apache/tomcat/util/net/NioChannel.java
@@ -70,7 +70,7 @@ public class NioChannel implements ByteChannel{
      * been flushed out and is empty
      * @return boolean
      */
-    public boolean flush(Selector s) throws IOException {
+    public boolean flush(boolean block, Selector s,long timeout) throws IOException {
         return true; //no network buffer in the regular channel
     }
 

==================================================
