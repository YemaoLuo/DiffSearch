0505fc5aa5b3d4c23d4ce333199260389f1f8a8d
==================================================
Multiple increment and decrement by 10 to provide more control
==================================================
Mark Thomas
==================================================
Mon Jun 14 22:21:34 2021 +0100
==================================================
Http2Protocol.java
Multiple increment and decrement by 10 to provide more control

overheadCountFactor can now be in range 0-20 rather than 0-2.



==================================================
Http2UpgradeHandler.java
index e3028f85de..e96a945f0d 100644
--- a/java/org/apache/coyote/http2/Http2Protocol.java
+++ b/java/org/apache/coyote/http2/Http2Protocol.java
@@ -55,10 +55,11 @@ public class Http2Protocol implements UpgradeProtocol {
     // a single connection
     static final int DEFAULT_MAX_CONCURRENT_STREAM_EXECUTION = 20;
 
-    static final int DEFAULT_OVERHEAD_COUNT_FACTOR = 1;
+    static final int DEFAULT_OVERHEAD_COUNT_FACTOR = 10;
     // Not currently configurable. This makes the practical limit for
-    // overheadCountFactor to be 2.
-    static final int DEFAULT_OVERHEAD_REDUCTION_FACTOR = -2;
+    // overheadCountFactor to be ~20. The exact limit will vary with traffic
+    // patterns.
+    static final int DEFAULT_OVERHEAD_REDUCTION_FACTOR = -20;
     static final int DEFAULT_OVERHEAD_CONTINUATION_THRESHOLD = 1024;
     static final int DEFAULT_OVERHEAD_DATA_THRESHOLD = 1024;
     static final int DEFAULT_OVERHEAD_WINDOW_UPDATE_THRESHOLD = 1024;

==================================================
