fdac1d6c97c411d718b36b011dd616ffa3e3f119
==================================================
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=44646
==================================================
Mark Emlyn
==================================================
Sun Mar 23 23:22:07 2008 +0000
==================================================
CometConnectionManagerValve.java
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=44646
The problem was wider than the issue described in the bug report. The session listener and the valve are different objects so the connection list wasn't visible to the session listener. I couldn't see an easy way to make them the same object so I used two lists - one for the valve (stored in the valve) and one for the session (stored in the session).
This valve now works for a simple comet app.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@640273 13f79535-47bb-0310-9956-ffa450edef68



==================================================
