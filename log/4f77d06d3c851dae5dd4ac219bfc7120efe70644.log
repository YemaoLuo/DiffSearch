4f77d06d3c851dae5dd4ac219bfc7120efe70644
==================================================
More memory leak prevention - ResourceBundle
==================================================
Mark Emlyn
==================================================
Thu Feb 11 15:14:55 2010 +0000
==================================================
WebappClassLoader.java
More memory leak prevention - ResourceBundle

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@909017 13f79535-47bb-0310-9956-ffa450edef68



==================================================
JspServletWrapper.java
index e9adf344f3..d74cdeda3d 100644
--- a/java/org/apache/catalina/loader/WebappClassLoader.java
+++ b/java/org/apache/catalina/loader/WebappClassLoader.java
@@ -47,6 +47,7 @@ import java.util.Iterator;
 import java.util.LinkedHashMap;
 import java.util.List;
 import java.util.Map;
+import java.util.ResourceBundle;
 import java.util.Vector;
 import java.util.concurrent.ThreadPoolExecutor;
 import java.util.jar.Attributes;
@@ -1773,6 +1774,9 @@ public class WebappClassLoader
             org.apache.juli.logging.LogFactory.release(this);
         }
         
+        // Clear any cached resource bundles
+        ResourceBundle.clearCache(this);
+
         // Clear the classloader reference in the VM's bean introspector
         java.beans.Introspector.flushCaches();
 

==================================================
