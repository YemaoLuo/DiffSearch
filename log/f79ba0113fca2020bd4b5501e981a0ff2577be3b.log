f79ba0113fca2020bd4b5501e981a0ff2577be3b
==================================================
Switch to use the new UriUtil class.
==================================================
Mark Thomas
==================================================
Wed Jan 6 13:37:16 2016 +0000
==================================================
Response.java
Switch to use the new UriUtil class.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1723317 13f79535-47bb-0310-9956-ffa450edef68



==================================================
RewriteValve.java
index b057302804..174ef5cc68 100644
--- a/java/org/apache/catalina/connector/Response.java
+++ b/java/org/apache/catalina/connector/Response.java
@@ -20,6 +20,7 @@ import java.io.IOException;
 import java.io.PrintWriter;
 import java.net.MalformedURLException;
 import java.net.URI;
+import java.net.URL;
 import java.nio.charset.Charset;
 import java.security.AccessController;
 import java.security.PrivilegedAction;
@@ -48,6 +49,7 @@ import org.apache.catalina.Wrapper;
 import org.apache.catalina.security.SecurityUtil;
 import org.apache.catalina.util.RequestUtil;
 import org.apache.catalina.util.SessionConfig;
+import org.apache.catalina.util.UriUtil;
 import org.apache.coyote.ActionCode;
 import org.apache.tomcat.util.buf.CharChunk;
 import org.apache.tomcat.util.buf.UEncoder;
@@ -55,7 +57,6 @@ import org.apache.tomcat.util.buf.UEncoder.SafeCharsSet;
 import org.apache.tomcat.util.http.FastHttpDateFormat;
 import org.apache.tomcat.util.http.MimeHeaders;
 import org.apache.tomcat.util.http.parser.MediaTypeCache;
-import org.apache.tomcat.util.net.URL;
 import org.apache.tomcat.util.res.StringManager;
 
 /**
@@ -1593,7 +1594,7 @@ public class Response
                 throw iae;
             }
 
-        } else if (leadingSlash || !URL.hasScheme(location)) {
+        } else if (leadingSlash || !UriUtil.hasScheme(location)) {
 
             redirectURLCC.recycle();
 

==================================================
