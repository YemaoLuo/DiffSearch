138d4edba9aa59d0d9987391445a64ada33cc6b9
==================================================
Fix https://bz.apache.org/bugzilla/show_bug.cgi?id=63724
==================================================
Mark Thomas
==================================================
Thu Sep 5 19:36:42 2019 +0100
==================================================
JspUtil.java
Fix https://bz.apache.org/bugzilla/show_bug.cgi?id=63724

Correct a regression introduced in 9.0.21 that broke compilation of JSPs
in some configurations.


==================================================
TestJspUtilMakeJavaPackage.java
index 96bd538ffd..a82fdc6ef6 100644
--- a/java/org/apache/jasper/compiler/JspUtil.java
+++ b/java/org/apache/jasper/compiler/JspUtil.java
@@ -742,8 +742,8 @@ public class JspUtil {
         String classNameComponents[] = path.split("/");
         StringBuilder legalClassNames = new StringBuilder();
         for (int i = 0; i < classNameComponents.length; i++) {
-            if(0 < classNameComponents[i].length()) {
-                if(0 < i) {
+            if (classNameComponents[i].length() > 0) {
+                if (legalClassNames.length() > 0) {
                     legalClassNames.append('.');
                 }
                 legalClassNames.append(makeJavaIdentifier(classNameComponents[i]));

==================================================
