87af2141e51b72b6339eddc7ac45013b2b44fa51
==================================================
Servlet 4.0
==================================================
Mark Thomas
==================================================
Sat Oct 10 11:33:30 2015 +0000
==================================================
DigesterFactory.java
Servlet 4.0
Add support for 4.0 web.xml

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1707864 13f79535-47bb-0310-9956-ffa450edef68



==================================================
LocalResolver.java
index 7a49a5c288..3b77e5f011 100644
--- a/java/org/apache/tomcat/util/descriptor/DigesterFactory.java
+++ b/java/org/apache/tomcat/util/descriptor/DigesterFactory.java
@@ -120,6 +120,12 @@ public class DigesterFactory {
         addSelf(systemIds, "javaee_web_services_1_4.xsd");
         addSelf(systemIds, "javaee_web_services_client_1_4.xsd");
 
+        // from JavaEE 8
+        add(systemIds, XmlIdentifiers.WEB_40_XSD, locationFor("web-app_4_0.xsd"));
+        add(systemIds, XmlIdentifiers.WEB_FRAGMENT_40_XSD, locationFor("web-fragment_4_0.xsd"));
+        addSelf(systemIds, "web-common_4_0.xsd");
+        addSelf(systemIds, "javaee_8.xsd");
+
         SERVLET_API_PUBLIC_IDS = Collections.unmodifiableMap(publicIds);
         SERVLET_API_SYSTEM_IDS = Collections.unmodifiableMap(systemIds);
     }

==================================================
WebXml.java
index c54131b200..5802c1c0cc 100644
--- a/java/org/apache/tomcat/util/descriptor/LocalResolver.java
+++ b/java/org/apache/tomcat/util/descriptor/LocalResolver.java
@@ -40,7 +40,7 @@ public class LocalResolver implements EntityResolver2 {
     private static final String[] JAVA_EE_NAMESPACES = {
         XmlIdentifiers.JAVAEE_1_4_NS,
         XmlIdentifiers.JAVAEE_5_NS,
-        XmlIdentifiers.JAVAEE_7_NS };
+        XmlIdentifiers.JAVAEE_7_NS};
 
 
     private final Map<String,String> publicIds;

==================================================
