ab25d957ccd7e6a888dccc3cdc660c89cb22df93
==================================================
- Fix cut & paste bug, submitted by Stan Silvert.
==================================================
Remy Maucherat
==================================================
Sat May 20 00:04:55 2006 +0000
==================================================
AnnotationProcessor.java
- Fix cut & paste bug, submitted by Stan Silvert.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/tc6.0.x/trunk@407933 13f79535-47bb-0310-9956-ffa450edef68



==================================================
AnnotationProcessor.java
index 499cb790f6..6b5b5f8430 100644
--- a/java/org/apache/catalina/util/AnnotationProcessor.java
+++ b/java/org/apache/catalina/util/AnnotationProcessor.java
@@ -23,6 +23,7 @@ import java.lang.reflect.Modifier;
 
 import javax.annotation.EJB;
 import javax.annotation.PostConstruct;
+import javax.annotation.PreDestroy;
 import javax.annotation.Resource;
 import javax.naming.NamingException;
 import javax.persistence.PersistenceContext;
@@ -84,7 +85,7 @@ public class AnnotationProcessor {
         Method[] methods = IntrospectionUtils.findMethods(instance.getClass());
         Method preDestroy = null;
         for (int i = 0; i < methods.length; i++) {
-            if (methods[i].isAnnotationPresent(PostConstruct.class)) {
+            if (methods[i].isAnnotationPresent(PreDestroy.class)) {
                 if ((preDestroy != null) 
                         || (methods[i].getParameterTypes().length != 0)
                         || (Modifier.isStatic(methods[i].getModifiers())) 

==================================================
