6e058c88c75d453ffda66972a86562a8e5274cce
==================================================
Pull up getLog()
==================================================
Mark Thomas
==================================================
Sun Nov 8 16:53:11 2015 +0000
==================================================
AbstractProtocol.java
Pull up getLog()

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1713253 13f79535-47bb-0310-9956-ffa450edef68



==================================================
AbstractAjpProtocol.java
index a604addd7b..129d440453 100644
--- a/java/org/apache/coyote/AbstractProtocol.java
+++ b/java/org/apache/coyote/AbstractProtocol.java
@@ -646,8 +646,6 @@ public abstract class AbstractProtocol<S> implements ProtocolHandler,
     protected abstract static class AbstractConnectionHandler<S,P extends Processor>
             implements AbstractEndpoint.Handler<S> {
 
-        protected abstract Log getLog();
-
         protected final RequestGroupInfo global = new RequestGroupInfo();
         protected final AtomicLong registerCount = new AtomicLong(0);
 
@@ -657,9 +655,11 @@ public abstract class AbstractProtocol<S> implements ProtocolHandler,
         protected final RecycledProcessors<P,S> recycledProcessors =
                 new RecycledProcessors<>(this);
 
-
         protected abstract AbstractProtocol<S> getProtocol();
 
+        protected Log getLog() {
+            return getProtocol().getLog();
+        }
 
         @Override
         public Object getGlobal() {

==================================================
AbstractHttp11Protocol.java
index 7de8b6b03d..71434e70e8 100644
--- a/java/org/apache/coyote/ajp/AbstractAjpProtocol.java
+++ b/java/org/apache/coyote/ajp/AbstractAjpProtocol.java
@@ -21,7 +21,6 @@ import java.nio.ByteBuffer;
 import org.apache.coyote.AbstractProtocol;
 import org.apache.coyote.UpgradeProtocol;
 import org.apache.coyote.UpgradeToken;
-import org.apache.juli.logging.Log;
 import org.apache.tomcat.util.net.AbstractEndpoint;
 import org.apache.tomcat.util.net.SSLHostConfig;
 import org.apache.tomcat.util.net.SocketWrapperBase;
@@ -195,10 +194,5 @@ public abstract class AbstractAjpProtocol<S> extends AbstractProtocol<S> {
             // TODO should fail - throw IOE
             return null;
         }
-
-        @Override
-        protected Log getLog() {
-            return proto.getLog();
-        }
     }
 }

==================================================
