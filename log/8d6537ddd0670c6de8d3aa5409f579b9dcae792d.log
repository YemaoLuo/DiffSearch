8d6537ddd0670c6de8d3aa5409f579b9dcae792d
==================================================
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55244
==================================================
Mark Emlyn
==================================================
Fri Jul 12 08:36:14 2013 +0000
==================================================
JspCServletContext.java
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55244
Fix ClassNotFoundException with JspC
Patch provided by Jeremy Boynes

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1502471 13f79535-47bb-0310-9956-ffa450edef68



==================================================
WebXmlParser.java
index 72c80aef66..d5964bc587 100644
--- a/java/org/apache/jasper/servlet/JspCServletContext.java
+++ b/java/org/apache/jasper/servlet/JspCServletContext.java
@@ -125,6 +125,8 @@ public class JspCServletContext implements ServletContext {
         this.webXml = new WebXml();
 
         WebXmlParser webXmlParser = new WebXmlParser(false, false);
+        // Use this class's classloader as Ant will have set the TCCL to its own
+        webXmlParser.setClassLoader(getClass().getClassLoader());
 
         InputStream webXmlStream = getResourceAsStream(
                 org.apache.tomcat.util.descriptor.web.Constants.

==================================================
