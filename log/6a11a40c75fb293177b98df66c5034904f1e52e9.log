6a11a40c75fb293177b98df66c5034904f1e52e9
==================================================
Fix https://bz.apache.org/bugzilla/show_bug.cgi?id=59807
==================================================
Mark Thomas
==================================================
Tue Jan 31 21:43:14 2017 +0000
==================================================
AbstractJsseEndpoint.java
Fix https://bz.apache.org/bugzilla/show_bug.cgi?id=59807
Provide a better error message when there is no SSLHostConfig defined with a hostName that matches the defaultSSLHostConfigName for the associated Connector.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1781174 13f79535-47bb-0310-9956-ffa450edef68



==================================================
AprEndpoint.java
index c905ef23c7..d255e882d1 100644
--- a/java/org/apache/tomcat/util/net/AbstractJsseEndpoint.java
+++ b/java/org/apache/tomcat/util/net/AbstractJsseEndpoint.java
@@ -84,6 +84,13 @@ public abstract class AbstractJsseEndpoint<S,U> extends AbstractEndpoint<S,U> {
             for (SSLHostConfig sslHostConfig : sslHostConfigs.values()) {
                 createSSLContext(sslHostConfig);
             }
+
+            // Validate default SSLHostConfigName
+            if (sslHostConfigs.get(getDefaultSSLHostConfigName()) == null) {
+                throw new IllegalArgumentException(sm.getString("endpoint.noSslHostConfig",
+                        getDefaultSSLHostConfigName(), getName()));
+            }
+
         }
     }
 

==================================================
