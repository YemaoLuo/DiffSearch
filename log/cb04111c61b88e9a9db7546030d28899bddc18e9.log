cb04111c61b88e9a9db7546030d28899bddc18e9
==================================================
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48795
==================================================
Mark Emlyn
==================================================
Wed Mar 10 17:35:43 2010 +0000
==================================================
JspCompilationContext.java
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48795
If compilation fails, always try to re-compile the next time around

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@921464 13f79535-47bb-0310-9956-ffa450edef68



==================================================
JspServletWrapper.java
index a3a8a4ac1f..888c44cad0 100644
--- a/java/org/apache/jasper/JspCompilationContext.java
+++ b/java/org/apache/jasper/JspCompilationContext.java
@@ -595,6 +595,8 @@ public class JspCompilationContext {
             } catch (JasperException ex) {
                 // Cache compilation exception
                 jsw.setCompilationException(ex);
+                // Make sure recompilation is attempted
+                jsw.setLastModificationTest(-1);
                 throw ex;
             } catch (Exception ex) {
                 JasperException je = new JasperException(

==================================================
