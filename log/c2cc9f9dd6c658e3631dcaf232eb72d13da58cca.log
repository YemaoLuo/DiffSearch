c2cc9f9dd6c658e3631dcaf232eb72d13da58cca
==================================================
Commit the accepted proposal to prevent CLOSE_WAIT sockets.
==================================================
Jean-Frederic Clere
==================================================
Sat Oct 27 08:25:56 2007 +0000
==================================================
AjpProcessor.java
index 598d62bbe8..0c9fed5ffa 100644
--- a/STATUS
+++ b/STATUS
@@ -26,10 +26,6 @@ PATCHES PROPOSED TO BACKPORT:
   [ New proposals should be added at the end of the list ]
 
 
-* Harmonize with HTTP java.io code. Otherwise the socket is not closed. http://people.apache.org/~jfclere/patches/AjpPro.patch
-  +1: jfclere, fhanik, remm, pero, jim
-  -1:
-
 * Fix BZ 43588 - hard coded 127.0.0.1 for localhost
   http://issues.apache.org/bugzilla/attachment.cgi?id=21039&action=view
   +1: 

==================================================
AjpProtocol.java
index 5dfe0474d9..fe4e17cfdd 100644
--- a/java/org/apache/coyote/ajp/AjpProcessor.java
+++ b/java/org/apache/coyote/ajp/AjpProcessor.java
@@ -355,7 +355,7 @@ public class AjpProcessor implements ActionHook {
      *
      * @throws IOException error during an I/O operation
      */
-    public boolean process(Socket socket)
+    public void process(Socket socket)
         throws IOException {
         RequestInfo rp = request.getRequestProcessor();
         rp.setStage(org.apache.coyote.Constants.STAGE_PARSE);
@@ -471,8 +471,6 @@ public class AjpProcessor implements ActionHook {
         input = null;
         output = null;
         
-        return true;
-
     }
 
 

==================================================
