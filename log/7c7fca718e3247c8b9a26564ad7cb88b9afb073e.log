7c7fca718e3247c8b9a26564ad7cb88b9afb073e
==================================================
Add rsv to MessagePart and re-order constructor to match order elements
==================================================
Mark Emlyn
==================================================
Tue Aug 19 10:40:12 2014 +0000
==================================================
MessagePart.java
Add rsv to MessagePart and re-order constructor to match order elements
are used in RFC 6455

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1618834 13f79535-47bb-0310-9956-ffa450edef68



==================================================
WsRemoteEndpointImplBase.java
index 3fd50c64f8..dccb6980f2 100644
--- a/java/org/apache/tomcat/websocket/MessagePart.java
+++ b/java/org/apache/tomcat/websocket/MessagePart.java
@@ -21,20 +21,32 @@ import java.nio.ByteBuffer;
 import javax.websocket.SendHandler;
 
 class MessagePart {
+    private final boolean fin;
+    private final int rsv;
     private final byte opCode;
     private final ByteBuffer payload;
-    private final boolean fin;
     private final SendHandler handler;
 
-    public MessagePart(byte opCode, ByteBuffer payload, boolean fin,
+    public MessagePart( boolean fin, int rsv, byte opCode, ByteBuffer payload,
             SendHandler handler) {
+        this.fin = fin;
+        this.rsv = rsv;
         this.opCode = opCode;
         this.payload = payload;
-        this.fin = fin;
         this.handler = handler;
     }
 
 
+    public boolean isFin() {
+        return fin;
+    }
+
+
+    public int getRsv() {
+        return rsv;
+    }
+
+
     public byte getOpCode() {
         return opCode;
     }
@@ -45,11 +57,6 @@ class MessagePart {
     }
 
 
-    public boolean isFin() {
-        return fin;
-    }
-
-
     public SendHandler getHandler() {
         return handler;
     }

==================================================
