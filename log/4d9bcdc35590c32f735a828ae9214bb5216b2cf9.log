4d9bcdc35590c32f735a828ae9214bb5216b2cf9
==================================================
Move POJO related classes to separate package
==================================================
Mark Emlyn
==================================================
Thu Jan 17 21:22:21 2013 +0000
==================================================
ServerContainerImpl.java
Move POJO related classes to separate package

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1434920 13f79535-47bb-0310-9956-ffa450edef68



==================================================
Constants.java
index e78d689b1c..7f63e69058 100644
--- a/java/org/apache/tomcat/websocket/ServerContainerImpl.java
+++ b/java/org/apache/tomcat/websocket/ServerContainerImpl.java
@@ -31,6 +31,8 @@ import javax.websocket.server.ServerEndpointConfiguration;
 import org.apache.juli.logging.Log;
 import org.apache.juli.logging.LogFactory;
 import org.apache.tomcat.util.res.StringManager;
+import org.apache.tomcat.websocket.pojo.PojoEndpointConfiguration;
+import org.apache.tomcat.websocket.pojo.PojoMethodMapping;
 
 /**
  * Provides a per class loader (i.e. per web application) instance of a

==================================================
PojoEndpoint.java
new file mode 100644
index 0000000000..3999678212
--- /dev/null
+++ b/java/org/apache/tomcat/websocket/pojo/LocalStrings.properties
@@ -0,0 +1,15 @@
+# Licensed to the Apache Software Foundation (ASF) under one or more
+# contributor license agreements.  See the NOTICE file distributed with
+# this work for additional information regarding copyright ownership.
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+pojoUriTemplate.noMatch=The input template [{0}] generated the pattern [{1}] which did not match the supplied pathInfo [{2}]

==================================================
PojoEndpointConfiguration.java
similarity index 98%
rename from java/org/apache/tomcat/websocket/PojoEndpoint.java
rename to java/org/apache/tomcat/websocket/pojo/PojoEndpoint.java
index 8c483f9b0a..14fb6cca77 100644
--- a/java/org/apache/tomcat/websocket/PojoEndpoint.java
+++ b/java/org/apache/tomcat/websocket/pojo/PojoEndpoint.java
@@ -14,7 +14,7 @@
  *  See the License for the specific language governing permissions and
  *  limitations under the License.
  */
-package org.apache.tomcat.websocket;
+package org.apache.tomcat.websocket.pojo;
 
 import java.io.IOException;
 import java.lang.reflect.InvocationTargetException;

==================================================
PojoMessageHandlerAsyncBase.java
similarity index 95%
rename from java/org/apache/tomcat/websocket/PojoEndpointConfiguration.java
rename to java/org/apache/tomcat/websocket/pojo/PojoEndpointConfiguration.java
index 1c3b99b1cd..ed69333438 100644
--- a/java/org/apache/tomcat/websocket/PojoEndpointConfiguration.java
+++ b/java/org/apache/tomcat/websocket/pojo/PojoEndpointConfiguration.java
@@ -14,7 +14,7 @@
  *  See the License for the specific language governing permissions and
  *  limitations under the License.
  */
-package org.apache.tomcat.websocket;
+package org.apache.tomcat.websocket.pojo;
 
 import javax.websocket.server.DefaultServerConfiguration;
 
@@ -31,7 +31,7 @@ public class PojoEndpointConfiguration extends DefaultServerConfiguration {
     private final String pathInfo;
 
 
-    PojoEndpointConfiguration(Class<?> pojoClass,
+    public PojoEndpointConfiguration(Class<?> pojoClass,
             PojoMethodMapping methodMapping, String pathInfo) {
         super(PojoEndpoint.class, methodMapping.getWsPath());
         this.pojoClass = pojoClass;

==================================================
PojoMessageHandlerAsyncBinary.java
similarity index 98%
rename from java/org/apache/tomcat/websocket/PojoMessageHandlerAsyncBase.java
rename to java/org/apache/tomcat/websocket/pojo/PojoMessageHandlerAsyncBase.java
index f29222418d..02c75066e0 100644
--- a/java/org/apache/tomcat/websocket/PojoMessageHandlerAsyncBase.java
+++ b/java/org/apache/tomcat/websocket/pojo/PojoMessageHandlerAsyncBase.java
@@ -14,7 +14,7 @@
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
-package org.apache.tomcat.websocket;
+package org.apache.tomcat.websocket.pojo;
 
 import java.lang.reflect.InvocationTargetException;
 import java.lang.reflect.Method;

==================================================
PojoMessageHandlerAsyncString.java
similarity index 97%
rename from java/org/apache/tomcat/websocket/PojoMessageHandlerAsyncBinary.java
rename to java/org/apache/tomcat/websocket/pojo/PojoMessageHandlerAsyncBinary.java
index c8d3089948..a182ae8fbf 100644
--- a/java/org/apache/tomcat/websocket/PojoMessageHandlerAsyncBinary.java
+++ b/java/org/apache/tomcat/websocket/pojo/PojoMessageHandlerAsyncBinary.java
@@ -14,7 +14,7 @@
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
-package org.apache.tomcat.websocket;
+package org.apache.tomcat.websocket.pojo;
 
 import java.lang.reflect.Method;
 import java.nio.ByteBuffer;

==================================================
PojoMessageHandlerBase.java
similarity index 96%
rename from java/org/apache/tomcat/websocket/PojoMessageHandlerAsyncString.java
rename to java/org/apache/tomcat/websocket/pojo/PojoMessageHandlerAsyncString.java
index e910369e3a..77de3efbed 100644
--- a/java/org/apache/tomcat/websocket/PojoMessageHandlerAsyncString.java
+++ b/java/org/apache/tomcat/websocket/pojo/PojoMessageHandlerAsyncString.java
@@ -14,7 +14,7 @@
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
-package org.apache.tomcat.websocket;
+package org.apache.tomcat.websocket.pojo;
 
 import java.lang.reflect.Method;
 

==================================================
PojoMessageHandlerBasicBase.java
similarity index 98%
rename from java/org/apache/tomcat/websocket/PojoMessageHandlerBase.java
rename to java/org/apache/tomcat/websocket/pojo/PojoMessageHandlerBase.java
index df9c7f264c..b385f60b2e 100644
--- a/java/org/apache/tomcat/websocket/PojoMessageHandlerBase.java
+++ b/java/org/apache/tomcat/websocket/pojo/PojoMessageHandlerBase.java
@@ -14,7 +14,7 @@
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
-package org.apache.tomcat.websocket;
+package org.apache.tomcat.websocket.pojo;
 
 import java.io.IOException;
 import java.lang.reflect.Method;

==================================================
PojoMessageHandlerBasicBinary.java
similarity index 98%
rename from java/org/apache/tomcat/websocket/PojoMessageHandlerBasicBase.java
rename to java/org/apache/tomcat/websocket/pojo/PojoMessageHandlerBasicBase.java
index 448448e509..774fd95e76 100644
--- a/java/org/apache/tomcat/websocket/PojoMessageHandlerBasicBase.java
+++ b/java/org/apache/tomcat/websocket/pojo/PojoMessageHandlerBasicBase.java
@@ -14,7 +14,7 @@
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
-package org.apache.tomcat.websocket;
+package org.apache.tomcat.websocket.pojo;
 
 import java.lang.reflect.InvocationTargetException;
 import java.lang.reflect.Method;

==================================================
PojoMessageHandlerBasicPong.java
similarity index 96%
rename from java/org/apache/tomcat/websocket/PojoMessageHandlerBasicBinary.java
rename to java/org/apache/tomcat/websocket/pojo/PojoMessageHandlerBasicBinary.java
index e092085418..72d513aea5 100644
--- a/java/org/apache/tomcat/websocket/PojoMessageHandlerBasicBinary.java
+++ b/java/org/apache/tomcat/websocket/pojo/PojoMessageHandlerBasicBinary.java
@@ -14,7 +14,7 @@
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
-package org.apache.tomcat.websocket;
+package org.apache.tomcat.websocket.pojo;
 
 import java.lang.reflect.Method;
 import java.nio.ByteBuffer;

==================================================
PojoMessageHandlerBasicString.java
similarity index 96%
rename from java/org/apache/tomcat/websocket/PojoMessageHandlerBasicPong.java
rename to java/org/apache/tomcat/websocket/pojo/PojoMessageHandlerBasicPong.java
index 06f20c2391..f3764b0f25 100644
--- a/java/org/apache/tomcat/websocket/PojoMessageHandlerBasicPong.java
+++ b/java/org/apache/tomcat/websocket/pojo/PojoMessageHandlerBasicPong.java
@@ -14,7 +14,7 @@
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
-package org.apache.tomcat.websocket;
+package org.apache.tomcat.websocket.pojo;
 
 import java.lang.reflect.Method;
 

==================================================
PojoMethodMapping.java
similarity index 96%
rename from java/org/apache/tomcat/websocket/PojoMessageHandlerBasicString.java
rename to java/org/apache/tomcat/websocket/pojo/PojoMessageHandlerBasicString.java
index c0cbf4f319..62d7aeb4af 100644
--- a/java/org/apache/tomcat/websocket/PojoMessageHandlerBasicString.java
+++ b/java/org/apache/tomcat/websocket/pojo/PojoMessageHandlerBasicString.java
@@ -14,7 +14,7 @@
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
-package org.apache.tomcat.websocket;
+package org.apache.tomcat.websocket.pojo;
 
 import java.lang.reflect.Method;
 

==================================================
PojoPathParam.java
similarity index 99%
rename from java/org/apache/tomcat/websocket/PojoMethodMapping.java
rename to java/org/apache/tomcat/websocket/pojo/PojoMethodMapping.java
index 591e6748ce..4ce6b2d7c3 100644
--- a/java/org/apache/tomcat/websocket/PojoMethodMapping.java
+++ b/java/org/apache/tomcat/websocket/pojo/PojoMethodMapping.java
@@ -14,7 +14,7 @@
  *  See the License for the specific language governing permissions and
  *  limitations under the License.
  */
-package org.apache.tomcat.websocket;
+package org.apache.tomcat.websocket.pojo;
 
 import java.lang.annotation.Annotation;
 import java.lang.reflect.Method;

==================================================
PojoUriTemplate.java
similarity index 97%
rename from java/org/apache/tomcat/websocket/PojoPathParam.java
rename to java/org/apache/tomcat/websocket/pojo/PojoPathParam.java
index 45d3ebc64d..c052134987 100644
--- a/java/org/apache/tomcat/websocket/PojoPathParam.java
+++ b/java/org/apache/tomcat/websocket/pojo/PojoPathParam.java
@@ -14,7 +14,7 @@
  *  See the License for the specific language governing permissions and
  *  limitations under the License.
  */
-package org.apache.tomcat.websocket;
+package org.apache.tomcat.websocket.pojo;
 
 /**
  * Stores the parameter type and name for a parameter that needs to be passed to

==================================================
TestPojoUriTemplate.java
index f7fc98b276..6c63a6812a 100644
--- a/res/checkstyle/org-import-control.xml
+++ b/res/checkstyle/org-import-control.xml
@@ -142,6 +142,8 @@
       <allow pkg="javax.websocket"/>
       <allow pkg="org.apache.juli"/>
       <allow pkg="org.apache.tomcat.util"/>
+      <!-- Ideally want to remove this -->
+      <allow pkg="org.apache.tomcat.websocket.pojo"/>
     </subpackage>
   </subpackage>
 </import-control>
\ No newline at end of file

==================================================
