bcf0a01b691fd18042d50e1ab9bf15154b248edf
==================================================
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49109
==================================================
Mark Emlyn
==================================================
Wed Apr 14 22:43:37 2010 +0000
==================================================
Realm.java
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49109
Remove unused authenticate() method with a broken default impl

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@934232 13f79535-47bb-0310-9956-ffa450edef68



==================================================
CombinedRealm.java
index 6e5fa3701d..42ad4028cf 100644
--- a/java/org/apache/catalina/Realm.java
+++ b/java/org/apache/catalina/Realm.java
@@ -87,17 +87,6 @@ public interface Realm {
     public Principal authenticate(String username, String credentials);
 
 
-    /**
-     * Return the Principal associated with the specified username and
-     * credentials, if there is one; otherwise return <code>null</code>.
-     *
-     * @param username Username of the Principal to look up
-     * @param credentials Password or other credentials to use in
-     *  authenticating this username
-     */
-    public Principal authenticate(String username, byte[] credentials);
-
-
     /**
      * Return the Principal associated with the specified username, which
      * matches the digest calculated using the given parameters using the

==================================================
LockOutRealm.java
index 0207f7bddc..fc31e26d34 100644
--- a/java/org/apache/catalina/realm/CombinedRealm.java
+++ b/java/org/apache/catalina/realm/CombinedRealm.java
@@ -79,40 +79,6 @@ public class CombinedRealm extends RealmBase {
 	}
 
 
-    /**
-     * Return the Principal associated with the specified username and
-     * credentials, if there is one; otherwise return <code>null</code>.
-     *
-     * @param username Username of the Principal to look up
-     * @param credentials Password or other credentials to use in
-     *  authenticating this username
-     */
-    @Override
-    public Principal authenticate(String username, byte[] credentials) {
-        Principal authenticatedUser = null;
-        
-        for (Realm realm : realms) {
-            if (log.isDebugEnabled()) {
-                log.debug(sm.getString("combinedRealm.authStart", username, realm.getInfo()));
-            }
-            
-            authenticatedUser = realm.authenticate(username, credentials);
-            
-            if (authenticatedUser == null) {
-                if (log.isDebugEnabled()) {
-                    log.debug(sm.getString("combinedRealm.authFail", username, realm.getInfo()));
-                }
-            } else {
-                if (log.isDebugEnabled()) {
-                    log.debug(sm.getString("combinedRealm.authSucess", username, realm.getInfo()));
-                }
-                break;
-            }
-        }
-        return authenticatedUser;
-    }
-
-
     /**
      * Return the Principal associated with the specified username, which
      * matches the digest calculated using the given parameters using the

==================================================
RealmBase.java
index f5c7217276..638c1bda0f 100644
--- a/java/org/apache/catalina/realm/LockOutRealm.java
+++ b/java/org/apache/catalina/realm/LockOutRealm.java
@@ -114,35 +114,6 @@ public class LockOutRealm extends CombinedRealm {
     }
 
 
-    /**
-     * Return the Principal associated with the specified username and
-     * credentials, if there is one; otherwise return <code>null</code>.
-     *
-     * @param username Username of the Principal to look up
-     * @param credentials Password or other credentials to use in
-     *  authenticating this username
-     */
-    @Override
-    public Principal authenticate(String username, byte[] credentials) {
-        if (isLocked(username)) {
-            // Trying to authenticate a locked user is an automatic failure
-            registerAuthFailure(username);
-            
-            log.warn(sm.getString("lockOutRealm.authLockedUser", username));
-            return null;
-        }
-
-        Principal authenticatedUser = super.authenticate(username, credentials);
-        
-        if (authenticatedUser == null) {
-            registerAuthFailure(username);
-        } else {
-            registerAuthSuccess(username);
-        }
-        return authenticatedUser;
-    }
-
-
     /**
      * Return the Principal associated with the specified username, which
      * matches the digest calculated using the given parameters using the

==================================================
