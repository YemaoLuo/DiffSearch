0aa2b5f1e145dbd76b04b4f3e631024f93f76df0
==================================================
Add a test for method invocation with parameters
==================================================
Mark Emlyn
==================================================
Wed Jan 13 18:01:26 2010 +0000
==================================================
TestELInJsp.java
Add a test for method invocation with parameters

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@898863 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TesterBeanA.java
index b28ba5fc85..0bfd536960 100644
--- a/test/org/apache/el/TestELInJsp.java
+++ b/test/org/apache/el/TestELInJsp.java
@@ -312,7 +312,6 @@ public class TestELInJsp extends TomcatBaseTest {
         ByteChunk res = getUrl("http://localhost:" + getPort() +
                 "/test/script-expr.jsp");
         String result = res.toString();
-        System.out.println(result);
         assertTrue(result.indexOf("00-hello world") > 0);
         assertTrue(result.indexOf("01-hello \"world") > 0);
         assertTrue(result.indexOf("02-hello \\\"world") > 0);
@@ -327,4 +326,21 @@ public class TestELInJsp extends TomcatBaseTest {
         assertTrue(result.indexOf("11-hello %> world") > 0);
     }
 
+    public void testELMethod() throws Exception {
+        Tomcat tomcat = getTomcatInstance();
+
+        File appDir = 
+            new File("test/webapp");
+        // app dir is relative to server home
+        tomcat.addWebapp(null, "/test", appDir.getAbsolutePath());
+        
+        tomcat.start();
+
+        ByteChunk res = getUrl("http://localhost:" + getPort() +
+                "/test/el-method.jsp");
+        String result = res.toString();
+        assertTrue(result.indexOf("00-Hello JUnit from Tomcat") > 0);
+        assertTrue(result.indexOf("01-Hello JUnit from Tomcat") > 0);
+        assertTrue(result.indexOf("02-Hello JUnit from Tomcat") > 0);
+    }
 }

==================================================
TesterBeanB.java
new file mode 100644
index 0000000000..b5d4b8d9a3
--- /dev/null
+++ b/test/org/apache/el/TesterBeanA.java
@@ -0,0 +1,30 @@
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+
+package org.apache.el;
+
+public class TesterBeanA {
+    private TesterBeanB bean;
+
+    public TesterBeanB getBean() {
+        return bean;
+    }
+
+    public void setBean(TesterBeanB bean) {
+        this.bean = bean;
+    }
+}

==================================================
