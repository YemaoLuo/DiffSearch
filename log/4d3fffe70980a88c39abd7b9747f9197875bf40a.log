4d3fffe70980a88c39abd7b9747f9197875bf40a
==================================================
- Expose the EL type through the Root node to be able to determine the EL type for JspAttribute.
==================================================
Remy Maucherat
==================================================
Sat Nov 4 02:11:17 2006 +0000
==================================================
ELNode.java
- Expose the EL type through the Root node to be able to determine the EL type for JspAttribute.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/tc6.0.x/trunk@471096 13f79535-47bb-0310-9956-ffa450edef68



==================================================
ELParser.java
index 84399fa3b9..3ee629e94b 100644
--- a/java/org/apache/jasper/compiler/ELNode.java
+++ b/java/org/apache/jasper/compiler/ELNode.java
@@ -45,9 +45,11 @@ abstract class ELNode {
     public static class Root extends ELNode {
 
 	private ELNode.Nodes expr;
+    private char type;
 
-	Root(ELNode.Nodes expr) {
+	Root(ELNode.Nodes expr, char type) {
 	    this.expr = expr;
+        this.type = type;
 	}
 
 	public void accept(Visitor v) throws JasperException {
@@ -57,6 +59,10 @@ abstract class ELNode {
 	public ELNode.Nodes getExpression() {
 	    return expr;
 	}
+
+    public char getType() {
+        return type;
+    }
     }
 
     /**
@@ -195,7 +201,7 @@ abstract class ELNode {
 	    }
 	}
 
-	public Iterator iterator() {
+	public Iterator<ELNode> iterator() {
 	    return list.iterator();
 	}
 
@@ -224,6 +230,7 @@ abstract class ELNode {
 	public String getMapName() {
 	    return mapName;
 	}
+    
     }
 
     /*

==================================================
Validator.java
index c93d9adf4c..e8cba0221a 100644
--- a/java/org/apache/jasper/compiler/ELParser.java
+++ b/java/org/apache/jasper/compiler/ELParser.java
@@ -71,7 +71,7 @@ public class ELParser {
             }
             ELNode.Nodes elexpr = parser.parseEL();
             if (!elexpr.isEmpty()) {
-                parser.expr.add(new ELNode.Root(elexpr));
+                parser.expr.add(new ELNode.Root(elexpr, parser.type));
             }
         }
         return parser.expr;

==================================================
