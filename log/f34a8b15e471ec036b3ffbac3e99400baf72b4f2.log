f34a8b15e471ec036b3ffbac3e99400baf72b4f2
==================================================

==================================================
Mark Thomas
==================================================
Tue Jun 19 19:27:17 2018 +0000
==================================================
Nio2Endpoint.java


git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1833871 13f79535-47bb-0310-9956-ffa450edef68



==================================================
NioEndpoint.java
index 47dfe522fb..5c2abd5820 100644
--- a/java/org/apache/tomcat/util/net/Nio2Endpoint.java
+++ b/java/org/apache/tomcat/util/net/Nio2Endpoint.java
@@ -842,7 +842,7 @@ public class Nio2Endpoint extends AbstractJsseEndpoint<Nio2Channel,AsynchronousS
 
         @Override
         public boolean isClosed() {
-            return !getSocket().isOpen();
+            return closed || !getSocket().isOpen();
         }
 
 

==================================================
