d87b4ef1cdd99b12d590fa3314e49b790fecb8d7
==================================================
filters are not properly recycled if the request was a Comet
==================================================
Filip Hanik
==================================================
Tue Aug 14 23:03:45 2007 +0000
==================================================
InternalNioInputBuffer.java
filters are not properly recycled if the request was a Comet


git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@565963 13f79535-47bb-0310-9956-ffa450edef68



==================================================
InternalNioOutputBuffer.java
index 013f4fbe1f..a0ac5bd6fa 100644
--- a/java/org/apache/coyote/http11/InternalNioInputBuffer.java
+++ b/java/org/apache/coyote/http11/InternalNioInputBuffer.java
@@ -307,6 +307,10 @@ public class InternalNioInputBuffer implements InputBuffer {
      * connection.
      */
     public void recycle() {
+        // Recycle filters
+        for (int i = 0; i <= lastActiveFilter; i++) {
+            activeFilters[i].recycle();
+        }
 
         // Recycle Request object
         request.recycle();

==================================================
