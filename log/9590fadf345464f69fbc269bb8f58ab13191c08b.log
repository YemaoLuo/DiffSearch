9590fadf345464f69fbc269bb8f58ab13191c08b
==================================================
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49081
==================================================
Mark Emlyn
==================================================
Sun Apr 11 18:15:02 2010 +0000
==================================================
ELParserTokenManager.java
index 6a0633a62c..f3b6d45213 100644
--- a/java/org/apache/el/parser/ELParser.jjt
+++ b/java/org/apache/el/parser/ELParser.jjt
@@ -368,7 +368,7 @@ void Null() #Null : {}
    */
   < LITERAL_EXPRESSION:
     (   (~["$", "#", "\\"])* "\\" (["$", "#"])?
-      | (~["$", "#"])* (["$", "#"] ~["{"])
+      | (~["$", "#"])* (["$", "#"] ~["{", "$", "#"])
       | (~["$", "#"])+
     )+
     | "$"

==================================================
ELParserTreeConstants.java
index fec66673f5..8e5c0e583c 100644
--- a/java/org/apache/el/parser/ELParserTokenManager.java
+++ b/java/org/apache/el/parser/ELParserTokenManager.java
@@ -128,6 +128,8 @@ private int jjMoveNfa_0(int startState, int curPos)
                      jjCheckNAdd(5);
                   break;
                case 5:
+                  if ((0xffffffe7ffffffffL & l) == 0L)
+                     break;
                   if (kind > 1)
                      kind = 1;
                   jjCheckNAddStates(5, 8);

==================================================
JJTELParserState.java
index 892ee5e9f6..ac33b5dae9 100644
--- a/java/org/apache/el/parser/ELParserTreeConstants.java
+++ b/java/org/apache/el/parser/ELParserTreeConstants.java
@@ -76,4 +76,4 @@ public interface ELParserTreeConstants
     "Null",
   };
 }
-/* JavaCC - OriginalChecksum=57a11486271882e4bdcb1543fa567329 (do not edit this line) */
+/* JavaCC - OriginalChecksum=437008e736f149e8fa6712fb36d831a1 (do not edit this line) */

==================================================
ParseException.java
index 420fe86eee..9615b872b5 100644
--- a/java/org/apache/el/parser/JJTELParserState.java
+++ b/java/org/apache/el/parser/JJTELParserState.java
@@ -120,4 +120,4 @@ public class JJTELParserState {
     }
   }
 }
-/* JavaCC - OriginalChecksum=9ea5296a2e1d85c8100fe40283f86cfd (do not edit this line) */
+/* JavaCC - OriginalChecksum=70ac39f1e0e1eed7476e1dae2dfa25fa (do not edit this line) */

==================================================
SimpleCharStream.java
index 0cdb8859fc..c89733f087 100644
--- a/java/org/apache/el/parser/ParseException.java
+++ b/java/org/apache/el/parser/ParseException.java
@@ -184,4 +184,4 @@ public class ParseException extends Exception {
    }
 
 }
-/* JavaCC - OriginalChecksum=275dbff1ac8d899b542b475adbf177f7 (do not edit this line) */
+/* JavaCC - OriginalChecksum=87586a39aa89f164889cc59bc6a7e7ad (do not edit this line) */

==================================================
Token.java
index e89778ae33..e484965a58 100644
--- a/java/org/apache/el/parser/SimpleCharStream.java
+++ b/java/org/apache/el/parser/SimpleCharStream.java
@@ -468,4 +468,4 @@ public class SimpleCharStream
   }
 
 }
-/* JavaCC - OriginalChecksum=56f6dd1368327bd2c0d7eeacba8a18de (do not edit this line) */
+/* JavaCC - OriginalChecksum=9ba0db3918bffb8019f00da1e421f339 (do not edit this line) */

==================================================
TokenMgrError.java
index 532433ba25..3aa02ccf1a 100644
--- a/java/org/apache/el/parser/Token.java
+++ b/java/org/apache/el/parser/Token.java
@@ -128,4 +128,4 @@ public class Token implements java.io.Serializable {
   }
 
 }
-/* JavaCC - OriginalChecksum=30123d1b46e789463a75610c8e254dce (do not edit this line) */
+/* JavaCC - OriginalChecksum=3fc97649fffa8b13e1e03af022020b2f (do not edit this line) */

==================================================
