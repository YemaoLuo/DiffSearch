90c58838ea0f65a783627f1e1f9485c6644fb635
==================================================
Add getManifest() to Jar
==================================================
Mark Thomas
==================================================
Wed May 4 11:07:28 2016 +0000
==================================================
Jar.java
Add getManifest() to Jar

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1742250 13f79535-47bb-0310-9956-ffa450edef68



==================================================
AbstractInputStreamJar.java
index d1f5fb7b37..0d51641c96 100644
--- a/java/org/apache/tomcat/Jar.java
+++ b/java/org/apache/tomcat/Jar.java
@@ -19,6 +19,7 @@ package org.apache.tomcat;
 import java.io.IOException;
 import java.io.InputStream;
 import java.net.URL;
+import java.util.jar.Manifest;
 
 import org.apache.tomcat.util.scan.JarFactory;
 
@@ -116,6 +117,15 @@ public interface Jar extends AutoCloseable {
      */
     String getURL(String entry);
 
+    /**
+     * Obtain the manifest for the JAR file.
+     *
+     * @return The manifest for this JAR file.
+     *
+     * @throws IOException If an I/O error occurs trying to obtain the manifest
+     */
+    Manifest getManifest() throws IOException;
+
     /**
      * Resets the internal pointer used to track JAR entries to the beginning of
      * the JAR.

==================================================
JarFileUrlJar.java
index c4f32fb723..d658353a73 100644
--- a/java/org/apache/tomcat/util/scan/AbstractInputStreamJar.java
+++ b/java/org/apache/tomcat/util/scan/AbstractInputStreamJar.java
@@ -20,6 +20,7 @@ import java.io.IOException;
 import java.io.InputStream;
 import java.net.URL;
 import java.util.jar.JarEntry;
+import java.util.jar.Manifest;
 
 import org.apache.tomcat.Jar;
 
@@ -119,6 +120,13 @@ public abstract class AbstractInputStreamJar implements Jar {
     }
 
 
+    @Override
+    public Manifest getManifest() throws IOException {
+        reset();
+        return jarInputStream.getManifest();
+    }
+
+
     @Override
     public void reset() throws IOException {
         closeStream();

==================================================
