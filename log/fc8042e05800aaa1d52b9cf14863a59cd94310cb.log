fc8042e05800aaa1d52b9cf14863a59cd94310cb
==================================================
Remove unused code.
==================================================
Mark Emlyn
==================================================
Sat Feb 21 12:00:00 2009 +0000
==================================================
Http11AprProtocol.java
Remove unused code.
Deprecate NOOP method

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@746487 13f79535-47bb-0310-9956-ffa450edef68



==================================================
Http11NioProtocol.java
index 0b4aeabdf4..a17ba16641 100644
--- a/java/org/apache/coyote/http11/Http11AprProtocol.java
+++ b/java/org/apache/coyote/http11/Http11AprProtocol.java
@@ -32,7 +32,6 @@ import javax.management.MBeanServer;
 import javax.management.ObjectName;
 
 import org.apache.coyote.ActionCode;
-import org.apache.coyote.ActionHook;
 import org.apache.coyote.Adapter;
 import org.apache.coyote.ProtocolHandler;
 import org.apache.coyote.RequestGroupInfo;
@@ -567,9 +566,7 @@ public class Http11AprProtocol implements ProtocolHandler, MBeanRegistration {
                     processor = createProcessor();
                 }
 
-                if (processor instanceof ActionHook) {
-                    ((ActionHook) processor).action(ActionCode.ACTION_START, null);
-                }
+                processor.action(ActionCode.ACTION_START, null);
 
                 SocketState state = processor.process(socket);
                 if (state == SocketState.LONG) {

==================================================
Http11Protocol.java
index 4b0498ea77..8a91c1ee21 100644
--- a/java/org/apache/coyote/http11/Http11NioProtocol.java
+++ b/java/org/apache/coyote/http11/Http11NioProtocol.java
@@ -31,7 +31,6 @@ import javax.management.MBeanServer;
 import javax.management.ObjectName;
 
 import org.apache.coyote.ActionCode;
-import org.apache.coyote.ActionHook;
 import org.apache.coyote.Adapter;
 import org.apache.coyote.ProtocolHandler;
 import org.apache.coyote.RequestGroupInfo;
@@ -262,6 +261,11 @@ public class Http11NioProtocol implements ProtocolHandler, MBeanRegistration
         ep.setExecutor(executor);
     }
     
+    /**
+     * NOOP.
+     * @param useexec - Ignored
+     * @deprecated Executors are always used for NIO
+     */
     public void setUseExecutor(boolean useexec) {
         ep.setUseExecutor(useexec);
     }
@@ -733,10 +737,7 @@ public class Http11NioProtocol implements ProtocolHandler, MBeanRegistration
                     processor = createProcessor();
                 }
 
-                if (processor instanceof ActionHook) {
-                    ((ActionHook) processor).action(ActionCode.ACTION_START, null);
-                }
-                
+                processor.action(ActionCode.ACTION_START, null);
                 
                 if (proto.ep.getSecure() && (proto.sslImplementation != null)) {
                     if (socket instanceof SecureNioChannel) {

==================================================
