aa8495b55589e114debfc7243b836eaa41bfe73e
==================================================
Test case for https://issues.apache.org/bugzilla/show_bug.cgi?id=49217
==================================================
Mark Emlyn
==================================================
Mon Jul 5 21:44:29 2010 +0000
==================================================
TestELParser.java
Test case for https://issues.apache.org/bugzilla/show_bug.cgi?id=49217

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@960711 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TesterBeanA.java
index ff1db8c1d0..e2216f971c 100644
--- a/test/org/apache/el/parser/TestELParser.java
+++ b/test/org/apache/el/parser/TestELParser.java
@@ -18,6 +18,7 @@
 package org.apache.el.parser;
 
 import javax.el.ELContext;
+import javax.el.ELException;
 import javax.el.ExpressionFactory;
 import javax.el.ValueExpression;
 
@@ -53,7 +54,49 @@ public class TestELParser extends TestCase {
         testExpression("#$#{1+1}", "#$2");
         testExpression("$#{1+1}", "$2");
         testExpression("$#${1+1}", "$#2");
-}
+    }
+    
+    public void testJavaKeyWordSuffix() {
+        ExpressionFactory factory = ExpressionFactory.newInstance();
+        ELContext context = new ELContextImpl();
+        
+        TesterBeanA beanA = new TesterBeanA();
+        beanA.setInt("five");
+        ValueExpression var =
+            factory.createValueExpression(beanA, TesterBeanA.class);
+        context.getVariableMapper().setVariable("beanA", var);
+
+        // Should fail
+        Exception e = null;
+        try {
+            factory.createValueExpression(context, "${beanA.int}",
+                    String.class);
+        } catch (ELException ele) {
+            e = ele;
+        }
+        assertNotNull(e);
+    }
+
+    public void testJavaKeyWordIdentifier() {
+        ExpressionFactory factory = ExpressionFactory.newInstance();
+        ELContext context = new ELContextImpl();
+        
+        TesterBeanA beanA = new TesterBeanA();
+        beanA.setInt("five");
+        ValueExpression var =
+            factory.createValueExpression(beanA, TesterBeanA.class);
+        context.getVariableMapper().setVariable("this", var);
+
+        // Should fail
+        Exception e = null;
+        try {
+            factory.createValueExpression(context, "${this}", String.class);
+        } catch (ELException ele) {
+            e = ele;
+        }
+        assertNotNull(e);
+    }
+
 
     private void testExpression(String expression, String expected) {
         ExpressionFactory factory = ExpressionFactory.newInstance();

==================================================
