941ae118c6e97a1db6a62ae672d374fe025e2de0
==================================================
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=56638
==================================================
Mark Emlyn
==================================================
Wed Jun 18 18:52:58 2014 +0000
==================================================
ELProcessor.java
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=56638
When using ELProcessor.defineFunction(String,String,String,String) and no function name is specified, use the method name as the function name as required by the specification.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1603576 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TestELProcessor.java
index d29d4f49b9..0ef2369e07 100644
--- a/java/javax/el/ELProcessor.java
+++ b/java/javax/el/ELProcessor.java
@@ -106,6 +106,10 @@ public class ELProcessor {
         MethodSignature sig =
                 new MethodSignature(context, methodName, className);
 
+        if (function.length() == 0) {
+            function = sig.getName();
+        }
+
         Method methods[] = clazz.getMethods();
         for (Method method : methods) {
             if (!Modifier.isStatic(method.getModifiers())) {

==================================================
