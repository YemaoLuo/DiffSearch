2e8e4e81bb9b71f32727e5e178453ec54670c85e
==================================================
Fix https://bz.apache.org/bugzilla/show_bug.cgi?id=57809
==================================================
Mark Thomas
==================================================
Fri Feb 19 19:03:04 2016 +0000
==================================================
ContextConfig.java
Fix https://bz.apache.org/bugzilla/show_bug.cgi?id=57809
Remove the custom context attribute that held the effective web.xml. Components needing access to configuration information may access it via the Servlet API.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1731284 13f79535-47bb-0310-9956-ffa450edef68



==================================================
Constants.java
index 3cafe165f6..93f1579d77 100644
--- a/java/org/apache/catalina/startup/ContextConfig.java
+++ b/java/org/apache/catalina/startup/ContextConfig.java
@@ -1191,16 +1191,8 @@ public class ContextConfig implements LifecycleListener {
             configureContext(webXml);
         }
 
-        // Step 9a. Make the merged web.xml available to other
-        // components, specifically Jasper, to save those components
-        // from having to re-generate it.
-        // TODO Use a ServletContainerInitializer for Jasper
-        String mergedWebXml = webXml.toXml();
-        sContext.setAttribute(
-               org.apache.tomcat.util.scan.Constants.MERGED_WEB_XML,
-               mergedWebXml);
         if (context.getLogEffectiveWebXml()) {
-            log.info("web.xml:\n" + mergedWebXml);
+            log.info("web.xml:\n" + webXml.toXml());
         }
 
         // Always need to look for static resources

==================================================
