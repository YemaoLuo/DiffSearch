ffc45253757b591f8d1b8c73be50b41804900273
==================================================
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54241
==================================================
Mark Emlyn
==================================================
Wed Jan 2 14:47:01 2013 +0000
==================================================
JspWriterImpl.java
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54241
Revert the fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=35410 as it is not specification compliant
Remove the remainder of the write(String) method as well as it serves no purpose since it is identical to the method it overrides.
Add some test cases to confirm the expected/correct behaviour
Note: BZ 35410 claims there is no requirement for Object.toString() to be non-null. Many have argued (and I agree) that null is not a String representation and therefore not a valid return value for Object.toString().

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1427804 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TestJspWriterImpl.java
index d85da07742..a5d32de91d 100644
--- a/java/org/apache/jasper/runtime/JspWriterImpl.java
+++ b/java/org/apache/jasper/runtime/JspWriterImpl.java
@@ -339,21 +339,6 @@ public class JspWriterImpl extends JspWriter {
         }
     }
 
-    /**
-     * Write a string.  This method cannot be inherited from the Writer class
-     * because it must suppress I/O exceptions.
-     */
-    @Override
-    public void write(String s) throws IOException {
-        // Simple fix for Bugzilla 35410
-        // Calling the other write function so as to init the buffer anyways
-        if(s == null) {
-            write(s, 0, 0);
-        } else {
-            write(s, 0, s.length());
-        }
-    }
-
 
     static final String lineSeparator = System.getProperty("line.separator");
 

==================================================
