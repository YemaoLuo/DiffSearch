4ed4e6378ce0dc1404552fe65341bc54c3bdda80
==================================================
Add rudimentary detection for PermGen memory leaks on web application reload. Only available via JMX for now. Next step is to add it to the manager app.
==================================================
Mark Emlyn
==================================================
Thu Feb 11 20:32:09 2010 +0000
==================================================
StandardHost.java
Add rudimentary detection for PermGen memory leaks on web application reload. Only available via JMX for now. Next step is to add it to the manager app.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@909134 13f79535-47bb-0310-9956-ffa450edef68



==================================================
WebappClassLoader.java
index 83eaae5ce3..7e144e5f8b 100644
--- a/java/org/apache/catalina/core/mbeans-descriptors.xml
+++ b/java/org/apache/catalina/core/mbeans-descriptors.xml
@@ -541,6 +541,12 @@
     <operation name="stop" description="Stop" impact="ACTION" returnType="void" />
     <operation name="init" description="Init" impact="ACTION" returnType="void" />
     <operation name="destroy" description="Destroy" impact="ACTION" returnType="void" />
+    
+    <operation name="findReloadedContextMemoryLeaks"
+               description="Provide a list of contexts that have leaked memory on reload. This will attempt to force a full garbage collection. Use with extreme caution on prouction systems."
+               impact="ACTION"
+               returnType="[Ljava.lang.String;" />
+
   </mbean>
   
   <mbean name="StandardHostValve"

==================================================
