c1c8ac3902237c5f04d34b41032dc5fe503e4815
==================================================
Add new attribute that send all actions for session across Tomcat cluster nodes.
==================================================
Keiichi Fujino
==================================================
Mon Apr 13 02:31:01 2015 +0000
==================================================
ClusterManagerBase.java
Add new attribute that send all actions for session across Tomcat cluster nodes.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1673087 13f79535-47bb-0310-9956-ffa450edef68



==================================================
DeltaSession.java
index bdfd7e9165..58319814c1 100644
--- a/java/org/apache/catalina/ha/session/ClusterManagerBase.java
+++ b/java/org/apache/catalina/ha/session/ClusterManagerBase.java
@@ -67,6 +67,11 @@ public abstract class ClusterManagerBase extends ManagerBase implements ClusterM
      */
     private volatile ReplicationValve replicationValve = null ;
 
+    /**
+     * send all actions of session attributes.
+     */
+    private boolean recordAllActions = false;
+
     /*
      * @see org.apache.catalina.ha.ClusterManager#getCluster()
      */
@@ -120,6 +125,14 @@ public abstract class ClusterManagerBase extends ManagerBase implements ClusterM
         }
     }
 
+    public boolean isRecordAllActions() {
+        return recordAllActions;
+    }
+
+    public void setRecordAllActions(boolean recordAllActions) {
+        this.recordAllActions = recordAllActions;
+    }
+
     /**
      * Check whether the given session attribute should be distributed
      *
@@ -210,6 +223,7 @@ public abstract class ClusterManagerBase extends ManagerBase implements ClusterM
              // Ignore
             }
         }
+        copy.setRecordAllActions(isRecordAllActions());
     }
 
     /**

==================================================
