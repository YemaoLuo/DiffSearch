4f937e3c4ee5acf3e80f2f82cbd21942878b9162
==================================================
Refactor to reduce duplicate(ish) code
==================================================
Mark Thomas
==================================================
Thu Apr 6 20:25:01 2017 +0000
==================================================
PageContextImpl.java
Refactor to reduce duplicate(ish) code

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1790453 13f79535-47bb-0310-9956-ffa450edef68



==================================================
SecurityClassLoad.java
index cc05bdd05a..2b03775e37 100644
--- a/java/org/apache/jasper/runtime/PageContextImpl.java
+++ b/java/org/apache/jasper/runtime/PageContextImpl.java
@@ -207,28 +207,7 @@ public class PageContextImpl extends PageContext {
 
     @Override
     public Object getAttribute(final String name) {
-
-        if (name == null) {
-            throw new NullPointerException(Localizer
-                    .getMessage("jsp.error.attribute.null_name"));
-        }
-
-        if (SecurityUtil.isPackageProtectionEnabled()) {
-            return AccessController.doPrivileged(
-                    new PrivilegedAction<Object>() {
-                @Override
-                public Object run() {
-                    return doGetAttribute(name);
-                }
-            });
-        } else {
-            return doGetAttribute(name);
-        }
-
-    }
-
-    private Object doGetAttribute(String name) {
-        return attributes.get(name);
+        return getAttribute(name, PAGE_SCOPE);
     }
 
     @Override

==================================================
