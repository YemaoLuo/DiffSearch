f84da3c2eb997d13bc430dd1c009da321e69273f
==================================================
Generics for o.a.c.valves
==================================================
Mark Emlyn
==================================================
Tue Dec 2 19:54:06 2008 +0000
==================================================
AccessLogValve.java
Generics for o.a.c.valves
Fix a couple of other Eclipse warnings as well

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@722589 13f79535-47bb-0310-9956-ffa450edef68



==================================================
ExtendedAccessLogValve.java
index 9deaa8ebbe..0b7a2fce7b 100644
--- a/java/org/apache/catalina/valves/AccessLogValve.java
+++ b/java/org/apache/catalina/valves/AccessLogValve.java
@@ -1412,7 +1412,7 @@ public class AccessLogValve
         if (buf.length() > 0) {
             list.add(new StringElement(buf.toString()));
         }
-        return (AccessLogElement[]) list.toArray(new AccessLogElement[0]);
+        return list.toArray(new AccessLogElement[0]);
     }
 
     /**

==================================================
JDBCAccessLogValve.java
index 065e27c8db..0a1d97de12 100644
--- a/java/org/apache/catalina/valves/ExtendedAccessLogValve.java
+++ b/java/org/apache/catalina/valves/ExtendedAccessLogValve.java
@@ -571,7 +571,7 @@ public class ExtendedAccessLogValve
             if (log.isDebugEnabled()) {
                 log.debug("finished decoding with element size of: " + list.size());
             }
-            return (AccessLogElement[]) list.toArray(new AccessLogElement[0]);
+            return list.toArray(new AccessLogElement[0]);
         } catch (IOException e) {
             log.error("parse error", e);
             return null;

==================================================
RequestDumperValve.java
index d69bf16976..61037b0320 100644
--- a/java/org/apache/catalina/valves/JDBCAccessLogValve.java
+++ b/java/org/apache/catalina/valves/JDBCAccessLogValve.java
@@ -579,7 +579,7 @@ public final class JDBCAccessLogValve
         // Instantiate our database driver if necessary
         if (driver == null) {
             try {
-                Class clazz = Class.forName(driverName);
+                Class<?> clazz = Class.forName(driverName);
                 driver = (Driver) clazz.newInstance();
             } catch (Throwable e) {
                 throw new SQLException(e.getMessage());
@@ -627,7 +627,7 @@ public final class JDBCAccessLogValve
         try {
             ps.close();
         } catch (Throwable f) {
-            ;
+            // Ignore
         }
         this.ps = null;
 

==================================================
RequestFilterValve.java
index ad8c50b911..2500fa3796 100644
--- a/java/org/apache/catalina/valves/RequestDumperValve.java
+++ b/java/org/apache/catalina/valves/RequestDumperValve.java
@@ -109,20 +109,20 @@ public class RequestDumperValve
                 log.info("            cookie=" + cookies[i].getName() + "=" +
                     cookies[i].getValue());
         }
-        Enumeration hnames = request.getHeaderNames();
+        Enumeration<String> hnames = request.getHeaderNames();
         while (hnames.hasMoreElements()) {
-            String hname = (String) hnames.nextElement();
-            Enumeration hvalues = request.getHeaders(hname);
+            String hname = hnames.nextElement();
+            Enumeration<String> hvalues = request.getHeaders(hname);
             while (hvalues.hasMoreElements()) {
-                String hvalue = (String) hvalues.nextElement();
+                String hvalue = hvalues.nextElement();
                 log.info("            header=" + hname + "=" + hvalue);
             }
         }
         log.info("            locale=" + request.getLocale());
         log.info("            method=" + request.getMethod());
-        Enumeration pnames = request.getParameterNames();
+        Enumeration<String> pnames = request.getParameterNames();
         while (pnames.hasMoreElements()) {
-            String pname = (String) pnames.nextElement();
+            String pname = pnames.nextElement();
             String pvalues[] = request.getParameterValues(pname);
             StringBuffer result = new StringBuffer(pname);
             result.append('=');

==================================================
SSLValve.java
index 9d8c12c358..cc22520b4b 100644
--- a/java/org/apache/catalina/valves/RequestFilterValve.java
+++ b/java/org/apache/catalina/valves/RequestFilterValve.java
@@ -217,7 +217,7 @@ public abstract class RequestFilterValve
             return (new Pattern[0]);
         list += ",";
 
-        ArrayList reList = new ArrayList();
+        ArrayList<Pattern> reList = new ArrayList<Pattern>();
         while (list.length() > 0) {
             int comma = list.indexOf(',');
             if (comma < 0)
@@ -235,7 +235,7 @@ public abstract class RequestFilterValve
         }
 
         Pattern reArray[] = new Pattern[reList.size()];
-        return ((Pattern[]) reList.toArray(reArray));
+        return reList.toArray(reArray);
 
     }
 

==================================================
