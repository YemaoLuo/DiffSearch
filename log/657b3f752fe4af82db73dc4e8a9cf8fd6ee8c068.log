657b3f752fe4af82db73dc4e8a9cf8fd6ee8c068
==================================================
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50205
==================================================
Mark Emlyn
==================================================
Mon Jan 10 16:48:25 2011 +0000
==================================================
Host.java
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50205
Add deployIgnore to Host
Based on a patch by Jim Riggs

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1057275 13f79535-47bb-0310-9956-ffa450edef68



==================================================
StandardHost.java
index b2e78796a0..37b1f98469 100644
--- a/java/org/apache/catalina/Host.java
+++ b/java/org/apache/catalina/Host.java
@@ -14,12 +14,9 @@
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
-
-
 package org.apache.catalina;
 
 
-
 /**
  * A <b>Host</b> is a Container that represents a virtual host in the
  * Catalina servlet engine.  It is useful in the following types of scenarios:
@@ -148,6 +145,22 @@ public interface Host extends Container {
     public void setDeployOnStartup(boolean deployOnStartup);
 
 
+    /**
+     * Return the regular expression that defines the files and directories in
+     * the host's {@link #appBase} that will be ignored by the automatic
+     * deployment process.
+     */
+    public String getDeployIgnore();
+
+
+    /**
+     * Set the regular expression that defines the files and directories in
+     * the host's {@link #appBase} that will be ignored by the automatic
+     * deployment process.
+     */
+    public void setDeployIgnore(String deployIgnore);
+
+
     // --------------------------------------------------------- Public Methods
 
 

==================================================
HostConfig.java
index 864770aadd..b9253c2c28 100644
--- a/java/org/apache/catalina/core/mbeans-descriptors.xml
+++ b/java/org/apache/catalina/core/mbeans-descriptors.xml
@@ -1164,6 +1164,10 @@
                description="Should we create directories upon startup for appBase and xmlBase? "
                type="boolean"/>
       
+    <attribute name="deployIgnore"
+               description="Paths within appBase ignored for automatic deployment"
+               type="java.lang.String"/>
+
     <attribute name="deployOnStartup"
                description="The deploy on startup flag for this Host"
                type="boolean"/>

==================================================
