cf703d2b15675bc1719c87892ca53868ae39d239
==================================================
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53373
==================================================
Christopher Schultz
==================================================
Wed Jun 6 20:05:05 2012 +0000
==================================================
BaseDirContext.java
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=53373
Trim whitespace from around <Context> aliases delimiters (,=) to improve readability of many aliases.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1347087 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TestNamingContext.java
index 4132c0cc3f..be8b74a6f4 100644
--- a/java/org/apache/naming/resources/BaseDirContext.java
+++ b/java/org/apache/naming/resources/BaseDirContext.java
@@ -236,8 +236,21 @@ public abstract class BaseDirContext implements DirContext {
 
         String[] kvps = theAliases.split(",");
         for (String kvp : kvps) {
+            // Skip blanks introduced by regexp split and/or poor input
+            kvp = kvp.trim();
+            if(0 == kvp.length())
+                continue;
+
             String[] kv = kvp.split("=");
-            if (kv.length != 2 || kv[0].length() == 0 || kv[1].length() == 0)
+            if (kv.length != 2)
+                throw new IllegalArgumentException(
+                        sm.getString("resources.invalidAliasMapping", kvp));
+
+            // Trim whitespace from key and value
+            kv[0] = kv[0].trim();
+            kv[1] = kv[1].trim();
+
+            if(kv[0].length() == 0 || kv[1].length() == 0)
                 throw new IllegalArgumentException(
                         sm.getString("resources.invalidAliasMapping", kvp));
 

==================================================
