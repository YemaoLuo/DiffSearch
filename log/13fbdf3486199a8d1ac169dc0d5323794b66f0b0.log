13fbdf3486199a8d1ac169dc0d5323794b66f0b0
==================================================
Align API with spec. Update tests for new API.
==================================================
Mark Emlyn
==================================================
Fri Apr 19 19:48:59 2013 +0000
==================================================
ClientEndpointConfig.java
Align API with spec. Update tests for new API.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1470008 13f79535-47bb-0310-9956-ffa450edef68



==================================================
Decoder.java
index 92393683bb..347d705107 100644
--- a/java/javax/websocket/ClientEndpointConfig.java
+++ b/java/javax/websocket/ClientEndpointConfig.java
@@ -113,7 +113,7 @@ public interface ClientEndpointConfig extends EndpointConfig {
     }
 
 
-    public abstract class Configurator {
+    public class Configurator {
 
         /**
          * Provides the client with a mechanism to inspect and/or modify the headers

==================================================
Encoder.java
index fce0cda49e..fad262e3b5 100644
--- a/java/javax/websocket/Decoder.java
+++ b/java/javax/websocket/Decoder.java
@@ -27,19 +27,6 @@ public interface Decoder {
 
     abstract void destroy();
 
-    abstract class Adapter implements Decoder {
-
-        @Override
-        public void init(EndpointConfig endpointConfig) {
-            // NO-OP
-        }
-
-        @Override
-        public void destroy() {
-            // NO_OP
-        }
-    }
-
     interface Binary<T> extends Decoder {
 
         T decode(ByteBuffer bytes) throws DecodeException;

==================================================
ServerEndpointConfig.java
index 6926e90b71..42a107f0e8 100644
--- a/java/javax/websocket/Encoder.java
+++ b/java/javax/websocket/Encoder.java
@@ -27,19 +27,6 @@ public interface Encoder {
 
     abstract void destroy();
 
-    abstract class Adapter implements Encoder {
-
-        @Override
-        public void init(EndpointConfig endpointConfig) {
-            // NO-OP
-        }
-
-        @Override
-        public void destroy() {
-            // NO_OP
-        }
-    }
-
     interface Text<T> extends Encoder {
 
         String encode(T object) throws EncodeException;

==================================================
TestUtil.java
index fdaf6e4c29..974f394b0a 100644
--- a/java/javax/websocket/server/ServerEndpointConfig.java
+++ b/java/javax/websocket/server/ServerEndpointConfig.java
@@ -134,7 +134,7 @@ public interface ServerEndpointConfig extends EndpointConfig {
     }
 
 
-    public abstract class Configurator {
+    public class Configurator {
 
         private static volatile Configurator defaultImpl = null;
         private static final Object defaultImplLock = new Object();

==================================================
TestEncodingDecoding.java
index 3f04b610c4..ca2ae5f127 100644
--- a/test/org/apache/tomcat/websocket/TestUtil.java
+++ b/test/org/apache/tomcat/websocket/TestUtil.java
@@ -18,6 +18,7 @@ package org.apache.tomcat.websocket;
 
 import javax.websocket.EncodeException;
 import javax.websocket.Encoder;
+import javax.websocket.EndpointConfig;
 import javax.websocket.MessageHandler;
 
 import org.junit.Assert;
@@ -173,8 +174,17 @@ public class TestUtil {
     }
 
 
-    private static class SimpleEncoder extends Encoder.Adapter
-            implements Encoder.Text<String> {
+    private static class SimpleEncoder implements Encoder.Text<String> {
+
+        @Override
+        public void init(EndpointConfig endpointConfig) {
+            // NO-OP
+        }
+
+        @Override
+        public void destroy() {
+            // NO-OP
+        }
 
         @Override
         public String encode(String object) throws EncodeException {
@@ -187,8 +197,17 @@ public class TestUtil {
     }
 
 
-    private abstract static class GenericEncoder<T> extends Encoder.Adapter
-            implements Encoder.Text<T> {
+    private abstract static class GenericEncoder<T> implements Encoder.Text<T> {
+
+        @Override
+        public void init(EndpointConfig endpointConfig) {
+            // NO-OP
+        }
+
+        @Override
+        public void destroy() {
+            // NO-OP
+        }
     }
 
 
@@ -204,7 +223,17 @@ public class TestUtil {
 
 
     private abstract static class GenericMultipleEncoder<A,B>
-            extends Encoder.Adapter implements Encoder.Text<A>, Foo<B> {
+            implements Encoder.Text<A>, Foo<B> {
+
+        @Override
+        public void init(EndpointConfig endpointConfig) {
+            // NO-OP
+        }
+
+        @Override
+        public void destroy() {
+            // NO-OP
+        }
     }
 
 

==================================================
