bde9f1dcbd1ad1b104d8e91f0ee04da60f45696f
==================================================
Consolidate directory creation from doing it in multiple places with no indication of failure and only for xmlBase to create directories during the startup phase for both appBase and xmlBase
==================================================
Filip Hanik
==================================================
Tue Jun 2 14:04:42 2009 +0000
==================================================
Host.java
Consolidate directory creation from doing it in multiple places with no indication of failure and only for xmlBase to create directories during the startup phase for both appBase and xmlBase




git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@781036 13f79535-47bb-0310-9956-ffa450edef68



==================================================
StandardHost.java
index 2527c439c1..a9413d30e7 100644
--- a/java/org/apache/catalina/Host.java
+++ b/java/org/apache/catalina/Host.java
@@ -232,5 +232,16 @@ public interface Host extends Container {
      */
     public void removeAlias(String alias);
 
+    /**
+     * Returns true if the Host will attempt to create directories for appBase and xmlBase
+     * unless they already exist.
+     * @return
+     */
+    public boolean getCreateDirs();
+    /**
+     * Set to true if the Host should attempt to create directories for xmlBase and appBase upon startup
+     * @param createDirs
+     */
+    public void setCreateDirs(boolean createDirs);
 
 }

==================================================
HostConfig.java
index 951d632e0f..9bb6ef0dc3 100644
--- a/java/org/apache/catalina/core/StandardHost.java
+++ b/java/org/apache/catalina/core/StandardHost.java
@@ -161,7 +161,11 @@ public class StandardHost
      * Attribute value used to turn on/off XML namespace awarenes.
      */
      private boolean xmlNamespaceAware = false;
-
+     
+    /**
+     * Should we create directories upon startup for appBase and xmlBase
+     */
+     private boolean createDirs = true;
 
     // ------------------------------------------------------------- Properties
 
@@ -216,6 +220,22 @@ public class StandardHost
 
     }
 
+    /**
+     * Returns true if the Host will attempt to create directories for appBase and xmlBase
+     * unless they already exist.
+     * @return
+     */
+    public boolean getCreateDirs() {
+        return createDirs;
+    }
+
+    /**
+     * Set to true if the Host should attempt to create directories for xmlBase and appBase upon startup
+     * @param createDirs
+     */
+    public void setCreateDirs(boolean createDirs) {
+        this.createDirs = createDirs;
+    }
 
     /**
      * Return the value of the auto deploy flag.  If true, it indicates that 
@@ -680,8 +700,7 @@ public class StandardHost
         return (sb.toString());
 
     }
-
-
+    
     /**
      * Start this host.
      *

==================================================
