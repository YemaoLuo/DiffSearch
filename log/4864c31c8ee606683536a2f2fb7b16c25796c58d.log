4864c31c8ee606683536a2f2fb7b16c25796c58d
==================================================
Add logging when a context fails to unregister a JDBC driver.
==================================================
Mark Emlyn
==================================================
Sun Nov 29 14:25:04 2009 +0000
==================================================
JdbcLeakPrevention.java
Add logging when a context fails to unregister a JDBC driver.
Don't unregister the jdbc-obdc bridge driver that is loaded by the system classloader.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@885231 13f79535-47bb-0310-9956-ffa450edef68



==================================================
WebappClassLoader.java
index 37ed5042c2..297af31182 100644
--- a/java/org/apache/catalina/loader/LocalStrings.properties
+++ b/java/org/apache/catalina/loader/LocalStrings.properties
@@ -33,6 +33,7 @@ webappClassLoader.jdbcRemoveFailed=JDBC driver de-registration failed
 webappClassLoader.jdbcRemoveStreamError=Exception closing input stream during JDBC driver de-registration
 webappClassLoader.stopped=Illegal access: this web application instance has been stopped already.  Could not load {0}.  The eventual following stack trace is caused by an error thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access, and has no functional impact.
 webappClassLoader.readError=Resource read error: Could not load {0}.
+webappClassLoader.uncleareredReferenceJbdc=A web application registered the JBDC driver [{0}] but failed to unregister it when the web application was stopped. To prevent a memory leak, the JDBC Driver has been forcibly unregistered.   
 webappClassLoader.wrongVersion=(unable to load class {0})
 webappLoader.addRepository=Adding repository {0}
 webappLoader.deploy=Deploying class repositories to work directory {0}

==================================================
