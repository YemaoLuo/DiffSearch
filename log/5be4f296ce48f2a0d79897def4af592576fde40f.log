5be4f296ce48f2a0d79897def4af592576fde40f
==================================================
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49104
==================================================
Mark Emlyn
==================================================
Wed Apr 14 22:24:17 2010 +0000
==================================================
AjpProtocol.java
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49104
Generics

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@934223 13f79535-47bb-0310-9956-ffa450edef68



==================================================
Http11Protocol.java
index 008a31044c..0ea3ebed4d 100644
--- a/java/org/apache/coyote/ajp/AjpProtocol.java
+++ b/java/org/apache/coyote/ajp/AjpProtocol.java
@@ -321,8 +321,8 @@ public class AjpProtocol
         protected AjpProtocol proto;
         protected AtomicLong registerCount = new AtomicLong(0);
         protected RequestGroupInfo global = new RequestGroupInfo();
-        protected ConcurrentHashMap<SocketWrapper, AjpProcessor> connections =
-            new ConcurrentHashMap<SocketWrapper, AjpProcessor>();
+        protected ConcurrentHashMap<SocketWrapper<Socket>, AjpProcessor> connections =
+            new ConcurrentHashMap<SocketWrapper<Socket>, AjpProcessor>();
 
         protected ConcurrentLinkedQueue<AjpProcessor> recycledProcessors = 
             new ConcurrentLinkedQueue<AjpProcessor>() {

==================================================
JIoEndpoint.java
index cb7fe6226a..eb4b1b01cf 100644
--- a/java/org/apache/coyote/http11/Http11Protocol.java
+++ b/java/org/apache/coyote/http11/Http11Protocol.java
@@ -32,7 +32,6 @@ import org.apache.coyote.RequestInfo;
 import org.apache.juli.logging.Log;
 import org.apache.tomcat.util.modeler.Registry;
 import org.apache.tomcat.util.net.JIoEndpoint;
-import org.apache.tomcat.util.net.NioChannel;
 import org.apache.tomcat.util.net.SSLImplementation;
 import org.apache.tomcat.util.net.ServerSocketFactory;
 import org.apache.tomcat.util.net.SocketStatus;
@@ -190,8 +189,8 @@ public class Http11Protocol extends AbstractHttp11Protocol {
         protected Http11Protocol proto;
         protected AtomicLong registerCount = new AtomicLong(0);
         protected RequestGroupInfo global = new RequestGroupInfo();
-        protected ConcurrentHashMap<SocketWrapper, Http11Processor> connections =
-            new ConcurrentHashMap<SocketWrapper, Http11Processor>();
+        protected ConcurrentHashMap<SocketWrapper<Socket>, Http11Processor> connections =
+            new ConcurrentHashMap<SocketWrapper<Socket>, Http11Processor>();
 
         protected ConcurrentLinkedQueue<Http11Processor> recycledProcessors = 
             new ConcurrentLinkedQueue<Http11Processor>() {

==================================================
