953479eaf8efce8f421e445c34f4fad9a122d60c
==================================================
Align CLOSE with other implementations
==================================================
Mark Thomas
==================================================
Wed Sep 30 13:50:36 2015 +0000
==================================================
Stream.java
Align CLOSE with other implementations
- call COMMIT first
- handle the flush in the close/finish/end/whatever method

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1706036 13f79535-47bb-0310-9956-ffa450edef68



==================================================
StreamProcessor.java
index c2af4df659..2024ea3a67 100644
--- a/java/org/apache/coyote/http2/Stream.java
+++ b/java/org/apache/coyote/http2/Stream.java
@@ -430,8 +430,9 @@ public class Stream extends AbstractStream implements HeaderEmitter {
             return written;
         }
 
-        public void close() {
+        public void close() throws IOException {
             closed = true;
+            flushData();
         }
 
         public boolean isClosed() {

==================================================
