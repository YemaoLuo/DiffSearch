3d53b8ecbe7f84712f2333dfbe22823681cec7f9
==================================================
More re-factoring: expose the Executor
==================================================
Mark Emlyn
==================================================
Tue Sep 14 12:09:50 2010 +0000
==================================================
AbstractHttp11Processor.java
More re-factoring: expose the Executor

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@996861 13f79535-47bb-0310-9956-ffa450edef68



==================================================
Http11AprProcessor.java
index 4ae083a873..9226fd226e 100644
--- a/java/org/apache/coyote/http11/AbstractHttp11Processor.java
+++ b/java/org/apache/coyote/http11/AbstractHttp11Processor.java
@@ -18,6 +18,7 @@ package org.apache.coyote.http11;
 
 import java.io.IOException;
 import java.util.StringTokenizer;
+import java.util.concurrent.Executor;
 import java.util.regex.Pattern;
 import java.util.regex.PatternSyntaxException;
 
@@ -1089,4 +1090,6 @@ public abstract class AbstractHttp11Processor {
     }
     
     protected abstract void recycleInternal();
+    
+    protected abstract Executor getExecutor();
 }

==================================================
Http11NioProcessor.java
index 89a2a8539d..b45b7854b0 100644
--- a/java/org/apache/coyote/http11/Http11AprProcessor.java
+++ b/java/org/apache/coyote/http11/Http11AprProcessor.java
@@ -23,6 +23,7 @@ import java.io.InterruptedIOException;
 import java.security.cert.CertificateFactory;
 import java.security.cert.X509Certificate;
 import java.util.Locale;
+import java.util.concurrent.Executor;
 import java.util.concurrent.atomic.AtomicBoolean;
 
 import org.apache.coyote.ActionCode;
@@ -915,4 +916,9 @@ public class Http11AprProcessor extends AbstractHttp11Processor implements Actio
     protected AbstractOutputBuffer getOutputBuffer() {
         return outputBuffer;
     }
+    
+    @Override
+    protected Executor getExecutor() {
+        return endpoint.getExecutor();
+    }
 }

==================================================
Http11Processor.java
index 27e56ad3c6..02ed557608 100644
--- a/java/org/apache/coyote/http11/Http11NioProcessor.java
+++ b/java/org/apache/coyote/http11/Http11NioProcessor.java
@@ -21,6 +21,7 @@ import java.io.InterruptedIOException;
 import java.net.InetAddress;
 import java.nio.channels.SelectionKey;
 import java.util.Locale;
+import java.util.concurrent.Executor;
 import java.util.concurrent.atomic.AtomicBoolean;
 
 import org.apache.coyote.ActionCode;
@@ -1027,4 +1028,8 @@ public class Http11NioProcessor extends AbstractHttp11Processor implements Actio
         this.sslSupport = sslSupport;
     }
 
+    @Override
+    protected Executor getExecutor() {
+        return endpoint.getExecutor();
+    }
 }

==================================================
