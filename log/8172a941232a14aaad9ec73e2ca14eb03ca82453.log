8172a941232a14aaad9ec73e2ca14eb03ca82453
==================================================
Improve error message when cancelling stream due to an invalid write
==================================================
Mark Thomas
==================================================
Mon Nov 7 13:00:36 2022 +0000
==================================================
Http2UpgradeHandler.java
Improve error message when cancelling stream due to an invalid write


==================================================
StreamStateMachine.java
index 615e6413dc..8972c4fb6e 100644
--- a/java/org/apache/coyote/http2/LocalStrings.properties
+++ b/java/org/apache/coyote/http2/LocalStrings.properties
@@ -155,7 +155,7 @@ upgradeHandler.startRequestBodyFrame.result=Connection [{0}], Stream [{1}] start
 upgradeHandler.stream.closed=Stream [{0}] has been closed for some time
 upgradeHandler.stream.error=Connection [{0}], Stream [{1}] Closed due to error
 upgradeHandler.stream.even=A new remote stream ID of [{0}] was requested but all remote streams must use odd identifiers
-upgradeHandler.stream.notWritable=Connection [{0}], Stream [{1}], This stream is not writable
+upgradeHandler.stream.notWritable=Connection [{0}], Stream [{1}], This stream is in state [{2}] and is not writable
 upgradeHandler.stream.old=A new remote stream ID of [{0}] was requested but the most recent stream was [{1}]
 upgradeHandler.tooManyRemoteStreams=The client attempted to use more than [{0}] active streams
 upgradeHandler.tooMuchOverhead=Connection [{0}], Too much overhead so the connection will be closed

==================================================
