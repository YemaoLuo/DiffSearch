6588912d1ed98aaf4a37cc1e408ce8ccdc8ac46f
==================================================
Add engine name to virtual server name
==================================================
Mark Thomas
==================================================
Fri Jun 26 07:19:18 2015 +0000
==================================================
ApplicationContext.java
Add engine name to virtual server name
Patch by fjodorver

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1687683 13f79535-47bb-0310-9956-ffa450edef68



==================================================
ContextConfig.java
index 4c8805f2d9..687cf2f4c2 100644
--- a/java/org/apache/catalina/core/ApplicationContext.java
+++ b/java/org/apache/catalina/core/ApplicationContext.java
@@ -1458,7 +1458,9 @@ public class ApplicationContext
     @Override
     public String getVirtualServerName() {
         // Constructor will fail if context or its parent is null
-        return ((Host) context.getParent()).getName();
+        Host host = (Host) context.getParent();
+        Engine engine = (Engine) host.getParent();
+        return engine.getName() + "/" + host.getName();
     }
 
 

==================================================
