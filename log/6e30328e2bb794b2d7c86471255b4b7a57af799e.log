6e30328e2bb794b2d7c86471255b4b7a57af799e
==================================================
Followup to r1500964: The new package in *RuleSet classes and in mbeans descriptors.
==================================================
Violeta Georgieva
==================================================
Tue Jul 9 04:33:04 2013 +0000
==================================================
ContextEnvironmentMBean.java
Followup to r1500964: The new package in *RuleSet classes and in mbeans descriptors.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1501082 13f79535-47bb-0310-9956-ffa450edef68



==================================================
ContextResourceLinkMBean.java
index 080719d79c..0e7428f262 100644
--- a/java/org/apache/catalina/mbeans/ContextEnvironmentMBean.java
+++ b/java/org/apache/catalina/mbeans/ContextEnvironmentMBean.java
@@ -31,7 +31,7 @@ import org.apache.tomcat.util.modeler.BaseModelMBean;
 
 /**
  * <p>A <strong>ModelMBean</strong> implementation for the
- * <code>org.apache.catalina.deploy.ContextEnvironment</code> component.</p>
+ * <code>org.apache.tomcat.util.descriptor.web.ContextEnvironment</code> component.</p>
  *
  * @author Amy Roh
  * @version $Id$

==================================================
ContextResourceMBean.java
index aa35fb1db4..b093327005 100644
--- a/java/org/apache/catalina/mbeans/ContextResourceLinkMBean.java
+++ b/java/org/apache/catalina/mbeans/ContextResourceLinkMBean.java
@@ -31,7 +31,7 @@ import org.apache.tomcat.util.modeler.BaseModelMBean;
 
 /**
  * <p>A <strong>ModelMBean</strong> implementation for the
- * <code>org.apache.catalina.deploy.ContextResourceLink</code> component.</p>
+ * <code>org.apache.tomcat.util.descriptor.web.ContextResourceLink</code> component.</p>
  *
  * @author Amy Roh
  * @version $Id$

==================================================
MBeanUtils.java
index 216f589e0d..e3d4366351 100644
--- a/java/org/apache/catalina/mbeans/ContextResourceMBean.java
+++ b/java/org/apache/catalina/mbeans/ContextResourceMBean.java
@@ -31,7 +31,7 @@ import org.apache.tomcat.util.modeler.BaseModelMBean;
 
 /**
  * <p>A <strong>ModelMBean</strong> implementation for the
- * <code>org.apache.catalina.deploy.ContextResource</code> component.</p>
+ * <code>org.apache.tomcat.util.descriptor.web.ContextResource</code> component.</p>
  *
  * @author Amy Roh
  * @version $Id$

==================================================
ContextRuleSet.java
index 4c4e1af6f7..21a4d4ffa3 100644
--- a/java/org/apache/catalina/mbeans/MBeanUtils.java
+++ b/java/org/apache/catalina/mbeans/MBeanUtils.java
@@ -564,6 +564,7 @@ public class MBeanUtils {
             registry.loadDescriptors("org.apache.catalina.connector", cl);
             registry.loadDescriptors("org.apache.catalina.valves",  cl);
             registry.loadDescriptors("org.apache.catalina.storeconfig",  cl);
+            registry.loadDescriptors("org.apache.tomcat.util.descriptor.web",  cl);
         }
         return (registry);
 

==================================================
NamingRuleSet.java
index 5a19961673..0876385bdc 100644
--- a/java/org/apache/catalina/startup/ContextRuleSet.java
+++ b/java/org/apache/catalina/startup/ContextRuleSet.java
@@ -155,11 +155,11 @@ public class ContextRuleSet extends RuleSetBase {
                             "org.apache.catalina.Store");
 
         digester.addObjectCreate(prefix + "Context/Parameter",
-                                 "org.apache.catalina.deploy.ApplicationParameter");
+                                 "org.apache.tomcat.util.descriptor.web.ApplicationParameter");
         digester.addSetProperties(prefix + "Context/Parameter");
         digester.addSetNext(prefix + "Context/Parameter",
                             "addApplicationParameter",
-                            "org.apache.catalina.deploy.ApplicationParameter");
+                            "org.apache.tomcat.util.descriptor.web.ApplicationParameter");
 
         digester.addRuleSet(new RealmRuleSet(prefix + "Context/"));
 
@@ -197,11 +197,11 @@ public class ContextRuleSet extends RuleSetBase {
 
 
         digester.addObjectCreate(prefix + "Context/ResourceLink",
-                "org.apache.catalina.deploy.ContextResourceLink");
+                "org.apache.tomcat.util.descriptor.web.ContextResourceLink");
         digester.addSetProperties(prefix + "Context/ResourceLink");
         digester.addRule(prefix + "Context/ResourceLink",
                 new SetNextNamingRule("addResourceLink",
-                        "org.apache.catalina.deploy.ContextResourceLink"));
+                        "org.apache.tomcat.util.descriptor.web.ContextResourceLink"));
 
         digester.addObjectCreate(prefix + "Context/Valve",
                                  null, // MUST be specified in the element

==================================================
WebRuleSet.java
index c41356e3ab..fdd2fba19a 100644
--- a/java/org/apache/catalina/startup/NamingRuleSet.java
+++ b/java/org/apache/catalina/startup/NamingRuleSet.java
@@ -85,53 +85,53 @@ public class NamingRuleSet extends RuleSetBase {
     public void addRuleInstances(Digester digester) {
 
         digester.addObjectCreate(prefix + "Ejb",
-                                 "org.apache.catalina.deploy.ContextEjb");
+                                 "org.apache.tomcat.util.descriptor.web.ContextEjb");
         digester.addRule(prefix + "Ejb", new SetAllPropertiesRule());
         digester.addRule(prefix + "Ejb",
                 new SetNextNamingRule("addEjb",
-                            "org.apache.catalina.deploy.ContextEjb"));
+                            "org.apache.tomcat.util.descriptor.web.ContextEjb"));
 
         digester.addObjectCreate(prefix + "Environment",
-                                 "org.apache.catalina.deploy.ContextEnvironment");
+                                 "org.apache.tomcat.util.descriptor.web.ContextEnvironment");
         digester.addSetProperties(prefix + "Environment");
         digester.addRule(prefix + "Environment",
                             new SetNextNamingRule("addEnvironment",
-                            "org.apache.catalina.deploy.ContextEnvironment"));
+                            "org.apache.tomcat.util.descriptor.web.ContextEnvironment"));
 
         digester.addObjectCreate(prefix + "LocalEjb",
-                                 "org.apache.catalina.deploy.ContextLocalEjb");
+                                 "org.apache.tomcat.util.descriptor.web.ContextLocalEjb");
         digester.addRule(prefix + "LocalEjb", new SetAllPropertiesRule());
         digester.addRule(prefix + "LocalEjb",
                 new SetNextNamingRule("addLocalEjb",
-                            "org.apache.catalina.deploy.ContextLocalEjb"));
+                            "org.apache.tomcat.util.descriptor.web.ContextLocalEjb"));
 
         digester.addObjectCreate(prefix + "Resource",
-                                 "org.apache.catalina.deploy.ContextResource");
+                                 "org.apache.tomcat.util.descriptor.web.ContextResource");
         digester.addRule(prefix + "Resource", new SetAllPropertiesRule());
         digester.addRule(prefix + "Resource",
                 new SetNextNamingRule("addResource",
-                            "org.apache.catalina.deploy.ContextResource"));
+                            "org.apache.tomcat.util.descriptor.web.ContextResource"));
 
         digester.addObjectCreate(prefix + "ResourceEnvRef",
-            "org.apache.catalina.deploy.ContextResourceEnvRef");
+            "org.apache.tomcat.util.descriptor.web.ContextResourceEnvRef");
         digester.addRule(prefix + "ResourceEnvRef", new SetAllPropertiesRule());
         digester.addRule(prefix + "ResourceEnvRef",
                 new SetNextNamingRule("addResourceEnvRef",
-                            "org.apache.catalina.deploy.ContextResourceEnvRef"));
+                            "org.apache.tomcat.util.descriptor.web.ContextResourceEnvRef"));
 
         digester.addObjectCreate(prefix + "ServiceRef",
-            "org.apache.catalina.deploy.ContextService");
+            "org.apache.tomcat.util.descriptor.web.ContextService");
         digester.addRule(prefix + "ServiceRef", new SetAllPropertiesRule());
         digester.addRule(prefix + "ServiceRef",
                 new SetNextNamingRule("addService",
-                            "org.apache.catalina.deploy.ContextService"));
+                            "org.apache.tomcat.util.descriptor.web.ContextService"));
 
         digester.addObjectCreate(prefix + "Transaction",
-            "org.apache.catalina.deploy.ContextTransaction");
+            "org.apache.tomcat.util.descriptor.web.ContextTransaction");
         digester.addRule(prefix + "Transaction", new SetAllPropertiesRule());
         digester.addRule(prefix + "Transaction",
                 new SetNextNamingRule("setTransaction",
-                            "org.apache.catalina.deploy.ContextTransaction"));
+                            "org.apache.tomcat.util.descriptor.web.ContextTransaction"));
 
     }
 

==================================================
