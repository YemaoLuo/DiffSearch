f8efe1e9b5ac36c5453ee01653369a603ab3c084
==================================================
Add i18n for more package.
==================================================
Remy Maucherat
==================================================
Thu Dec 6 19:45:54 2018 +0000
==================================================
CoyoteAdapter.java
Add i18n for more package.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1848351 13f79535-47bb-0310-9956-ffa450edef68



==================================================
ExpiresFilter.java
index e1bc12ec16..9f5f3ce556 100644
--- a/java/org/apache/catalina/connector/LocalStrings.properties
+++ b/java/org/apache/catalina/connector/LocalStrings.properties
@@ -20,6 +20,7 @@ coyoteAdapter.authorize=Authorizing user [{0}] using Tomcat''s Realm
 coyoteAdapter.checkRecycled.request=Encountered a non-recycled request and recycled it forcedly.
 coyoteAdapter.checkRecycled.response=Encountered a non-recycled response and recycled it forcedly.
 coyoteAdapter.debug=The variable [{0}] has value [{1}]
+coyoteAdapter.nullRequest=An asynchronous dispatch may only happen on an existing request
 coyoteAdapter.parsePathParam=Unable to parse the path parameters using encoding [{0}]. The path parameters in the URL will be ignored.
 
 coyoteConnector.invalidEncoding=The encoding [{0}] is not recognised by the JRE. The Connector will continue to use [{1}]

==================================================
RemoteIpFilter.java
index 31f6e8501c..9aa053e89b 100644
--- a/java/org/apache/catalina/filters/LocalStrings.properties
+++ b/java/org/apache/catalina/filters/LocalStrings.properties
@@ -34,6 +34,7 @@ expiresFilter.noDurationFound=Duration not found in directive [{0}]
 expiresFilter.noDurationUnitAfterAmount=Duration unit not found after amount [{0}] in directive [{1}]
 expiresFilter.noExpirationConfigured=Request [{0}] with response status [{1}] content-type [{2}], no expiration configured
 expiresFilter.noExpirationConfiguredForContentType=No Expires configuration found for content-type [{0}]
+expiresFilter.numberError=Exception parsing number [{0}] (zero based) of comma delimited list [{1}]
 expiresFilter.responseAlreadyCommited=Request [{0}], cannot apply ExpiresFilter on already committed response.
 expiresFilter.setExpirationDate=Request [{0}] with response status [{1}] content-type [{2}], set expiration date [{3}]
 expiresFilter.skippedStatusCode=Request [{0}] with response status [{1}] content-type [{1}], skip expiration header generation for given status
@@ -54,6 +55,8 @@ httpHeaderSecurityFilter.committed=Unable to add HTTP headers since response is
 remoteCidrFilter.invalid=Invalid configuration provided for [{0}]. See previous messages for details.
 remoteCidrFilter.noRemoteIp=Client does not have an IP address. Request denied.
 
+remoteIpFilter.invalidNumber=Illegal number for parameter [{0}]: [{1}]
+
 requestFilter.deny=Denied request for [{0}] based on property [{1}]
 
 restCsrfPreventionFilter.invalidNonce=CSRF nonce validation failed

==================================================
ManagerServlet.java
index a93aacdb38..3dbd3cd392 100644
--- a/java/org/apache/catalina/manager/LocalStrings.properties
+++ b/java/org/apache/catalina/manager/LocalStrings.properties
@@ -117,6 +117,7 @@ htmlManagerServlet.title=Tomcat Web Application Manager
 
 managerServlet.alreadyContext=FAIL - Application already exists at path [{0}]
 managerServlet.certsNotAvailable=Certificate information cannot be obtained from this connector at runtime
+managerServlet.copyError=Could not copy configuration file from path [{0}]
 managerServlet.deleteFail=FAIL - Unable to delete [{0}]. The continued presence of this file may cause problems.
 managerServlet.deployFailed=FAIL - Failed to deploy application at context path [{0}]
 managerServlet.deployed=OK - Deployed application at context path [{0}]

==================================================
DefaultServlet.java
index 12bc0926bc..7ee958efe2 100644
--- a/java/org/apache/catalina/manager/ManagerServlet.java
+++ b/java/org/apache/catalina/manager/ManagerServlet.java
@@ -819,8 +819,7 @@ public class ManagerServlet extends HttpServlet implements ContainerServlet {
                         }
                         if (ExpandWar.copy(new File(config),
                                 new File(configBase, baseName + ".xml")) == false) {
-                            throw new Exception("Could not copy config file from path '" +
-                                    config + "'");
+                            throw new Exception(sm.getString("managerServlet.copyError", config));
                         }
                     }
                     // Upload WAR

==================================================
GroupChannel.java
index 577d8ff94d..af89dc1e58 100644
--- a/java/org/apache/catalina/servlets/LocalStrings.properties
+++ b/java/org/apache/catalina/servlets/LocalStrings.properties
@@ -37,6 +37,9 @@ defaultServlet.blockExternalEntity=Blocked access to external entity with public
 defaultServlet.blockExternalEntity2=Blocked access to external entity with name [{0}], publicId [{1}], baseURI [{2}] and systemId [{3}]
 defaultServlet.blockExternalSubset=Blocked access to external subset with name [{0}] and baseURI [{1}]
 defaultServlet.missingResource=The requested resource [{0}] is not available
+defaultServlet.noResources=No static resources were found
+defaultServlet.readerCloseFailed=Failed to close reader
+defaultServlet.xslError=XSL transformer error
 
 defaultservlet.skipfail=Only skipped [{0}] bytes when [{1}] were requested
 

==================================================
NonBlockingCoordinator.java
index f346eb6c30..db2779f492 100644
--- a/java/org/apache/catalina/tribes/group/interceptors/LocalStrings.properties
+++ b/java/org/apache/catalina/tribes/group/interceptors/LocalStrings.properties
@@ -57,6 +57,14 @@ nonBlockingCoordinator.memberAdded.failed=Unable to start election when member w
 nonBlockingCoordinator.memberAlive.failed=Unable to perform member alive check, assuming member down.
 nonBlockingCoordinator.memberDisappeared.failed=Unable to start election when member was removed.
 nonBlockingCoordinator.processCoordinationMessage.failed=Error processing coordination message. Could be fatal.
+nonBlockingCoordinator.report=CoordinationEvent[type={0}\n\
+\tLocal: {1}\n\
+\tCoord: {2}\n\
+\tView: {3}\n\
+\tSuggested View: {4}\n\
+\tMembers: {5}\n\
+\tInfo: {6}\n\
+]
 
 orderInterceptor.messageAdded.sameCounter=Message added has the same counter, synchronization bug. Disable the order interceptor
 
@@ -90,5 +98,6 @@ throughputInterceptor.report=ThroughputInterceptor Report[\n\
 \tRx Speed:{8} MB/sec (since 1st msg)\n\
 \tReceived:{9} MB]\n
 
+twoPhaseCommitInterceptor.expiredMessage=Removing expired message [{0}]
 twoPhaseCommitInterceptor.heartbeat.failed=Unable to perform heartbeat on the TwoPhaseCommit interceptor.
 twoPhaseCommitInterceptor.originalMessage.missing=Received a confirmation, but original message is missing. Id:[{0}]

==================================================
TwoPhaseCommitInterceptor.java
index 90d4b3ab16..25036e2568 100644
--- a/java/org/apache/catalina/tribes/group/interceptors/NonBlockingCoordinator.java
+++ b/java/org/apache/catalina/tribes/group/interceptors/NonBlockingCoordinator.java
@@ -763,8 +763,9 @@ public class NonBlockingCoordinator extends ChannelInterceptorBase {
     @Override
     public void fireInterceptorEvent(InterceptorEvent event) {
         if (event instanceof CoordinationEvent &&
-            ((CoordinationEvent)event).type == CoordinationEvent.EVT_CONF_RX)
+            ((CoordinationEvent)event).type == CoordinationEvent.EVT_CONF_RX) {
             log.info(event);
+        }
     }
 
     public static class CoordinationEvent implements InterceptorEvent {
@@ -831,16 +832,12 @@ public class NonBlockingCoordinator extends ChannelInterceptorBase {
 
         @Override
         public String toString() {
-            StringBuilder buf = new StringBuilder("CoordinationEvent[type=");
-            buf.append(type).append("\n\tLocal:");
             Member local = interceptor.getLocalMember(false);
-            buf.append(local!=null?local.getName():"").append("\n\tCoord:");
-            buf.append(coord!=null?coord.getName():"").append("\n\tView:");
-            buf.append(Arrays.toNameString(view!=null?view.getMembers():null)).append("\n\tSuggested View:");
-            buf.append(Arrays.toNameString(suggestedView!=null?suggestedView.getMembers():null)).append("\n\tMembers:");
-            buf.append(Arrays.toNameString(mbrs)).append("\n\tInfo:");
-            buf.append(info).append("]");
-            return buf.toString();
+            return sm.getString("nonBlockingCoordinator.report", type, (local != null ? local.getName() : ""),
+                    (coord != null ? coord.getName() : ""),
+                    Arrays.toNameString(view != null ? view.getMembers() : null),
+                    Arrays.toNameString(suggestedView != null ? suggestedView.getMembers() : null),
+                    Arrays.toNameString(mbrs), info);
         }
     }
 

==================================================
NioReceiver.java
index 09b5bcc081..9bfa84f9ba 100644
--- a/java/org/apache/catalina/tribes/transport/nio/LocalStrings.properties
+++ b/java/org/apache/catalina/tribes/transport/nio/LocalStrings.properties
@@ -16,6 +16,7 @@
 nioReceiver.alreadyStarted=ServerSocketChannel already started
 nioReceiver.cleanup.fail=Unable to cleanup on selector close
 nioReceiver.clientDisconnect=Replication client disconnected, error when polling key. Ignoring client.
+nioReceiver.eventsError=Error processing events
 nioReceiver.requestError=Unable to process request in NioReceiver
 nioReceiver.run.fail=Unable to run replication listener
 nioReceiver.start.fail=Unable to start cluster receiver

==================================================
JarWarResourceSet.java
index 9aa9836726..60633632db 100644
--- a/java/org/apache/catalina/tribes/transport/nio/NioReceiver.java
+++ b/java/org/apache/catalina/tribes/transport/nio/NioReceiver.java
@@ -169,7 +169,7 @@ public class NioReceiver extends ReceiverBase implements Runnable, NioReceiverMB
                 }
                 r.run();
             } catch (Exception x) {
-                log.error("", x);
+                log.error(sm.getString("nioReceiver.eventsError"), x);
             }
         }
     }

==================================================
