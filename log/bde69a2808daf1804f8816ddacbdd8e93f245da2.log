bde69a2808daf1804f8816ddacbdd8e93f245da2
==================================================
Remove redundant sole path/URI from error page message on SC_NOT_FOUND
==================================================
Michael Osipov
==================================================
Sat Apr 18 20:58:40 2020 +0200
==================================================
DefaultServlet.java
Remove redundant sole path/URI from error page message on SC_NOT_FOUND

When a component issues a SC_NOT_FOUND don't respond with the path/URI only in
the error message because it does not offer any more detail about the error,
plus the client knows the path/URI already.



==================================================
WebdavServlet.java
index 06794ac37a..5ee7724872 100644
--- a/java/org/apache/catalina/servlets/DefaultServlet.java
+++ b/java/org/apache/catalina/servlets/DefaultServlet.java
@@ -850,7 +850,7 @@ public class DefaultServlet extends HttpServlet {
                 response.sendError(((Integer) request.getAttribute(
                         RequestDispatcher.ERROR_STATUS_CODE)).intValue());
             } else {
-                response.sendError(HttpServletResponse.SC_NOT_FOUND, requestUri);
+                response.sendError(HttpServletResponse.SC_NOT_FOUND);
             }
             return;
         }
@@ -939,8 +939,7 @@ public class DefaultServlet extends HttpServlet {
             // Skip directory listings if we have been configured to
             // suppress them
             if (!listings) {
-                response.sendError(HttpServletResponse.SC_NOT_FOUND,
-                                   request.getRequestURI());
+                response.sendError(HttpServletResponse.SC_NOT_FOUND);
                 return;
             }
             contentType = "text/html;charset=UTF-8";

==================================================
SSIServlet.java
index dd2107df53..683437c4fe 100644
--- a/java/org/apache/catalina/servlets/WebdavServlet.java
+++ b/java/org/apache/catalina/servlets/WebdavServlet.java
@@ -623,7 +623,7 @@ public class WebdavServlet extends DefaultServlet {
         }
 
         if (!resource.exists()) {
-            resp.sendError(HttpServletResponse.SC_NOT_FOUND, path);
+            resp.sendError(HttpServletResponse.SC_NOT_FOUND);
             return;
         }
 

==================================================
JspServlet.java
index 296c2fbefc..1648052249 100644
--- a/java/org/apache/catalina/ssi/SSIServlet.java
+++ b/java/org/apache/catalina/ssi/SSIServlet.java
@@ -157,12 +157,12 @@ public class SSIServlet extends HttpServlet {
         // (the "toUpperCase()" avoids problems on Windows systems)
         if (path == null || path.toUpperCase(Locale.ENGLISH).startsWith("/WEB-INF")
                 || path.toUpperCase(Locale.ENGLISH).startsWith("/META-INF")) {
-            res.sendError(HttpServletResponse.SC_NOT_FOUND, path);
+            res.sendError(HttpServletResponse.SC_NOT_FOUND);
             return;
         }
         URL resource = servletContext.getResource(path);
         if (resource == null) {
-            res.sendError(HttpServletResponse.SC_NOT_FOUND, path);
+            res.sendError(HttpServletResponse.SC_NOT_FOUND);
             return;
         }
         String resourceMimeType = servletContext.getMimeType(path);
@@ -221,4 +221,4 @@ public class SSIServlet extends HttpServlet {
         }
         bufferedReader.close();
     }
-}
\ No newline at end of file
+}

==================================================
