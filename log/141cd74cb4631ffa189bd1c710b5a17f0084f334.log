141cd74cb4631ffa189bd1c710b5a17f0084f334
==================================================
Add the first of the setValue tests and some plumbing that will be required by future tests.
==================================================
Mark Emlyn
==================================================
Thu Jul 4 15:47:18 2013 +0000
==================================================
TestBeanNameELResolver.java
Add the first of the setValue tests and some plumbing that will be required by future tests.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1499794 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TesterBeanNameResolver.java
index 6d12434f78..d093b74376 100644
--- a/test/javax/el/TestBeanNameELResolver.java
+++ b/test/javax/el/TestBeanNameELResolver.java
@@ -32,8 +32,13 @@ public class TestBeanNameELResolver {
      * resolver with the same configuration.
      */
     private BeanNameELResolver createBeanNameELResolver() {
+        return createBeanNameELResolver(false);
+    }
+
+    private BeanNameELResolver createBeanNameELResolver(boolean allowCreate) {
 
-        BeanNameResolver beanNameResolver = new TesterBeanNameResolver();
+        BeanNameResolver beanNameResolver =
+                new TesterBeanNameResolver(allowCreate);
         beanNameResolver.setBeanValue(BEAN01_NAME, BEAN01);
         beanNameResolver.setBeanValue(BEAN02_NAME, BEAN02);
 
@@ -166,4 +171,14 @@ public class TestBeanNameELResolver {
         Throwable cause = elException.getCause();
         Assert.assertNotNull(cause);
     }
+
+
+    /**
+     * Tests that a null context results in an NPE as per EL Javadoc.
+     */
+    @Test(expected=NullPointerException.class)
+    public void testSetValue01() {
+        BeanNameELResolver resolver = createBeanNameELResolver();
+        resolver.setValue(null, new Object(), new Object(), new Object());
+    }
 }

==================================================
