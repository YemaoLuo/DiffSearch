baa74b119be0676de07432468c6ac42fc6f2eed4
==================================================
More re-factoring prior to large async changes
==================================================
Mark Emlyn
==================================================
Tue Sep 14 11:47:57 2010 +0000
==================================================
AbstractHttp11Processor.java
More re-factoring prior to large async changes

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@996852 13f79535-47bb-0310-9956-ffa450edef68



==================================================
Http11AprProcessor.java
index 154343852c..4ae083a873 100644
--- a/java/org/apache/coyote/http11/AbstractHttp11Processor.java
+++ b/java/org/apache/coyote/http11/AbstractHttp11Processor.java
@@ -1081,4 +1081,12 @@ public abstract class AbstractHttp11Processor {
         }
 
     }
+    
+    public final void recycle() {
+        getInputBuffer().recycle();
+        getOutputBuffer().recycle();
+        recycleInternal();
+    }
+    
+    protected abstract void recycleInternal();
 }

==================================================
Http11NioProcessor.java
index 720c556145..89a2a8539d 100644
--- a/java/org/apache/coyote/http11/Http11AprProcessor.java
+++ b/java/org/apache/coyote/http11/Http11AprProcessor.java
@@ -391,10 +391,9 @@ public class Http11AprProcessor extends AbstractHttp11Processor implements Actio
         
     }
 
-    
-    public void recycle() {
-        inputBuffer.recycle();
-        outputBuffer.recycle();
+
+    @Override
+    public void recycleInternal() {
         this.socket = 0;
     }
     

==================================================
Http11Processor.java
index 48e89e485e..27e56ad3c6 100644
--- a/java/org/apache/coyote/http11/Http11NioProcessor.java
+++ b/java/org/apache/coyote/http11/Http11NioProcessor.java
@@ -465,9 +465,8 @@ public class Http11NioProcessor extends AbstractHttp11Processor implements Actio
     }
 
 
-    public void recycle() {
-        inputBuffer.recycle();
-        outputBuffer.recycle();
+    @Override
+    public void recycleInternal() {
         this.socket = null;
         this.cometClose = false;
         this.comet = false;

==================================================
