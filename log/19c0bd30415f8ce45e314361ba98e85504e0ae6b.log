19c0bd30415f8ce45e314361ba98e85504e0ae6b
==================================================
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55181
==================================================
Mark Emlyn
==================================================
Tue Jul 2 08:26:28 2013 +0000
==================================================
WsPongMessage.java
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55181
Protect against clients that ignore the limit of the byte buffer

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1498827 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TestWsPingPongMessages.java
index fe2689f7ef..c3a6c33472 100644
--- a/java/org/apache/tomcat/websocket/WsPongMessage.java
+++ b/java/org/apache/tomcat/websocket/WsPongMessage.java
@@ -26,7 +26,9 @@ public class WsPongMessage implements PongMessage {
 
 
     public WsPongMessage(ByteBuffer applicationData) {
-        this.applicationData = applicationData;
+        byte[] dst = new byte[applicationData.limit()];
+        applicationData.get(dst);
+        this.applicationData = ByteBuffer.wrap(dst);
     }
 
 

==================================================
