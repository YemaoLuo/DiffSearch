390b780790a5f048206dc8e74f43107f7bbf41a6
==================================================
Fix resource leak warnings reported by Eclipse
==================================================
Mark Emlyn
==================================================
Fri Oct 26 21:33:31 2012 +0000
==================================================
AprSocketContext.java
Fix resource leak warnings reported by Eclipse

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1402671 13f79535-47bb-0310-9956-ffa450edef68



==================================================
NioSelectorPool.java
index a132a2324a..8b909d64a5 100644
--- a/java/org/apache/tomcat/jni/socket/AprSocketContext.java
+++ b/java/org/apache/tomcat/jni/socket/AprSocketContext.java
@@ -810,10 +810,9 @@ public class AprSocketContext {
         }
 
         void unblock() {
-            try {
+            try (java.net.Socket sock = new java.net.Socket()) {
                 // Easiest ( maybe safest ) way to interrupt accept
                 // we could have it in non-blocking mode, etc
-                java.net.Socket sock = new java.net.Socket();
                 sock.connect(new InetSocketAddress("127.0.0.1", port));
             } catch (Exception ex) {
                 // ignore - the acceptor may have shut down by itself.

==================================================
