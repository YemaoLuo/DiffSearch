d1fdfc00efb789195cc6653cf88c93b8befcfa1e
==================================================
Fix a couple of minor resource leaks
==================================================
Mark Thomas
==================================================
Fri Apr 17 10:33:59 2020 +0100
==================================================
AbstractCatalinaTask.java
Fix a couple of minor resource leaks

I was experimenting with Eclipse "potential resource leak" warnings and
found these. There are lots more but quite a few look to be false
positives.


==================================================
DeployTask.java
index 0d30fe2f2e..c1457afbe5 100644
--- a/java/org/apache/catalina/ant/AbstractCatalinaTask.java
+++ b/java/org/apache/catalina/ant/AbstractCatalinaTask.java
@@ -319,7 +319,9 @@ public abstract class AbstractCatalinaTask extends BaseRedirectorHelperTask {
         hconn.connect();
 
         // Swallow response message
-        IOTools.flow(hconn.getInputStream(), null);
+        try (InputStream is = hconn.getInputStream()) {
+            IOTools.flow(is, null);
+        }
     }
 
 

==================================================
