bd5e9ceca5069fa9a437763c270f3bf289c1a6db
==================================================
Rename. Drop Upgrade - it is in the package name
==================================================
Mark Emlyn
==================================================
Sat Nov 24 18:52:29 2012 +0000
==================================================
Http11AprProtocol.java
Rename. Drop Upgrade - it is in the package name

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1413241 13f79535-47bb-0310-9956-ffa450edef68



==================================================
Http11NioProtocol.java
index 676a5c9fa0..682873a585 100644
--- a/java/org/apache/coyote/http11/Http11AprProtocol.java
+++ b/java/org/apache/coyote/http11/Http11AprProtocol.java
@@ -22,7 +22,7 @@ import javax.servlet.http.ProtocolHandler;
 
 import org.apache.coyote.AbstractProtocol;
 import org.apache.coyote.Processor;
-import org.apache.coyote.http11.upgrade.UpgradeAprProcessor;
+import org.apache.coyote.http11.upgrade.AprProcessor;
 import org.apache.juli.logging.Log;
 import org.apache.juli.logging.LogFactory;
 import org.apache.tomcat.util.net.AbstractEndpoint;
@@ -343,7 +343,7 @@ public class Http11AprProtocol extends AbstractHttp11Protocol<Long> {
                 SocketWrapper<Long> socket,
                 ProtocolHandler httpUpgradeProcessor)
                 throws IOException {
-            return new UpgradeAprProcessor(socket, httpUpgradeProcessor);
+            return new AprProcessor(socket, httpUpgradeProcessor);
         }
     }
 }

==================================================
Http11Protocol.java
index 94bdfbb3cd..1d33d85ac4 100644
--- a/java/org/apache/coyote/http11/Http11NioProtocol.java
+++ b/java/org/apache/coyote/http11/Http11NioProtocol.java
@@ -25,7 +25,7 @@ import javax.servlet.http.ProtocolHandler;
 
 import org.apache.coyote.AbstractProtocol;
 import org.apache.coyote.Processor;
-import org.apache.coyote.http11.upgrade.UpgradeNioProcessor;
+import org.apache.coyote.http11.upgrade.NioProcessor;
 import org.apache.juli.logging.Log;
 import org.apache.juli.logging.LogFactory;
 import org.apache.tomcat.util.net.AbstractEndpoint;
@@ -306,7 +306,7 @@ public class Http11NioProtocol extends AbstractHttp11JsseProtocol<NioChannel> {
                 SocketWrapper<NioChannel> socket,
                 ProtocolHandler httpUpgradeProcessor)
                 throws IOException {
-            return new UpgradeNioProcessor(socket, httpUpgradeProcessor,
+            return new NioProcessor(socket, httpUpgradeProcessor,
                     ((Http11NioProtocol) getProtocol()).getEndpoint().getSelectorPool());
         }
 

==================================================
AbstractProcessor.java
index b60918cba2..298539fcc7 100644
--- a/java/org/apache/coyote/http11/Http11Protocol.java
+++ b/java/org/apache/coyote/http11/Http11Protocol.java
@@ -23,7 +23,7 @@ import javax.servlet.http.ProtocolHandler;
 
 import org.apache.coyote.AbstractProtocol;
 import org.apache.coyote.Processor;
-import org.apache.coyote.http11.upgrade.UpgradeBioProcessor;
+import org.apache.coyote.http11.upgrade.BioProcessor;
 import org.apache.juli.logging.Log;
 import org.apache.tomcat.util.net.AbstractEndpoint;
 import org.apache.tomcat.util.net.JIoEndpoint;
@@ -212,7 +212,7 @@ public class Http11Protocol extends AbstractHttp11JsseProtocol<Socket> {
                 SocketWrapper<Socket> socket,
                 ProtocolHandler httpUpgradeProcessor)
                 throws IOException {
-            return new UpgradeBioProcessor(socket, httpUpgradeProcessor);
+            return new BioProcessor(socket, httpUpgradeProcessor);
         }
 
         @Override

==================================================
AbstractServletInputStream.java
similarity index 91%
rename from java/org/apache/coyote/http11/upgrade/UpgradeProcessor.java
rename to java/org/apache/coyote/http11/upgrade/AbstractProcessor.java
index b0eed729a7..88b06cf070 100644
--- a/java/org/apache/coyote/http11/upgrade/UpgradeProcessor.java
+++ b/java/org/apache/coyote/http11/upgrade/AbstractProcessor.java
@@ -32,19 +32,19 @@ import org.apache.tomcat.util.net.SocketStatus;
 import org.apache.tomcat.util.net.SocketWrapper;
 import org.apache.tomcat.util.res.StringManager;
 
-public abstract class UpgradeProcessor<S>
+public abstract class AbstractProcessor<S>
         implements Processor<S>, WebConnection {
 
     protected static final StringManager sm =
             StringManager.getManager(Constants.Package);
 
     private final ProtocolHandler httpUpgradeHandler;
-    private final UpgradeServletInputStream upgradeServletInputStream;
-    private final UpgradeServletOutputStream upgradeServletOutputStream;
+    private final AbstractServletInputStream upgradeServletInputStream;
+    private final AbstractServletOutputStream upgradeServletOutputStream;
 
-    protected UpgradeProcessor (ProtocolHandler httpUpgradeHandler,
-            UpgradeServletInputStream upgradeServletInputStream,
-            UpgradeServletOutputStream upgradeServletOutputStream) {
+    protected AbstractProcessor (ProtocolHandler httpUpgradeHandler,
+            AbstractServletInputStream upgradeServletInputStream,
+            AbstractServletOutputStream upgradeServletOutputStream) {
         this.httpUpgradeHandler = httpUpgradeHandler;
         this.upgradeServletInputStream = upgradeServletInputStream;
         this.upgradeServletOutputStream = upgradeServletOutputStream;

==================================================
AbstractServletOutputStream.java
similarity index 95%
rename from java/org/apache/coyote/http11/upgrade/UpgradeServletInputStream.java
rename to java/org/apache/coyote/http11/upgrade/AbstractServletInputStream.java
index 8917fcfee3..e68c91e142 100644
--- a/java/org/apache/coyote/http11/upgrade/UpgradeServletInputStream.java
+++ b/java/org/apache/coyote/http11/upgrade/AbstractServletInputStream.java
@@ -23,7 +23,7 @@ import javax.servlet.ServletInputStream;
 
 import org.apache.tomcat.util.res.StringManager;
 
-public abstract class UpgradeServletInputStream extends ServletInputStream {
+public abstract class AbstractServletInputStream extends ServletInputStream {
 
     protected static final StringManager sm =
             StringManager.getManager(Constants.Package);

==================================================
AprProcessor.java
similarity index 94%
rename from java/org/apache/coyote/http11/upgrade/UpgradeServletOutputStream.java
rename to java/org/apache/coyote/http11/upgrade/AbstractServletOutputStream.java
index ef570da3c1..a02b64bdd9 100644
--- a/java/org/apache/coyote/http11/upgrade/UpgradeServletOutputStream.java
+++ b/java/org/apache/coyote/http11/upgrade/AbstractServletOutputStream.java
@@ -23,7 +23,7 @@ import javax.servlet.WriteListener;
 
 import org.apache.tomcat.util.res.StringManager;
 
-public abstract class UpgradeServletOutputStream extends ServletOutputStream {
+public abstract class AbstractServletOutputStream extends ServletOutputStream {
 
     protected static final StringManager sm =
             StringManager.getManager(Constants.Package);

==================================================
AprServletInputStream.java
similarity index 83%
rename from java/org/apache/coyote/http11/upgrade/UpgradeAprProcessor.java
rename to java/org/apache/coyote/http11/upgrade/AprProcessor.java
index 8e4e811f21..aae257f498 100644
--- a/java/org/apache/coyote/http11/upgrade/UpgradeAprProcessor.java
+++ b/java/org/apache/coyote/http11/upgrade/AprProcessor.java
@@ -21,15 +21,15 @@ import javax.servlet.http.ProtocolHandler;
 import org.apache.tomcat.jni.Socket;
 import org.apache.tomcat.util.net.SocketWrapper;
 
-public class UpgradeAprProcessor extends UpgradeProcessor<Long> {
+public class AprProcessor extends AbstractProcessor<Long> {
 
     private static final int INFINITE_TIMEOUT = -1;
 
-    public UpgradeAprProcessor(SocketWrapper<Long> wrapper,
+    public AprProcessor(SocketWrapper<Long> wrapper,
             ProtocolHandler httpUpgradeProcessor) {
         super(httpUpgradeProcessor,
-                new UpgradeAprServletInputStream(wrapper),
-                new UpgradeAprServletOutputStream(wrapper));
+                new AprServletInputStream(wrapper),
+                new AprServletOutputStream(wrapper));
 
         Socket.timeoutSet(wrapper.getSocket().longValue(), INFINITE_TIMEOUT);
     }

==================================================
AprServletOutputStream.java
similarity index 91%
rename from java/org/apache/coyote/http11/upgrade/UpgradeAprServletInputStream.java
rename to java/org/apache/coyote/http11/upgrade/AprServletInputStream.java
index 0ce46bdc22..eb4490d16d 100644
--- a/java/org/apache/coyote/http11/upgrade/UpgradeAprServletInputStream.java
+++ b/java/org/apache/coyote/http11/upgrade/AprServletInputStream.java
@@ -20,12 +20,12 @@ import java.io.IOException;
 
 import org.apache.tomcat.util.net.SocketWrapper;
 
-public class UpgradeAprServletInputStream extends UpgradeServletInputStream {
+public class AprServletInputStream extends AbstractServletInputStream {
 
     private final long socket;
 
 
-    public UpgradeAprServletInputStream(SocketWrapper<Long> wrapper) {
+    public AprServletInputStream(SocketWrapper<Long> wrapper) {
         this.socket = wrapper.getSocket().longValue();
     }
 /*

==================================================
BioProcessor.java
similarity index 87%
rename from java/org/apache/coyote/http11/upgrade/UpgradeAprServletOutputStream.java
rename to java/org/apache/coyote/http11/upgrade/AprServletOutputStream.java
index 47959b5a73..ecfbb6d952 100644
--- a/java/org/apache/coyote/http11/upgrade/UpgradeAprServletOutputStream.java
+++ b/java/org/apache/coyote/http11/upgrade/AprServletOutputStream.java
@@ -20,12 +20,12 @@ import java.io.IOException;
 
 import org.apache.tomcat.util.net.SocketWrapper;
 
-public class UpgradeAprServletOutputStream extends UpgradeServletOutputStream {
+public class AprServletOutputStream extends AbstractServletOutputStream {
 
     private final long socket;
 
 
-    public UpgradeAprServletOutputStream(SocketWrapper<Long> wrapper) {
+    public AprServletOutputStream(SocketWrapper<Long> wrapper) {
         this.socket = wrapper.getSocket().longValue();
     }
 

==================================================
BioServletInputStream.java
similarity index 81%
rename from java/org/apache/coyote/http11/upgrade/UpgradeBioProcessor.java
rename to java/org/apache/coyote/http11/upgrade/BioProcessor.java
index 76c9e4e5fd..1581c0dcd2 100644
--- a/java/org/apache/coyote/http11/upgrade/UpgradeBioProcessor.java
+++ b/java/org/apache/coyote/http11/upgrade/BioProcessor.java
@@ -23,14 +23,14 @@ import javax.servlet.http.ProtocolHandler;
 
 import org.apache.tomcat.util.net.SocketWrapper;
 
-public class UpgradeBioProcessor extends UpgradeProcessor<Socket> {
+public class BioProcessor extends AbstractProcessor<Socket> {
 
     private static final int INFINITE_TIMEOUT = 0;
 
-    public UpgradeBioProcessor(SocketWrapper<Socket> wrapper,
+    public BioProcessor(SocketWrapper<Socket> wrapper,
             ProtocolHandler httpUpgradeProcessor) throws IOException {
-        super(httpUpgradeProcessor, new UpgradeBioServletInputStream(wrapper),
-                new UpgradeBioServletOutputStream(wrapper));
+        super(httpUpgradeProcessor, new BioServletInputStream(wrapper),
+                new BioServletOutputStream(wrapper));
 
         wrapper.getSocket().setSoTimeout(INFINITE_TIMEOUT);
     }

==================================================
BioServletOutputStream.java
similarity index 87%
rename from java/org/apache/coyote/http11/upgrade/UpgradeBioServletInputStream.java
rename to java/org/apache/coyote/http11/upgrade/BioServletInputStream.java
index d3a9eba84d..6ee52e96e5 100644
--- a/java/org/apache/coyote/http11/upgrade/UpgradeBioServletInputStream.java
+++ b/java/org/apache/coyote/http11/upgrade/BioServletInputStream.java
@@ -22,11 +22,11 @@ import java.net.Socket;
 
 import org.apache.tomcat.util.net.SocketWrapper;
 
-public class UpgradeBioServletInputStream extends UpgradeServletInputStream {
+public class BioServletInputStream extends AbstractServletInputStream {
 
     private final InputStream inputStream;
 
-    public UpgradeBioServletInputStream(SocketWrapper<Socket> wrapper)
+    public BioServletInputStream(SocketWrapper<Socket> wrapper)
             throws IOException {
         inputStream = wrapper.getSocket().getInputStream();
     }

==================================================
NioProcessor.java
similarity index 87%
rename from java/org/apache/coyote/http11/upgrade/UpgradeBioServletOutputStream.java
rename to java/org/apache/coyote/http11/upgrade/BioServletOutputStream.java
index 8c2a6651e1..4c7dd155b9 100644
--- a/java/org/apache/coyote/http11/upgrade/UpgradeBioServletOutputStream.java
+++ b/java/org/apache/coyote/http11/upgrade/BioServletOutputStream.java
@@ -22,11 +22,11 @@ import java.net.Socket;
 
 import org.apache.tomcat.util.net.SocketWrapper;
 
-public class UpgradeBioServletOutputStream extends UpgradeServletOutputStream {
+public class BioServletOutputStream extends AbstractServletOutputStream {
 
     private final OutputStream os;
 
-    public UpgradeBioServletOutputStream(SocketWrapper<Socket> wrapper)
+    public BioServletOutputStream(SocketWrapper<Socket> wrapper)
             throws IOException {
         os = wrapper.getSocket().getOutputStream();
     }

==================================================
NioServletInputStream.java
similarity index 82%
rename from java/org/apache/coyote/http11/upgrade/UpgradeNioProcessor.java
rename to java/org/apache/coyote/http11/upgrade/NioProcessor.java
index a8782dac55..450259b419 100644
--- a/java/org/apache/coyote/http11/upgrade/UpgradeNioProcessor.java
+++ b/java/org/apache/coyote/http11/upgrade/NioProcessor.java
@@ -22,15 +22,15 @@ import org.apache.tomcat.util.net.NioChannel;
 import org.apache.tomcat.util.net.NioSelectorPool;
 import org.apache.tomcat.util.net.SocketWrapper;
 
-public class UpgradeNioProcessor extends UpgradeProcessor<NioChannel> {
+public class NioProcessor extends AbstractProcessor<NioChannel> {
 
     private static final int INFINITE_TIMEOUT = -1;
 
-    public UpgradeNioProcessor(SocketWrapper<NioChannel> wrapper,
+    public NioProcessor(SocketWrapper<NioChannel> wrapper,
             ProtocolHandler httpUpgradeProcessor, NioSelectorPool pool) {
         super(httpUpgradeProcessor,
-                new UpgradeNioServletInputStream(wrapper, pool),
-                new UpgradeNioServletOutputStream(wrapper, pool));
+                new NioServletInputStream(wrapper, pool),
+                new NioServletOutputStream(wrapper, pool));
 
         wrapper.setTimeout(INFINITE_TIMEOUT);
     }

==================================================
NioServletOutputStream.java
similarity index 93%
rename from java/org/apache/coyote/http11/upgrade/UpgradeNioServletInputStream.java
rename to java/org/apache/coyote/http11/upgrade/NioServletInputStream.java
index 16c079c53b..ec56387a10 100644
--- a/java/org/apache/coyote/http11/upgrade/UpgradeNioServletInputStream.java
+++ b/java/org/apache/coyote/http11/upgrade/NioServletInputStream.java
@@ -26,12 +26,12 @@ import org.apache.tomcat.util.net.NioEndpoint;
 import org.apache.tomcat.util.net.NioSelectorPool;
 import org.apache.tomcat.util.net.SocketWrapper;
 
-public class UpgradeNioServletInputStream extends UpgradeServletInputStream {
+public class NioServletInputStream extends AbstractServletInputStream {
 
     private final NioChannel channel;
     private final NioSelectorPool pool;
 
-    public UpgradeNioServletInputStream(SocketWrapper<NioChannel> wrapper,
+    public NioServletInputStream(SocketWrapper<NioChannel> wrapper,
             NioSelectorPool pool) {
         this.channel = wrapper.getSocket();
         this.pool = pool;

==================================================
