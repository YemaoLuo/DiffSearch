3f205cc9d33c286ecf7a408685b41eeca3f6a58f
==================================================
Fix various potential timing issues with this test.
==================================================
Mark Thomas
==================================================
Thu Jun 25 19:28:02 2020 +0100
==================================================
TestWsSessionSuspendResume.java
Fix various potential timing issues with this test.

On the client side messages were sent via the async API in a loop. That
creates a risk of breakage as it is not permitted to send the next
message until the previous message completes and the client wasn't
checking that the previous message had completed. SWitching to the basic
API avoids this.

On the server side, resume() was being called inside an async callback.
It was possible for resume() to be called and one or more messages to be
processed before the call to messages.clear(). Switching to the basic
API allows the order to be controlled correctly.


==================================================
