865ce636ad8fca4f7205e015f0544d7e4cb63abe
==================================================
Javadoc fixes.
==================================================
Remy Maucherat
==================================================
Thu Jan 14 14:55:44 2016 +0000
==================================================
ByteMessage.java
Javadoc fixes.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1724626 13f79535-47bb-0310-9956-ffa450edef68



==================================================
Channel.java
index 91e6be808c..e300e7481d 100644
--- a/java/org/apache/catalina/tribes/ByteMessage.java
+++ b/java/org/apache/catalina/tribes/ByteMessage.java
@@ -77,7 +77,7 @@ public class ByteMessage implements Externalizable {
     /**
      * @see java.io.Externalizable#readExternal
      * @param in ObjectInput
-     * @throws IOException
+     * @throws IOException An IO error occurred
      */
     @Override
     public void readExternal(ObjectInput in ) throws IOException {
@@ -89,7 +89,7 @@ public class ByteMessage implements Externalizable {
     /**
      * @see java.io.Externalizable#writeExternal
      * @param out ObjectOutput
-     * @throws IOException
+     * @throws IOException An IO error occurred
      */
     @Override
     public void writeExternal(ObjectOutput out) throws IOException {

==================================================
ChannelException.java
index 17e2b4c051..be23cfe42b 100644
--- a/java/org/apache/catalina/tribes/Channel.java
+++ b/java/org/apache/catalina/tribes/Channel.java
@@ -253,6 +253,7 @@ public interface Channel {
      * send a pure byte array
      * @param options int - sender options, see class documentation for each interceptor that is configured in order to trigger interceptors
      * @return a unique Id that identifies the message that is sent
+     * @throws ChannelException if a serialization error happens.
      * @see ByteMessage
      * @see #SEND_OPTIONS_USE_ACK
      * @see #SEND_OPTIONS_ASYNCHRONOUS

==================================================
ChannelInterceptor.java
index 544eefb909..c81a39c8d2 100644
--- a/java/org/apache/catalina/tribes/ChannelException.java
+++ b/java/org/apache/catalina/tribes/ChannelException.java
@@ -33,7 +33,7 @@ public class ChannelException extends Exception {
      * Empty list to avoid reinstatiating lists
      */
     protected static final FaultyMember[] EMPTY_LIST = new FaultyMember[0];
-    /*
+    /**
      * Holds a list of faulty members
      */
     private ArrayList<FaultyMember> faultyMembers=null;
@@ -48,6 +48,7 @@ public class ChannelException extends Exception {
 
     /**
      * Constructor, creates a ChannelException with an error message
+     * @param message The error message
      * @see java.lang.Exception#Exception(String)
      */
     public ChannelException(String message) {
@@ -56,7 +57,7 @@ public class ChannelException extends Exception {
 
     /**
      * Constructor, creates a ChannelException with an error message and a cause
-     * @param message String
+     * @param message The error message
      * @param cause Throwable
      * @see java.lang.Exception#Exception(String,Throwable)
      */
@@ -75,7 +76,7 @@ public class ChannelException extends Exception {
 
     /**
      * Returns the message for this exception
-     * @return String
+     * @return the error message
      * @see java.lang.Exception#getMessage()
      */
     @Override
@@ -98,6 +99,7 @@ public class ChannelException extends Exception {
      * Adds a faulty member, and the reason the member failed.
      * @param mbr Member
      * @param x Exception
+     * @return <code>true</code> if the member was added
      */
     public boolean addFaultyMember(Member mbr, Exception x ) {
         return addFaultyMember(new FaultyMember(mbr,x));
@@ -106,6 +108,7 @@ public class ChannelException extends Exception {
     /**
      * Adds a list of faulty members
      * @param mbrs FaultyMember[]
+     * @return the number of members added
      */
     public int addFaultyMember(FaultyMember[] mbrs) {
         int result = 0;
@@ -118,6 +121,7 @@ public class ChannelException extends Exception {
     /**
      * Adds a faulty member
      * @param mbr FaultyMember
+     * @return <code>true</code> if the member was added
      */
     public boolean addFaultyMember(FaultyMember mbr) {
         if ( this.faultyMembers==null ) this.faultyMembers = new ArrayList<>();

==================================================
ChannelReceiver.java
index 28f86e465d..9c7368f0b0 100644
--- a/java/org/apache/catalina/tribes/ChannelInterceptor.java
+++ b/java/org/apache/catalina/tribes/ChannelInterceptor.java
@@ -86,7 +86,7 @@ public interface ChannelInterceptor extends MembershipListener, Heartbeat {
      * @param destination Member[] - the destination for this message
      * @param msg ChannelMessage - the message to be sent
      * @param payload InterceptorPayload - the payload, carrying an error handler and future useful data, can be null
-     * @throws ChannelException
+     * @throws ChannelException if a serialization error happens.
      * @see ErrorHandler
      * @see InterceptorPayload
      */

==================================================
Member.java
index 4484c6c7ff..b1dae2eb1c 100644
--- a/java/org/apache/catalina/tribes/ChannelReceiver.java
+++ b/java/org/apache/catalina/tribes/ChannelReceiver.java
@@ -29,7 +29,7 @@ public interface ChannelReceiver extends Heartbeat {
 
     /**
      * Start listening for incoming messages on the host/port
-     * @throws java.io.IOException
+     * @throws java.io.IOException Listen failed
      */
     public void start() throws java.io.IOException;
 

==================================================
MembershipService.java
index 4dccacc059..4d17dfcf6c 100644
--- a/java/org/apache/catalina/tribes/Member.java
+++ b/java/org/apache/catalina/tribes/Member.java
@@ -36,7 +36,7 @@ public interface Member {
     public static final byte[] SHUTDOWN_PAYLOAD = new byte[] {66, 65, 66, 89, 45, 65, 76, 69, 88};
 
     /**
-     * Returns the name of this node, should be unique within the group.
+     * @return the name of this node, should be unique within the group.
      */
     public String getName();
 
@@ -129,6 +129,7 @@ public interface Member {
      * Highly optimized version of serializing a member into a byte array
      * Returns a cached byte[] reference, do not modify this data
      * @param getalive  calculate memberAlive time
+     * @return the data as a byte array
      */
     public byte[] getData(boolean getalive);
 
@@ -137,12 +138,14 @@ public interface Member {
      * Returns a cached byte[] reference, do not modify this data
      * @param getalive  calculate memberAlive time
      * @param reset     reset the cached data package, and create a new one
+     * @return the data as a byte array
      */
     public byte[] getData(boolean getalive, boolean reset);
 
     /**
      * Length of a message obtained by {@link #getData(boolean)} or
      * {@link #getData(boolean, boolean)}.
+     * @return the data length
      */
     public int getDataLength();
 }

==================================================
GroupChannel.java
index 7138686dd7..fb6f8db639 100644
--- a/java/org/apache/catalina/tribes/MembershipService.java
+++ b/java/org/apache/catalina/tribes/MembershipService.java
@@ -35,10 +35,12 @@ public interface MembershipService {
      * @param properties - to be used to configure the membership service.
      */
     public void setProperties(java.util.Properties properties);
+
     /**
-     * Returns the properties for the configuration used.
+     * @return the properties for the configuration used.
      */
     public java.util.Properties getProperties();
+
     /**
      * Starts the membership service. If a membership listeners is added
      * the listener will start to receive membership events.
@@ -65,7 +67,6 @@ public interface MembershipService {
      * stops broad casting the server
      * @throws java.lang.IllegalArgumentException if the level is incorrect.
      */
-
     public void stop(int level);
 
     /**
@@ -73,36 +74,45 @@ public interface MembershipService {
      */
     public boolean hasMembers();
 
-
     /**
-     *
-     * @param mbr Member
-     * @return Member
+     * Retrieve the specified member from the membership.
+     * @param mbr The member to retrieve
+     * @return the member
      */
     public Member getMember(Member mbr);
+
     /**
-     * Returns a list of all the members in the cluster.
+     * @return a list of all the members in the cluster.
      */
-
     public Member[] getMembers();
 
     /**
-     * Returns the member object that defines this member
+     * Get the local member.
+     * @return the member object that defines this member
+     * @param incAliveTime <code>true</code> to set the alive time
+     *  on the local member
      */
     public Member getLocalMember(boolean incAliveTime);
 
     /**
-     * Return all members by name
+     * @return all members by name
      */
-    public String[] getMembersByName() ;
+    public String[] getMembersByName();
 
     /**
-     * Return the member by name
+     * Get a member.
+     * @param name The member name
+     * @return the member
      */
-    public Member findMemberByName(String name) ;
+    public Member findMemberByName(String name);
 
     /**
-     * Sets the local member properties for broadcasting
+     * Sets the local member properties for broadcasting.
+     *
+     * @param listenHost Listen to host
+     * @param listenPort Listen to port
+     * @param securePort Use a secure port
+     * @param udpPort Use UDP
      */
     public void setLocalMemberProperties(String listenHost, int listenPort, int securePort, int udpPort);
 
@@ -114,7 +124,7 @@ public interface MembershipService {
     public void setMembershipListener(MembershipListener listener);
 
     /**
-     * removes the membership listener.
+     * Removes the membership listener.
      */
     public void removeMembershipListener();
 
@@ -128,9 +138,9 @@ public interface MembershipService {
     public void setDomain(byte[] domain);
 
     /**
-     * Broadcasts a message to all members
-     * @param message
-     * @throws ChannelException
+     * Broadcasts a message to all members.
+     * @param message The message to broadcast
+     * @throws ChannelException Message broadcast failed
      */
     public void broadcast(ChannelMessage message) throws ChannelException;
 

==================================================
RpcCallback.java
index faba27edc8..f1657660e6 100644
--- a/java/org/apache/catalina/tribes/group/GroupChannel.java
+++ b/java/org/apache/catalina/tribes/group/GroupChannel.java
@@ -367,7 +367,7 @@ public class GroupChannel extends ChannelInterceptorBase implements ManagedChann
     /**
      * Sets up the default implementation interceptor stack
      * if no interceptors have been added
-     * @throws ChannelException
+     * @throws ChannelException Cluster error
      */
     protected synchronized void setupDefaultStack() throws ChannelException {
         if (getFirstInterceptor() != null &&
@@ -379,7 +379,7 @@ public class GroupChannel extends ChannelInterceptorBase implements ManagedChann
     /**
      * Validates the option flags that each interceptor is using and reports
      * an error if two interceptor share the same flag.
-     * @throws ChannelException
+     * @throws ChannelException Error with option flag
      */
     protected void checkOptionFlags() throws ChannelException {
         StringBuilder conflicts = new StringBuilder();
@@ -412,9 +412,9 @@ public class GroupChannel extends ChannelInterceptorBase implements ManagedChann
     }
 
     /**
-     * Starts the channel
+     * Starts the channel.
      * @param svc int - what service to start
-     * @throws ChannelException
+     * @throws ChannelException Start error
      * @see org.apache.catalina.tribes.Channel#start(int)
      */
     @Override
@@ -429,9 +429,9 @@ public class GroupChannel extends ChannelInterceptorBase implements ManagedChann
     }
 
     /**
-     * Stops the channel
+     * Stops the channel.
      * @param svc int
-     * @throws ChannelException
+     * @throws ChannelException Stop error
      * @see org.apache.catalina.tribes.Channel#stop(int)
      */
     @Override

==================================================
RpcChannel.java
index c508374e79..ba70ea98c1 100644
--- a/java/org/apache/catalina/tribes/group/RpcCallback.java
+++ b/java/org/apache/catalina/tribes/group/RpcCallback.java
@@ -28,16 +28,17 @@ import org.apache.catalina.tribes.Member;
 public interface RpcCallback {
 
     /**
-     *
-     * @param msg Serializable
-     * @return Serializable - null if no reply should be sent
+     * Allows sending a response to a recieved message.
+     * @param msg The message
+     * @param sender Member
+     * @return Serializable object, <code>null</code> if no reply should be sent
      */
     public Serializable replyRequest(Serializable msg, Member sender);
 
     /**
      * If the reply has already been sent to the requesting thread,
      * the rpc callback can handle any data that comes in after the fact.
-     * @param msg Serializable
+     * @param msg The message
      * @param sender Member
      */
     public void leftOver(Serializable msg, Member sender);

==================================================
GzipInterceptor.java
index d45b8cceae..438424b33b 100644
--- a/java/org/apache/catalina/tribes/group/RpcChannel.java
+++ b/java/org/apache/catalina/tribes/group/RpcChannel.java
@@ -75,7 +75,7 @@ public class RpcChannel implements ChannelListener{
      * @param channelOptions channel sender options
      * @param timeout long - timeout in milliseconds, if no reply is received within this time null is returned
      * @return Response[] - an array of response objects.
-     * @throws ChannelException
+     * @throws ChannelException Error sending message
      */
     public Response[] send(Member[] destination,
                            Serializable message,

==================================================
SimpleCoordinator.java
index 5bb5f39162..21c75e0a7a 100644
--- a/java/org/apache/catalina/tribes/group/interceptors/GzipInterceptor.java
+++ b/java/org/apache/catalina/tribes/group/interceptors/GzipInterceptor.java
@@ -80,7 +80,7 @@ public class GzipInterceptor extends ChannelInterceptorBase {
     /**
      * @param data  Data to decompress
      * @return      Decompressed data
-     * @throws IOException
+     * @throws IOException Compression error
      */
     public static byte[] decompress(byte[] data) throws IOException {
         ByteArrayOutputStream bout =

==================================================
ObjectReader.java
index a6933bbac2..ebdd6aecb5 100644
--- a/java/org/apache/catalina/tribes/group/interceptors/SimpleCoordinator.java
+++ b/java/org/apache/catalina/tribes/group/interceptors/SimpleCoordinator.java
@@ -58,7 +58,7 @@ public class SimpleCoordinator extends ChannelInterceptorBase {
     /**
      * Override to receive view changes.
      *
-     * @param view
+     * @param view The members array
      */
     protected void viewChange(final Member[] view) {
     }

==================================================
XByteBuffer.java
index 2d0a4ac5ce..b47e7463c5 100644
--- a/java/org/apache/catalina/tribes/io/ObjectReader.java
+++ b/java/org/apache/catalina/tribes/io/ObjectReader.java
@@ -93,9 +93,8 @@ public class ObjectReader {
      * @param len length in buffer
      * @param count whether to return the count
      * @return number of messages that was sent to callback (or -1 if count == false)
-     * @throws java.io.IOException
      */
-    public int append(ByteBuffer data, int len, boolean count) throws java.io.IOException {
+    public int append(ByteBuffer data, int len, boolean count) {
        buffer.append(data,len);
        int pkgCnt = -1;
        if ( count ) pkgCnt = buffer.countPackages();
@@ -118,9 +117,8 @@ public class ObjectReader {
      * @see XByteBuffer#extractPackage(boolean)
      *
      * @return number of received packages/messages
-     * @throws java.io.IOException
      */
-    public ChannelMessage[] execute() throws java.io.IOException {
+    public ChannelMessage[] execute() {
         int pkgCnt = buffer.countPackages();
         ChannelMessage[] result = new ChannelMessage[pkgCnt];
         for (int i=0; i<pkgCnt; i++)  {

==================================================
McastService.java
index c55106333a..7f86682110 100644
--- a/java/org/apache/catalina/tribes/io/XByteBuffer.java
+++ b/java/org/apache/catalina/tribes/io/XByteBuffer.java
@@ -84,7 +84,8 @@ public class XByteBuffer {
     /**
      * Constructs a new XByteBuffer.<br>
      * TODO use a pool of byte[] for performance
-     * @param size - the initial size of the byte buffer
+     * @param size the initial size of the byte buffer
+     * @param discard Flag for discarding invalid packages
      */
     public XByteBuffer(int size, boolean discard) {
         buf = new byte[size];
@@ -128,7 +129,7 @@ public class XByteBuffer {
     }
 
     /**
-     * Returns the bytes in the buffer, in its exact length
+     * @return the bytes in the buffer, in its exact length
      */
     public byte[] getBytes() {
         byte[] b = new byte[bufSize];
@@ -392,7 +393,6 @@ public class XByteBuffer {
      * @param b - the byte array containing the four bytes
      * @param off - the offset
      * @return the integer value constructed from the four bytes
-     * @exception java.lang.ArrayIndexOutOfBoundsException
      */
     public static int toInt(byte[] b,int off){
         return ( ( b[off+3]) & 0xFF) +
@@ -406,7 +406,6 @@ public class XByteBuffer {
      * @param b - the byte array containing the four bytes
      * @param off - the offset
      * @return the long value constructed from the eight bytes
-     * @exception java.lang.ArrayIndexOutOfBoundsException
      */
     public static long toLong(byte[] b,int off){
         return ( ( (long) b[off+7]) & 0xFF) +
@@ -421,9 +420,11 @@ public class XByteBuffer {
 
 
     /**
-     * Converts a boolean to a 1-byte array
-     * @param bool - the integer
-     * @return - 1-byte array
+     * Converts a boolean and put it in a byte array.
+     * @param bool the integer
+     * @param data the byte buffer in which the boolean will be placed
+     * @param offset the offset in the byte array
+     * @return the byte array
      */
     public static byte[] toBytes(boolean bool, byte[] data, int offset) {
         data[offset] = (byte)(bool?1:0);
@@ -431,7 +432,7 @@ public class XByteBuffer {
     }
 
     /**
-     * Converts a byte array entry to boolean
+     * Converts a byte array entry to boolean.
      * @param b byte array
      * @param offset within byte array
      * @return true if byte array entry is non-zero, false otherwise
@@ -442,11 +443,13 @@ public class XByteBuffer {
 
 
     /**
-     * Converts an integer to four bytes
-     * @param n - the integer
-     * @return - four bytes in an array
+     * Converts an integer to four bytes.
+     * @param n the integer
+     * @param b the byte buffer in which the integer will be placed
+     * @param offset the offset in the byte array
+     * @return four bytes in an array
      */
-    public static byte[] toBytes(int n,byte[] b, int offset) {
+    public static byte[] toBytes(int n, byte[] b, int offset) {
         b[offset+3] = (byte) (n);
         n >>>= 8;
         b[offset+2] = (byte) (n);
@@ -458,9 +461,11 @@ public class XByteBuffer {
     }
 
     /**
-     * Converts an long to eight bytes
-     * @param n - the long
-     * @return - eight bytes in an array
+     * Converts an long to eight bytes.
+     * @param n the long
+     * @param b the byte buffer in which the integer will be placed
+     * @param offset the offset in the byte array
+     * @return eight bytes in an array
      */
     public static byte[] toBytes(long n, byte[] b, int offset) {
         b[offset+7] = (byte) (n);
@@ -482,7 +487,7 @@ public class XByteBuffer {
     }
 
     /**
-     * Similar to a String.IndexOf, but uses pure bytes
+     * Similar to a String.IndexOf, but uses pure bytes.
      * @param src - the source bytes to be searched
      * @param srcOff - offset on the source buffer
      * @param find - the string to be found within src
@@ -567,7 +572,7 @@ public class XByteBuffer {
      * Serializes a message into cluster data
      * @param msg ClusterMessage
      * @return serialized content as byte[] array
-     * @throws IOException
+     * @throws IOException Serialization error
      */
     public static byte[] serialize(Serializable msg) throws IOException {
         ByteArrayOutputStream outs = new ByteArrayOutputStream();

==================================================
McastServiceImpl.java
index 0d707edacc..761406458e 100644
--- a/java/org/apache/catalina/tribes/membership/McastService.java
+++ b/java/org/apache/catalina/tribes/membership/McastService.java
@@ -91,7 +91,7 @@ public class McastService implements MembershipService,MembershipListener,Messag
     }
 
     /**
-     *
+     * Sets the properties for the membership service.
      * @param properties
      * <br>All are required<br>
      * 1. mcastPort - the port to listen to<BR>
@@ -115,7 +115,7 @@ public class McastService implements MembershipService,MembershipListener,Messag
     }
 
     /**
-     * Return the properties, see setProperties
+     * {@inheritDoc}
      */
     @Override
     public Properties getProperties() {
@@ -123,14 +123,14 @@ public class McastService implements MembershipService,MembershipListener,Messag
     }
 
     /**
-     * Return the local member name
+     * @return the local member name
      */
     public String getLocalMemberName() {
         return localMember.toString() ;
     }
 
     /**
-     * Return the local member
+     * {@inheritDoc}
      */
     @Override
     public Member getLocalMember(boolean alive) {
@@ -139,7 +139,7 @@ public class McastService implements MembershipService,MembershipListener,Messag
     }
 
     /**
-     * Sets the local member properties for broadcasting
+     * {@inheritDoc}
      */
     @Override
     public void setLocalMemberProperties(String listenHost, int listenPort, int securePort, int udpPort) {

==================================================
AbstractReplicatedMap.java
index e456f778f9..e69393db34 100644
--- a/java/org/apache/catalina/tribes/membership/McastServiceImpl.java
+++ b/java/org/apache/catalina/tribes/membership/McastServiceImpl.java
@@ -156,16 +156,19 @@ public class McastServiceImpl {
     protected final boolean localLoopbackDisabled;
 
     /**
-     * Create a new mcast service impl
+     * Create a new mcast service instance.
      * @param member - the local member
      * @param sendFrequency - the time (ms) in between pings sent out
      * @param expireTime - the time (ms) for a member to expire
      * @param port - the mcast port
      * @param bind - the bind address (not sure this is used yet)
      * @param mcastAddress - the mcast address
+     * @param ttl multicast ttl that will be set on the socket
+     * @param soTimeout Socket timeout
      * @param service - the callback service
+     * @param msgservice Message listener
      * @param localLoopbackDisabled - disable loopbackMode
-     * @throws IOException
+     * @throws IOException Init error
      */
     public McastServiceImpl(
         MemberImpl member,
@@ -298,7 +301,9 @@ public class McastServiceImpl {
     }
 
     /**
-     * Stops the service
+     * Stops the service.
+     * @param level Stop status
+     * @return <code>true</code> if the stop is complete
      * @throws IOException if the service fails to disconnect from the sockets
      */
     public synchronized boolean stop(int level) throws IOException {
@@ -336,7 +341,7 @@ public class McastServiceImpl {
 
     /**
      * Receive a datagram packet, locking wait
-     * @throws IOException
+     * @throws IOException Received failed
      */
     public void receive() throws IOException {
         boolean checkexpired = true;
@@ -477,16 +482,17 @@ public class McastServiceImpl {
     }
 
     /**
-     * Send a ping
-     * @throws IOException
+     * Send a ping.
+     * @param checkexpired <code>true</code> to check for expiration
+     * @throws IOException Send error
      */
-    public void send(boolean checkexpired) throws IOException{
+    public void send(boolean checkexpired) throws IOException {
         send(checkexpired,null);
     }
 
     private final Object sendLock = new Object();
 
-    public void send(boolean checkexpired, DatagramPacket packet) throws IOException{
+    public void send(boolean checkexpired, DatagramPacket packet) throws IOException {
         checkexpired = (checkexpired && (packet==null));
         //ignore if we haven't started the sender
         //if ( (startLevel&Channel.MBR_TX_SEQ) != Channel.MBR_TX_SEQ ) return;

==================================================
LazyReplicatedMap.java
index 345b7a4460..2bf001fff8 100644
--- a/java/org/apache/catalina/tribes/tipis/AbstractReplicatedMap.java
+++ b/java/org/apache/catalina/tribes/tipis/AbstractReplicatedMap.java
@@ -156,12 +156,14 @@ public abstract class AbstractReplicatedMap<K,V>
 //------------------------------------------------------------------------------
 
     /**
-     * Creates a new map
+     * Creates a new map.
+     * @param owner The map owner
      * @param channel The channel to use for communication
      * @param timeout long - timeout for RPC messags
      * @param mapContextName String - unique name for this map, to allow multiple maps per channel
      * @param initialCapacity int - the size of this map, see HashMap
      * @param loadFactor float - load factor, see HashMap
+     * @param channelSendOptions Send options
      * @param cls - a list of classloaders to be used for deserialization of objects.
      * @param terminate - Flag for whether to terminate this map that failed to start.
      */
@@ -248,7 +250,7 @@ public abstract class AbstractReplicatedMap<K,V>
      * Sends a ping out to all the members in the cluster, not just map members
      * that this map is alive.
      * @param timeout long
-     * @throws ChannelException
+     * @throws ChannelException Send error
      */
     protected void ping(long timeout) throws ChannelException {
         //send out a map membership message, only wait for the first reply
@@ -307,7 +309,7 @@ public abstract class AbstractReplicatedMap<K,V>
      * Helper method to broadcast a message to all members in a channel
      * @param msgtype int
      * @param rpc boolean
-     * @throws ChannelException
+     * @throws ChannelException Send error
      */
     protected void broadcast(int msgtype, boolean rpc) throws ChannelException {
         Member[] members = channel.getMembers();
@@ -400,6 +402,7 @@ public abstract class AbstractReplicatedMap<K,V>
     /**
      * Replicates any changes to the object since the last time
      * The object has to be primary, ie, if the object is a proxy or a backup, it will not be replicated<br>
+     * @param key The object to replicate
      * @param complete - if set to true, the object is replicated to its backup
      * if set to false, only objects that implement ReplicatedMapEntry and the isDirty() returns true will
      * be replicated
@@ -1301,8 +1304,8 @@ public abstract class AbstractReplicatedMap<K,V>
          * @param offset int
          * @param length int
          * @param diff boolean
-         * @throws IOException
-         * @throws ClassNotFoundException
+         * @throws IOException IO error
+         * @throws ClassNotFoundException Deserialization error
          */
         @SuppressWarnings("unchecked")
         public void apply(byte[] data, int offset, int length, boolean diff) throws IOException, ClassNotFoundException {

==================================================
ReplicatedMap.java
index 3281672fd8..fbbe3986f7 100644
--- a/java/org/apache/catalina/tribes/tipis/LazyReplicatedMap.java
+++ b/java/org/apache/catalina/tribes/tipis/LazyReplicatedMap.java
@@ -72,11 +72,13 @@ public class LazyReplicatedMap<K,V> extends AbstractReplicatedMap<K,V> {
 //------------------------------------------------------------------------------
     /**
      * Creates a new map
+     * @param owner The map owner
      * @param channel The channel to use for communication
      * @param timeout long - timeout for RPC messags
      * @param mapContextName String - unique name for this map, to allow multiple maps per channel
      * @param initialCapacity int - the size of this map, see HashMap
      * @param loadFactor float - load factor, see HashMap
+     * @param cls Class loaders
      */
     public LazyReplicatedMap(MapOwner owner, Channel channel, long timeout, String mapContextName, int initialCapacity, float loadFactor, ClassLoader[] cls) {
         super(owner,channel,timeout,mapContextName,initialCapacity,loadFactor, Channel.SEND_OPTIONS_DEFAULT,cls, true);
@@ -84,10 +86,12 @@ public class LazyReplicatedMap<K,V> extends AbstractReplicatedMap<K,V> {
 
     /**
      * Creates a new map
+     * @param owner The map owner
      * @param channel The channel to use for communication
      * @param timeout long - timeout for RPC messags
      * @param mapContextName String - unique name for this map, to allow multiple maps per channel
      * @param initialCapacity int - the size of this map, see HashMap
+     * @param cls Class loaders
      */
     public LazyReplicatedMap(MapOwner owner, Channel channel, long timeout, String mapContextName, int initialCapacity, ClassLoader[] cls) {
         super(owner, channel,timeout,mapContextName,initialCapacity, AbstractReplicatedMap.DEFAULT_LOAD_FACTOR, Channel.SEND_OPTIONS_DEFAULT, cls, true);
@@ -95,9 +99,11 @@ public class LazyReplicatedMap<K,V> extends AbstractReplicatedMap<K,V> {
 
     /**
      * Creates a new map
+     * @param owner The map owner
      * @param channel The channel to use for communication
      * @param timeout long - timeout for RPC messags
      * @param mapContextName String - unique name for this map, to allow multiple maps per channel
+     * @param cls Class loaders
      */
     public LazyReplicatedMap(MapOwner owner, Channel channel, long timeout, String mapContextName, ClassLoader[] cls) {
         super(owner, channel,timeout,mapContextName, AbstractReplicatedMap.DEFAULT_INITIAL_CAPACITY,AbstractReplicatedMap.DEFAULT_LOAD_FACTOR,Channel.SEND_OPTIONS_DEFAULT, cls, true);
@@ -105,9 +111,11 @@ public class LazyReplicatedMap<K,V> extends AbstractReplicatedMap<K,V> {
 
     /**
      * Creates a new map
+     * @param owner The map owner
      * @param channel The channel to use for communication
      * @param timeout long - timeout for RPC messags
      * @param mapContextName String - unique name for this map, to allow multiple maps per channel
+     * @param cls Class loaders
      * @param terminate boolean - Flag for whether to terminate this map that failed to start.
      */
     public LazyReplicatedMap(MapOwner owner, Channel channel, long timeout, String mapContextName, ClassLoader[] cls, boolean terminate) {
@@ -134,7 +142,7 @@ public class LazyReplicatedMap<K,V> extends AbstractReplicatedMap<K,V> {
      * @param key Object
      * @param value Object
      * @return Member - the backup node
-     * @throws ChannelException
+     * @throws ChannelException Cluster error
      */
     @Override
     protected Member[] publishEntryInfo(Object key, Object value) throws ChannelException {

==================================================
ReceiverBase.java
index ee2681225c..e69e9fa270 100644
--- a/java/org/apache/catalina/tribes/tipis/ReplicatedMap.java
+++ b/java/org/apache/catalina/tribes/tipis/ReplicatedMap.java
@@ -64,11 +64,13 @@ public class ReplicatedMap<K,V> extends AbstractReplicatedMap<K,V> {
     //--------------------------------------------------------------------------
     /**
      * Creates a new map
+     * @param owner The map owner
      * @param channel The channel to use for communication
      * @param timeout long - timeout for RPC messags
      * @param mapContextName String - unique name for this map, to allow multiple maps per channel
      * @param initialCapacity int - the size of this map, see HashMap
      * @param loadFactor float - load factor, see HashMap
+     * @param cls Class loaders
      */
     public ReplicatedMap(MapOwner owner, Channel channel, long timeout, String mapContextName, int initialCapacity,float loadFactor, ClassLoader[] cls) {
         super(owner,channel, timeout, mapContextName, initialCapacity, loadFactor, Channel.SEND_OPTIONS_DEFAULT, cls, true);
@@ -76,10 +78,12 @@ public class ReplicatedMap<K,V> extends AbstractReplicatedMap<K,V> {
 
     /**
      * Creates a new map
+     * @param owner The map owner
      * @param channel The channel to use for communication
      * @param timeout long - timeout for RPC messags
      * @param mapContextName String - unique name for this map, to allow multiple maps per channel
      * @param initialCapacity int - the size of this map, see HashMap
+     * @param cls Class loaders
      */
     public ReplicatedMap(MapOwner owner, Channel channel, long timeout, String mapContextName, int initialCapacity, ClassLoader[] cls) {
         super(owner,channel, timeout, mapContextName, initialCapacity, AbstractReplicatedMap.DEFAULT_LOAD_FACTOR,Channel.SEND_OPTIONS_DEFAULT, cls, true);
@@ -87,9 +91,11 @@ public class ReplicatedMap<K,V> extends AbstractReplicatedMap<K,V> {
 
     /**
      * Creates a new map
+     * @param owner The map owner
      * @param channel The channel to use for communication
      * @param timeout long - timeout for RPC messags
      * @param mapContextName String - unique name for this map, to allow multiple maps per channel
+     * @param cls Class loaders
      */
     public ReplicatedMap(MapOwner owner, Channel channel, long timeout, String mapContextName, ClassLoader[] cls) {
         super(owner, channel, timeout, mapContextName,AbstractReplicatedMap.DEFAULT_INITIAL_CAPACITY, AbstractReplicatedMap.DEFAULT_LOAD_FACTOR, Channel.SEND_OPTIONS_DEFAULT, cls, true);
@@ -97,9 +103,11 @@ public class ReplicatedMap<K,V> extends AbstractReplicatedMap<K,V> {
 
     /**
      * Creates a new map
+     * @param owner The map owner
      * @param channel The channel to use for communication
      * @param timeout long - timeout for RPC messags
      * @param mapContextName String - unique name for this map, to allow multiple maps per channel
+     * @param cls Class loaders
      * @param terminate boolean - Flag for whether to terminate this map that failed to start.
      */
     public ReplicatedMap(MapOwner owner, Channel channel, long timeout, String mapContextName, ClassLoader[] cls, boolean terminate) {
@@ -125,7 +133,7 @@ public class ReplicatedMap<K,V> extends AbstractReplicatedMap<K,V> {
      * @param key Object
      * @param value Object
      * @return Member - the backup node
-     * @throws ChannelException
+     * @throws ChannelException Cluster error
      */
     @Override
     protected Member[] publishEntryInfo(Object key, Object value) throws ChannelException {

==================================================
RxTaskPool.java
index 2cc766883e..a1566cff6b 100644
--- a/java/org/apache/catalina/tribes/transport/ReceiverBase.java
+++ b/java/org/apache/catalina/tribes/transport/ReceiverBase.java
@@ -175,7 +175,7 @@ public abstract class ReceiverBase implements ChannelReceiver, ListenCallback, R
      * @param portstart     Starting port for bind attempts
      * @param retries       Number of times to attempt to bind (port incremented
      *                      between attempts)
-     * @throws IOException
+     * @throws IOException Socket bind error
      */
     protected void bind(ServerSocket socket, int portstart, int retries) throws IOException {
         synchronized (bindLock) {
@@ -202,11 +202,12 @@ public abstract class ReceiverBase implements ChannelReceiver, ListenCallback, R
 
     /**
      * Same as bind() except it does it for the UDP port
-     * @param socket
-     * @param portstart
-     * @param retries
-     * @return int
-     * @throws IOException
+     * @param socket The socket to bind
+     * @param portstart     Starting port for bind attempts
+     * @param retries       Number of times to attempt to bind (port incremented
+     *                      between attempts)
+     * @return int The retry count
+     * @throws IOException Socket bind error
      */
     protected int bindUdp(DatagramSocket socket, int portstart, int retries) throws IOException {
         InetSocketAddress addr = null;

==================================================
BioReplicationTask.java
index 7ae844bf3f..4b6b2fb90a 100644
--- a/java/org/apache/catalina/tribes/transport/RxTaskPool.java
+++ b/java/org/apache/catalina/tribes/transport/RxTaskPool.java
@@ -59,6 +59,7 @@ public class RxTaskPool {
 
     /**
      * Find an idle worker thread, if any.  Could return null.
+     * @return a worker
      */
     public AbstractRxTask getRxTask()
     {
@@ -95,6 +96,7 @@ public class RxTaskPool {
     /**
      * Called by the worker thread to return itself to the
      * idle pool.
+     * @param worker The worker
      */
     public void returnWorker (AbstractRxTask worker) {
         if ( running ) {

==================================================
BioSender.java
index f42d369597..77fe0eefb9 100644
--- a/java/org/apache/catalina/tribes/transport/bio/BioReplicationTask.java
+++ b/java/org/apache/catalina/tribes/transport/bio/BioReplicationTask.java
@@ -134,8 +134,9 @@ public class BioReplicationTask extends AbstractRxTask {
      * interest in OP_READ.  When this method completes it
      * re-enables OP_READ and calls wakeup() on the selector
      * so the selector will resume watching this channel.
+     * @throws Exception IO exception or execute exception
      */
-    protected void drainSocket () throws Exception {
+    protected void drainSocket() throws Exception {
         InputStream in = socket.getInputStream();
         // loop while data available, channel is non-blocking
         byte[] buf = new byte[1024];
@@ -149,8 +150,8 @@ public class BioReplicationTask extends AbstractRxTask {
 
 
     /**
-     * send a reply-acknowledgment (6,2,3)
-     * @param command
+     * Send a reply-acknowledgment (6,2,3)
+     * @param command The command to write
      */
     protected void sendAck(byte[] command) {
         try {

==================================================
NioReceiver.java
index 5639f919ea..266dc3ef3d 100644
--- a/java/org/apache/catalina/tribes/transport/bio/BioSender.java
+++ b/java/org/apache/catalina/tribes/transport/bio/BioSender.java
@@ -99,6 +99,9 @@ public class BioSender extends AbstractSender {
 
     /**
      * Send message.
+     * @param data The data to send
+     * @param waitForAck Wait for an ack
+     * @throws IOException An IO error occured sending the message
      */
     public  void sendMessage(byte[] data, boolean waitForAck) throws IOException {
         IOException exception = null;
@@ -129,9 +132,6 @@ public class BioSender extends AbstractSender {
     }
 
 
-    /**
-     * Name of this SockerSender
-     */
     @Override
     public String toString() {
         StringBuilder buf = new StringBuilder("DataSender[(");
@@ -143,8 +143,9 @@ public class BioSender extends AbstractSender {
     // --------------------------------------------------------- Protected Methods
 
     /**
-     * open real socket and set time out when waitForAck is enabled
-     * is socket open return directly
+     * Open real socket and set time out when waitForAck is enabled
+     * is socket open return directly.
+     * @throws IOException Error opening socket
      */
     protected void openSocket() throws IOException {
        if(isConnected()) return ;
@@ -215,8 +216,10 @@ public class BioSender extends AbstractSender {
      * @see #openSocket()
      * @see #sendMessage(byte[], boolean)
      *
-     * @param data
-     *            data to send
+     * @param data Data to send
+     * @param reconnect Do a reconnect (close socket then reopen)
+     * @param waitForAck Wait for an acknowledgement
+     * @throws IOException IO error writing data
      * @since 5.5.10
      */
 
@@ -234,8 +237,7 @@ public class BioSender extends AbstractSender {
     /**
      * Wait for Acknowledgement from other server.
      * FIXME Please, not wait only for three characters, better control that the wait ack message is correct.
-     * @throws java.io.IOException
-     * @throws java.net.SocketTimeoutException
+     * @throws IOException An IO error occurred
      */
     protected void waitForAck() throws java.io.IOException {
         try {

==================================================
NioReplicationTask.java
index dba5076845..1d4211c7bb 100644
--- a/java/org/apache/catalina/tribes/transport/nio/NioReceiver.java
+++ b/java/org/apache/catalina/tribes/transport/nio/NioReceiver.java
@@ -236,10 +236,9 @@ public class NioReceiver extends ReceiverBase implements Runnable {
 
 
     /**
-     * get data from channel and store in byte array
+     * Get data from channel and store in byte array
      * send it to cluster
-     * @throws IOException
-     * @throws java.nio.channels.ClosedChannelException
+     * @throws IOException IO error
      */
     protected void listen() throws Exception {
         if (doListen()) {
@@ -397,6 +396,11 @@ public class NioReceiver extends ReceiverBase implements Runnable {
     /**
      * Register the given channel with the given selector for
      * the given operations of interest
+     * @param selector The selector to use
+     * @param channel The channel
+     * @param ops The operations to register
+     * @param attach Attachment object
+     * @throws Exception IO error with channel
      */
     protected void registerChannel(Selector selector,
                                    SelectableChannel channel,
@@ -433,6 +437,7 @@ public class NioReceiver extends ReceiverBase implements Runnable {
      *  channel returns an EOF condition, it is closed here, which
      *  automatically invalidates the associated key.  The selector
      *  will then de-register the channel on the next select call.
+     * @throws Exception IO error with channel
      */
     protected void readDataFromSocket(SelectionKey key) throws Exception {
         NioReplicationTask task = (NioReplicationTask) getTaskPool().getRxTask();

==================================================
NioSender.java
index d9e514808c..7b7c353179 100644
--- a/java/org/apache/catalina/tribes/transport/nio/NioReplicationTask.java
+++ b/java/org/apache/catalina/tribes/transport/nio/NioReplicationTask.java
@@ -130,6 +130,7 @@ public class NioReplicationTask extends AbstractRxTask {
      * updated to remove OP_READ.  This will cause the selector
      * to ignore read-readiness for this channel while the
      * worker thread is servicing it.
+     * @param key The key to process
      */
     public synchronized void serviceChannel (SelectionKey key) {
         if ( log.isTraceEnabled() ) log.trace("About to service key:"+key);
@@ -147,6 +148,9 @@ public class NioReplicationTask extends AbstractRxTask {
      * interest in OP_READ.  When this method completes it
      * re-enables OP_READ and calls wakeup() on the selector
      * so the selector will resume watching this channel.
+     * @param key The key to process
+     * @param reader The reader
+     * @throws Exception IO error
      */
     protected void drainChannel (final SelectionKey key, ObjectReader reader) throws Exception {
         reader.access();
@@ -292,10 +296,12 @@ public class NioReplicationTask extends AbstractRxTask {
 
 
     /**
-     * send a reply-acknowledgement (6,2,3), sends it doing a busy write, the ACK is so small
-     * that it should always go to the buffer
-     * @param key
-     * @param channel
+     * Send a reply-acknowledgement (6,2,3), sends it doing a busy write, the ACK is so small
+     * that it should always go to the buffer.
+     * @param key The key to use
+     * @param channel The channel
+     * @param command The command to write
+     * @param udpaddr Target address
      */
     protected void sendAck(SelectionKey key, WritableByteChannel channel, byte[] command, SocketAddress udpaddr) {
         try {

==================================================
MemoryUser.java
index cffa92be9a..7a766f23ab 100644
--- a/java/org/apache/catalina/tribes/transport/nio/NioSender.java
+++ b/java/org/apache/catalina/tribes/transport/nio/NioSender.java
@@ -75,10 +75,11 @@ public class NioSender extends AbstractSender {
     }
 
     /**
-     * State machine to send data
-     * @param key SelectionKey
-     * @return boolean
-     * @throws IOException
+     * State machine to send data.
+     * @param key The key to use
+     * @param waitForAck Wait for an ack
+     * @return <code>true</code> if the processing was successful
+     * @throws IOException An IO error occurred
      */
     public boolean process(SelectionKey key, boolean waitForAck) throws IOException {
         int ops = key.readyOps();

==================================================
MemoryUserDatabase.java
index c54e97ddcd..744c8117f1 100644
--- a/java/org/apache/catalina/users/MemoryUser.java
+++ b/java/org/apache/catalina/users/MemoryUser.java
@@ -254,6 +254,7 @@ public class MemoryUser extends AbstractUser {
      * the reader that processes this entry will accept either
      * <code>username</code> or <code>name</code> for the username
      * property.</p>
+     * @return the XML representation
      */
     public String toXml() {
 

==================================================
CharsetMapper.java
index e3d2c436d3..10bba762ce 100644
--- a/java/org/apache/catalina/users/MemoryUserDatabase.java
+++ b/java/org/apache/catalina/users/MemoryUserDatabase.java
@@ -139,7 +139,7 @@ public class MemoryUserDatabase implements UserDatabase {
 
 
     /**
-     * Return the set of {@link Group}s defined in this user database.
+     * @return the set of {@link Group}s defined in this user database.
      */
     @Override
     public Iterator<Group> getGroups() {
@@ -152,7 +152,7 @@ public class MemoryUserDatabase implements UserDatabase {
 
 
     /**
-     * Return the unique global identifier of this user database.
+     * @return the unique global identifier of this user database.
      */
     @Override
     public String getId() {
@@ -163,7 +163,7 @@ public class MemoryUserDatabase implements UserDatabase {
 
 
     /**
-     * Return the relative or absolute pathname to the persistent storage file.
+     * @return the relative or absolute pathname to the persistent storage file.
      */
     public String getPathname() {
 
@@ -187,7 +187,7 @@ public class MemoryUserDatabase implements UserDatabase {
 
 
     /**
-     * Returning the readonly status of the user database
+     * @return the readonly status of the user database
      */
     public boolean getReadonly() {
 
@@ -209,7 +209,7 @@ public class MemoryUserDatabase implements UserDatabase {
 
 
     /**
-     * Return the set of {@link Role}s defined in this user database.
+     * @return the set of {@link Role}s defined in this user database.
      */
     @Override
     public Iterator<Role> getRoles() {
@@ -222,7 +222,7 @@ public class MemoryUserDatabase implements UserDatabase {
 
 
     /**
-     * Return the set of {@link User}s defined in this user database.
+     * @return the set of {@link User}s defined in this user database.
      */
     @Override
     public Iterator<User> getUsers() {
@@ -485,6 +485,7 @@ public class MemoryUserDatabase implements UserDatabase {
     /**
      * Check for permissions to save this user database to persistent storage
      * location.
+     * @return <code>true</code> if the database is writable
      */
     public boolean isWriteable() {
 

==================================================
DOMWriter.java
index fa8ea65865..4436985436 100644
--- a/java/org/apache/catalina/util/CharsetMapper.java
+++ b/java/org/apache/catalina/util/CharsetMapper.java
@@ -97,6 +97,7 @@ public class CharsetMapper {
      * content type header.
      *
      * @param locale The locale for which to calculate a character set
+     * @return the charset name
      */
     public String getCharset(Locale locale) {
         // Match full language_country_variant first, then language_country,

==================================================
Extension.java
index b3cda6e847..a37700fde1 100644
--- a/java/org/apache/catalina/util/DOMWriter.java
+++ b/java/org/apache/catalina/util/DOMWriter.java
@@ -52,7 +52,10 @@ public class DOMWriter {
     }
 
 
-    /** Prints the specified node, recursively. */
+    /**
+     * Prints the specified node, recursively.
+     * @param node The node to output
+     */
     public void print(Node node) {
 
         // is there anything to do?
@@ -161,7 +164,11 @@ public class DOMWriter {
     }
 
 
-    /** Returns a sorted list of attributes. */
+    /**
+     * Returns a sorted list of attributes.
+     * @param attrs The map to sort
+     * @return a sorted attribute array
+     */
     protected Attr[] sortAttributes(NamedNodeMap attrs) {
         if (attrs == null) {
             return new Attr[0];
@@ -195,7 +202,11 @@ public class DOMWriter {
 
     }
 
-    /** Normalizes the given string. */
+    /**
+     * Normalizes the given string.
+     * @param s The string to escape
+     * @return the escaped string
+     */
     protected String normalize(String s) {
         if (s == null) {
             return "";

==================================================
ExtensionValidator.java
index 31c83d76bf..442189b065 100644
--- a/java/org/apache/catalina/util/Extension.java
+++ b/java/org/apache/catalina/util/Extension.java
@@ -176,6 +176,7 @@ public final class Extension {
      * <code>false</code>.
      *
      * @param required Extension of the required optional package
+     * @return <code>true</code> if the extension is satisfied
      */
     public boolean isCompatibleWith(Extension required) {
 
@@ -213,9 +214,6 @@ public final class Extension {
 
     }
 
-    /**
-     * Return a String representation of this object.
-     */
     @Override
     public String toString() {
 

==================================================
IOTools.java
index 35307d169b..5122c4f70f 100644
--- a/java/org/apache/catalina/util/ExtensionValidator.java
+++ b/java/org/apache/catalina/util/ExtensionValidator.java
@@ -121,6 +121,7 @@ public final class ExtensionValidator {
      *                  application
      *
      * @return true if all required extensions satisfied
+     * @throws IOException Error reading resources needed for validation
      */
     public static synchronized boolean validateApplication(
                                            WebResourceRoot resources,
@@ -168,6 +169,7 @@ public final class ExtensionValidator {
      * it to the container's manifest resources.
      *
      * @param jarFile The system JAR whose manifest to add
+     * @throws IOException Error reading JAR file
      */
     public static void addSystemResource(File jarFile) throws IOException {
         try (InputStream is = new FileInputStream(jarFile)) {

==================================================
Introspection.java
index 5919d6b31a..e8aa56ea4a 100644
--- a/java/org/apache/catalina/util/IOTools.java
+++ b/java/org/apache/catalina/util/IOTools.java
@@ -42,6 +42,7 @@ public class IOTools {
      * @param reader the reader to read from.
      * @param writer the writer to write to.
      * @param buf the char array to use as a buffer
+     * @throws IOException IO error
      */
     public static void flow( Reader reader, Writer writer, char[] buf )
         throws IOException {
@@ -52,6 +53,12 @@ public class IOTools {
     }
 
     /**
+     * Read input from reader and write it to writer until there is no more
+     * input from reader.
+     *
+     * @param reader the reader to read from.
+     * @param writer the writer to write to.
+     * @throws IOException IO error
      * @see #flow( Reader, Writer, char[] )
      */
     public static void flow( Reader reader, Writer writer )

==================================================
MIME2Java.java
index 0e5a1dbafb..18d3dc3ebd 100644
--- a/java/org/apache/catalina/util/Introspection.java
+++ b/java/org/apache/catalina/util/Introspection.java
@@ -44,6 +44,8 @@ public class Introspection {
      *
      * Note: This method assumes that the method name has already been checked
      *       for correctness.
+     * @param setter The setter method
+     * @return the bean property name
      */
     public static String getPropertyName(Method setter) {
         return Introspector.decapitalize(setter.getName().substring(3));
@@ -91,6 +93,8 @@ public class Introspection {
     /**
      * Obtain the declared fields for a class taking account of any security
      * manager that may be configured.
+     * @param clazz The class to introspect
+     * @return the class fields as an array
      */
     public static Field[] getDeclaredFields(final Class<?> clazz) {
         Field[] fields = null;
@@ -112,6 +116,8 @@ public class Introspection {
     /**
      * Obtain the declared methods for a class taking account of any security
      * manager that may be configured.
+     * @param clazz The class to introspect
+     * @return the class methods as an array
      */
     public static Method[] getDeclaredMethods(final Class<?> clazz) {
         Method[] methods = null;
@@ -134,6 +140,10 @@ public class Introspection {
      * Attempt to load a class using the given Container's class loader. If the
      * class cannot be loaded, a debug level log message will be written to the
      * Container's log and null will be returned.
+     * @param context The class loader of this context will be used to attemmpt
+     *  to load the class
+     * @param className The class name
+     * @return the loaded class or <code>null</code> if loading failed
      */
     public static Class<?> loadClass(Context context, String className) {
         ClassLoader cl = context.getLoader().getClassLoader();

==================================================
ParameterMap.java
index ab9354f296..c73a19caac 100644
--- a/java/org/apache/catalina/util/MIME2Java.java
+++ b/java/org/apache/catalina/util/MIME2Java.java
@@ -30,441 +30,440 @@ import java.util.Map;
  * as <code>TXDocument#setEncoding</code> and <code>DTD#setEncoding</code>.
  * <p>Java encoding names are used on <var>encoding</var> parameters to
  * methods such as <code>TXDocument#printWithFormat</code> and <code>DTD#printExternal</code>.
- * <P>
  * <TABLE BORDER="0" WIDTH="100%">
  *  <caption>MIME charset name to Java encoding name mapping</caption>
  *  <TR>
- *      <TD WIDTH="33%">
- *          <P ALIGN="CENTER"><B>Common Name</B>
+ *      <TD>
+ *          <P><B>Common Name</B>
  *      </TD>
- *      <TD WIDTH="15%">
- *          <P ALIGN="CENTER"><B>Use this name in XML files</B>
+ *      <TD>
+ *          <P><B>Use this name in XML files</B>
  *      </TD>
- *      <TD WIDTH="12%">
- *          <P ALIGN="CENTER"><B>Name Type</B>
+ *      <TD>
+ *          <P><B>Name Type</B>
  *      </TD>
- *      <TD WIDTH="31%">
- *          <P ALIGN="CENTER"><B>Xerces converts to this Java Encoder Name</B>
+ *      <TD>
+ *          <P><B>Xerces converts to this Java Encoder Name</B>
  *      </TD>
  *  </TR>
  *  <TR>
- *      <TD WIDTH="33%">8 bit Unicode</TD>
- *      <TD WIDTH="15%">
- *          <P ALIGN="CENTER">UTF-8
+ *      <TD>8 bit Unicode</TD>
+ *      <TD>
+ *          <P>UTF-8
  *      </TD>
- *      <TD WIDTH="12%">
- *          <P ALIGN="CENTER">IANA
+ *      <TD>
+ *          <P>IANA
  *      </TD>
- *      <TD WIDTH="31%">
- *          <P ALIGN="CENTER">UTF8
+ *      <TD>
+ *          <P>UTF8
  *      </TD>
  *  </TR>
  *  <TR>
- *      <TD WIDTH="33%">ISO Latin 1</TD>
- *      <TD WIDTH="15%">
- *          <P ALIGN="CENTER">ISO-8859-1
+ *      <TD>ISO Latin 1</TD>
+ *      <TD>
+ *          <P>ISO-8859-1
  *      </TD>
- *      <TD WIDTH="12%">
- *          <P ALIGN="CENTER">MIME
+ *      <TD>
+ *          <P>MIME
  *      </TD>
- *      <TD WIDTH="31%">
- *          <P ALIGN="CENTER">ISO-8859-1
+ *      <TD>
+ *          <P>ISO-8859-1
  *      </TD>
  *  </TR>
  *  <TR>
- *      <TD WIDTH="33%">ISO Latin 2</TD>
- *      <TD WIDTH="15%">
- *          <P ALIGN="CENTER">ISO-8859-2
+ *      <TD>ISO Latin 2</TD>
+ *      <TD>
+ *          <P>ISO-8859-2
  *      </TD>
- *      <TD WIDTH="12%">
- *          <P ALIGN="CENTER">MIME
+ *      <TD>
+ *          <P>MIME
  *      </TD>
- *      <TD WIDTH="31%">
- *          <P ALIGN="CENTER">ISO-8859-2
+ *      <TD>
+ *          <P>ISO-8859-2
  *      </TD>
  *  </TR>
  *  <TR>
- *      <TD WIDTH="33%">ISO Latin 3</TD>
- *      <TD WIDTH="15%">
- *          <P ALIGN="CENTER">ISO-8859-3
+ *      <TD>ISO Latin 3</TD>
+ *      <TD>
+ *          <P>ISO-8859-3
  *      </TD>
- *      <TD WIDTH="12%">
- *          <P ALIGN="CENTER">MIME
+ *      <TD>
+ *          <P>MIME
  *      </TD>
- *      <TD WIDTH="31%">
- *          <P ALIGN="CENTER">ISO-8859-3
+ *      <TD>
+ *          <P>ISO-8859-3
  *      </TD>
  *  </TR>
  *  <TR>
- *      <TD WIDTH="33%">ISO Latin 4</TD>
- *      <TD WIDTH="15%">
- *          <P ALIGN="CENTER">ISO-8859-4
+ *      <TD>ISO Latin 4</TD>
+ *      <TD>
+ *          <P>ISO-8859-4
  *      </TD>
- *      <TD WIDTH="12%">
- *          <P ALIGN="CENTER">MIME
+ *      <TD>
+ *          <P>MIME
  *      </TD>
- *      <TD WIDTH="31%">
- *          <P ALIGN="CENTER">ISO-8859-4
+ *      <TD>
+ *          <P>ISO-8859-4
  *      </TD>
  *  </TR>
  *  <TR>
- *      <TD WIDTH="33%">ISO Latin Cyrillic</TD>
- *      <TD WIDTH="15%">
- *          <P ALIGN="CENTER">ISO-8859-5
+ *      <TD>ISO Latin Cyrillic</TD>
+ *      <TD>
+ *          <P>ISO-8859-5
  *      </TD>
- *      <TD WIDTH="12%">
- *          <P ALIGN="CENTER">MIME
+ *      <TD>
+ *          <P>MIME
  *      </TD>
- *      <TD WIDTH="31%">
- *          <P ALIGN="CENTER">ISO-8859-5
+ *      <TD>
+ *          <P>ISO-8859-5
  *      </TD>
  *  </TR>
  *  <TR>
- *      <TD WIDTH="33%">ISO Latin Arabic</TD>
- *      <TD WIDTH="15%">
- *          <P ALIGN="CENTER">ISO-8859-6
+ *      <TD>ISO Latin Arabic</TD>
+ *      <TD>
+ *          <P>ISO-8859-6
  *      </TD>
- *      <TD WIDTH="12%">
- *          <P ALIGN="CENTER">MIME
+ *      <TD>
+ *          <P>MIME
  *      </TD>
- *      <TD WIDTH="31%">
- *          <P ALIGN="CENTER">ISO-8859-6
+ *      <TD>
+ *          <P>ISO-8859-6
  *      </TD>
  *  </TR>
  *  <TR>
- *      <TD WIDTH="33%">ISO Latin Greek</TD>
- *      <TD WIDTH="15%">
- *          <P ALIGN="CENTER">ISO-8859-7
+ *      <TD>ISO Latin Greek</TD>
+ *      <TD>
+ *          <P>ISO-8859-7
  *      </TD>
- *      <TD WIDTH="12%">
- *          <P ALIGN="CENTER">MIME
+ *      <TD>
+ *          <P>MIME
  *      </TD>
- *      <TD WIDTH="31%">
- *          <P ALIGN="CENTER">ISO-8859-7
+ *      <TD>
+ *          <P>ISO-8859-7
  *      </TD>
  *  </TR>
  *  <TR>
- *      <TD WIDTH="33%">ISO Latin Hebrew</TD>
- *      <TD WIDTH="15%">
- *          <P ALIGN="CENTER">ISO-8859-8
+ *      <TD>ISO Latin Hebrew</TD>
+ *      <TD>
+ *          <P>ISO-8859-8
  *      </TD>
- *      <TD WIDTH="12%">
- *          <P ALIGN="CENTER">MIME
+ *      <TD>
+ *          <P>MIME
  *      </TD>
- *      <TD WIDTH="31%">
- *          <P ALIGN="CENTER">ISO-8859-8
+ *      <TD>
+ *          <P>ISO-8859-8
  *      </TD>
  *  </TR>
  *  <TR>
- *      <TD WIDTH="33%">ISO Latin 5</TD>
- *      <TD WIDTH="15%">
- *          <P ALIGN="CENTER">ISO-8859-9
+ *      <TD>ISO Latin 5</TD>
+ *      <TD>
+ *          <P>ISO-8859-9
  *      </TD>
- *      <TD WIDTH="12%">
- *          <P ALIGN="CENTER">MIME
+ *      <TD>
+ *          <P>MIME
  *      </TD>
- *      <TD WIDTH="31%">
- *          <P ALIGN="CENTER">ISO-8859-9
+ *      <TD>
+ *          <P>ISO-8859-9
  *      </TD>
  *  </TR>
  *  <TR>
- *      <TD WIDTH="33%">EBCDIC: US</TD>
- *      <TD WIDTH="15%">
- *          <P ALIGN="CENTER">ebcdic-cp-us
+ *      <TD>EBCDIC: US</TD>
+ *      <TD>
+ *          <P>ebcdic-cp-us
  *      </TD>
- *      <TD WIDTH="12%">
- *          <P ALIGN="CENTER">IANA
+ *      <TD>
+ *          <P>IANA
  *      </TD>
- *      <TD WIDTH="31%">
- *          <P ALIGN="CENTER">cp037
+ *      <TD>
+ *          <P>cp037
  *      </TD>
  *  </TR>
  *  <TR>
- *      <TD WIDTH="33%">EBCDIC: Canada</TD>
- *      <TD WIDTH="15%">
- *          <P ALIGN="CENTER">ebcdic-cp-ca
+ *      <TD>EBCDIC: Canada</TD>
+ *      <TD>
+ *          <P>ebcdic-cp-ca
  *      </TD>
- *      <TD WIDTH="12%">
- *          <P ALIGN="CENTER">IANA
+ *      <TD>
+ *          <P>IANA
  *      </TD>
- *      <TD WIDTH="31%">
- *          <P ALIGN="CENTER">cp037
+ *      <TD>
+ *          <P>cp037
  *      </TD>
  *  </TR>
  *  <TR>
- *      <TD WIDTH="33%">EBCDIC: Netherlands</TD>
- *      <TD WIDTH="15%">
- *          <P ALIGN="CENTER">ebcdic-cp-nl
+ *      <TD>EBCDIC: Netherlands</TD>
+ *      <TD>
+ *          <P>ebcdic-cp-nl
  *      </TD>
- *      <TD WIDTH="12%">
- *          <P ALIGN="CENTER">IANA
+ *      <TD>
+ *          <P>IANA
  *      </TD>
- *      <TD WIDTH="31%">
- *          <P ALIGN="CENTER">cp037
+ *      <TD>
+ *          <P>cp037
  *      </TD>
  *  </TR>
  *  <TR>
- *      <TD WIDTH="33%">EBCDIC: Denmark</TD>
- *      <TD WIDTH="15%">
- *          <P ALIGN="CENTER">ebcdic-cp-dk
+ *      <TD>EBCDIC: Denmark</TD>
+ *      <TD>
+ *          <P>ebcdic-cp-dk
  *      </TD>
- *      <TD WIDTH="12%">
- *          <P ALIGN="CENTER">IANA
+ *      <TD>
+ *          <P>IANA
  *      </TD>
- *      <TD WIDTH="31%">
- *          <P ALIGN="CENTER">cp277
+ *      <TD>
+ *          <P>cp277
  *      </TD>
  *  </TR>
  *  <TR>
- *      <TD WIDTH="33%">EBCDIC: Norway</TD>
- *      <TD WIDTH="15%">
- *          <P ALIGN="CENTER">ebcdic-cp-no
+ *      <TD>EBCDIC: Norway</TD>
+ *      <TD>
+ *          <P>ebcdic-cp-no
  *      </TD>
- *      <TD WIDTH="12%">
- *          <P ALIGN="CENTER">IANA
+ *      <TD>
+ *          <P>IANA
  *      </TD>
- *      <TD WIDTH="31%">
- *          <P ALIGN="CENTER">cp277
+ *      <TD>
+ *          <P>cp277
  *      </TD>
  *  </TR>
  *  <TR>
- *      <TD WIDTH="33%">EBCDIC: Finland</TD>
- *      <TD WIDTH="15%">
- *          <P ALIGN="CENTER">ebcdic-cp-fi
+ *      <TD>EBCDIC: Finland</TD>
+ *      <TD>
+ *          <P>ebcdic-cp-fi
  *      </TD>
- *      <TD WIDTH="12%">
- *          <P ALIGN="CENTER">IANA
+ *      <TD>
+ *          <P>IANA
  *      </TD>
- *      <TD WIDTH="31%">
- *          <P ALIGN="CENTER">cp278
+ *      <TD>
+ *          <P>cp278
  *      </TD>
  *  </TR>
  *  <TR>
- *      <TD WIDTH="33%">EBCDIC: Sweden</TD>
- *      <TD WIDTH="15%">
- *          <P ALIGN="CENTER">ebcdic-cp-se
+ *      <TD>EBCDIC: Sweden</TD>
+ *      <TD>
+ *          <P>ebcdic-cp-se
  *      </TD>
- *      <TD WIDTH="12%">
- *          <P ALIGN="CENTER">IANA
+ *      <TD>
+ *          <P>IANA
  *      </TD>
- *      <TD WIDTH="31%">
- *          <P ALIGN="CENTER">cp278
+ *      <TD>
+ *          <P>cp278
  *      </TD>
  *  </TR>
  *  <TR>
- *      <TD WIDTH="33%">EBCDIC: Italy</TD>
- *      <TD WIDTH="15%">
- *          <P ALIGN="CENTER">ebcdic-cp-it
+ *      <TD>EBCDIC: Italy</TD>
+ *      <TD>
+ *          <P>ebcdic-cp-it
  *      </TD>
- *      <TD WIDTH="12%">
- *          <P ALIGN="CENTER">IANA
+ *      <TD>
+ *          <P>IANA
  *      </TD>
- *      <TD WIDTH="31%">
- *          <P ALIGN="CENTER">cp280
+ *      <TD>
+ *          <P>cp280
  *      </TD>
  *  </TR>
  *  <TR>
- *      <TD WIDTH="33%">EBCDIC: Spain, Latin America</TD>
- *      <TD WIDTH="15%">
- *          <P ALIGN="CENTER">ebcdic-cp-es
+ *      <TD>EBCDIC: Spain, Latin America</TD>
+ *      <TD>
+ *          <P>ebcdic-cp-es
  *      </TD>
- *      <TD WIDTH="12%">
- *          <P ALIGN="CENTER">IANA
+ *      <TD>
+ *          <P>IANA
  *      </TD>
- *      <TD WIDTH="31%">
- *          <P ALIGN="CENTER">cp284
+ *      <TD>
+ *          <P>cp284
  *      </TD>
  *  </TR>
  *  <TR>
- *      <TD WIDTH="33%">EBCDIC: Great Britain</TD>
- *      <TD WIDTH="15%">
- *          <P ALIGN="CENTER">ebcdic-cp-gb
+ *      <TD>EBCDIC: Great Britain</TD>
+ *      <TD>
+ *          <P>ebcdic-cp-gb
  *      </TD>
- *      <TD WIDTH="12%">
- *          <P ALIGN="CENTER">IANA
+ *      <TD>
+ *          <P>IANA
  *      </TD>
- *      <TD WIDTH="31%">
- *          <P ALIGN="CENTER">cp285
+ *      <TD>
+ *          <P>cp285
  *      </TD>
  *  </TR>
  *  <TR>
- *      <TD WIDTH="33%">EBCDIC: France</TD>
- *      <TD WIDTH="15%">
- *          <P ALIGN="CENTER">ebcdic-cp-fr
+ *      <TD>EBCDIC: France</TD>
+ *      <TD>
+ *          <P>ebcdic-cp-fr
  *      </TD>
- *      <TD WIDTH="12%">
- *          <P ALIGN="CENTER">IANA
+ *      <TD>
+ *          <P>IANA
  *      </TD>
- *      <TD WIDTH="31%">
- *          <P ALIGN="CENTER">cp297
+ *      <TD>
+ *          <P>cp297
  *      </TD>
  *  </TR>
  *  <TR>
- *      <TD WIDTH="33%">EBCDIC: Arabic</TD>
- *      <TD WIDTH="15%">
- *          <P ALIGN="CENTER">ebcdic-cp-ar1
+ *      <TD>EBCDIC: Arabic</TD>
+ *      <TD>
+ *          <P>ebcdic-cp-ar1
  *      </TD>
- *      <TD WIDTH="12%">
- *          <P ALIGN="CENTER">IANA
+ *      <TD>
+ *          <P>IANA
  *      </TD>
- *      <TD WIDTH="31%">
- *          <P ALIGN="CENTER">cp420
+ *      <TD>
+ *          <P>cp420
  *      </TD>
  *  </TR>
  *  <TR>
- *      <TD WIDTH="33%">EBCDIC: Hebrew</TD>
- *      <TD WIDTH="15%">
- *          <P ALIGN="CENTER">ebcdic-cp-he
+ *      <TD>EBCDIC: Hebrew</TD>
+ *      <TD>
+ *          <P>ebcdic-cp-he
  *      </TD>
- *      <TD WIDTH="12%">
- *          <P ALIGN="CENTER">IANA
+ *      <TD>
+ *          <P>IANA
  *      </TD>
- *      <TD WIDTH="31%">
- *          <P ALIGN="CENTER">cp424
+ *      <TD>
+ *          <P>cp424
  *      </TD>
  *  </TR>
  *  <TR>
- *      <TD WIDTH="33%">EBCDIC: Switzerland</TD>
- *      <TD WIDTH="15%">
- *          <P ALIGN="CENTER">ebcdic-cp-ch
+ *      <TD>EBCDIC: Switzerland</TD>
+ *      <TD>
+ *          <P>ebcdic-cp-ch
  *      </TD>
- *      <TD WIDTH="12%">
- *          <P ALIGN="CENTER">IANA
+ *      <TD>
+ *          <P>IANA
  *      </TD>
- *      <TD WIDTH="31%">
- *          <P ALIGN="CENTER">cp500
+ *      <TD>
+ *          <P>cp500
  *      </TD>
  *  </TR>
  *  <TR>
- *      <TD WIDTH="33%">EBCDIC: Roece</TD>
- *      <TD WIDTH="15%">
- *          <P ALIGN="CENTER">ebcdic-cp-roece
+ *      <TD>EBCDIC: Roece</TD>
+ *      <TD>
+ *          <P>ebcdic-cp-roece
  *      </TD>
- *      <TD WIDTH="12%">
- *          <P ALIGN="CENTER">IANA
+ *      <TD>
+ *          <P>IANA
  *      </TD>
- *      <TD WIDTH="31%">
- *          <P ALIGN="CENTER">cp870
+ *      <TD>
+ *          <P>cp870
  *      </TD>
  *  </TR>
  *  <TR>
- *      <TD WIDTH="33%">EBCDIC: Yogoslavia</TD>
- *      <TD WIDTH="15%">
- *          <P ALIGN="CENTER">ebcdic-cp-yu
+ *      <TD>EBCDIC: Yogoslavia</TD>
+ *      <TD>
+ *          <P>ebcdic-cp-yu
  *      </TD>
- *      <TD WIDTH="12%">
- *          <P ALIGN="CENTER">IANA
+ *      <TD>
+ *          <P>IANA
  *      </TD>
- *      <TD WIDTH="31%">
- *          <P ALIGN="CENTER">cp870
+ *      <TD>
+ *          <P>cp870
  *      </TD>
  *  </TR>
  *  <TR>
- *      <TD WIDTH="33%">EBCDIC: Iceland</TD>
- *      <TD WIDTH="15%">
- *          <P ALIGN="CENTER">ebcdic-cp-is
+ *      <TD>EBCDIC: Iceland</TD>
+ *      <TD>
+ *          <P>ebcdic-cp-is
  *      </TD>
- *      <TD WIDTH="12%">
- *          <P ALIGN="CENTER">IANA
+ *      <TD>
+ *          <P>IANA
  *      </TD>
- *      <TD WIDTH="31%">
- *          <P ALIGN="CENTER">cp871
+ *      <TD>
+ *          <P>cp871
  *      </TD>
  *  </TR>
  *  <TR>
- *      <TD WIDTH="33%">EBCDIC: Urdu</TD>
- *      <TD WIDTH="15%">
- *          <P ALIGN="CENTER">ebcdic-cp-ar2
+ *      <TD>EBCDIC: Urdu</TD>
+ *      <TD>
+ *          <P>ebcdic-cp-ar2
  *      </TD>
- *      <TD WIDTH="12%">
- *          <P ALIGN="CENTER">IANA
+ *      <TD>
+ *          <P>IANA
  *      </TD>
- *      <TD WIDTH="31%">
- *          <P ALIGN="CENTER">cp918
+ *      <TD>
+ *          <P>cp918
  *      </TD>
  *  </TR>
  *  <TR>
- *      <TD WIDTH="33%">Chinese for PRC, mixed 1/2 byte</TD>
- *      <TD WIDTH="15%">
- *          <P ALIGN="CENTER">gb2312
+ *      <TD>Chinese for PRC, mixed 1/2 byte</TD>
+ *      <TD>
+ *          <P>gb2312
  *      </TD>
- *      <TD WIDTH="12%">
- *          <P ALIGN="CENTER">MIME
+ *      <TD>
+ *          <P>MIME
  *      </TD>
- *      <TD WIDTH="31%">
- *          <P ALIGN="CENTER">GB2312
+ *      <TD>
+ *          <P>GB2312
  *      </TD>
  *  </TR>
  *  <TR>
- *      <TD WIDTH="33%">Extended Unix Code, packed for Japanese</TD>
- *      <TD WIDTH="15%">
- *          <P ALIGN="CENTER">euc-jp
+ *      <TD>Extended Unix Code, packed for Japanese</TD>
+ *      <TD>
+ *          <P>euc-jp
  *      </TD>
- *      <TD WIDTH="12%">
- *          <P ALIGN="CENTER">MIME
+ *      <TD>
+ *          <P>MIME
  *      </TD>
- *      <TD WIDTH="31%">
- *          <P ALIGN="CENTER">eucjis
+ *      <TD>
+ *          <P>eucjis
  *      </TD>
  *  </TR>
  *  <TR>
- *      <TD WIDTH="33%">Japanese: iso-2022-jp</TD>
- *      <TD WIDTH="15%">
- *          <P ALIGN="CENTER">iso-2020-jp
+ *      <TD>Japanese: iso-2022-jp</TD>
+ *      <TD>
+ *          <P>iso-2020-jp
  *      </TD>
- *      <TD WIDTH="12%">
- *          <P ALIGN="CENTER">MIME
+ *      <TD>
+ *          <P>MIME
  *      </TD>
- *      <TD WIDTH="31%">
- *          <P ALIGN="CENTER">JIS
+ *      <TD>
+ *          <P>JIS
  *      </TD>
  *  </TR>
  *  <TR>
- *      <TD WIDTH="33%">Japanese: Shift JIS</TD>
- *      <TD WIDTH="15%">
- *          <P ALIGN="CENTER">Shift_JIS
+ *      <TD>Japanese: Shift JIS</TD>
+ *      <TD>
+ *          <P>Shift_JIS
  *      </TD>
- *      <TD WIDTH="12%">
- *          <P ALIGN="CENTER">MIME
+ *      <TD>
+ *          <P>MIME
  *      </TD>
- *      <TD WIDTH="31%">
- *          <P ALIGN="CENTER">SJIS
+ *      <TD>
+ *          <P>SJIS
  *      </TD>
  *  </TR>
  *  <TR>
- *      <TD WIDTH="33%">Chinese: Big5</TD>
- *      <TD WIDTH="15%">
- *          <P ALIGN="CENTER">Big5
+ *      <TD>Chinese: Big5</TD>
+ *      <TD>
+ *          <P>Big5
  *      </TD>
- *      <TD WIDTH="12%">
- *          <P ALIGN="CENTER">MIME
+ *      <TD>
+ *          <P>MIME
  *      </TD>
- *      <TD WIDTH="31%">
- *          <P ALIGN="CENTER">Big5
+ *      <TD>
+ *          <P>Big5
  *      </TD>
  *  </TR>
  *  <TR>
- *      <TD WIDTH="33%">Extended Unix Code, packed for Korean</TD>
- *      <TD WIDTH="15%">
- *          <P ALIGN="CENTER">euc-kr
+ *      <TD>Extended Unix Code, packed for Korean</TD>
+ *      <TD>
+ *          <P>euc-kr
  *      </TD>
- *      <TD WIDTH="12%">
- *          <P ALIGN="CENTER">MIME
+ *      <TD>
+ *          <P>MIME
  *      </TD>
- *      <TD WIDTH="31%">
- *          <P ALIGN="CENTER">iso2022kr
+ *      <TD>
+ *          <P>iso2022kr
  *      </TD>
  *  </TR>
  *  <TR>
- *      <TD WIDTH="33%">Cyrillic</TD>
- *      <TD WIDTH="15%">
- *          <P ALIGN="CENTER">koi8-r
+ *      <TD>Cyrillic</TD>
+ *      <TD>
+ *          <P>koi8-r
  *      </TD>
- *      <TD WIDTH="12%">
- *          <P ALIGN="CENTER">MIME
+ *      <TD>
+ *          <P>MIME
  *      </TD>
- *      <TD WIDTH="31%">
- *          <P ALIGN="CENTER">koi8-r
+ *      <TD>
+ *          <P>koi8-r
  *      </TD>
  *  </TR>
  * </TABLE>

==================================================
ResourceSet.java
index 492023f659..996fdba61f 100644
--- a/java/org/apache/catalina/util/ParameterMap.java
+++ b/java/org/apache/catalina/util/ParameterMap.java
@@ -96,7 +96,7 @@ public final class ParameterMap<K,V> extends LinkedHashMap<K,V> {
 
 
     /**
-     * Return the locked state of this parameter map.
+     * @return the locked state of this parameter map.
      */
     public boolean isLocked() {
 

==================================================
ServerInfo.java
index d8442d35fb..d6d04d2abe 100644
--- a/java/org/apache/catalina/util/ResourceSet.java
+++ b/java/org/apache/catalina/util/ResourceSet.java
@@ -99,7 +99,7 @@ public final class ResourceSet<T> extends HashSet<T> {
 
 
     /**
-     * Return the locked state of this parameter map.
+     * @return the locked state of this parameter map.
      */
     public boolean isLocked() {
 

==================================================
SessionConfig.java
index bc17563215..44775a974e 100644
--- a/java/org/apache/catalina/util/ServerInfo.java
+++ b/java/org/apache/catalina/util/ServerInfo.java
@@ -85,7 +85,7 @@ public class ServerInfo {
 
 
     /**
-     * Return the server identification for this version of Tomcat.
+     * @return the server identification for this version of Tomcat.
      */
     public static String getServerInfo() {
 
@@ -94,7 +94,7 @@ public class ServerInfo {
     }
 
     /**
-     * Return the server built time for this version of Tomcat.
+     * @return the server built time for this version of Tomcat.
      */
     public static String getServerBuilt() {
 
@@ -103,7 +103,7 @@ public class ServerInfo {
     }
 
     /**
-     * Return the server's version number.
+     * @return the server's version number.
      */
     public static String getServerNumber() {
 

==================================================
Strftime.java
index 6e3f45d42c..979ace5bdd 100644
--- a/java/org/apache/catalina/util/SessionConfig.java
+++ b/java/org/apache/catalina/util/SessionConfig.java
@@ -28,7 +28,8 @@ public class SessionConfig {
     /**
      * Determine the name to use for the session cookie for the provided
      * context.
-     * @param context
+     * @param context The context
+     * @return the cookie name for the context
      */
     public static String getSessionCookieName(Context context) {
 
@@ -44,7 +45,8 @@ public class SessionConfig {
     /**
      * Determine the name to use for the session cookie for the provided
      * context.
-     * @param context
+     * @param context The context
+     * @return the parameter name for the session
      */
     public static String getSessionUriParamName(Context context) {
 

==================================================
XMLWriter.java
index 37a4832bc9..a09e5b1c33 100644
--- a/java/org/apache/catalina/util/Strftime.java
+++ b/java/org/apache/catalina/util/Strftime.java
@@ -139,6 +139,7 @@ public class Strftime {
     /**
      * Change the timezone used to format dates
      *
+     * @param timeZone The new time zone
      * @see SimpleDateFormat#setTimeZone
      */
     public void setTimeZone( TimeZone timeZone ) {

==================================================
AbstractAccessLogValve.java
index dcae581d46..904efbd24f 100644
--- a/java/org/apache/catalina/util/XMLWriter.java
+++ b/java/org/apache/catalina/util/XMLWriter.java
@@ -22,8 +22,6 @@ import java.io.Writer;
 
 /**
  * XMLWriter helper class.
- *
- * @author <a href="mailto:remm@apache.org">Remy Maucherat</a>
  */
 public class XMLWriter {
 
@@ -68,7 +66,7 @@ public class XMLWriter {
 
 
     /**
-     * Constructor.
+     * New XML writer utility that will store its data in an internal buffer.
      */
     public XMLWriter() {
         this(null);
@@ -76,7 +74,10 @@ public class XMLWriter {
 
 
     /**
-     * Constructor.
+     * New XML writer utility that will store its data in an internal buffer
+     * and can write it to the specified writer.
+     * @see sendData
+     * @param writer The writer to use
      */
     public XMLWriter(Writer writer) {
         this.writer = writer;
@@ -204,7 +205,8 @@ public class XMLWriter {
 
 
     /**
-     * Send data and reinitializes buffer.
+     * Send data and reinitializes buffer, if a writer has been specified.
+     * @throws IOException Error writing XML data
      */
     public void sendData()
         throws IOException {

==================================================
AccessLogValve.java
index 0d73b9611a..2b1c2204b3 100644
--- a/java/org/apache/catalina/valves/AbstractAccessLogValve.java
+++ b/java/org/apache/catalina/valves/AbstractAccessLogValve.java
@@ -475,7 +475,7 @@ public abstract class AbstractAccessLogValve extends ValveBase implements Access
     }
 
     /**
-     * @return Returns the enabled.
+     * @return the enabled flag.
      */
     public boolean getEnabled() {
         return enabled;
@@ -490,7 +490,7 @@ public abstract class AbstractAccessLogValve extends ValveBase implements Access
     }
 
     /**
-     * Return the format pattern.
+     * @return the format pattern.
      */
     public String getPattern() {
         return (this.pattern);
@@ -519,6 +519,7 @@ public abstract class AbstractAccessLogValve extends ValveBase implements Access
      * Return whether the attribute name to look for when
      * performing conditional logging. If null, every
      * request is logged.
+     * @return the attribute name
      */
     public String getCondition() {
         return condition;
@@ -540,6 +541,7 @@ public abstract class AbstractAccessLogValve extends ValveBase implements Access
      * Return whether the attribute name to look for when
      * performing conditional logging. If null, every
      * request is logged.
+     * @return the attribute name
      */
     public String getConditionUnless() {
         return getCondition();
@@ -560,6 +562,7 @@ public abstract class AbstractAccessLogValve extends ValveBase implements Access
      * Return whether the attribute name to look for when
      * performing conditional logging. If null, every
      * request is logged.
+     * @return the attribute name
      */
     public String getConditionIf() {
         return conditionIf;
@@ -579,6 +582,7 @@ public abstract class AbstractAccessLogValve extends ValveBase implements Access
     /**
      * Return the locale used to format timestamps in log entries and in
      * log file name suffix.
+     * @return the locale
      */
     public String getLocale() {
         return localeName;
@@ -671,8 +675,8 @@ public abstract class AbstractAccessLogValve extends ValveBase implements Access
      * second since a new Date was created, this method simply gives out the
      * same Date again so that the system doesn't spend time creating Date
      * objects unnecessarily.
-     *
-     * @return Date
+     * @param systime The time
+     * @return the date object
      */
     private static Date getDate(long systime) {
         Date date = localDate.get();
@@ -682,7 +686,10 @@ public abstract class AbstractAccessLogValve extends ValveBase implements Access
 
 
     /**
-     * Find a locale by name
+     * Find a locale by name.
+     * @param name The locale name
+     * @param fallback Fallback locale if the name is not found
+     * @return the locale object
      */
     protected static Locale findLocale(String name, Locale fallback) {
         if (name == null || name.isEmpty()) {
@@ -1155,7 +1162,7 @@ public abstract class AbstractAccessLogValve extends ValveBase implements Access
         private final boolean conversion;
 
         /**
-         * if conversion is true, write '-' instead of 0 - %b
+         * @param conversion <code>true</code> to write '-' instead of 0 - %b.
          */
         public ByteSentElement(boolean conversion) {
             this.conversion = conversion;
@@ -1209,8 +1216,8 @@ public abstract class AbstractAccessLogValve extends ValveBase implements Access
         private final boolean millis;
 
         /**
-         * if millis is true, write time in millis - %D
-         * if millis is false, write time in seconds - %T
+         * @param millis <code>true</code>, write time in millis - %D,
+         * if <code>false</code>, write time in seconds - %T
          */
         public ElapsedTimeElement(boolean millis) {
             this.millis = millis;
@@ -1477,7 +1484,8 @@ public abstract class AbstractAccessLogValve extends ValveBase implements Access
 
 
     /**
-     * parse pattern string and create the array of AccessLogElement
+     * Parse pattern string and create the array of AccessLogElement.
+     * @return the log elements array
      */
     protected AccessLogElement[] createLogElements() {
         List<AccessLogElement> list = new ArrayList<>();
@@ -1526,7 +1534,10 @@ public abstract class AbstractAccessLogValve extends ValveBase implements Access
     }
 
     /**
-     * create an AccessLogElement implementation which needs an element name
+     * Create an AccessLogElement implementation which needs an element name.
+     * @param name Header name
+     * @param pattern char in the log pattern
+     * @return the log element
      */
     protected AccessLogElement createAccessLogElement(String name, char pattern) {
         switch (pattern) {
@@ -1550,7 +1561,9 @@ public abstract class AbstractAccessLogValve extends ValveBase implements Access
     }
 
     /**
-     * create an AccessLogElement implementation
+     * Create an AccessLogElement implementation.
+     * @param pattern char in the log pattern
+     * @return the log element
      */
     protected AccessLogElement createAccessLogElement(char pattern) {
         switch (pattern) {

==================================================
ErrorReportValve.java
index 59c95f3e12..040120d1f9 100644
--- a/java/org/apache/catalina/valves/AccessLogValve.java
+++ b/java/org/apache/catalina/valves/AccessLogValve.java
@@ -160,7 +160,7 @@ public class AccessLogValve extends AbstractAccessLogValve {
 
 
     /**
-     * Return the directory in which we create log files.
+     * @return the directory in which we create log files.
      */
     public String getDirectory() {
         return (directory);
@@ -178,6 +178,7 @@ public class AccessLogValve extends AbstractAccessLogValve {
 
     /**
      * Check for file existence before logging.
+     * @return <code>true</code> if file existence is checked first
      */
     public boolean isCheckExists() {
 
@@ -199,7 +200,7 @@ public class AccessLogValve extends AbstractAccessLogValve {
 
 
     /**
-     * Return the log file prefix.
+     * @return the log file prefix.
      */
     public String getPrefix() {
         return (prefix);
@@ -217,7 +218,8 @@ public class AccessLogValve extends AbstractAccessLogValve {
 
 
     /**
-     * Should we rotate the logs
+     * Should we rotate the logs.
+     * @return <code>true</code> if the logs are rotated
      */
     public boolean isRotatable() {
         return rotatable;
@@ -236,7 +238,9 @@ public class AccessLogValve extends AbstractAccessLogValve {
 
     /**
      * Should we defer inclusion of the date stamp in the file
-     * name until rotate time
+     * name until rotate time.
+     * @return <code>true</code> if the logs file names are time stamped
+     *  only when they are rotated
      */
     public boolean isRenameOnRotate() {
         return renameOnRotate;
@@ -255,7 +259,8 @@ public class AccessLogValve extends AbstractAccessLogValve {
 
 
     /**
-     * Is the logging buffered
+     * Is the logging buffered. Usually buffering can increase performance.
+     * @return <code>true</code> if the logging uses a buffer
      */
     public boolean isBuffered() {
         return buffered;
@@ -265,7 +270,7 @@ public class AccessLogValve extends AbstractAccessLogValve {
     /**
      * Set the value if the logging should be buffered
      *
-     * @param buffered true if buffered.
+     * @param buffered <code>true</code> if buffered.
      */
     public void setBuffered(boolean buffered) {
         this.buffered = buffered;
@@ -273,7 +278,7 @@ public class AccessLogValve extends AbstractAccessLogValve {
 
 
     /**
-     * Return the log file suffix.
+     * @return the log file suffix.
      */
     public String getSuffix() {
         return (suffix);
@@ -290,7 +295,7 @@ public class AccessLogValve extends AbstractAccessLogValve {
     }
 
     /**
-     *  Return the date format date based log rotation.
+     * @return the date format date based log rotation.
      */
     public String getFileDateFormat() {
         return fileDateFormat;
@@ -298,7 +303,8 @@ public class AccessLogValve extends AbstractAccessLogValve {
 
 
     /**
-     *  Set the date format date based log rotation.
+     * Set the date format date based log rotation.
+     * @param fileDateFormat The format for the file timestamp
      */
     public void setFileDateFormat(String fileDateFormat) {
         String newFormat;
@@ -386,7 +392,6 @@ public class AccessLogValve extends AbstractAccessLogValve {
      * old log file name up once again. Intended to be called by a JMX
      * agent.
      *
-     *
      * @param newFileName The file name to move the log file entry to
      * @return true if a file was rotated with no error
      */

==================================================
JDBCAccessLogValve.java
index 7b1dabd202..359eed9e2a 100644
--- a/java/org/apache/catalina/valves/ErrorReportValve.java
+++ b/java/org/apache/catalina/valves/ErrorReportValve.java
@@ -288,6 +288,8 @@ public class ErrorReportValve extends ValveBase {
     /**
      * Print out a partial servlet stack trace (truncating at the last
      * occurrence of javax.servlet.).
+     * @param t The stack trace to process
+     * @return the stack trace relative to the application layer
      */
     protected String getPartialServletStackTrace(Throwable t) {
         StringBuilder trace = new StringBuilder();
@@ -314,7 +316,7 @@ public class ErrorReportValve extends ValveBase {
     /**
      * Enables/Disables full error reports
      *
-     * @param showReport
+     * @param showReport <code>true</code> to show full error data
      */
     public void setShowReport(boolean showReport) {
         this.showReport = showReport;
@@ -327,7 +329,7 @@ public class ErrorReportValve extends ValveBase {
     /**
      * Enables/Disables server info on error pages
      *
-     * @param showServerInfo
+     * @param showServerInfo <code>true</code> to show server info
      */
     public void setShowServerInfo(boolean showServerInfo) {
         this.showServerInfo = showServerInfo;

==================================================
PersistentValve.java
index 4e53d6e0c0..e222f1262f 100644
--- a/java/org/apache/catalina/valves/JDBCAccessLogValve.java
+++ b/java/org/apache/catalina/valves/JDBCAccessLogValve.java
@@ -165,7 +165,7 @@ public final class JDBCAccessLogValve extends ValveBase implements AccessLog {
     * Use long contentLength as you have more 4 GB output.
     * @since 6.0.15
     */
-    boolean useLongContentLength = false ;
+    boolean useLongContentLength = false;
 
    /**
      * The connection username to use when trying to connect to the database.
@@ -232,8 +232,7 @@ public final class JDBCAccessLogValve extends ValveBase implements AccessLog {
     }
 
     /**
-     * Return the username to use to connect to the database.
-     *
+     * @return the username to use to connect to the database.
      */
     public String getConnectionName() {
         return connectionName;
@@ -257,9 +256,8 @@ public final class JDBCAccessLogValve extends ValveBase implements AccessLog {
         this.driverName = driverName;
     }
 
-   /**
-     * Return the password to use to connect to the database.
-     *
+    /**
+     * @return the password to use to connect to the database.
      */
     public String getConnectionPassword() {
         return connectionPassword;
@@ -356,11 +354,11 @@ public final class JDBCAccessLogValve extends ValveBase implements AccessLog {
     }
 
 
-  /**
-   * Sets the name of the field containing the HTTP response status code.
-   *
-   * @param statusField The name of the HTTP response status code field.
-   */
+    /**
+     * Sets the name of the field containing the HTTP response status code.
+     *
+     * @param statusField The name of the HTTP response status code field.
+     */
     public void setStatusField(String statusField) {
         this.statusField = statusField;
     }
@@ -420,10 +418,11 @@ public final class JDBCAccessLogValve extends ValveBase implements AccessLog {
     }
 
     /**
-     * get useLongContentLength
+     * @return <code>true</code> if content length should be considered a long
+     *  rather than an int, defaults to <code>false</code>
      */
-    public  boolean getUseLongContentLength() {
-        return this.useLongContentLength ;
+    public boolean getUseLongContentLength() {
+        return this.useLongContentLength;
     }
 
     /**

==================================================
RemoteAddrValve.java
index 46699dc0fc..8e4840152c 100644
--- a/java/org/apache/catalina/valves/PersistentValve.java
+++ b/java/org/apache/catalina/valves/PersistentValve.java
@@ -200,6 +200,9 @@ public class PersistentValve extends ValveBase {
      * than its expiration date as of the supplied time.
      *
      * FIXME: Probably belongs in the Session class.
+     * @param session The session to check
+     * @param timeNow The current time to check for
+     * @return <code>true</code> if the session is past its expiration
      */
     protected boolean isSessionStale(Session session, long timeNow) {
 

==================================================
RemoteHostValve.java
index b33d5305d9..810d953396 100644
--- a/java/org/apache/catalina/valves/RemoteAddrValve.java
+++ b/java/org/apache/catalina/valves/RemoteAddrValve.java
@@ -50,6 +50,8 @@ public final class RemoteAddrValve extends RequestFilterValve {
      * Get the flag deciding whether we add the server connector port to the
      * property compared in the filtering method. The port will be appended
      * using a ";" as a separator.
+     * @return <code>true</code> to add the connector port, the default is
+     *  <code>false</code>
      */
     public boolean getAddConnectorPort() {
         return addConnectorPort;

==================================================
RemoteIpValve.java
index e98c95fd27..a20f0acdeb 100644
--- a/java/org/apache/catalina/valves/RemoteHostValve.java
+++ b/java/org/apache/catalina/valves/RemoteHostValve.java
@@ -50,6 +50,7 @@ public final class RemoteHostValve extends RequestFilterValve {
      * Get the flag deciding whether we add the server connector port to the
      * property compared in the filtering method. The port will be appended
      * using a ";" as a separator.
+     * @return <code>true</code> to add the connector port
      */
     public boolean getAddConnectorPort() {
         return addConnectorPort;

==================================================
RequestFilterValve.java
index 67f737df52..b817b35c86 100644
--- a/java/org/apache/catalina/valves/RemoteIpValve.java
+++ b/java/org/apache/catalina/valves/RemoteIpValve.java
@@ -144,7 +144,6 @@ import org.apache.tomcat.util.http.MimeHeaders;
  * </tr>
  * </table>
  * <p>
- * <p>
  * This Valve may be attached to any Container, depending on the granularity of the filtering you wish to perform.
  * </p>
  * <p>
@@ -361,7 +360,7 @@ public class RemoteIpValve extends ValveBase {
 
     /**
      * Convert a given comma delimited String into an array of String
-     *
+     * @param commaDelimitedStrings The string to convert
      * @return array of String (non <code>null</code>)
      */
     protected static String[] commaDelimitedListToStringArray(String commaDelimitedStrings) {
@@ -371,6 +370,8 @@ public class RemoteIpValve extends ValveBase {
 
     /**
      * Convert an array of strings in a comma delimited string
+     * @param stringList The string list to convert
+     * @return The concatenated string
      */
     protected static String listToCommaDelimitedString(List<String> stringList) {
         if (stringList == null) {
@@ -729,6 +730,7 @@ public class RemoteIpValve extends ValveBase {
      * <p>
      * Default value : 80
      * </p>
+     * @param httpServerPort The server port
      */
     public void setHttpServerPort(int httpServerPort) {
         this.httpServerPort = httpServerPort;
@@ -741,6 +743,7 @@ public class RemoteIpValve extends ValveBase {
      * <p>
      * Default value : 443
      * </p>
+     * @param httpsServerPort The server port
      */
     public void setHttpsServerPort(int httpsServerPort) {
         this.httpsServerPort = httpsServerPort;
@@ -753,6 +756,7 @@ public class RemoteIpValve extends ValveBase {
      * <p>
      * Default value : 10\.\d{1,3}\.\d{1,3}\.\d{1,3}|192\.168\.\d{1,3}\.\d{1,3}|169\.254.\d{1,3}.\d{1,3}|127\.\d{1,3}\.\d{1,3}\.\d{1,3}
      * </p>
+     * @param internalProxies The proxy regular expression
      */
     public void setInternalProxies(String internalProxies) {
         if (internalProxies == null || internalProxies.length() == 0) {
@@ -770,6 +774,7 @@ public class RemoteIpValve extends ValveBase {
      * <p>
      * Default value : <code>null</code>
      * </p>
+     * @param protocolHeader The header name
      */
     public void setProtocolHeader(String protocolHeader) {
         this.protocolHeader = protocolHeader;
@@ -782,6 +787,7 @@ public class RemoteIpValve extends ValveBase {
      * <p>
      * Default value : <code>https</code>
      * </p>
+     * @param protocolHeaderHttpsValue The header name
      */
     public void setProtocolHeaderHttpsValue(String protocolHeaderHttpsValue) {
         this.protocolHeaderHttpsValue = protocolHeaderHttpsValue;
@@ -802,6 +808,7 @@ public class RemoteIpValve extends ValveBase {
      * <p>
      * Default value : <code>X-Forwarded-By</code>
      * </p>
+     * @param proxiesHeader The header name
      */
     public void setProxiesHeader(String proxiesHeader) {
         this.proxiesHeader = proxiesHeader;
@@ -818,7 +825,7 @@ public class RemoteIpValve extends ValveBase {
      * Default value : <code>X-Forwarded-For</code>
      * </p>
      *
-     * @param remoteIpHeader
+     * @param remoteIpHeader The header name
      */
     public void setRemoteIpHeader(String remoteIpHeader) {
         this.remoteIpHeader = remoteIpHeader;
@@ -855,6 +862,7 @@ public class RemoteIpValve extends ValveBase {
      * <p>
      * Default value : empty list, no external proxy is trusted.
      * </p>
+     * @param trustedProxies The regular expression
      */
     public void setTrustedProxies(String trustedProxies) {
         if (trustedProxies == null || trustedProxies.length() == 0) {

==================================================
SemaphoreValve.java
index e9d6bec7b5..5f5811a6a2 100644
--- a/java/org/apache/catalina/valves/RequestFilterValve.java
+++ b/java/org/apache/catalina/valves/RequestFilterValve.java
@@ -137,6 +137,7 @@ public abstract class RequestFilterValve extends ValveBase {
     /**
      * Return the regular expression used to test for allowed requests for this
      * Valve, if any; otherwise, return <code>null</code>.
+     * @return the regular expression
      */
     public String getAllow() {
         return allowValue;
@@ -170,6 +171,7 @@ public abstract class RequestFilterValve extends ValveBase {
     /**
      * Return the regular expression used to test for denied requests for this
      * Valve, if any; otherwise, return <code>null</code>.
+     * @return the regular expression
      */
     public String getDeny() {
         return denyValue;
@@ -204,6 +206,7 @@ public abstract class RequestFilterValve extends ValveBase {
      * Returns {@code false} if the last change to the {@code allow} pattern did
      * not apply successfully. E.g. if the pattern is syntactically
      * invalid.
+     * @return <code>false</code> if the current pattern is invalid
      */
     public final boolean isAllowValid() {
         return allowValid;
@@ -214,6 +217,7 @@ public abstract class RequestFilterValve extends ValveBase {
      * Returns {@code false} if the last change to the {@code deny} pattern did
      * not apply successfully. E.g. if the pattern is syntactically
      * invalid.
+     * @return <code>false</code> if the current pattern is invalid
      */
     public final boolean isDenyValid() {
         return denyValid;
@@ -221,7 +225,7 @@ public abstract class RequestFilterValve extends ValveBase {
 
 
     /**
-     * Return response status code that is used to reject denied request.
+     * @return response status code that is used to reject denied request.
      */
     public int getDenyStatus() {
         return denyStatus;
@@ -230,6 +234,7 @@ public abstract class RequestFilterValve extends ValveBase {
 
     /**
      * Set response status code that is used to reject denied request.
+     * @param denyStatus The status code
      */
     public void setDenyStatus(int denyStatus) {
         this.denyStatus = denyStatus;
@@ -237,7 +242,7 @@ public abstract class RequestFilterValve extends ValveBase {
 
 
     /**
-     * Return true if a deny is handled by setting an invalid auth header.
+     * @return <code>true</code> if a deny is handled by setting an invalid auth header.
      */
     public boolean getInvalidAuthenticationWhenDeny() {
         return invalidAuthenticationWhenDeny;
@@ -246,6 +251,7 @@ public abstract class RequestFilterValve extends ValveBase {
 
     /**
      * Set invalidAuthenticationWhenDeny property.
+     * @param value <code>true</code> to handle a deny by setting an invalid auth header
      */
     public void setInvalidAuthenticationWhenDeny(boolean value) {
         invalidAuthenticationWhenDeny = value;
@@ -352,8 +358,8 @@ public abstract class RequestFilterValve extends ValveBase {
      * called through JMX, e.g. to test whether certain IP address is allowed or
      * denied by the valve configuration.
      *
-     * @param property
-     *            The request property value on which to filter
+     * @param property The request property value on which to filter
+     * @return <code>true</code> if the request is allowed
      */
     public boolean isAllowed(String property) {
         // Use local copies for thread safety

==================================================
RewriteCond.java
index 61070e8489..156275884e 100644
--- a/java/org/apache/catalina/valves/SemaphoreValve.java
+++ b/java/org/apache/catalina/valves/SemaphoreValve.java
@@ -172,8 +172,10 @@ public class SemaphoreValve extends ValveBase {
 
     /**
      * Subclass friendly method to add conditions.
-     * @param request
-     * @param response
+     * @param request The Servlet request
+     * @param response The Servlet response
+     * @return <code>true</code> if the concurrency control should occur
+     *  on this request
      */
     public boolean controlConcurrency(Request request, Response response) {
         return true;
@@ -183,10 +185,10 @@ public class SemaphoreValve extends ValveBase {
     /**
      * Subclass friendly method to add error handling when a permit isn't
      * granted.
-     * @param request
-     * @param response
-     * @throws IOException
-     * @throws ServletException
+     * @param request The Servlet request
+     * @param response The Servlet response
+     * @throws IOException Error writing output
+     * @throws ServletException Other error
      */
     public void permitDenied(Request request, Response response)
         throws IOException, ServletException {

==================================================
RewriteRule.java
index 1259b72a4d..d633d77c47 100644
--- a/java/org/apache/catalina/valves/rewrite/RewriteCond.java
+++ b/java/org/apache/catalina/valves/rewrite/RewriteCond.java
@@ -183,6 +183,8 @@ public class RewriteCond {
      *
      * @param rule corresponding matched rule
      * @param cond last matched condition
+     * @param resolver Property resolver
+     * @return <code>true</code> if the condition matches
      */
     public boolean evaluate(Matcher rule, Matcher cond, Resolver resolver) {
         String value = test.evaluate(rule, cond, resolver);

==================================================
RewriteValve.java
index 4b92bbf27f..c15dee203f 100644
--- a/java/org/apache/catalina/valves/rewrite/RewriteRule.java
+++ b/java/org/apache/catalina/valves/rewrite/RewriteRule.java
@@ -76,8 +76,9 @@ public class RewriteRule {
 
     /**
      * Evaluate the rule based on the context
-     *
-     * @return null if no rewrite took place
+     * @param url The char sequence
+     * @param resolver Property resolver
+     * @return <code>null</code> if no rewrite took place
      */
     public CharSequence evaluate(CharSequence url, Resolver resolver) {
         Pattern pattern = this.pattern.get();

==================================================
Substitution.java
index d0f6a92102..640d555280 100644
--- a/java/org/apache/catalina/valves/rewrite/RewriteValve.java
+++ b/java/org/apache/catalina/valves/rewrite/RewriteValve.java
@@ -487,7 +487,7 @@ public class RewriteValve extends ValveBase {
 
 
     /**
-     * Get config base.
+     * @return config base.
      */
     protected File getConfigBase() {
         File configBase =
@@ -503,8 +503,8 @@ public class RewriteValve extends ValveBase {
     /**
      * Find the configuration path where the rewrite configuration file
      * will be stored.
-     *
-     * @param resourceName
+     * @param resourceName The rewrite configuration file name
+     * @return the full rewrite configuration path
      */
     protected String getHostConfigPath(String resourceName) {
         StringBuffer result = new StringBuffer();
@@ -536,7 +536,6 @@ public class RewriteValve extends ValveBase {
      *  RewriteCond %{REMOTE_HOST}  ^host1.*  [OR]
      *
      * @param line A line from the rewrite configuration
-     *
      * @return The condition, rule or map resulting from parsing the line
      */
     public static Object parse(String line) {
@@ -613,9 +612,9 @@ public class RewriteValve extends ValveBase {
 
     /**
      * Parser for RewriteCond flags.
-     *
-     * @param condition
-     * @param flag
+     * @param line The configuration line being parsed
+     * @param condition The current condition
+     * @param flag The flag
      */
     protected static void parseCondFlag(String line, RewriteCond condition, String flag) {
         if (flag.equals("NC") || flag.equals("nocase")) {
@@ -630,9 +629,9 @@ public class RewriteValve extends ValveBase {
 
     /**
      * Parser for ReweriteRule flags.
-     *
-     * @param rule
-     * @param flag
+     * @param line The configuration line being parsed
+     * @param rule The current rule
+     * @param flag The flag
      */
     protected static void parseRuleFlag(String line, RewriteRule rule, String flag) {
         if (flag.equals("chain") || flag.equals("C")) {

==================================================
StandardRoot.java
index 0f84792597..385d4aacdf 100644
--- a/java/org/apache/catalina/valves/rewrite/Substitution.java
+++ b/java/org/apache/catalina/valves/rewrite/Substitution.java
@@ -227,10 +227,11 @@ public class Substitution {
     }
 
     /**
-     * Evaluate the substitution based on the context
-     *
+     * Evaluate the substitution based on the context.
      * @param rule corresponding matched rule
      * @param cond last matched condition
+     * @param resolver The property resolver
+     * @return The substitution result
      */
     public String evaluate(Matcher rule, Matcher cond, Resolver resolver) {
         StringBuffer buf = new StringBuffer();

==================================================
