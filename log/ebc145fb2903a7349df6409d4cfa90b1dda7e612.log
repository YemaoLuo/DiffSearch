ebc145fb2903a7349df6409d4cfa90b1dda7e612
==================================================
SSLImplementation.getName() is not used so remove it.
==================================================
Mark Thomas
==================================================
Mon Jan 11 13:58:22 2016 +0000
==================================================
Connector.java
SSLImplementation.getName() is not used so remove it.
Further simplify the factory part of SSLImplementation
Remove OpenSSLImplementation.IMPLEMENTATION_NAME. Since it is the class name, use the class name.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1724028 13f79535-47bb-0310-9956-ffa450edef68



==================================================
AbstractJsseEndpoint.java
index 12acf338a1..27876c92ea 100644
--- a/java/org/apache/catalina/connector/Connector.java
+++ b/java/org/apache/catalina/connector/Connector.java
@@ -1008,7 +1008,7 @@ public class Connector extends LifecycleMBeanBase  {
             AbstractHttp11JsseProtocol<?> jsseProtocolHandler = (AbstractHttp11JsseProtocol<?>) protocolHandler;
             if (jsseProtocolHandler.getSslImplementationName() == null) {
                 // OpenSSL is compatible with the JSSE configuration, so use it if APR is available
-                jsseProtocolHandler.setSslImplementationName(OpenSSLImplementation.IMPLEMENTATION_NAME);
+                jsseProtocolHandler.setSslImplementationName(OpenSSLImplementation.class.getName());
             }
         }
 

==================================================
SSLImplementation.java
index 19df572e75..3646bcfd9b 100644
--- a/java/org/apache/tomcat/util/net/AbstractJsseEndpoint.java
+++ b/java/org/apache/tomcat/util/net/AbstractJsseEndpoint.java
@@ -64,7 +64,7 @@ public abstract class AbstractJsseEndpoint<S> extends AbstractEndpoint<S> {
 
     @Override
     protected Type getSslConfigType() {
-        if (OpenSSLImplementation.IMPLEMENTATION_NAME.equals(sslImplementationName)) {
+        if (OpenSSLImplementation.class.getName().equals(sslImplementationName)) {
             return SSLHostConfig.Type.EITHER;
         } else {
             return SSLHostConfig.Type.JSSE;

==================================================
JSSEImplementation.java
index 1c45d58c0f..75b4709fac 100644
--- a/java/org/apache/tomcat/util/net/SSLImplementation.java
+++ b/java/org/apache/tomcat/util/net/SSLImplementation.java
@@ -34,23 +34,12 @@ public abstract class SSLImplementation {
     private static final Log logger = LogFactory.getLog(SSLImplementation.class);
     private static final StringManager sm = StringManager.getManager(SSLImplementation.class);
 
-    /**
-     * Obtain an instance (not a singleton) of the default implementation.
-     * Currently, this is the standard JSSE implementation that ships as part of
-     * the JRE. Tomcat also provides an OpenSSL based implementation.
-     *
-     * @return The default implementation
-     */
-    public static SSLImplementation getInstance() {
-        return new JSSEImplementation();
-    }
-
-
     /**
      * Obtain an instance (not a singleton) of the implementation with the given
      * class name.
      *
-     * @param className The class name of the required implementation
+     * @param className The class name of the required implementation or null to
+     *                  use the default (currently {@link JSSEImplementation}.
      *
      * @return An instance of the required implementation
      *
@@ -60,7 +49,7 @@ public abstract class SSLImplementation {
     public static SSLImplementation getInstance(String className)
             throws ClassNotFoundException {
         if (className == null)
-            return getInstance();
+            return new JSSEImplementation();
 
         try {
             Class<?> clazz = Class.forName(className);
@@ -75,8 +64,6 @@ public abstract class SSLImplementation {
     }
 
 
-    public abstract String getImplementationName();
-
     public abstract SSLSupport getSSLSupport(SSLSession session);
 
     public abstract SSLUtil getSSLUtil(SSLHostConfig sslHostConfig,

==================================================
OpenSSLImplementation.java
index 0d6d152c3f..12ed6d15df 100644
--- a/java/org/apache/tomcat/util/net/jsse/JSSEImplementation.java
+++ b/java/org/apache/tomcat/util/net/jsse/JSSEImplementation.java
@@ -40,11 +40,6 @@ public class JSSEImplementation extends SSLImplementation {
         JSSESupport.init();
     }
 
-    @Override
-    public String getImplementationName(){
-        return "JSSE";
-    }
-
     @Override
     public SSLSupport getSSLSupport(SSLSession session) {
         return new JSSESupport(session);

==================================================
