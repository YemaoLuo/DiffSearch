d1d06197b21dbe02d52781b30a27fd41e369ae08
==================================================
Fix bug 43622. Don't overwrite the min compression size set by the compression attribute with the default.
==================================================
Mark Emlyn
==================================================
Fri Nov 30 19:13:33 2007 +0000
==================================================
Http11AprProtocol.java
Fix bug 43622. Don't overwrite the min compression size set by the compression attribute with the default.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@599914 13f79535-47bb-0310-9956-ffa450edef68



==================================================
Http11NioProtocol.java
index 20cf364a21..fe9145d06e 100644
--- a/java/org/apache/coyote/http11/Http11AprProtocol.java
+++ b/java/org/apache/coyote/http11/Http11AprProtocol.java
@@ -606,8 +606,8 @@ public class Http11AprProtocol implements ProtocolHandler, MBeanRegistration {
             processor.setMaxKeepAliveRequests(proto.maxKeepAliveRequests);
             processor.setTimeout(proto.timeout);
             processor.setDisableUploadTimeout(proto.disableUploadTimeout);
-            processor.setCompression(proto.compression);
             processor.setCompressionMinSize(proto.compressionMinSize);
+            processor.setCompression(proto.compression);
             processor.setNoCompressionUserAgents(proto.noCompressionUserAgents);
             processor.setCompressableMimeTypes(proto.compressableMimeTypes);
             processor.setRestrictedUserAgents(proto.restrictedUserAgents);

==================================================
Http11Protocol.java
index 3bc926cd92..567002d607 100644
--- a/java/org/apache/coyote/http11/Http11NioProtocol.java
+++ b/java/org/apache/coyote/http11/Http11NioProtocol.java
@@ -769,8 +769,8 @@ public class Http11NioProtocol implements ProtocolHandler, MBeanRegistration
             processor.setMaxKeepAliveRequests(proto.maxKeepAliveRequests);
             processor.setTimeout(proto.timeout);
             processor.setDisableUploadTimeout(proto.disableUploadTimeout);
-            processor.setCompression(proto.compression);
             processor.setCompressionMinSize(proto.compressionMinSize);
+            processor.setCompression(proto.compression);
             processor.setNoCompressionUserAgents(proto.noCompressionUserAgents);
             processor.setCompressableMimeTypes(proto.compressableMimeTypes);
             processor.setRestrictedUserAgents(proto.restrictedUserAgents);

==================================================
