b2ff3dd0e7477faaca220f8de84666077f806eb0
==================================================
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52055
==================================================
Mark Emlyn
==================================================
Sun May 6 21:27:55 2012 +0000
==================================================
AbstractInputBuffer.java
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52055
Ensure input filters are recycled when the request is recycled for all connectors.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1334787 13f79535-47bb-0310-9956-ffa450edef68



==================================================
InternalNioInputBuffer.java
index 221d1b1e86..0b83aab94a 100644
--- a/java/org/apache/coyote/http11/AbstractInputBuffer.java
+++ b/java/org/apache/coyote/http11/AbstractInputBuffer.java
@@ -248,6 +248,11 @@ public abstract class AbstractInputBuffer<S> implements InputBuffer{
         // Recycle Request object
         request.recycle();
 
+        // Recycle filters
+        for (int i = 0; i <= lastActiveFilter; i++) {
+            activeFilters[i].recycle();
+        }
+
         lastValid = 0;
         pos = 0;
         lastActiveFilter = -1;

==================================================
