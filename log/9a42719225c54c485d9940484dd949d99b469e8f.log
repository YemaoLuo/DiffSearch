9a42719225c54c485d9940484dd949d99b469e8f
==================================================
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48983
==================================================
Mark Emlyn
==================================================
Sun Apr 4 10:25:56 2010 +0000
==================================================
RemoteIpFilter.java
index fd029530bf..2175b668cc 100644
--- a/.classpath
+++ b/.classpath
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <classpath>
 	<classpathentry kind="src" path="java"/>
-	<classpathentry kind="src" path="test"/>
+	<classpathentry excluding="org/apache/catalina/tribes/|org/apache/catalina/valves/Benchmarks.java" kind="src" path="test"/>
 	<classpathentry kind="src" path="webapps/examples/WEB-INF/classes"/>
 	<classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER"/>
 	<classpathentry kind="con" path="org.eclipse.jdt.junit.JUNIT_CONTAINER/3"/>

==================================================
RemoteIpValve.java
index e54a5effa3..b6f9dfc3a5 100644
--- a/java/org/apache/catalina/filters/RemoteIpFilter.java
+++ b/java/org/apache/catalina/filters/RemoteIpFilter.java
@@ -789,6 +789,10 @@ public class RemoteIpFilter implements Filter {
             }
             chain.doFilter(xRequest, response);
         } else {
+            if (log.isDebugEnabled()) {
+                log.debug("Skip RemoteIpFilter for request " + request.getRequestURI() + " with originalRemoteAddr '"
+                        + request.getRemoteAddr() + "'");
+            }
             chain.doFilter(request, response);
         }
         

==================================================
