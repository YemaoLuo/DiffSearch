ff0d9a8f15e1b9da41065b5cc4af9b5a66d68cda
==================================================
Improve the fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=50201
==================================================
Konstantin Kolinko
==================================================
Mon Dec 13 02:09:32 2010 +0000
==================================================
StandardEngine.java
Improve the fix for https://issues.apache.org/bugzilla/show_bug.cgi?id=50201
- Use AtomicReference to guard against possible duplicate registration of
  listeners when logAccess() is called by several threads at the same time.
- Added install() and uninstall() method to AccessLogListener
  to help register/unregister the listeners.
- When defaultAccessLog is nulled, always unregister the listener as well.
  The listener does not need to be reused, because now we do create a listener
  when there is no log and it will take care of things.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1045003 13f79535-47bb-0310-9956-ffa450edef68



==================================================
