f40b999867efc2ee8e5e7c4b372e5dd4a432c74a
==================================================
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=57308
==================================================
Mark Thomas
==================================================
Fri Dec 5 14:55:38 2014 +0000
==================================================
ExpressionFactory.java
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=57308
Avoid unnecessary use of System.getProperty("file.separator")

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1643309 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TestClassLoaderLogManager.java
index 41f041d11a..664f62357f 100644
--- a/java/javax/el/ExpressionFactory.java
+++ b/java/javax/el/ExpressionFactory.java
@@ -53,7 +53,6 @@ public abstract class ExpressionFactory {
 
     private static final String PROPERTY_NAME = "javax.el.ExpressionFactory";
 
-    private static final String SEP;
     private static final String PROPERTY_FILE;
 
     private static final CacheValue nullTcclFactory = new CacheValue();
@@ -62,29 +61,19 @@ public abstract class ExpressionFactory {
 
     static {
         if (IS_SECURITY_ENABLED) {
-            SEP = AccessController.doPrivileged(
-                    new PrivilegedAction<String>(){
-                        @Override
-                        public String run() {
-                            return System.getProperty("file.separator");
-                        }
-
-                    }
-            );
             PROPERTY_FILE = AccessController.doPrivileged(
                     new PrivilegedAction<String>(){
                         @Override
                         public String run() {
-                            return System.getProperty("java.home") + SEP +
-                                    "lib" + SEP + "el.properties";
+                            return System.getProperty("java.home") + File.separator +
+                                    "lib" + File.separator + "el.properties";
                         }
 
                     }
             );
         } else {
-            SEP = System.getProperty("file.separator");
-            PROPERTY_FILE = System.getProperty("java.home") + SEP + "lib" +
-                    SEP + "el.properties";
+            PROPERTY_FILE = System.getProperty("java.home") + File.separator + "lib" +
+                    File.separator + "el.properties";
         }
     }
 

==================================================
