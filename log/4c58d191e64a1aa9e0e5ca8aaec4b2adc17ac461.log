4c58d191e64a1aa9e0e5ca8aaec4b2adc17ac461
==================================================
Do not create an empty arrays when Class has no interfaces.
==================================================
Konstantin Kolinko
==================================================
Fri Sep 12 20:29:08 2014 +0000
==================================================
ClassParser.java
Do not create an empty arrays when Class has no interfaces.
Skip creation of int[] indexes array and share the same empty String[] names array.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1624636 13f79535-47bb-0310-9956-ffa450edef68



==================================================
JavaClass.java
index a095beb07c..9f75a998ce 100644
--- a/java/org/apache/tomcat/util/bcel/classfile/ClassParser.java
+++ b/java/org/apache/tomcat/util/bcel/classfile/ClassParser.java
@@ -209,9 +209,11 @@ public final class ClassParser {
     private void readInterfaces() throws IOException, ClassFormatException {
         int interfaces_count;
         interfaces_count = file.readUnsignedShort();
-        interfaces = new int[interfaces_count];
-        for (int i = 0; i < interfaces_count; i++) {
-            interfaces[i] = file.readUnsignedShort();
+        if (interfaces_count > 0) {
+            interfaces = new int[interfaces_count];
+            for (int i = 0; i < interfaces_count; i++) {
+                interfaces[i] = file.readUnsignedShort();
+            }
         }
     }
 

==================================================
