bc531390391c52bc3e65ffc7f6af3e0f987d8dcb
==================================================
Log failure to close a resource instead of ignoring it silently.
==================================================
Felix Schumacher
==================================================
Mon Jan 26 18:05:06 2015 +0000
==================================================
CGIServlet.java
Log failure to close a resource instead of ignoring it silently.


git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1654852 13f79535-47bb-0310-9956-ffa450edef68



==================================================
DefaultServlet.java
index 468f0c6211..16a0a94e15 100644
--- a/java/org/apache/catalina/servlets/CGIServlet.java
+++ b/java/org/apache/catalina/servlets/CGIServlet.java
@@ -1135,7 +1135,8 @@ public final class CGIServlet extends HttpServlet {
             if (f.exists()) {
                 try {
                     is.close();
-                } catch (IOException ignore) {
+                } catch (IOException e) {
+                    log("Could not close is", e);
                 }
                 // Don't need to expand if it already exists
                 return;
@@ -1172,7 +1173,8 @@ public final class CGIServlet extends HttpServlet {
                     } finally {
                         try {
                             is.close();
-                        } catch (IOException ignore) {
+                        } catch (IOException e) {
+                            log("Could not close is.", e);
                         }
                         fos.close();
                     }

==================================================
JSSESocketFactory.java
index cb7508e6f8..be0dfc5432 100644
--- a/java/org/apache/catalina/servlets/DefaultServlet.java
+++ b/java/org/apache/catalina/servlets/DefaultServlet.java
@@ -1541,7 +1541,8 @@ public class DefaultServlet extends HttpServlet {
                 try (InputStream is = resource.getInputStream();
                         InputStreamReader reader = new InputStreamReader(is)) {
                     copyRange(reader, new PrintWriter(buffer));
-                } catch (IOException ignored) {
+                } catch (IOException e) {
+                    log("Failure to close reader", e);
                 }
                 return buffer.toString();
             } else {

==================================================
