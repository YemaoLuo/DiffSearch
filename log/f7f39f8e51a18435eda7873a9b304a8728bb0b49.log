f7f39f8e51a18435eda7873a9b304a8728bb0b49
==================================================
Sync with latest Commons BCEL changes
==================================================
Mark Thomas
==================================================
Wed Sep 1 12:08:21 2021 +0100
==================================================
ArrayElementValue.java
index 806669aeeb..1948af31c2 100644
--- a/MERGE.txt
+++ b/MERGE.txt
@@ -36,7 +36,7 @@ BCEL
 Sub-tree:
 src/main/java/org/apache/bcel
 The SHA1 ID / tag for the most recent commit to be merged to Tomcat is:
-4637826ac76db6cd4ff7eb56d1b13e16d4b43320 (2021-01-15)
+40d5eb4eda290c74b533f389fbc4e3495a4513f6 (2021-09-01)
 
 Codec
 -----

==================================================
ClassParser.java
index caff8803d0..8377707d27 100644
--- a/java/org/apache/tomcat/util/bcel/classfile/ArrayElementValue.java
+++ b/java/org/apache/tomcat/util/bcel/classfile/ArrayElementValue.java
@@ -40,7 +40,7 @@ public class ArrayElementValue extends ElementValue
         for (int i = 0; i < elementValues.length; i++)
         {
             sb.append(elementValues[i].stringifyValue());
-            if ((i + 1) < elementValues.length) {
+            if (i + 1 < elementValues.length) {
                 sb.append(',');
             }
         }

==================================================
ConstantPool.java
index af2485646c..3e1899349a 100644
--- a/java/org/apache/tomcat/util/bcel/classfile/ClassParser.java
+++ b/java/org/apache/tomcat/util/bcel/classfile/ClassParser.java
@@ -158,8 +158,8 @@ public final class ClassParser {
         if ((accessFlags & Const.ACC_INTERFACE) != 0) {
             accessFlags |= Const.ACC_ABSTRACT;
         }
-        if (((accessFlags & Const.ACC_ABSTRACT) != 0)
-                && ((accessFlags & Const.ACC_FINAL) != 0)) {
+        if ((accessFlags & Const.ACC_ABSTRACT) != 0
+                && (accessFlags & Const.ACC_FINAL) != 0) {
             throw new ClassFormatException("Class can't be both final and abstract");
         }
 

==================================================
