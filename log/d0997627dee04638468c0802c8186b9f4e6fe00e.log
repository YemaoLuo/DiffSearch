d0997627dee04638468c0802c8186b9f4e6fe00e
==================================================
Code clean-up for o.a.catalina.security
==================================================
Mark Emlyn
==================================================
Sun Jul 15 19:47:20 2012 +0000
==================================================
SecurityConfig.java
Code clean-up for o.a.catalina.security
 - Add final prompted by UCDetector
 - Java 7 use of <>

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1361776 13f79535-47bb-0310-9956-ffa450edef68



==================================================
SecurityListener.java
index 5b4cd04ae6..b7b63afdd3 100644
--- a/java/org/apache/catalina/security/SecurityConfig.java
+++ b/java/org/apache/catalina/security/SecurityConfig.java
@@ -49,26 +49,31 @@ public final class SecurityConfig{
     /**
      * List of protected package from conf/catalina.properties
      */
-    private String packageDefinition;
+    private final String packageDefinition;
 
 
     /**
      * List of protected package from conf/catalina.properties
      */
-    private String packageAccess;
+    private final String packageAccess;
 
 
     /**
      * Create a single instance of this class.
      */
-    private SecurityConfig(){
+    private SecurityConfig() {
+        String definition = null;
+        String access = null;
         try{
-            packageDefinition = CatalinaProperties.getProperty("package.definition");
-            packageAccess = CatalinaProperties.getProperty("package.access");
+            definition = CatalinaProperties.getProperty("package.definition");
+            access = CatalinaProperties.getProperty("package.access");
         } catch (java.lang.Exception ex){
             if (log.isDebugEnabled()){
                 log.debug("Unable to load properties using CatalinaProperties", ex);
             }
+        } finally {
+            packageDefinition = definition;
+            packageAccess = access;
         }
     }
 

==================================================
SecurityUtil.java
index 6a51ea533a..d736b9a296 100644
--- a/java/org/apache/catalina/security/SecurityListener.java
+++ b/java/org/apache/catalina/security/SecurityListener.java
@@ -42,7 +42,7 @@ public class SecurityListener implements LifecycleListener {
     /**
      * The list of operating system users not permitted to run Tomcat.
      */
-    private Set<String> checkedOsUsers = new HashSet<String>();
+    private final Set<String> checkedOsUsers = new HashSet<>();
 
     /**
      * The minimum umask that must be configured for the operating system user

==================================================
