2bf88a14213adc8f31ca022a114d0126435d1704
==================================================
Remove deprecated code
==================================================
Mark Thomas
==================================================
Fri Jan 31 16:16:49 2020 +0000
==================================================
Mapper.java
Remove deprecated code


==================================================
MappingData.java
index 0553f4a955..5e57db571f 100644
--- a/java/org/apache/catalina/mapper/Mapper.java
+++ b/java/org/apache/catalina/mapper/Mapper.java
@@ -732,7 +732,6 @@ public final class Mapper {
      * Map the specified URI.
      * @throws IOException
      */
-    @SuppressWarnings("deprecation") // contextPath
     private final void internalMap(CharChunk host, CharChunk uri,
             String version, MappingData mappingData) throws IOException {
 
@@ -823,8 +822,6 @@ public final class Mapper {
             return;
         }
 
-        mappingData.contextPath.setString(context.name);
-
         ContextVersion contextVersion = null;
         ContextVersion[] contextVersions = context.versions;
         final int versionCount = contextVersions.length;
@@ -1065,7 +1062,6 @@ public final class Mapper {
     /**
      * Exact mapping.
      */
-    @SuppressWarnings("deprecation") // contextPath
     private final void internalMapExactWrapper
         (MappedWrapper[] wrappers, CharChunk path, MappingData mappingData) {
         MappedWrapper wrapper = exactFind(wrappers, path);
@@ -1076,8 +1072,6 @@ public final class Mapper {
                 // Special handling for Context Root mapped servlet
                 mappingData.pathInfo.setString("/");
                 mappingData.wrapperPath.setString("");
-                // This seems wrong but it is what the spec says...
-                mappingData.contextPath.setString("");
                 mappingData.matchType = MappingMatch.CONTEXT_ROOT;
             } else {
                 mappingData.wrapperPath.setString(wrapper.name);

==================================================
TestMapper.java
index 2d9ec3ae93..8c5ccec52e 100644
--- a/java/org/apache/catalina/mapper/MappingData.java
+++ b/java/org/apache/catalina/mapper/MappingData.java
@@ -38,11 +38,6 @@ public class MappingData {
     public Wrapper wrapper = null;
     public boolean jspWildCard = false;
 
-    /**
-     * @deprecated Unused. This will be removed in Tomcat 10.
-     */
-    @Deprecated
-    public final MessageBytes contextPath = MessageBytes.newInstance();
     public final MessageBytes requestPath = MessageBytes.newInstance();
     public final MessageBytes wrapperPath = MessageBytes.newInstance();
     public final MessageBytes pathInfo = MessageBytes.newInstance();
@@ -59,7 +54,6 @@ public class MappingData {
         contexts = null;
         wrapper = null;
         jspWildCard = false;
-        contextPath.recycle();
         requestPath.recycle();
         wrapperPath.recycle();
         pathInfo.recycle();

==================================================
