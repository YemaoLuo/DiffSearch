1a983278441f5aefb37f6dc4ed6dbfd1caa6b952
==================================================
60461: Sync SSL session access for the APR connector.
==================================================
Remy Maucherat
==================================================
Fri Jun 23 21:34:50 2017 +0000
==================================================
AprEndpoint.java
60461: Sync SSL session access for the APR connector.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1799709 13f79535-47bb-0310-9956-ffa450edef68



==================================================
AprSSLSupport.java
index 6401bcb805..d3bf978eed 100644
--- a/java/org/apache/tomcat/util/net/AprEndpoint.java
+++ b/java/org/apache/tomcat/util/net/AprEndpoint.java
@@ -2761,5 +2761,44 @@ public class AprEndpoint extends AbstractEndpoint<Long,Long> implements SNICallB
         public void setAppReadBufHandler(ApplicationBufferHandler handler) {
             // no-op
         }
+
+        String getSSLInfoS(int id) {
+            synchronized (closedLock) {
+                if (closed) {
+                    return null;
+                }
+                try {
+                    return SSLSocket.getInfoS(getSocket().longValue(), id);
+                } catch (Exception e) {
+                    throw new IllegalStateException(e);
+                }
+            }
+        }
+
+        int getSSLInfoI(int id) {
+            synchronized (closedLock) {
+                if (closed) {
+                    return 0;
+                }
+                try {
+                    return SSLSocket.getInfoI(getSocket().longValue(), id);
+                } catch (Exception e) {
+                    throw new IllegalStateException(e);
+                }
+            }
+        }
+
+        byte[] getSSLInfoB(int id) {
+            synchronized (closedLock) {
+                if (closed) {
+                    return null;
+                }
+                try {
+                    return SSLSocket.getInfoB(getSocket().longValue(), id);
+                } catch (Exception e) {
+                    throw new IllegalStateException(e);
+                }
+            }
+        }
     }
 }

==================================================
