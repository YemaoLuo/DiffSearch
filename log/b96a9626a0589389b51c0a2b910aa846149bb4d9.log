b96a9626a0589389b51c0a2b910aa846149bb4d9
==================================================
Refactor. It makes more sense to have all the init code in one place.
==================================================
Mark Thomas
==================================================
Wed Sep 16 20:17:34 2015 +0000
==================================================
Stream.java
Refactor. It makes more sense to have all the init code in one place.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1703458 13f79535-47bb-0310-9956-ffa450edef68



==================================================
StreamProcessor.java
index c0a355707c..11f82987f3 100644
--- a/java/org/apache/coyote/http2/Stream.java
+++ b/java/org/apache/coyote/http2/Stream.java
@@ -71,6 +71,8 @@ public class Stream extends AbstractStream implements HeaderEmitter {
             // TODO Assuming the body has been read at this point is not valid
             state.recievedEndOfStream();
         }
+        // No sendfile for HTTP/2 (it is enabled by default in the request)
+        this.coyoteRequest.setSendfile(false);
         this.coyoteResponse.setOutputBuffer(outputBuffer);
         this.coyoteRequest.setResponse(coyoteResponse);
     }

==================================================
