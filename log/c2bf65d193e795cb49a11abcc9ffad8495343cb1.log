c2bf65d193e795cb49a11abcc9ffad8495343cb1
==================================================
Fix https://bz.apache.org/bugzilla/show_bug.cgi?id=62172
==================================================
Mark Thomas
==================================================
Tue Apr 3 17:30:56 2018 +0000
==================================================
ValidatorTask.java
Fix https://bz.apache.org/bugzilla/show_bug.cgi?id=62172
Improve Javadoc for org.apache.catalina.startup.Constants and ensure that the constants are correctly used.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1828262 13f79535-47bb-0310-9956-ffa450edef68



==================================================
Constants.java
index 3fb8269550..1ac95acb1b 100644
--- a/java/org/apache/catalina/ant/ValidatorTask.java
+++ b/java/org/apache/catalina/ant/ValidatorTask.java
@@ -25,7 +25,6 @@ import java.io.FileInputStream;
 import java.io.InputStream;
 
 import org.apache.catalina.Globals;
-import org.apache.catalina.startup.Constants;
 import org.apache.tomcat.util.descriptor.DigesterFactory;
 import org.apache.tomcat.util.digester.Digester;
 import org.apache.tools.ant.BuildException;
@@ -64,7 +63,6 @@ public class ValidatorTask extends BaseRedirectorHelperTask {
 
     // --------------------------------------------------------- Public Methods
 
-
     /**
      * Execute the specified command.  This logic only performs the common
      * attribute validation required by all subclasses; it does not perform
@@ -79,7 +77,7 @@ public class ValidatorTask extends BaseRedirectorHelperTask {
             throw new BuildException("Must specify 'path'");
         }
 
-        File file = new File(path, Constants.ApplicationWebXml);
+        File file = new File(path, "WEB-INF/web.xml");
         if (!file.canRead()) {
             throw new BuildException("Cannot find web.xml");
         }

==================================================
HostConfig.java
index 856951675d..ff07d1f70f 100644
--- a/java/org/apache/catalina/startup/Constants.java
+++ b/java/org/apache/catalina/startup/Constants.java
@@ -18,6 +18,9 @@ package org.apache.catalina.startup;
 
 /**
  * String constants for the startup package.
+ * <br>
+ * Note that some values include a leading '/' and that some do not. This is
+ * intentional based on how the values are used.
  *
  * @author Craig R. McClanahan
  */
@@ -44,6 +47,5 @@ public final class Constants {
      *
      * @see Tomcat
      */
-    public static final String NoDefaultWebXml =
-            "org/apache/catalina/startup/NO_DEFAULT_XML";
+    public static final String NoDefaultWebXml = "org/apache/catalina/startup/NO_DEFAULT_XML";
 }

==================================================
