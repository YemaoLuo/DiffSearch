9a2c1ae71ea21611d63a5390d4018cb0e03fed11
==================================================
Reduce boilerplate code.
==================================================
Mark Emlyn
==================================================
Mon Nov 3 11:48:38 2014 +0000
==================================================
TestAbstractAjpProcessor.java
Reduce boilerplate code.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1636329 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TestAbstractHttp11Processor.java
index 145f140224..648eba070b 100644
--- a/test/org/apache/coyote/ajp/TestAbstractAjpProcessor.java
+++ b/test/org/apache/coyote/ajp/TestAbstractAjpProcessor.java
@@ -16,7 +16,6 @@
  */
 package org.apache.coyote.ajp;
 
-import java.io.File;
 import java.io.IOException;
 import java.io.InputStream;
 import java.io.PrintWriter;
@@ -121,13 +120,7 @@ public class TestAbstractAjpProcessor extends TomcatBaseTest {
 
     public void doTestPost(boolean multipleCL, int expectedStatus) throws Exception {
 
-        Tomcat tomcat = getTomcatInstance();
-
-        // Use the normal Tomcat ROOT context
-        File root = new File("test/webapp");
-        tomcat.addWebapp("", root.getAbsolutePath());
-
-        tomcat.start();
+        getTomcatInstanceTestWebapp(false, true);
 
         SimpleAjpClient ajpClient = new SimpleAjpClient();
         ajpClient.setPort(getPort());
@@ -136,7 +129,7 @@ public class TestAbstractAjpProcessor extends TomcatBaseTest {
         validateCpong(ajpClient.cping());
 
         TesterAjpMessage forwardMessage =
-                ajpClient.createForwardMessage("/echo-params.jsp", 4);
+                ajpClient.createForwardMessage("/test/echo-params.jsp", 4);
         forwardMessage.addHeader(0xA008, "9");
         if (multipleCL) {
             forwardMessage.addHeader(0xA008, "99");

==================================================
