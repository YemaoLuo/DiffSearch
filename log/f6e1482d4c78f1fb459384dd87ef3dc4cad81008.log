f6e1482d4c78f1fb459384dd87ef3dc4cad81008
==================================================
BZ 64153. Ensure Context.getParentClassLoader() is consistent
==================================================
Mark Thomas
==================================================
Wed Feb 26 17:43:41 2020 +0000
==================================================
StandardContext.java
BZ 64153. Ensure Context.getParentClassLoader() is consistent

Deprecate the setting of the parent class loader via the Loader and if
it is set via the loader, keep it in sync with the Context.
Fixes https://bz.apache.org/bugzilla/show_bug.cgi?id=64153


==================================================
WebappLoader.java
index 5f2e8b17b9..abb276c926 100644
--- a/java/org/apache/catalina/core/StandardContext.java
+++ b/java/org/apache/catalina/core/StandardContext.java
@@ -4842,7 +4842,7 @@ public class StandardContext extends ContainerBase
         }
 
         if (getLoader() == null) {
-            WebappLoader webappLoader = new WebappLoader(getParentClassLoader());
+            WebappLoader webappLoader = new WebappLoader();
             webappLoader.setDelegate(getDelegate());
             setLoader(webappLoader);
         }

==================================================
