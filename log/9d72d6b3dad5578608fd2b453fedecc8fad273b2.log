9d72d6b3dad5578608fd2b453fedecc8fad273b2
==================================================
Remove deprecated code.
==================================================
Mark Thomas
==================================================
Mon Sep 14 09:07:34 2015 +0000
==================================================
LegacyCookieProcessor.java
Remove deprecated code.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1702875 13f79535-47bb-0310-9956-ffa450edef68



==================================================
SetCookieSupport.java
index d25ef83ec7..348dfefa4c 100644
--- a/java/org/apache/tomcat/util/http/LegacyCookieProcessor.java
+++ b/java/org/apache/tomcat/util/http/LegacyCookieProcessor.java
@@ -84,6 +84,8 @@ public final class LegacyCookieProcessor implements CookieProcessor {
         ANCIENT_DATE = COOKIE_DATE_FORMAT.get().format(new Date(10000));
     }
 
+    private final boolean STRICT_SERVLET_COMPLIANCE =
+            Boolean.getBoolean("org.apache.catalina.STRICT_SERVLET_COMPLIANCE");
 
     @SuppressWarnings("deprecation") // Default to false when deprecated code is removed
     private boolean allowEqualsInValue = CookieSupport.ALLOW_EQUALS_IN_VALUE;
@@ -98,9 +100,7 @@ public final class LegacyCookieProcessor implements CookieProcessor {
                                      // when deprecated code is removed
     private boolean preserveCookieHeader = CookieSupport.PRESERVE_COOKIE_HEADER;
 
-    @SuppressWarnings("deprecation") // Default to !STRICT_SERVLET_COMPLIANCE
-                                     // when deprecated code is removed
-    private boolean alwaysAddExpires = SetCookieSupport.ALWAYS_ADD_EXPIRES;
+    private boolean alwaysAddExpires = !STRICT_SERVLET_COMPLIANCE;
 
     private final BitSet httpSeparatorFlags = new BitSet(128);
 

==================================================
