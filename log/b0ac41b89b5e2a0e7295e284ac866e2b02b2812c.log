b0ac41b89b5e2a0e7295e284ac866e2b02b2812c
==================================================
Implement async timeout for HTTP/2
==================================================
Mark Thomas
==================================================
Tue Oct 20 12:11:46 2015 +0000
==================================================
AjpProcessor.java
Implement async timeout for HTTP/2
Align ASYNC_SETTIMOUT implementations across processors

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1709579 13f79535-47bb-0310-9956-ffa450edef68



==================================================
Http11Processor.java
index cff5011ba4..1915d4d8e2 100644
--- a/java/org/apache/coyote/ajp/AjpProcessor.java
+++ b/java/org/apache/coyote/ajp/AjpProcessor.java
@@ -515,8 +515,10 @@ public class AjpProcessor extends AbstractProcessor {
             break;
         }
         case ASYNC_SETTIMEOUT: {
-            if (param == null) return;
-            long timeout = ((Long)param).longValue();
+            if (param == null) {
+                return;
+            }
+            long timeout = ((Long) param).longValue();
             setAsyncTimeout(timeout);
             break;
         }

==================================================
StreamProcessor.java
index d5eed393c1..23e8954811 100644
--- a/java/org/apache/coyote/http11/Http11Processor.java
+++ b/java/org/apache/coyote/http11/Http11Processor.java
@@ -738,7 +738,7 @@ public class Http11Processor extends AbstractProcessor {
             break;
         }
         case ASYNC_SETTIMEOUT: {
-            if (param == null || socketWrapper == null) {
+            if (param == null) {
                 return;
             }
             long timeout = ((Long) param).longValue();

==================================================
