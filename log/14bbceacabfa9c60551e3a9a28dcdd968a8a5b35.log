14bbceacabfa9c60551e3a9a28dcdd968a8a5b35
==================================================
Pre-load the ExceptionUtils class. Since the class is used extensively in error handling, it is prudent to pre-load it to avoid any failure to load this class masking the true problem during error handling.
==================================================
Mark Thomas
==================================================
Thu Apr 6 11:01:42 2017 +0000
==================================================
Catalina.java
Pre-load the ExceptionUtils class. Since the class is used extensively in error handling, it is prudent to pre-load it to avoid any failure to load this class masking the true problem during error handling.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1790376 13f79535-47bb-0310-9956-ffa450edef68



==================================================
Tomcat.java
index 09fa92de35..cb83a01e4e 100644
--- a/java/org/apache/catalina/startup/Catalina.java
+++ b/java/org/apache/catalina/startup/Catalina.java
@@ -125,6 +125,7 @@ public class Catalina {
 
     public Catalina() {
         setSecurityProtection();
+        ExceptionUtils.preload();
     }
 
 

==================================================
ExceptionUtils.java
index 791f34593a..f629ff20cf 100644
--- a/java/org/apache/catalina/startup/Tomcat.java
+++ b/java/org/apache/catalina/startup/Tomcat.java
@@ -61,6 +61,7 @@ import org.apache.catalina.core.StandardService;
 import org.apache.catalina.core.StandardWrapper;
 import org.apache.catalina.realm.GenericPrincipal;
 import org.apache.catalina.realm.RealmBase;
+import org.apache.tomcat.util.ExceptionUtils;
 import org.apache.tomcat.util.buf.UriUtil;
 import org.apache.tomcat.util.descriptor.web.LoginConfig;
 
@@ -144,7 +145,7 @@ public class Tomcat {
     private final Map<String, Principal> userPrincipals = new HashMap<>();
 
     public Tomcat() {
-        // NOOP
+        ExceptionUtils.preload();
     }
 
     /**

==================================================
