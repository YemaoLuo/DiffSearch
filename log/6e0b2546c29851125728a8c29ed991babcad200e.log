6e0b2546c29851125728a8c29ed991babcad200e
==================================================
Use try-with-resources. Correct formatting, which includes indenting a nested block of code.
==================================================
Konstantin Kolinko
==================================================
Sat Nov 22 12:14:11 2014 +0000
==================================================
TagFileProcessor.java
Use try-with-resources. Correct formatting, which includes indenting a nested block of code.
Followup to r1640976, r1640978

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1641051 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TagLibraryInfoImpl.java
index 42ad6e4106..6b07f42ec5 100644
--- a/java/org/apache/jasper/compiler/TagFileProcessor.java
+++ b/java/org/apache/jasper/compiler/TagFileProcessor.java
@@ -631,10 +631,7 @@ class TagFileProcessor {
                         compiler.getCompilationContext().getTldResourcePath(
                             tagFileInfo.getTagInfo().getTagLibrary().getURI());
 
-                    Jar jar = null;
-                    try
-                    {
-                        jar = tldResourcePath.openJar();
+                    try (Jar jar = tldResourcePath.openJar()) {
 
                         if (jar != null) {
                             // Add TLD
@@ -643,8 +640,7 @@ class TagFileProcessor {
                             // Add Tag
                             pageInfo.addDependant(jar.getURL(tagFilePath.substring(1)),
                                                   Long.valueOf(jar.getLastModified(tagFilePath.substring(1))));
-                        }
-                        else {
+                        } else {
                             pageInfo.addDependant(tagFilePath,
                                                   compiler.getCompilationContext().getLastModified(
                                                                                                    tagFilePath));
@@ -652,11 +648,6 @@ class TagFileProcessor {
                     } catch (IOException ioe) {
                         throw new JasperException(ioe);
                     }
-                    finally
-                    {
-                        if(null != jar)
-                            jar.close(); // Jar.close does not "throw IOException" but probably should
-                    }
                 } else {
                     pageInfo.addDependant(tagFilePath,
                             compiler.getCompilationContext().getLastModified(

==================================================
