7294fa9b1f0fc35b9e169a6e454dc58ac4477b67
==================================================
Update the Servlet 4.0 API implementation to reflect the change in method name from getPushBuilder() to newPushBuilder()
==================================================
Mark Thomas
==================================================
Tue Mar 28 18:42:05 2017 +0000
==================================================
HttpServletRequest.java
Update the Servlet 4.0 API implementation to reflect the change in method name from getPushBuilder() to newPushBuilder()

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1789184 13f79535-47bb-0310-9956-ffa450edef68



==================================================
HttpServletRequestWrapper.java
index 1b59ff11f1..e81b1a9610 100644
--- a/java/javax/servlet/http/HttpServletRequest.java
+++ b/java/javax/servlet/http/HttpServletRequest.java
@@ -253,7 +253,7 @@ public interface HttpServletRequest extends ServletRequest {
      *
      * @since Servlet 4.0
      */
-    public default PushBuilder getPushBuilder() {
+    public default PushBuilder newPushBuilder() {
         return null;
     }
 

==================================================
Request.java
index a1cdbb2ac8..fdff779ff0 100644
--- a/java/javax/servlet/http/HttpServletRequestWrapper.java
+++ b/java/javax/servlet/http/HttpServletRequestWrapper.java
@@ -388,12 +388,12 @@ public class HttpServletRequestWrapper extends ServletRequestWrapper implements
      * {@inheritDoc}
      * <p>
      * The default behavior of this method is to return
-     * {@link HttpServletRequest#getPushBuilder()} on the wrapped request object.
+     * {@link HttpServletRequest#newPushBuilder()} on the wrapped request object.
      *
      * @since Servlet 4.0
      */
     @Override
-    public PushBuilder getPushBuilder() {
-        return this._getHttpServletRequest().getPushBuilder();
+    public PushBuilder newPushBuilder() {
+        return this._getHttpServletRequest().newPushBuilder();
     }
 }

==================================================
RequestFacade.java
index 058d3df51a..4fa2dec116 100644
--- a/java/org/apache/catalina/connector/Request.java
+++ b/java/org/apache/catalina/connector/Request.java
@@ -1905,7 +1905,7 @@ public class Request implements HttpServletRequest {
      * @since Servlet 4.0
      */
     @Override
-    public PushBuilder getPushBuilder() {
+    public PushBuilder newPushBuilder() {
         AtomicBoolean result = new AtomicBoolean();
         coyoteRequest.action(ActionCode.IS_PUSH_SUPPORTED, result);
         if (result.get()) {

==================================================
ApplicationHttpRequest.java
index fb17b5c921..6977949ad8 100644
--- a/java/org/apache/catalina/connector/RequestFacade.java
+++ b/java/org/apache/catalina/connector/RequestFacade.java
@@ -1134,7 +1134,7 @@ public class RequestFacade implements HttpServletRequest {
      * @since Servlet 4.0
      */
     @Override
-    public PushBuilder getPushBuilder() {
-        return request.getPushBuilder();
+    public PushBuilder newPushBuilder() {
+        return request.newPushBuilder();
     }
 }

==================================================
RemoteIpFilter.java
index 8b06faec28..7438d647f0 100644
--- a/java/org/apache/catalina/core/ApplicationHttpRequest.java
+++ b/java/org/apache/catalina/core/ApplicationHttpRequest.java
@@ -617,7 +617,7 @@ class ApplicationHttpRequest extends HttpServletRequestWrapper {
 
 
     @Override
-    public PushBuilder getPushBuilder() {
+    public PushBuilder newPushBuilder() {
         return new ApplicationPushBuilder(this);
     }
 

==================================================
TesterHttpServletRequest.java
index 57398bea7e..0e61673284 100644
--- a/java/org/apache/catalina/filters/RemoteIpFilter.java
+++ b/java/org/apache/catalina/filters/RemoteIpFilter.java
@@ -626,7 +626,7 @@ public class RemoteIpFilter extends GenericFilter {
         }
 
         @Override
-        public PushBuilder getPushBuilder() {
+        public PushBuilder newPushBuilder() {
             return new ApplicationPushBuilder(this);
         }
     }

==================================================
SimpleImagePush.java
index 808cfdd61b..6a3962915d 100644
--- a/webapps/docs/changelog.xml
+++ b/webapps/docs/changelog.xml
@@ -45,6 +45,15 @@
   issues do not "pop up" wrt. others).
 -->
 <section name="Tomcat 9.0.0.M20 (markt)" rtext="in development">
+  <subsection name="Catalina">
+    <changelog>
+      <update>
+        Update the Servlet 4.0 API implementation to reflect the change in
+        method name from <code>getPushBuilder()</code> to
+        <code>newPushBuilder()</code>. (markt)
+      </update>
+    </changelog>
+  </subsection>
 </section>
 <section name="Tomcat 9.0.0.M19 (markt)" rtext="release in progress">
   <subsection name="Catalina">

==================================================
