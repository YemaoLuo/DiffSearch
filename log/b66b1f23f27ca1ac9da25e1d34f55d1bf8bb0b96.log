b66b1f23f27ca1ac9da25e1d34f55d1bf8bb0b96
==================================================
Refactor isReady() in preparation for fix of BZ 64771
==================================================
Mark Thomas
==================================================
Mon Mar 22 21:43:27 2021 +0000
==================================================
InputBuffer.java
Refactor isReady() in preparation for fix of BZ 64771

https://bz.apache.org/bugzilla/show_bug.cgi?id=64771


==================================================
Request.java
index 9b8ebb721e..79090ee825 100644
--- a/java/org/apache/catalina/connector/InputBuffer.java
+++ b/java/org/apache/catalina/connector/InputBuffer.java
@@ -27,8 +27,6 @@ import java.security.PrivilegedActionException;
 import java.security.PrivilegedExceptionAction;
 import java.util.Map;
 import java.util.concurrent.ConcurrentHashMap;
-import java.util.concurrent.atomic.AtomicBoolean;
-
 import jakarta.servlet.ReadListener;
 
 import org.apache.catalina.security.SecurityUtil;
@@ -301,9 +299,7 @@ public class InputBuffer extends Reader
             return true;
         }
 
-        AtomicBoolean result = new AtomicBoolean();
-        coyoteRequest.action(ActionCode.NB_READ_INTEREST, result);
-        return result.get();
+        return coyoteRequest.isReady();
     }
 
 

==================================================
