ee7f9debf1634e5c9bed0246dd1ac2dd0260ef8f
==================================================
Better names
==================================================
Mark Emlyn
==================================================
Fri Nov 22 16:02:16 2013 +0000
==================================================
Globals.java
Better names

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1544593 13f79535-47bb-0310-9956-ffa450edef68



==================================================
ApplicationContext.java
index 723ecd3950..aeb675fb48 100644
--- a/java/org/apache/catalina/Globals.java
+++ b/java/org/apache/catalina/Globals.java
@@ -277,8 +277,8 @@ public final class Globals {
      * <p>
      * This must be kept in sync with org.apache.jasper.Constants
      */
-    public static final String JASPER_XML_VALIDATION_ATTR =
-            "org.apache.jasper.XML_VALIDATE";
+    public static final String JASPER_XML_VALIDATION_TLD_ATTR =
+            "org.apache.jasper.XML_VALIDATE_TLD";
 
 
     /**

==================================================
Constants.java
index 45aea51da2..56fc4bf3fb 100644
--- a/java/org/apache/catalina/core/ApplicationContext.java
+++ b/java/org/apache/catalina/core/ApplicationContext.java
@@ -222,7 +222,7 @@ public class ApplicationContext
     public Object getAttribute(String name) {
         // Special handling for XML validation as the context setting must
         // always override anything that might have been set by an application.
-        if (Globals.JASPER_XML_VALIDATION_ATTR.equals(name) &&
+        if (Globals.JASPER_XML_VALIDATION_TLD_ATTR.equals(name) &&
                 context.getTldValidation()) {
             return Boolean.TRUE;
         } else if (Globals.JASPER_XML_VALIDATION_DOC_ATTR.equals(name) &&
@@ -244,7 +244,7 @@ public class ApplicationContext
         // Special handling for XML validation as this attribute will always be
         // available if validation has been enabled on the context
         if (context.getTldValidation()) {
-            names.add(Globals.JASPER_XML_VALIDATION_ATTR);
+            names.add(Globals.JASPER_XML_VALIDATION_TLD_ATTR);
         }
         if (context.getXmlValidationJspDoc()) {
             names.add(Globals.JASPER_XML_VALIDATION_DOC_ATTR);

==================================================
ImplicitTagLibraryInfo.java
index 17e6ab7e59..5419484299 100644
--- a/java/org/apache/jasper/Constants.java
+++ b/java/org/apache/jasper/Constants.java
@@ -158,7 +158,7 @@ public class Constants {
      * <p>
      * This must be kept in sync with org.apache.catalina.Globals
      */
-    public static final String XML_VALIDATION_ATTR = "org.apache.jasper.XML_VALIDATE";
+    public static final String XML_VALIDATION_TLD_ATTR = "org.apache.jasper.XML_VALIDATE_TLD";
 
 
     /**

==================================================
TldCache.java
index 8b5a21ed06..e6aec7292d 100644
--- a/java/org/apache/jasper/compiler/ImplicitTagLibraryInfo.java
+++ b/java/org/apache/jasper/compiler/ImplicitTagLibraryInfo.java
@@ -121,7 +121,7 @@ class ImplicitTagLibraryInfo extends TagLibraryInfo {
                         TldResourcePath resourcePath = new TldResourcePath(url, path);
                         boolean validate = Boolean.parseBoolean(
                                 ctxt.getServletContext().getInitParameter(
-                                        Constants.XML_VALIDATION_ATTR));
+                                        Constants.XML_VALIDATION_TLD_ATTR));
                         TldParser parser = new TldParser(true, validate, new ImplicitTldRuleSet());
                         taglibXml = parser.parse(resourcePath);
                     } catch (IOException | SAXException e) {

==================================================
JasperInitializer.java
index 3d3f70ba13..1d3ee9cff1 100644
--- a/java/org/apache/jasper/compiler/TldCache.java
+++ b/java/org/apache/jasper/compiler/TldCache.java
@@ -73,7 +73,7 @@ public class TldCache {
             this.tldResourcePathTaglibXmlMap.put(tldResourcePath, cacheEntry);
         }
         boolean validate = Boolean.parseBoolean(
-                servletContext.getInitParameter(Constants.XML_VALIDATION_ATTR));
+                servletContext.getInitParameter(Constants.XML_VALIDATION_TLD_ATTR));
         tldParser = new TldParser(true, validate);
     }
 

==================================================
