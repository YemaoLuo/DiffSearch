a8472b7879210dfd8e8dc78649724dc4bbce6f35
==================================================
Handle the case where the session attribute filtering configuration was changed while the web application was stopped.
==================================================
Mark Thomas
==================================================
Mon Jan 18 09:43:52 2016 +0000
==================================================
DeltaSession.java
Handle the case where the session attribute filtering configuration was changed while the web application was stopped.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1725207 13f79535-47bb-0310-9956-ffa450edef68



==================================================
StandardSession.java
index 209c855786..3e375f31b1 100644
--- a/java/org/apache/catalina/ha/session/DeltaSession.java
+++ b/java/org/apache/catalina/ha/session/DeltaSession.java
@@ -751,6 +751,11 @@ public class DeltaSession extends StandardSession implements Externalizable,Clus
                 }
                 throw wae;
             }
+            // Handle the case where the filter configuration was changed while
+            // the web application was stopped.
+            if (exclude(name, value)) {
+                continue;
+            }
             attributes.put(name, value);
         }
         isValid = isValidSave;

==================================================
