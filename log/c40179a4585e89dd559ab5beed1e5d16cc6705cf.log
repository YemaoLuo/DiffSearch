c40179a4585e89dd559ab5beed1e5d16cc6705cf
==================================================
Rename no-el to el-as-literal
==================================================
Mark Emlyn
==================================================
Sun Mar 7 20:51:34 2010 +0000
==================================================
TestJspConfig.java
Rename no-el to el-as-literal
Add tests for 2.3, 2.4 & 2.5 webapps with Tag libraries that require various JSP versions
These currently all work and I think some should fail - looking into that next

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@920109 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TestValidator.java
index 0695aa93c1..cab6f85f70 100644
--- a/test/org/apache/jasper/compiler/TestJspConfig.java
+++ b/test/org/apache/jasper/compiler/TestJspConfig.java
@@ -36,7 +36,7 @@ public class TestJspConfig extends TomcatBaseTest {
         tomcat.start();
 
         ByteChunk res = getUrl("http://localhost:" + getPort() +
-                "/test/no-el.jsp");
+                "/test/el-as-literal.jsp");
 
         String result = res.toString();
         
@@ -44,4 +44,59 @@ public class TestJspConfig extends TomcatBaseTest {
         assertTrue(result.indexOf("<p>01-#{'hello world'}</p>") > 0);
     }
 
+    public void testServlet24NoEL() throws Exception {
+        Tomcat tomcat = getTomcatInstance();
+
+        File appDir = 
+            new File("test/webapp-2.4");
+        // app dir is relative to server home
+        tomcat.addWebapp(null, "/test", appDir.getAbsolutePath());
+        
+        tomcat.start();
+
+        ByteChunk res = getUrl("http://localhost:" + getPort() +
+                "/test/el-as-literal.jsp");
+
+        String result = res.toString();
+        
+        assertTrue(result.indexOf("<p>00-hello world</p>") > 0);
+        assertTrue(result.indexOf("<p>01-#{'hello world'}</p>") > 0);
+    }
+
+    public void testServlet25NoEL() throws Exception {
+        Tomcat tomcat = getTomcatInstance();
+
+        File appDir = 
+            new File("test/webapp-2.5");
+        // app dir is relative to server home
+        tomcat.addWebapp(null, "/test", appDir.getAbsolutePath());
+        
+        tomcat.start();
+
+        ByteChunk res = getUrl("http://localhost:" + getPort() +
+                "/test/el-as-literal.jsp");
+
+        String result = res.toString();
+        
+        assertTrue(result.indexOf("<p>00-hello world</p>") > 0);
+    }
+
+    public void testServlet30NoEL() throws Exception {
+        Tomcat tomcat = getTomcatInstance();
+
+        File appDir = 
+            new File("test/webapp-3.0");
+        // app dir is relative to server home
+        tomcat.addWebapp(null, "/test", appDir.getAbsolutePath());
+        
+        tomcat.start();
+
+        ByteChunk res = getUrl("http://localhost:" + getPort() +
+                "/test/el-as-literal.jsp");
+
+        String result = res.toString();
+        
+        assertTrue(result.indexOf("<p>00-hello world</p>") > 0);
+    }
+
 }

==================================================
