74976b4b7d15f4edc3942fa786397826a38129e7
==================================================
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46125 for NIO and APR connectors
==================================================
Mark Emlyn
==================================================
Fri Dec 12 15:41:13 2008 +0000
==================================================
InternalAprInputBuffer.java
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=46125 for NIO and APR connectors
Change the exception if the headers are too big to force a 400 status code rather than the current 200

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@726052 13f79535-47bb-0310-9956-ffa450edef68



==================================================
InternalNioInputBuffer.java
index f1137cf292..a00ce8cde0 100644
--- a/java/org/apache/coyote/http11/InternalAprInputBuffer.java
+++ b/java/org/apache/coyote/http11/InternalAprInputBuffer.java
@@ -751,7 +751,7 @@ public class InternalAprInputBuffer implements InputBuffer {
         if (parsingHeader) {
 
             if (lastValid == buf.length) {
-                throw new IOException
+                throw new IllegalArgumentException
                     (sm.getString("iib.requestheadertoolarge.error"));
             }
 

==================================================
