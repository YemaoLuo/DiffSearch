ac547de282e57229a19efd268a722a5f3f13a45c
==================================================
Fix NPE and add small test case to check VirtualWebappLoader.
==================================================
Peter Rossbach
==================================================
Sat Jul 3 23:02:46 2010 +0000
==================================================
WebappLoader.java
Fix NPE and add small test case to check VirtualWebappLoader.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@960284 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TestVirtualWebappLoader.java
index 8ca465402c..f5bcac311d 100644
--- a/java/org/apache/catalina/loader/WebappLoader.java
+++ b/java/org/apache/catalina/loader/WebappLoader.java
@@ -483,9 +483,7 @@ public class WebappLoader extends LifecycleMBeanBase
      * such that the loaded classes should be reloaded?
      */
     public boolean modified() {
-
-        return (classLoader.modified());
-
+        return classLoader != null ? classLoader.modified() : false ;
     }
 
 
@@ -493,7 +491,7 @@ public class WebappLoader extends LifecycleMBeanBase
      * Used to periodically signal to the classloader to release JAR resources.
      */
     public void closeJARs(boolean force) {
-        if (classLoader !=null){
+        if (classLoader !=null) {
             classLoader.closeJARs(force);
         }
     }

==================================================
