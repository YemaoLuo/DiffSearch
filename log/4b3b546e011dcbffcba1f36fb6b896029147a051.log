4b3b546e011dcbffcba1f36fb6b896029147a051
==================================================
Correct the handling of back-slash escaping in the EL parser and no longer require that "\$" or "\#" must be followed by "{" in order for the back-slash escaping to take effect.
==================================================
Mark Emlyn
==================================================
Mon Apr 28 23:08:14 2014 +0000
==================================================
AstLiteralExpression.java
Correct the handling of back-slash escaping in the EL parser and no longer require that "\$" or "\#" must be followed by "{" in order for the back-slash escaping to take effect.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1590835 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TestELEvaluation.java
index 7244df129a..5c67fff486 100644
--- a/java/org/apache/el/parser/AstLiteralExpression.java
+++ b/java/org/apache/el/parser/AstLiteralExpression.java
@@ -51,10 +51,9 @@ public final class AstLiteralExpression extends SimpleNode {
         StringBuilder buf = new StringBuilder(size);
         for (int i = 0; i < size; i++) {
             char c = image.charAt(i);
-            if (c == '\\' && i + 2 < size) {
+            if (c == '\\' && i + 1 < size) {
                 char c1 = image.charAt(i + 1);
-                char c2 = image.charAt(i + 2);
-                if ((c1 == '#' || c1 == '$') && c2 == '{')  {
+                if ((c1 == '#' || c1 == '$'))  {
                     c = c1;
                     i++;
                 }

==================================================
