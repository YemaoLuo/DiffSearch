ee17dcb66a7aaacf7b5d374c77e22236fe00004f
==================================================
Implement concatenation operator (+=) and include some units tests
==================================================
Mark Emlyn
==================================================
Sun Jul 14 11:13:43 2013 +0000
==================================================
AstConcatenation.java
Implement concatenation operator (+=) and include some units tests

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1502956 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TestAstConcatenation.java
index 153ebedff4..25996dcbe7 100644
--- a/java/org/apache/el/parser/AstConcatenation.java
+++ b/java/org/apache/el/parser/AstConcatenation.java
@@ -17,10 +17,29 @@
 /* Generated By:JJTree: Do not edit this line. AstConcatenation.java Version 4.3 */
 package org.apache.el.parser;
 
-public
-class AstConcatenation extends SimpleNode {
-  public AstConcatenation(int id) {
-    super(id);
-  }
+import javax.el.ELException;
+
+import org.apache.el.lang.EvaluationContext;
+
+public class AstConcatenation extends SimpleNode {
+
+    public AstConcatenation(int id) {
+        super(id);
+    }
+
+
+    @Override
+    public Object getValue(EvaluationContext ctx) throws ELException {
+        // Coerce the two child nodes to string and then concatenate
+        String s1 = coerceToString(children[0].getValue(ctx));
+        String s2 = coerceToString(children[1].getValue(ctx));
+        return s1 + s2;
+    }
+
+
+    @Override
+    public Class<?> getType(EvaluationContext ctx) throws ELException {
+        return String.class;
+    }
 }
 /* JavaCC - OriginalChecksum=a95de353974c2c05fa5c7d695a1d50fd (do not edit this line) */

==================================================
