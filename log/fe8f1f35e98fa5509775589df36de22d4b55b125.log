fe8f1f35e98fa5509775589df36de22d4b55b125
==================================================
Code clean-up for o.a.catalina.manager
==================================================
Mark Emlyn
==================================================
Sun Jul 15 18:53:13 2012 +0000
==================================================
HTMLManagerServlet.java
Code clean-up for o.a.catalina.manager
 - Add final prompted by UCDetector
 - Java 7 use of <>

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1361753 13f79535-47bb-0310-9956-ffa450edef68



==================================================
JspHelper.java
index 61944b35a5..8e33190e2c 100644
--- a/java/org/apache/catalina/manager/HTMLManagerServlet.java
+++ b/java/org/apache/catalina/manager/HTMLManagerServlet.java
@@ -873,7 +873,7 @@ public final class HTMLManagerServlet extends ManagerServlet {
                     RequestUtil.filter(cn.getDisplayName())));
         }
         Manager manager = ctxt.getManager();
-        List<Session> sessions = new ArrayList<Session>();
+        List<Session> sessions = new ArrayList<>();
         sessions.addAll(Arrays.asList(manager.findSessions()));
         if (manager instanceof DistributedManager && showProxySessions) {
             // Add dummy proxy sessions

==================================================
ManagerServlet.java
index d9095eaffd..397ecb3f5a 100644
--- a/java/org/apache/catalina/manager/JspHelper.java
+++ b/java/org/apache/catalina/manager/JspHelper.java
@@ -168,7 +168,8 @@ public class JspHelper {
      */
 
     private static final int HIGHEST_SPECIAL = '>';
-    private static char[][] specialCharactersRepresentation = new char[HIGHEST_SPECIAL + 1][];
+    private static final char[][] specialCharactersRepresentation =
+            new char[HIGHEST_SPECIAL + 1][];
     static {
         specialCharactersRepresentation['&'] = "&amp;".toCharArray();
         specialCharactersRepresentation['<'] = "&lt;".toCharArray();

==================================================
StatusManagerServlet.java
index 469b2a1b8e..389f98a197 100644
--- a/java/org/apache/catalina/manager/ManagerServlet.java
+++ b/java/org/apache/catalina/manager/ManagerServlet.java
@@ -190,7 +190,7 @@ public class ManagerServlet extends HttpServlet implements ContainerServlet {
     /**
      * Path used to store context descriptors.
      */
-    protected File contextDescriptors = null;
+    protected final File contextDescriptors = null;
 
 
     /**
@@ -202,7 +202,7 @@ public class ManagerServlet extends HttpServlet implements ContainerServlet {
     /**
      * The host appBase.
      */
-    protected File appBase = null;
+    protected final File appBase = null;
 
 
     /**

==================================================
HTMLHostManagerServlet.java
index 2e6aaa16d5..8c65648bae 100644
--- a/java/org/apache/catalina/manager/StatusManagerServlet.java
+++ b/java/org/apache/catalina/manager/StatusManagerServlet.java
@@ -65,25 +65,25 @@ public class StatusManagerServlet
     /**
      * Vector of protocol handlers object names.
      */
-    protected Vector<ObjectName> protocolHandlers = new Vector<ObjectName>();
+    protected final Vector<ObjectName> protocolHandlers = new Vector<>();
 
 
     /**
      * Vector of thread pools object names.
      */
-    protected Vector<ObjectName> threadPools = new Vector<ObjectName>();
+    protected final Vector<ObjectName> threadPools = new Vector<>();
 
 
     /**
      * Vector of request processors object names.
      */
-    protected Vector<ObjectName> requestProcessors = new Vector<ObjectName>();
+    protected final Vector<ObjectName> requestProcessors = new Vector<>();
 
 
     /**
      * Vector of global request processors object names.
      */
-    protected Vector<ObjectName> globalRequestProcessors = new Vector<ObjectName>();
+    protected final Vector<ObjectName> globalRequestProcessors = new Vector<>();
 
 
     /**

==================================================
HostManagerServlet.java
index df797242e6..34130fc365 100644
--- a/java/org/apache/catalina/manager/host/HTMLHostManagerServlet.java
+++ b/java/org/apache/catalina/manager/host/HTMLHostManagerServlet.java
@@ -287,8 +287,7 @@ public final class HTMLHostManagerServlet extends HostManagerServlet {
         for (int i = 0; i < children.length; i++)
             hostNames[i] = children[i].getName();
 
-        TreeMap<String,String> sortedHostNamesMap =
-            new TreeMap<String,String>();
+        TreeMap<String,String> sortedHostNamesMap = new TreeMap<>();
 
         for (int i = 0; i < hostNames.length; i++) {
             String displayPath = hostNames[i];

==================================================
ReverseComparator.java
index e81acc2450..848a096bbb 100644
--- a/java/org/apache/catalina/manager/host/HostManagerServlet.java
+++ b/java/org/apache/catalina/manager/host/HostManagerServlet.java
@@ -26,7 +26,6 @@ import java.util.Enumeration;
 import java.util.Locale;
 import java.util.StringTokenizer;
 
-import javax.management.MBeanServer;
 import javax.servlet.ServletException;
 import javax.servlet.UnavailableException;
 import javax.servlet.http.HttpServlet;
@@ -43,7 +42,6 @@ import org.apache.catalina.core.ContainerBase;
 import org.apache.catalina.core.StandardHost;
 import org.apache.catalina.startup.HostConfig;
 import org.apache.tomcat.util.ExceptionUtils;
-import org.apache.tomcat.util.modeler.Registry;
 import org.apache.tomcat.util.res.StringManager;
 
 
@@ -122,12 +120,6 @@ public class HostManagerServlet
     protected transient Engine engine = null;
 
 
-    /**
-     * MBean server.
-     */
-    protected transient MBeanServer mBeanServer = null;
-
-
     /**
      * The string manager for this package.
      */
@@ -173,10 +165,6 @@ public class HostManagerServlet
             installedHost = (Host) context.getParent();
             engine = (Engine) installedHost.getParent();
         }
-
-        // Retrieve the MBean server
-        mBeanServer = Registry.getRegistry(null, null).getMBeanServer();
-
     }
 
 

==================================================
SessionUtils.java
index 51197b6f67..f6ab1b3c68 100644
--- a/java/org/apache/catalina/manager/util/ReverseComparator.java
+++ b/java/org/apache/catalina/manager/util/ReverseComparator.java
@@ -26,7 +26,7 @@ import org.apache.catalina.Session;
  * @author C&eacute;drik LIME
  */
 public class ReverseComparator implements Comparator<Session> {
-    protected Comparator<Session> comparator;
+    protected final Comparator<Session> comparator;
 
     /**
      *

==================================================
