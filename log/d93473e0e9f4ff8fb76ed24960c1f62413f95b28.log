d93473e0e9f4ff8fb76ed24960c1f62413f95b28
==================================================
Revert attempt to fix 43878 since patch is obviously wrong.
==================================================
Mark Emlyn
==================================================
Mon Jan 28 21:05:04 2008 +0000
==================================================
JspCompilationContext.java
Revert attempt to fix 43878 since patch is obviously wrong.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@616042 13f79535-47bb-0310-9956-ffa450edef68



==================================================
JspRuntimeContext.java
index 0fe40f3db0..b98e6fe357 100644
--- a/java/org/apache/jasper/JspCompilationContext.java
+++ b/java/org/apache/jasper/JspCompilationContext.java
@@ -34,6 +34,7 @@ import org.apache.jasper.compiler.JspRuntimeContext;
 import org.apache.jasper.compiler.JspUtil;
 import org.apache.jasper.compiler.Localizer;
 import org.apache.jasper.compiler.ServletWriter;
+import org.apache.jasper.servlet.JasperLoader;
 import org.apache.jasper.servlet.JspServletWrapper;
 
 /**
@@ -175,7 +176,11 @@ public class JspCompilationContext {
 
     public ClassLoader getJspLoader() {
         if( jspLoader == null ) {
-            jspLoader = rctxt.getJspLoader(baseUrl, getClassLoader());
+            jspLoader = new JasperLoader
+            (new URL[] {baseUrl},
+                    getClassLoader(),
+                    rctxt.getPermissionCollection(),
+                    rctxt.getCodeSource());
         }
         return jspLoader;
     }

==================================================
