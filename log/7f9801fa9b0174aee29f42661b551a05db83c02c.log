7f9801fa9b0174aee29f42661b551a05db83c02c
==================================================
Add some annotation checks to checkstyle and fix the handful of issues reported.
==================================================
Mark Thomas
==================================================
Mon Sep 26 08:40:49 2016 +0000
==================================================
ManagedBean.java
Add some annotation checks to checkstyle and fix the handful of issues reported.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1762296 13f79535-47bb-0310-9956-ffa450edef68



==================================================
PostConstruct.java
index 97b959cc6c..f2739a4d47 100644
--- a/java/javax/annotation/ManagedBean.java
+++ b/java/javax/annotation/ManagedBean.java
@@ -24,7 +24,7 @@ import java.lang.annotation.Target;
 /**
  * @since Common Annotations 1.1
  */
-@Target({ElementType.TYPE})
+@Target(ElementType.TYPE)
 @Retention(RetentionPolicy.RUNTIME)
 public @interface ManagedBean {
     String value() default "";

==================================================
PreDestroy.java
index 60e1440760..4382b25c34 100644
--- a/java/javax/annotation/PostConstruct.java
+++ b/java/javax/annotation/PostConstruct.java
@@ -24,7 +24,7 @@ import java.lang.annotation.Target;
 /**
  * @since Common Annotations 1.0
  */
-@Target({ElementType.METHOD})
+@Target(ElementType.METHOD)
 @Retention(RetentionPolicy.RUNTIME)
 public @interface PostConstruct {
     // No attributes

==================================================
Priority.java
index 114a0eabd6..a774b7b273 100644
--- a/java/javax/annotation/PreDestroy.java
+++ b/java/javax/annotation/PreDestroy.java
@@ -24,7 +24,7 @@ import java.lang.annotation.Target;
 /**
  * @since Common Annotations 1.0
  */
-@Target({ElementType.METHOD})
+@Target(ElementType.METHOD)
 @Retention(RetentionPolicy.RUNTIME)
 public @interface PreDestroy {
     // No attributes

==================================================
Resources.java
index fbe5393980..fe9d3f0e9c 100644
--- a/java/javax/annotation/Priority.java
+++ b/java/javax/annotation/Priority.java
@@ -24,7 +24,7 @@ import java.lang.annotation.Target;
 /**
  * @since Common Annotations 1.2
  */
-@Target({ElementType.TYPE})
+@Target(ElementType.TYPE)
 @Retention(RetentionPolicy.RUNTIME)
 public @interface Priority {
     int value();

==================================================
DeclareRoles.java
index d5aed79740..91bbb59a09 100644
--- a/java/javax/annotation/Resources.java
+++ b/java/javax/annotation/Resources.java
@@ -24,7 +24,7 @@ import java.lang.annotation.Target;
 /**
  * @since Common Annotations 1.0
  */
-@Target({ElementType.TYPE})
+@Target(ElementType.TYPE)
 @Retention(RetentionPolicy.RUNTIME)
 public @interface Resources {
     public Resource[] value();

==================================================
RunAs.java
index 9b780a05c8..fb210819e0 100644
--- a/java/javax/annotation/security/DeclareRoles.java
+++ b/java/javax/annotation/security/DeclareRoles.java
@@ -24,7 +24,7 @@ import java.lang.annotation.Target;
 /**
  * @since Common Annotations 1.0
  */
-@Target({ElementType.TYPE})
+@Target(ElementType.TYPE)
 @Retention(RetentionPolicy.RUNTIME)
 public @interface DeclareRoles {
     public String[] value();

==================================================
DataSourceDefinition.java
index f7474d6222..5479ba1910 100644
--- a/java/javax/annotation/security/RunAs.java
+++ b/java/javax/annotation/security/RunAs.java
@@ -24,7 +24,7 @@ import java.lang.annotation.Target;
 /**
  * @since Common Annotations 1.0
  */
-@Target({ElementType.TYPE})
+@Target(ElementType.TYPE)
 @Retention(RetentionPolicy.RUNTIME)
 public @interface RunAs {
     public String value();

==================================================
DataSourceDefinitions.java
index edf37ad6c2..feb0758bd5 100644
--- a/java/javax/annotation/sql/DataSourceDefinition.java
+++ b/java/javax/annotation/sql/DataSourceDefinition.java
@@ -24,7 +24,7 @@ import java.lang.annotation.Target;
 /**
  * @since Common Annotations 1.1
  */
-@Target({ElementType.TYPE})
+@Target(ElementType.TYPE)
 @Retention(RetentionPolicy.RUNTIME)
 public @interface DataSourceDefinition {
     String className();

==================================================
EJBs.java
index ce7181821f..7fcbc05072 100644
--- a/java/javax/annotation/sql/DataSourceDefinitions.java
+++ b/java/javax/annotation/sql/DataSourceDefinitions.java
@@ -24,7 +24,7 @@ import java.lang.annotation.Target;
 /**
  * @since Common Annotations 1.1
  */
-@Target({ElementType.TYPE})
+@Target(ElementType.TYPE)
 @Retention(RetentionPolicy.RUNTIME)
 public @interface DataSourceDefinitions {
     DataSourceDefinition[] value();

==================================================
PersistenceContexts.java
index a394464e9f..b716915319 100644
--- a/java/javax/ejb/EJBs.java
+++ b/java/javax/ejb/EJBs.java
@@ -23,7 +23,7 @@ import java.lang.annotation.Retention;
 import java.lang.annotation.RetentionPolicy;
 import java.lang.annotation.Target;
 
-@Target({ElementType.TYPE})
+@Target(ElementType.TYPE)
 @Retention(RetentionPolicy.RUNTIME)
 
 public @interface EJBs {

==================================================
PersistenceUnits.java
index e43a2ddddd..cd9abf2e00 100644
--- a/java/javax/persistence/PersistenceContexts.java
+++ b/java/javax/persistence/PersistenceContexts.java
@@ -23,7 +23,7 @@ import java.lang.annotation.Retention;
 import java.lang.annotation.RetentionPolicy;
 import java.lang.annotation.Target;
 
-@Target({ ElementType.TYPE })
+@Target(ElementType.TYPE)
 @Retention(RetentionPolicy.RUNTIME)
 
 public @interface PersistenceContexts {

==================================================
HandlesTypes.java
index e98e5c8e90..34084acff2 100644
--- a/java/javax/persistence/PersistenceUnits.java
+++ b/java/javax/persistence/PersistenceUnits.java
@@ -23,7 +23,7 @@ import java.lang.annotation.Retention;
 import java.lang.annotation.RetentionPolicy;
 import java.lang.annotation.Target;
 
-@Target({ElementType.TYPE})
+@Target(ElementType.TYPE)
 @Retention(RetentionPolicy.RUNTIME)
 
 public @interface PersistenceUnits {

==================================================
MultipartConfig.java
index c5f26b03e6..66f8dffc38 100644
--- a/java/javax/servlet/annotation/HandlesTypes.java
+++ b/java/javax/servlet/annotation/HandlesTypes.java
@@ -27,7 +27,7 @@ import java.lang.annotation.Target;
  *
  * @since Servlet 3.0
  */
-@Target({ElementType.TYPE})
+@Target(ElementType.TYPE)
 @Retention(RetentionPolicy.RUNTIME)
 public @interface HandlesTypes {
 

==================================================
ServletSecurity.java
index d6111818ba..70e0dcc5e5 100644
--- a/java/javax/servlet/annotation/MultipartConfig.java
+++ b/java/javax/servlet/annotation/MultipartConfig.java
@@ -41,7 +41,7 @@ import java.lang.annotation.Target;
  *
  * @since Servlet 3.0
  */
-@Target({ElementType.TYPE})
+@Target(ElementType.TYPE)
 @Retention(RetentionPolicy.RUNTIME)
 public @interface MultipartConfig {
 

==================================================
WebFilter.java
index 1e71ea9c15..0032e34f30 100644
--- a/java/javax/servlet/annotation/ServletSecurity.java
+++ b/java/javax/servlet/annotation/ServletSecurity.java
@@ -33,7 +33,7 @@ import java.lang.annotation.Target;
  * @since Servlet 3.0
  */
 @Inherited
-@Target({ElementType.TYPE})
+@Target(ElementType.TYPE)
 @Retention(RetentionPolicy.RUNTIME)
 @Documented
 public @interface ServletSecurity {

==================================================
WebInitParam.java
index 730270ef4b..ddaa08a2b2 100644
--- a/java/javax/servlet/annotation/WebFilter.java
+++ b/java/javax/servlet/annotation/WebFilter.java
@@ -57,7 +57,7 @@ import javax.servlet.DispatcherType;
  * @since Servlet 3.0 (Section 8.1.2)
  *
  */
-@Target({ElementType.TYPE})
+@Target(ElementType.TYPE)
 @Retention(RetentionPolicy.RUNTIME)
 @Documented
 public @interface WebFilter {

==================================================
WebListener.java
index a39823c455..fe6c784c12 100644
--- a/java/javax/servlet/annotation/WebInitParam.java
+++ b/java/javax/servlet/annotation/WebInitParam.java
@@ -35,7 +35,7 @@ import java.lang.annotation.Target;
  *
  * @since Servlet 3.0
  */
-@Target({ElementType.TYPE})
+@Target(ElementType.TYPE)
 @Retention(RetentionPolicy.RUNTIME)
 @Documented
 public @interface WebInitParam {

==================================================
WebServlet.java
index e1d4f09dae..6ca1e7e7a9 100644
--- a/java/javax/servlet/annotation/WebListener.java
+++ b/java/javax/servlet/annotation/WebListener.java
@@ -42,7 +42,7 @@ import java.lang.annotation.Target;
  *
  * @since Servlet 3.0
  */
-@Target({ElementType.TYPE})
+@Target(ElementType.TYPE)
 @Retention(RetentionPolicy.RUNTIME)
 @Documented
 public @interface WebListener {

==================================================
WebServiceRefs.java
index 3f2bba0aa1..8e518b7491 100644
--- a/java/javax/servlet/annotation/WebServlet.java
+++ b/java/javax/servlet/annotation/WebServlet.java
@@ -53,7 +53,7 @@ import java.lang.annotation.Target;
  * @since Servlet 3.0 (Section 8.1.1)
  *
  */
-@Target({ElementType.TYPE})
+@Target(ElementType.TYPE)
 @Retention(RetentionPolicy.RUNTIME)
 @Documented
 public @interface WebServlet {

==================================================
TestCookie.java
index 05146776ae..64c61d872c 100644
--- a/res/checkstyle/checkstyle.xml
+++ b/res/checkstyle/checkstyle.xml
@@ -43,6 +43,12 @@
 
   <module name="TreeWalker">
 
+    <!-- Annotations -->
+    <module name="AnnotationLocation"/>
+    <module name="AnnotationUseStyle"/>
+    <module name="MissingOverride"/>
+    <module name="PackageAnnotation"/>
+
     <!-- Block Checks -->
     <module name="AvoidNestedBlocks">
       <property name="allowInSwitchCase" value="true"/>

==================================================
TestCookieRFC6265Validator.java
index ee4d0f2bca..358f4b9d98 100644
--- a/test/javax/servlet/http/TestCookie.java
+++ b/test/javax/servlet/http/TestCookie.java
@@ -66,7 +66,7 @@ public class TestCookie {
         Assert.assertEquals(0, cookie.getVersion());
     }
 
-    @Test()
+    @Test
     public void defaultImpliesNetscape() {
         // $Foo is allowed by Netscape but not by RFC2109
         Cookie cookie = new Cookie("$Foo", null);

==================================================
