9fa8f26cb434550057d0b059e4770dac4811af66
==================================================
Add a Servlet 2.2 test web application.
==================================================
Mark Emlyn
==================================================
Mon Jul 8 21:44:32 2013 +0000
==================================================
TestJspConfig.java
Add a Servlet 2.2 test web application.
Extracted from a larger patch by Jeremy Boynes

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1500979 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TestValidator.java
index 84a9464a0a..e82e4c59f0 100644
--- a/test/org/apache/jasper/compiler/TestJspConfig.java
+++ b/test/org/apache/jasper/compiler/TestJspConfig.java
@@ -29,6 +29,26 @@ import org.apache.tomcat.util.buf.ByteChunk;
 
 public class TestJspConfig extends TomcatBaseTest {
 
+    @Test
+    public void testServlet22NoEL() throws Exception {
+        Tomcat tomcat = getTomcatInstance();
+
+        File appDir =
+            new File("test/webapp-2.2");
+        // app dir is relative to server home
+        tomcat.addWebapp(null, "/test", appDir.getAbsolutePath());
+
+        tomcat.start();
+
+        ByteChunk res = getUrl("http://localhost:" + getPort() +
+                "/test/el-as-literal.jsp");
+
+        String result = res.toString();
+
+        assertTrue(result.indexOf("<p>00-${'hello world'}</p>") > 0);
+        assertTrue(result.indexOf("<p>01-#{'hello world'}</p>") > 0);
+    }
+
     @Test
     public void testServlet23NoEL() throws Exception {
         Tomcat tomcat = getTomcatInstance();

==================================================
