67e79af49b7fb1618cc11cf41335fd0ef47eb7a1
==================================================
PushBuilder updates from Servlet EG
==================================================
Mark Thomas
==================================================
Mon Mar 20 09:55:52 2017 +0000
==================================================
PushBuilder.java
PushBuilder updates from Servlet EG
Remove eTag, conditional and lastModified

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1787701 13f79535-47bb-0310-9956-ffa450edef68



==================================================
ApplicationPushBuilder.java
index 6b15fb1e44..fc63a477ca 100644
--- a/java/javax/servlet/http/PushBuilder.java
+++ b/java/javax/servlet/http/PushBuilder.java
@@ -34,9 +34,6 @@ import java.util.Set;
  * <li>The referer header will be set to
  *     {@link HttpServletRequest#getRequestURL()} plus, if present, the query
  *     string from {@link HttpServletRequest#getQueryString()}.
- * <li>If either of the headers {@code If-Modified-Since} or
- *     {@code If-None-Match} were present then {@link #isConditional()} will be
- *     set to {@code true}.
  * </ul>
  *
  * @since Servlet 4.0
@@ -86,17 +83,6 @@ public interface PushBuilder {
      */
     PushBuilder sessionId(String sessionId);
 
-    /**
-     * Sets if the request will be conditional. If {@code true} the values from
-     * {@link #getETag()} and {@link #getLastModified()} will be used to
-     * construct appropriate headers.
-     *
-     * @param conditional Should generated push requests be conditional
-     *
-     * @return This builder instance
-     */
-    PushBuilder conditional(boolean conditional);
-
     /**
      * Sets a HTTP header on the request. Any existing headers of the same name
      * are first remove.
@@ -142,28 +128,6 @@ public interface PushBuilder {
      */
     PushBuilder path(String path);
 
-    /**
-     * Sets the eTag to be used for conditional push requests. This will be
-     * set to {@code null} after a call to {@link #push()} so it must be
-     * explicitly set for every push request that requires it.
-     *
-     * @param eTag The eTag use for the push request
-     *
-     * @return This builder instance
-     */
-    PushBuilder eTag(String eTag);
-
-    /**
-     * Sets the last modified to be used for conditional push requests. This
-     * will be set to {@code null} after a call to {@link #push()} so it must be
-     * explicitly set for every push request that requires it.
-     *
-     * @param lastModified The last modified value to use for the push request
-     *
-     * @return This builder instance
-     */
-    PushBuilder lastModified(String lastModified);
-
     /**
      * Generates the push request and sends it to the client unless pushes are
      * not available for some reason. After calling this method the following
@@ -204,14 +168,6 @@ public interface PushBuilder {
      */
     String getSessionId();
 
-    /**
-     * Will push requests generated by future calls to {@code push()} be
-     * conditional.
-     *
-     * @return {@code true} if push requests will be conditional
-     */
-    boolean isConditional();
-
     /**
      * @return The current set of names of HTTP headers to be used the next time
      *         {@code push()} is called.
@@ -237,21 +193,4 @@ public interface PushBuilder {
      * @return The path value that will be associated with the next push request
      */
     String getPath();
-
-    /**
-     * Obtain the eTag that will be used for the push request that will be
-     * generated by the next call to {@code push()}.
-     *
-     * @return The eTag value that will be associated with the next push request
-     */
-    String getETag();
-
-    /**
-     * Obtain the last modified that will be used for the push request that will
-     * be generated by the next call to {@code push()}.
-     *
-     * @return The last modified value that will be associated with the next
-     *         push request
-     */
-    String getLastModified();
 }

==================================================
