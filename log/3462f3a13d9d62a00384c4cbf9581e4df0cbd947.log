3462f3a13d9d62a00384c4cbf9581e4df0cbd947
==================================================
Add name to channel in order to identify channels.
==================================================
Keiichi Fujino
==================================================
Tue Apr 19 08:34:45 2016 +0000
==================================================
SimpleTcpCluster.java
Add name to channel in order to identify channels.
In tomcat cluster environment, it is set the cluster name + "-Channel" as default value. 

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1739862 13f79535-47bb-0310-9956-ffa450edef68



==================================================
Channel.java
index 2deead5727..32e2740066 100644
--- a/java/org/apache/catalina/ha/tcp/SimpleTcpCluster.java
+++ b/java/org/apache/catalina/ha/tcp/SimpleTcpCluster.java
@@ -533,6 +533,7 @@ public class SimpleTcpCluster extends LifecycleMBeanBase
             registerClusterValve();
             channel.addMembershipListener(this);
             channel.addChannelListener(this);
+            channel.setName(getClusterName() + "-Channel");
             channel.start(channelStartOptions);
             if (clusterDeployer != null) clusterDeployer.start();
             registerMember(channel.getLocalMember(false));

==================================================
GroupChannel.java
index be23cfe42b..409157e5f8 100644
--- a/java/org/apache/catalina/tribes/Channel.java
+++ b/java/org/apache/catalina/tribes/Channel.java
@@ -357,5 +357,16 @@ public interface Channel {
      */
     public Member getMember(Member mbr);
 
+    /**
+     * Return the name of this channel.
+     * @return channel name
+     */
+    public String getName();
+
+    /**
+     * Set the name of this channel
+     * @param name
+     */
+    public void setName(String name);
 
 }

==================================================
