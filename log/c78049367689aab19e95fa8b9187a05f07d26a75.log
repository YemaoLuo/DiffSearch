c78049367689aab19e95fa8b9187a05f07d26a75
==================================================
Add method TomcatBaseTest#getTemporaryDirectory()
==================================================
Konstantin Kolinko
==================================================
Wed May 19 15:55:33 2010 +0000
==================================================
TestRegistration.java
Add method TomcatBaseTest#getTemporaryDirectory()
Use mkdirs() to create tempDir directory in TomcatBaseTest#setUp()
Fix issue with TestRegistration test failing when ${tomcat.output} ant property had non-default value.

The failure was due to the contextDir.mkdir() call in TestRegistration#testMBeanDeregistration() failing to create a subdirectory because its parent directory did not exist.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@946241 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TomcatBaseTest.java
index 5f8c2036cb..b2c031a7e7 100644
--- a/test/org/apache/catalina/mbeans/TestRegistration.java
+++ b/test/org/apache/catalina/mbeans/TestRegistration.java
@@ -45,7 +45,7 @@ public class TestRegistration extends TomcatBaseTest {
         assertEquals("Remaining: " + onames, 0, onames.size());
 
         final Tomcat tomcat = getTomcatInstance();
-        final File contextDir = new File("output/webappFoo");
+        final File contextDir = new File(getTemporaryDirectory(), "webappFoo");
         contextDir.mkdir();
         tomcat.addContext("/foo", contextDir.getAbsolutePath());
         tomcat.start();
@@ -69,7 +69,7 @@ public class TestRegistration extends TomcatBaseTest {
         host.setName("otherhost");
         tomcat.getEngine().addChild(host);
 
-        final File contextDir2 = new File("output/webappFoo2");
+        final File contextDir2 = new File(getTemporaryDirectory(), "webappFoo2");
         contextDir2.mkdir();
         tomcat.addContext(host, "/foo2", contextDir2.getAbsolutePath());
         

==================================================
