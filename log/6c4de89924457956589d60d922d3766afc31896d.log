6c4de89924457956589d60d922d3766afc31896d
==================================================
Override the default implementation where it makes sense to do so
==================================================
Mark Thomas
==================================================
Wed Jan 18 18:51:57 2023 +0000
==================================================
Request.java
Override the default implementation where it makes sense to do so

Just for HttpServletRequest.setCharacterEncoding(Charset)


==================================================
RequestFacade.java
index 9dfd6725b6..bb3d1897d9 100644
--- a/java/org/apache/catalina/connector/Request.java
+++ b/java/org/apache/catalina/connector/Request.java
@@ -1620,6 +1620,18 @@ public class Request implements HttpServletRequest {
     }
 
 
+    @Override
+    public void setCharacterEncoding(Charset charset) {
+
+        if (usingReader) {
+            return;
+        }
+
+        // Save the validated encoding
+        coyoteRequest.setCharset(charset);
+    }
+
+
     @Override
     public ServletContext getServletContext() {
         return getContext().getServletContext();

==================================================
