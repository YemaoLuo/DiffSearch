2ad8c456322d964078ec166bac89e3cfa17baa8d
==================================================
Review comment 5 from schultz
==================================================
Mark Emlyn
==================================================
Thu Sep 25 19:33:07 2014 +0000
==================================================
CredentialHandlerBase.java
Review comment 5 from schultz
Validate stored credential

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1627607 13f79535-47bb-0310-9956-ffa450edef68



==================================================
MessageDigestCredentialHandler.java
index ecb0e5e962..0af808619b 100644
--- a/java/org/apache/catalina/realm/LocalStrings.properties
+++ b/java/org/apache/catalina/realm/LocalStrings.properties
@@ -83,5 +83,6 @@ combinedRealm.addRealm=Add "{0}" realm, making a total of "{1}" realms
 combinedRealm.realmStartFail=Failed to start "{0}" realm
 lockOutRealm.authLockedUser=An attempt was made to authenticate the locked user "{0}"
 lockOutRealm.removeWarning=User "{0}" was removed from the failed users cache after {1} seconds to keep the cache size within the limit set
+credentialHandler.invalidStoredCredential=The invalid stored credential string [{0}] was provided by the Realm to match with the user provided credentials
 mdCredentialHandler.unknownEncoding=The encoding [{0}] is not supported so the current setting of [{1}] will still be used
 pbeCredentialHandler.invalidKeySpec=Unable to generate a password based key
\ No newline at end of file

==================================================
PBECredentialHandler.java
index 1a581d1c20..2f03672f3b 100644
--- a/java/org/apache/catalina/realm/MessageDigestCredentialHandler.java
+++ b/java/org/apache/catalina/realm/MessageDigestCredentialHandler.java
@@ -178,4 +178,10 @@ public class MessageDigestCredentialHandler extends CredentialHandlerBase {
     protected int getDefaultIterations() {
         return DEFAULT_ITERATIONS;
     }
+
+
+    @Override
+    protected Log getLog() {
+        return log;
+    }
 }

==================================================
