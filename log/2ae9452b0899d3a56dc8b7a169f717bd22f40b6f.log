2ae9452b0899d3a56dc8b7a169f717bd22f40b6f
==================================================
Reduce boilerplate code.
==================================================
Mark Emlyn
==================================================
Mon Nov 3 12:41:20 2014 +0000
==================================================
TestJspWriterImpl.java
Reduce boilerplate code.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1636338 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TestPageContextImpl.java
index bdda346445..75786373ea 100644
--- a/test/org/apache/jasper/runtime/TestJspWriterImpl.java
+++ b/test/org/apache/jasper/runtime/TestJspWriterImpl.java
@@ -16,14 +16,11 @@
  */
 package org.apache.jasper.runtime;
 
-import java.io.File;
-
 import javax.servlet.http.HttpServletResponse;
 
 import org.junit.Assert;
 import org.junit.Test;
 
-import org.apache.catalina.startup.Tomcat;
 import org.apache.catalina.startup.TomcatBaseTest;
 import org.apache.tomcat.util.buf.ByteChunk;
 
@@ -31,12 +28,7 @@ public class TestJspWriterImpl extends TomcatBaseTest {
 
     @Test
     public void bug54241a() throws Exception {
-        Tomcat tomcat = getTomcatInstance();
-
-        File appDir = new File("test/webapp");
-        tomcat.addWebapp(null, "/test", appDir.getAbsolutePath());
-
-        tomcat.start();
+        getTomcatInstanceTestWebapp(false, true);
 
         ByteChunk res = new ByteChunk();
 
@@ -52,12 +44,7 @@ public class TestJspWriterImpl extends TomcatBaseTest {
 
     @Test
     public void bug54241b() throws Exception {
-        Tomcat tomcat = getTomcatInstance();
-
-        File appDir = new File("test/webapp");
-        tomcat.addWebapp(null, "/test", appDir.getAbsolutePath());
-
-        tomcat.start();
+        getTomcatInstanceTestWebapp(false, true);
 
         ByteChunk res = new ByteChunk();
 

==================================================
TestJspServlet.java
index 0ed3162671..577cb827e3 100644
--- a/test/org/apache/jasper/runtime/TestPageContextImpl.java
+++ b/test/org/apache/jasper/runtime/TestPageContextImpl.java
@@ -41,12 +41,7 @@ public class TestPageContextImpl extends TomcatBaseTest {
 
     @Test
     public void testDoForward() throws Exception {
-        Tomcat tomcat = getTomcatInstance();
-
-        File appDir = new File("test/webapp");
-        tomcat.addWebapp(null, "/test", appDir.getAbsolutePath());
-
-        tomcat.start();
+        getTomcatInstanceTestWebapp(false, true);
 
         ByteChunk res = new ByteChunk();
 
@@ -82,12 +77,7 @@ public class TestPageContextImpl extends TomcatBaseTest {
 
     @Test
     public void testIncludeThrowsIOException() throws Exception {
-        Tomcat tomcat = getTomcatInstance();
-
-        File appDir = new File("test/webapp");
-        tomcat.addWebapp(null, "/test", appDir.getAbsolutePath());
-
-        tomcat.start();
+        getTomcatInstanceTestWebapp(false, true);
 
         ByteChunk res = new ByteChunk();
 

==================================================
