ddc1a930643a70efe98db3e6eabfd99b4eb74591
==================================================
Rejected session count should not be writable
==================================================
Mark Emlyn
==================================================
Thu Jul 29 11:10:00 2010 +0000
==================================================
Manager.java
Rejected session count should not be writable

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@980401 13f79535-47bb-0310-9956-ffa450edef68



==================================================
DeltaManager.java
index deed104eac..0a340134a0 100644
--- a/java/org/apache/catalina/Manager.java
+++ b/java/org/apache/catalina/Manager.java
@@ -191,15 +191,6 @@ public interface Manager {
     public int getRejectedSessions();
 
 
-    /**
-     * Sets the number of sessions that were not created because the maximum
-     * number of active sessions was reached.
-     *
-     * @param rejectedSessions Number of rejected sessions
-     */
-    public void setRejectedSessions(int rejectedSessions);
-
-
     /**
      * Gets the longest time (in seconds) that an expired session had been
      * alive.

==================================================
PersistentManagerBase.java
index a4ecbf8854..ba50f5224f 100644
--- a/java/org/apache/catalina/ha/session/mbeans-descriptors.xml
+++ b/java/org/apache/catalina/ha/session/mbeans-descriptors.xml
@@ -309,7 +309,8 @@
     <attribute
       name="rejectedSessions"
       description="Number of sessions we rejected due to maxActive beeing reached"
-      type="int"/>
+      type="int"
+      writeable="false"/>
     <operation
       name="expireSession"
       description="Expired the given session"

==================================================
StandardManager.java
index 5e73ea6898..3165936c84 100644
--- a/java/org/apache/catalina/session/PersistentManagerBase.java
+++ b/java/org/apache/catalina/session/PersistentManagerBase.java
@@ -409,10 +409,6 @@ public abstract class PersistentManagerBase extends ManagerBase
     }
 
     
-    public void setRejectedSessions(int rejectedSessions) {
-        this.rejectedSessions = rejectedSessions;
-    }
-
     /**
      * Return the descriptive short name of this Manager implementation.
      */

==================================================
