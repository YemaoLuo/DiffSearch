b39d3843e375fecf2f80c9207b20d09ba1bb3405
==================================================
Correct the return value for StandardContext.getResourceOnlyServlets()
==================================================
Mark Emlyn
==================================================
Mon Sep 1 10:40:33 2014 +0000
==================================================
StandardContext.java
Correct the return value for StandardContext.getResourceOnlyServlets()
so that multiple names are separated by commas. Identified by Coverity
Scan and fixed based on a patch by Felix Schumacher.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1621731 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TestStandardContext.java
index 109dfae47c..d2237e8953 100644
--- a/java/org/apache/catalina/core/StandardContext.java
+++ b/java/org/apache/catalina/core/StandardContext.java
@@ -918,7 +918,9 @@ public class StandardContext extends ContainerBase
         StringBuilder result = new StringBuilder();
         boolean first = true;
         for (String servletName : resourceOnlyServlets) {
-            if (!first) {
+            if (first) {
+                first = false;
+            } else {
                 result.append(',');
             }
             result.append(servletName);

==================================================
