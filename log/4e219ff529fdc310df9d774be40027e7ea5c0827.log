4e219ff529fdc310df9d774be40027e7ea5c0827
==================================================
porting AJP large-file support from 5.5
==================================================
William Barker
==================================================
Sun Jun 24 23:27:57 2007 +0000
==================================================
AjpAprProcessor.java
porting AJP large-file support from 5.5

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@550299 13f79535-47bb-0310-9956-ffa450edef68



==================================================
AjpProcessor.java
index 72c9d78a15..00d2ddca5d 100644
--- a/java/org/apache/coyote/ajp/AjpAprProcessor.java
+++ b/java/org/apache/coyote/ajp/AjpAprProcessor.java
@@ -936,9 +936,9 @@ public class AjpAprProcessor implements ActionHook {
         if (contentLanguage != null) {
             headers.setValue("Content-Language").setString(contentLanguage);
         }
-        int contentLength = response.getContentLength();
+        long contentLength = response.getContentLengthLong();
         if (contentLength >= 0) {
-            headers.setValue("Content-Length").setInt(contentLength);
+            headers.setValue("Content-Length").setLong(contentLength);
         }
 
         // Other headers

==================================================
JkInputStream.java
index 7f7e853308..5dfe0474d9 100644
--- a/java/org/apache/coyote/ajp/AjpProcessor.java
+++ b/java/org/apache/coyote/ajp/AjpProcessor.java
@@ -944,9 +944,9 @@ public class AjpProcessor implements ActionHook {
         if (contentLanguage != null) {
             headers.setValue("Content-Language").setString(contentLanguage);
         }
-        int contentLength = response.getContentLength();
+        long contentLength = response.getContentLengthLong();
         if (contentLength >= 0) {
-            headers.setValue("Content-Length").setInt(contentLength);
+            headers.setValue("Content-Length").setLong(contentLength);
         }
 
         // Other headers

==================================================
