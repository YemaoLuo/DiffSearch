a37f69c61114ca5f7f429189c1848cf47ce59f48
==================================================
Move HttpFilter to the correct package.
==================================================
Mark Thomas
==================================================
Fri Oct 9 21:51:37 2015 +0000
==================================================
Filter.java
Move HttpFilter to the correct package.
Re-order some methods to simplify checking against the RI using javap.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1707821 13f79535-47bb-0310-9956-ffa450edef68



==================================================
GenericFilter.java
index 8fd90b01a2..06b07cdc61 100644
--- a/java/javax/servlet/Filter.java
+++ b/java/javax/servlet/Filter.java
@@ -58,13 +58,14 @@ public interface Filter {
      * <li>Does not return within a time period defined by the web
      *     container</li>
      * </ul>
+     * The default implementation is a NO-OP.
      *
      * @param filterConfig The configuration information associated with the
      *                     filter instance being initialised
      *
      * @throws ServletException if the initialisation fails
      */
-    public void init(FilterConfig filterConfig) throws ServletException;
+    public default void init(FilterConfig filterConfig) throws ServletException {}
 
     /**
      * The <code>doFilter</code> method of the Filter is called by the container
@@ -112,7 +113,8 @@ public interface Filter {
      * that are being held (for example, memory, file handles, threads) and make
      * sure that any persistent state is synchronized with the filter's current
      * state in memory.
+     *
+     * The default implementation is a NO-OP.
      */
-    public void destroy();
-
+    public default void destroy() {}
 }

==================================================
ServletRegistration.java
index d0031759fb..d8d10bf3da 100644
--- a/java/javax/servlet/GenericFilter.java
+++ b/java/javax/servlet/GenericFilter.java
@@ -16,6 +16,7 @@
  */
 package javax.servlet;
 
+import java.io.IOException;
 import java.io.Serializable;
 import java.util.Enumeration;
 
@@ -26,15 +27,14 @@ public abstract class GenericFilter implements Filter, FilterConfig, Serializabl
     private volatile FilterConfig filterConfig;
 
 
+    /**
+     * {@inheritDoc}
+     *
+     * Default NO-OP implementation.
+     */
     @Override
-    public String getFilterName() {
-        return getFilterConfig().getFilterName();
-    }
-
-
-    @Override
-    public ServletContext getServletContext() {
-        return getFilterConfig().getServletContext();
+    public void destroy() {
+        // NO-OP
     }
 
 
@@ -50,13 +50,6 @@ public abstract class GenericFilter implements Filter, FilterConfig, Serializabl
     }
 
 
-    @Override
-    public void init(FilterConfig filterConfig) throws ServletException {
-        this.filterConfig  = filterConfig;
-        init();
-    }
-
-
     /**
      * Obtain the FilterConfig used to initialise this Filter instance.
      *
@@ -68,6 +61,19 @@ public abstract class GenericFilter implements Filter, FilterConfig, Serializabl
     }
 
 
+    @Override
+    public ServletContext getServletContext() {
+        return getFilterConfig().getServletContext();
+    }
+
+
+    @Override
+    public void init(FilterConfig filterConfig) throws ServletException {
+        this.filterConfig  = filterConfig;
+        init();
+    }
+
+
     /**
      * Convenience method for sub-classes to save them having to call
      * <code>super.init(config)</code>. This is a NO-OP by default.
@@ -80,13 +86,13 @@ public abstract class GenericFilter implements Filter, FilterConfig, Serializabl
     }
 
 
-    /**
-     * {@inheritDoc}
-     *
-     * Default NO-OP implementation.
-     */
     @Override
-    public void destroy() {
-        // NO-OP
+    public abstract void doFilter(ServletRequest request, ServletResponse response,
+            FilterChain chain) throws IOException, ServletException;
+
+
+    @Override
+    public String getFilterName() {
+        return getFilterConfig().getFilterName();
     }
 }

==================================================
HttpFilter.java
index de26618c0b..44be9d2b3b 100644
--- a/java/javax/servlet/ServletRegistration.java
+++ b/java/javax/servlet/ServletRegistration.java
@@ -42,8 +42,8 @@ public interface ServletRegistration extends Registration {
     public static interface Dynamic
     extends ServletRegistration, Registration.Dynamic {
         public void setLoadOnStartup(int loadOnStartup);
+        public Set<String> setServletSecurity(ServletSecurityElement constraint);
         public void setMultipartConfig(MultipartConfigElement multipartConfig);
         public void setRunAsRole(String roleName);
-        public Set<String> setServletSecurity(ServletSecurityElement constraint);
     }
 }

==================================================
