7314f81370303615645112672323283a822d8ced
==================================================
- Commit patches which have been in the status for some time:
==================================================
Remy Maucherat
==================================================
Tue Oct 16 11:22:50 2007 +0000
==================================================
StandardServer.java
index 23610c50f1..e3aeacdd30 100644
--- a/build.properties.default
+++ b/build.properties.default
@@ -57,7 +57,7 @@ wsdl4j-src.loc=http://repo1.maven.org/maven2/wsdl4j/wsdl4j/1.6.1/wsdl4j-1.6.1.ja
 jdt.home=${base.path}/eclipse/plugins
 jdt.lib=${jdt.home}
 jdt.jar=${jdt.lib}/org.eclipse.jdt.core_3.2.3.v_686_R32x.jar
-jdt.loc=http://sunsite.informatik.rwth-aachen.de/eclipse/downloads/drops/R-3.2.2-200702121330/eclipse-JDT-3.2.2.zip
+jdt.loc=http://sunsite.informatik.rwth-aachen.de/eclipse/downloads/drops/R-3.3.1-200709211145/eclipse-JDT-3.3.1.zip
 
 # ----- Tomcat native library -----
 tomcat-native.home=${base.path}/tomcat-native-1.1.10

==================================================
MsgContext.java
index 4d00476974..155f7cf833 100644
--- a/java/org/apache/catalina/core/StandardServer.java
+++ b/java/org/apache/catalina/core/StandardServer.java
@@ -360,7 +360,7 @@ public final class StandardServer
         if( port==-1 ) {
             while( true ) {
                 try {
-                    Thread.sleep( 100000 );
+                    Thread.sleep( 10000 );
                 } catch( InterruptedException ex ) {
                 }
                 if( stopAwait ) return;
@@ -747,6 +747,9 @@ public final class StandardServer
         // Notify our interested LifecycleListeners
         lifecycle.fireLifecycleEvent(AFTER_STOP_EVENT, null);
 
+        if (port == -1)
+            stopAwait();
+
     }
 
     public void init() throws Exception {

==================================================
