ac0783eea0aa234015ba621f405013aab2ea06b1
==================================================
SSL should be based on SSLEnabled, not secure flag
==================================================
Filip Hanik
==================================================
Thu Oct 29 21:48:04 2009 +0000
==================================================
Http11NioProtocol.java
SSL should be based on SSLEnabled, not secure flag


git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@831106 13f79535-47bb-0310-9956-ffa450edef68



==================================================
Http11Protocol.java
index 1121f009ca..9246e5fe2a 100644
--- a/java/org/apache/coyote/http11/Http11NioProtocol.java
+++ b/java/org/apache/coyote/http11/Http11NioProtocol.java
@@ -734,7 +734,7 @@ public class Http11NioProtocol implements ProtocolHandler, MBeanRegistration
 
                 processor.action(ActionCode.ACTION_START, null);
                 
-                if (proto.ep.getSecure() && (proto.sslImplementation != null)) {
+                if (proto.ep.isSSLEnabled() && (proto.sslImplementation != null)) {
                     if (socket instanceof SecureNioChannel) {
                         SecureNioChannel ch = (SecureNioChannel)socket;
                         processor.setSslSupport(proto.sslImplementation.getSSLSupport(ch.getSslEngine().getSession()));

==================================================
