03b8cbf298e71ca30fd1ffebd86dafc1a501ec36
==================================================
Fix https://bz.apache.org/bugzilla/show_bug.cgi?id=58827
==================================================
Mark Thomas
==================================================
Mon Feb 1 11:11:36 2016 +0000
==================================================
StandardContext.java
Fix https://bz.apache.org/bugzilla/show_bug.cgi?id=58827
Remove what is left of the JSR-77 implementation.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1727918 13f79535-47bb-0310-9956-ffa450edef68



==================================================
StandardWrapper.java
index ab1e432f6f..6d7726e2dc 100644
--- a/java/org/apache/catalina/core/StandardContext.java
+++ b/java/org/apache/catalina/core/StandardContext.java
@@ -16,11 +16,9 @@
  */
 package org.apache.catalina.core;
 
-import java.io.BufferedReader;
 import java.io.File;
 import java.io.IOException;
 import java.io.InputStream;
-import java.io.InputStreamReader;
 import java.net.MalformedURLException;
 import java.net.URL;
 import java.security.AccessController;
@@ -6198,67 +6196,6 @@ public class StandardContext extends ContainerBase
 
     // ------------------------------------------------------------- Operations
 
-
-    /**
-     * JSR77 deploymentDescriptor attribute
-     *
-     * @return string deployment descriptor
-     *
-     * @deprecated The JSR-77 implementation is incomplete and will be removed
-     *             in 9.0.x
-     */
-    @Deprecated
-    public String getDeploymentDescriptor() {
-
-        InputStream stream = null;
-        ServletContext servletContext = getServletContext();
-        if (servletContext != null) {
-            stream = servletContext.getResourceAsStream(
-                org.apache.catalina.startup.Constants.ApplicationWebXml);
-        }
-        if (stream == null) {
-            return "";
-        }
-        StringBuilder sb = new StringBuilder();
-        try (BufferedReader br = new BufferedReader(new InputStreamReader(stream))) {
-            String strRead = "";
-            while (strRead != null) {
-                sb.append(strRead);
-                strRead = br.readLine();
-            }
-        } catch (IOException e) {
-            return "";
-        }
-
-        return sb.toString();
-    }
-
-
-    /**
-     * JSR77 servlets attribute
-     *
-     * @return list of all servlets ( we know about )
-     *
-     * @deprecated The JSR-77 implementation is incomplete and will be removed
-     *             in 9.0.x
-     */
-    @Deprecated
-    public String[] getServlets() {
-
-        String[] result = null;
-
-        Container[] children = findChildren();
-        if (children != null) {
-            result = new String[children.length];
-            for( int i=0; i< children.length; i++ ) {
-                result[i] = children[i].getObjectName().toString();
-            }
-        }
-
-        return result;
-    }
-
-
     @Override
     protected String getObjectNameKeyProperties() {
 
@@ -6454,17 +6391,6 @@ public class StandardContext extends ContainerBase
     }
 
 
-    /**
-     * @return support for "stateManageable" JSR77
-     *
-     * @deprecated The JSR-77 implementation is incomplete and will be removed
-     *             in 9.0.x
-     */
-    @Deprecated
-    public boolean isStateManageable() {
-        return true;
-    }
-
     /**
      * The J2EE Server ObjectName this module is deployed on.
      */

==================================================
