d1a3389380a089d76d028112dd935e63de01ea7f
==================================================
Simplify logic
==================================================
Mark Emlyn
==================================================
Thu May 29 14:39:25 2014 +0000
==================================================
Response.java
Simplify logic
Call Response.recycle() from Response.reset() rather than in Response.reset():
 - doing ~half of what recycle() does
 - calling ActionCode.RESET which resets the OutputBuffer which in turn calls Response.recycle()

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1598307 13f79535-47bb-0310-9956-ffa450edef68



==================================================
AbstractOutputBuffer.java
index 1bc84d1698..d1e5d9f957 100644
--- a/java/org/apache/coyote/Response.java
+++ b/java/org/apache/coyote/Response.java
@@ -269,16 +269,7 @@ public final class Response {
             throw new IllegalStateException();
         }
 
-        contentType = null;
-        locale = DEFAULT_LOCALE;
-        contentLanguage = null;
-        characterEncoding = Constants.DEFAULT_CHARACTER_ENCODING;
-        contentLength = -1;
-        charsetSet = false;
-
-        status = 200;
-        message = null;
-        headers.clear();
+        recycle();
 
         // Reset the stream
         action(ActionCode.RESET, this);

==================================================
