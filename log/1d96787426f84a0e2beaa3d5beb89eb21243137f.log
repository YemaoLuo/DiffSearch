1d96787426f84a0e2beaa3d5beb89eb21243137f
==================================================
Fix https://bz.apache.org/bugzilla/show_bug.cgi?id=62897
==================================================
Mark Thomas
==================================================
Fri Nov 9 11:49:37 2018 +0000
==================================================
StandardContext.java
Fix https://bz.apache.org/bugzilla/show_bug.cgi?id=62897
Provide a property clearReferencesThreadLocals on the standard Context implementation that enables the check for memory leaks via ThreadLocals to be disabled because this check depends on the use of an API that has been deprecated in later versions of Java.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1846236 13f79535-47bb-0310-9956-ffa450edef68



==================================================
WebappClassLoaderBase.java
index 91e5d7f5f9..af616213d5 100644
--- a/java/org/apache/catalina/core/mbeans-descriptors.xml
+++ b/java/org/apache/catalina/core/mbeans-descriptors.xml
@@ -94,6 +94,10 @@
                description="Should Tomcat attempt to terminate TimerThreads that have been started by the web application? Advisable to be used only in a development environment."
                type="boolean"/>
 
+    <attribute name="clearReferencesThreadLocals"
+               description="Should Tomcat attempt to clear ThreadLocal variables that have been populated with classes loaded by the web application?"
+               type="boolean"/>
+
     <attribute name="configFile"
                description="Location of the context.xml resource or file"
                type="java.net.URL"/>

==================================================
