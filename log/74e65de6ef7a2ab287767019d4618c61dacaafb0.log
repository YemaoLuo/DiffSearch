74e65de6ef7a2ab287767019d4618c61dacaafb0
==================================================
Copy changes in ReflectionUtil in r1817517 to Util.
==================================================
Mark Thomas
==================================================
Fri Dec 8 16:07:20 2017 +0000
==================================================
Util.java
Copy changes in ReflectionUtil in r1817517 to Util.
Update unit tests for change in exception type

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1817520 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TestBeanELResolver.java
index 04588fc6d6..0c444fc9e0 100644
--- a/java/javax/el/Util.java
+++ b/java/javax/el/Util.java
@@ -254,12 +254,12 @@ class Util {
             }
             if (w.isVarArgs() && paramCount > mParamCount && paramValues != null &&
                     paramValues.length != paramCount) {
-                // Number of parameter types and values do not agree
-                throw new IllegalArgumentException();
+                // Might match a different varargs method
+                continue;
             }
             if (!w.isVarArgs() && paramValues != null && paramCount != paramValues.length) {
-                // Number of parameter types and values do not agree
-                throw new IllegalArgumentException();
+                // Might match a different varargs method
+                continue;
             }
 
             // Check the parameters match
@@ -270,7 +270,7 @@ class Util {
             for (int i = 0; i < mParamCount; i++) {
                 // Can't be null
                 if (w.isVarArgs() && i == (mParamCount - 1)) {
-                    if (i == paramCount && paramCount == (mParamCount - 1)) {
+                    if (i == paramCount || (paramValues != null && paramValues.length == i)) {
                         // Nothing is passed as varargs
                         assignableMatch++;
                         break;

==================================================
