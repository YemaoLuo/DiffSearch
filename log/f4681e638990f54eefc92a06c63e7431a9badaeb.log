f4681e638990f54eefc92a06c63e7431a9badaeb
==================================================
Fix missing query string on protocol upgrade
==================================================
Mark Thomas
==================================================
Sun Apr 7 18:22:23 2019 +0100
==================================================
Http11Processor.java
Fix missing query string on protocol upgrade


==================================================
TestStreamQueryString.java
index c5f198cb72..e272a926ea 100644
--- a/java/org/apache/coyote/http11/Http11Processor.java
+++ b/java/org/apache/coyote/http11/Http11Processor.java
@@ -513,6 +513,7 @@ public class Http11Processor extends AbstractProcessor {
         dest.method().duplicate(source.method());
         dest.getMimeHeaders().duplicate(source.getMimeHeaders());
         dest.requestURI().duplicate(source.requestURI());
+        dest.queryString().duplicate(source.queryString());
 
         return dest;
 

==================================================
