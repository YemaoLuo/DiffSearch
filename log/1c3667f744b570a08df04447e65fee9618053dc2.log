1c3667f744b570a08df04447e65fee9618053dc2
==================================================
Reduce sleep in acceptor thread pause from 1000ms to 50ms. This
==================================================
Mark Emlyn
==================================================
Thu Nov 17 17:15:51 2011 +0000
==================================================
AprEndpoint.java
Reduce sleep in acceptor thread pause from 1000ms to 50ms. This
significantly speeds up shutdown, particularly with testing, with no
measurable increase in CPU usage while the acceptor is paused.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1203278 13f79535-47bb-0310-9956-ffa450edef68



==================================================
JIoEndpoint.java
index a675173922..76cf4830f8 100644
--- a/java/org/apache/tomcat/util/net/AprEndpoint.java
+++ b/java/org/apache/tomcat/util/net/AprEndpoint.java
@@ -968,7 +968,7 @@ public class AprEndpoint extends AbstractEndpoint {
                 while (paused && running) {
                     state = AcceptorState.PAUSED;
                     try {
-                        Thread.sleep(1000);
+                        Thread.sleep(50);
                     } catch (InterruptedException e) {
                         // Ignore
                     }

==================================================
NioEndpoint.java
index 12af7bd860..4d4e06b6d8 100644
--- a/java/org/apache/tomcat/util/net/JIoEndpoint.java
+++ b/java/org/apache/tomcat/util/net/JIoEndpoint.java
@@ -185,7 +185,7 @@ public class JIoEndpoint extends AbstractEndpoint {
                 while (paused && running) {
                     state = AcceptorState.PAUSED;
                     try {
-                        Thread.sleep(1000);
+                        Thread.sleep(50);
                     } catch (InterruptedException e) {
                         // Ignore
                     }

==================================================
