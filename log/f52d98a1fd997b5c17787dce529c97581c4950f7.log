f52d98a1fd997b5c17787dce529c97581c4950f7
==================================================
Reduce visibility as recommended by UCdetector
==================================================
Mark Thomas
==================================================
Fri Oct 7 20:03:39 2016 +0000
==================================================
ByteUtil.java
Reduce visibility as recommended by UCdetector
Move utility method only used by tests to test code

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1763823 13f79535-47bb-0310-9956-ffa450edef68



==================================================
Http2TestBase.java
index 5b92ce9e99..c940ce2323 100644
--- a/java/org/apache/coyote/http2/ByteUtil.java
+++ b/java/org/apache/coyote/http2/ByteUtil.java
@@ -19,25 +19,25 @@ package org.apache.coyote.http2;
 /**
  * Utility class for extracting values from byte arrays.
  */
-public class ByteUtil {
+class ByteUtil {
 
     private ByteUtil() {
         // Hide default constructor
     }
 
 
-    public static boolean isBit7Set(byte input) {
+    static boolean isBit7Set(byte input) {
         return (input & 0x80) > 0;
     }
 
 
-    public static int get31Bits(byte[] input, int firstByte) {
+    static int get31Bits(byte[] input, int firstByte) {
         return ((input[firstByte] & 0x7F) << 24) + ((input[firstByte + 1] & 0xFF) << 16) +
                 ((input[firstByte + 2] & 0xFF) << 8) + (input[firstByte + 3] & 0xFF);
     }
 
 
-    public static void set31Bits(byte[] output, int firstByte, int value) {
+    static void set31Bits(byte[] output, int firstByte, int value) {
         output[firstByte] = (byte) ((value & 0x7F000000) >> 24);
         output[firstByte + 1] = (byte) ((value & 0xFF0000) >> 16);
         output[firstByte + 2] = (byte) ((value & 0xFF00) >> 8);
@@ -45,47 +45,42 @@ public class ByteUtil {
     }
 
 
-    public static int getOneByte(byte[] input, int pos) {
+    static int getOneByte(byte[] input, int pos) {
         return (input[pos] & 0xFF);
     }
 
 
-    public static int getTwoBytes(byte[] input, int firstByte) {
+    static int getTwoBytes(byte[] input, int firstByte) {
         return ((input[firstByte] & 0xFF) << 8) +  (input[firstByte + 1] & 0xFF);
     }
 
 
-    public static int getThreeBytes(byte[] input, int firstByte) {
+    static int getThreeBytes(byte[] input, int firstByte) {
         return ((input[firstByte] & 0xFF) << 16) + ((input[firstByte + 1] & 0xFF) << 8) +
                 (input[firstByte + 2] & 0xFF);
     }
 
 
-    public static void setOneBytes(byte[] output, int firstByte, int value) {
-        output[firstByte] = (byte) (value & 0xFF);
-    }
-
-
-    public static void setTwoBytes(byte[] output, int firstByte, int value) {
+    static void setTwoBytes(byte[] output, int firstByte, int value) {
         output[firstByte] = (byte) ((value & 0xFF00) >> 8);
         output[firstByte + 1] = (byte) (value & 0xFF);
     }
 
 
-    public static void setThreeBytes(byte[] output, int firstByte, int value) {
+    static void setThreeBytes(byte[] output, int firstByte, int value) {
         output[firstByte] = (byte) ((value & 0xFF0000) >> 16);
         output[firstByte + 1] = (byte) ((value & 0xFF00) >> 8);
         output[firstByte + 2] = (byte) (value & 0xFF);
     }
 
 
-    public static long getFourBytes(byte[] input, int firstByte) {
+    static long getFourBytes(byte[] input, int firstByte) {
         return ((long)(input[firstByte] & 0xFF) << 24) + ((input[firstByte + 1] & 0xFF) << 16) +
                 ((input[firstByte + 2] & 0xFF) << 8) + (input[firstByte + 3] & 0xFF);
     }
 
 
-    public static void setFourBytes(byte[] output, int firstByte, long value) {
+    static void setFourBytes(byte[] output, int firstByte, long value) {
         output[firstByte]     = (byte) ((value & 0xFF000000) >> 24);
         output[firstByte + 1] = (byte) ((value & 0xFF0000) >> 16);
         output[firstByte + 2] = (byte) ((value & 0xFF00) >> 8);

==================================================
TestHttp2Section_6_9.java
index 4702986d7c..e2b096e2c9 100644
--- a/test/org/apache/coyote/http2/Http2TestBase.java
+++ b/test/org/apache/coyote/http2/Http2TestBase.java
@@ -582,7 +582,7 @@ public abstract class Http2TestBase extends TomcatBaseTest {
         pingHeader[3] = FrameType.PING.getIdByte();
         // Flags
         if (ack) {
-            ByteUtil.setOneBytes(pingHeader, 4, 0x01);
+            setOneBytes(pingHeader, 4, 0x01);
         }
         // Stream
         ByteUtil.set31Bits(pingHeader, 5, streamId);
@@ -659,7 +659,7 @@ public abstract class Http2TestBase extends TomcatBaseTest {
 
         // Payload
         ByteUtil.set31Bits(priorityFrame, 9, streamDependencyId);
-        ByteUtil.setOneBytes(priorityFrame, 13, weight);
+        setOneBytes(priorityFrame, 13, weight);
 
         os.write(priorityFrame);
         os.flush();
@@ -701,6 +701,11 @@ public abstract class Http2TestBase extends TomcatBaseTest {
     }
 
 
+    static void setOneBytes(byte[] output, int firstByte, int value) {
+        output[firstByte] = (byte) (value & 0xFF);
+    }
+
+
     private static class TestInput implements Http2Parser.Input {
 
         private final InputStream is;

==================================================
