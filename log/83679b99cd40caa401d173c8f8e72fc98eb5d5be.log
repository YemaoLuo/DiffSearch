83679b99cd40caa401d173c8f8e72fc98eb5d5be
==================================================
Handle the unlikely case where different versions of a web application are deployed with different session settings
==================================================
Mark Thomas
==================================================
Sat Nov 7 21:35:29 2015 +0000
==================================================
CoyoteAdapter.java
Handle the unlikely case where different versions of a web application are deployed with different session settings

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1713184 13f79535-47bb-0310-9956-ffa450edef68



==================================================
Request.java
index a4e4221ba5..a02c6af74a 100644
--- a/java/org/apache/catalina/connector/CoyoteAdapter.java
+++ b/java/org/apache/catalina/connector/CoyoteAdapter.java
@@ -757,9 +757,11 @@ public class CoyoteAdapter implements Adapter {
                                 // Reset mapping
                                 request.getMappingData().recycle();
                                 mapRequired = true;
-                                // Recycle cookies in case correct context is
-                                // configured with different settings
+                                // Recycle cookies and session info in case the
+                                // correct context is configured with different
+                                // settings
                                 req.getCookies().recycle();
+                                request.recycleSessionInfo();
                             }
                             break;
                         }

==================================================
