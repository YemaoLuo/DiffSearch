06dff7c5047a08b0f15e042c34c8fed69c3039ca
==================================================
Allow to run the shutdown on another IP that localhost.
==================================================
Jean-Frederic Clere
==================================================
Tue Feb 12 16:22:58 2008 +0000
==================================================
Server.java
Allow to run the shutdown on another IP that localhost.


git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@620845 13f79535-47bb-0310-9956-ffa450edef68



==================================================
StandardServer.java
index 014f6fd637..917526d268 100644
--- a/java/org/apache/catalina/Server.java
+++ b/java/org/apache/catalina/Server.java
@@ -88,6 +88,20 @@ public interface Server {
     public void setPort(int port);
 
 
+    /**
+     * Return the address on which we listen to for shutdown commands.
+     */
+    public String getAddress();
+
+
+    /**
+     * Set the address on which we listen to for shutdown commands.
+     *
+     * @param address The new address
+     */
+    public void setAddress(String address);
+
+
     /**
      * Return the shutdown command string we are waiting for.
      */

==================================================
Catalina.java
index 155f7cf833..7135ae9163 100644
--- a/java/org/apache/catalina/core/StandardServer.java
+++ b/java/org/apache/catalina/core/StandardServer.java
@@ -137,6 +137,11 @@ public final class StandardServer
      */
     private int port = 8005;
 
+    /**
+     * The address on which we wait for shutdown commands.
+     */
+    private String address = "127.0.0.1";
+
 
     /**
      * A random number generator that is <strong>only</strong> used if
@@ -280,6 +285,27 @@ public final class StandardServer
     }
 
 
+    /**
+     * Return the address on which we listen to for shutdown commands.
+     */
+    public String getAddress() {
+
+        return (this.address);
+
+    }
+
+
+    /**
+     * Set the address on which we listen to for shutdown commands.
+     *
+     * @param address The new address
+     */
+    public void setAddress(String address) {
+
+        this.address = address;
+
+    }
+
     /**
      * Return the shutdown command string we are waiting for.
      */
@@ -372,9 +398,10 @@ public final class StandardServer
         try {
             serverSocket =
                 new ServerSocket(port, 1,
-                                 InetAddress.getByName("127.0.0.1"));
+                                 InetAddress.getByName(address));
         } catch (IOException e) {
             log.error("StandardServer.await: create[" + port
+                               + ":" + address
                                + "]: ", e);
             System.exit(1);
         }

==================================================
