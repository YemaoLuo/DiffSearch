b142e36d0cb92b066840565d28349804401eb72e
==================================================
Fix BZ 65342. Correct regression in fix for BZ 65262.
==================================================
Mark Thomas
==================================================
Tue Jun 1 13:53:09 2021 +0100
==================================================
ServerEndpointConfig.java
Fix BZ 65342. Correct regression in fix for BZ 65262.

The 'trick' used in BZ 65262 to identify if the end point is using the
default ServerEndpointConfig implementation depended on implementation
details of WebSocket API provided by Tomcat. This trick failed when
using other WebSocket API JARs.


==================================================
WsSession.java
index 4fb16d301e..1b1a7e74de 100644
--- a/java/jakarta/websocket/server/ServerEndpointConfig.java
+++ b/java/jakarta/websocket/server/ServerEndpointConfig.java
@@ -74,6 +74,18 @@ public interface ServerEndpointConfig extends EndpointConfig {
 
         private Builder(Class<?> endpointClass,
                 String path) {
+            if (endpointClass == null) {
+                throw new IllegalArgumentException("Endpoint class may not be null");
+            }
+            if (path == null) {
+                throw new IllegalArgumentException("Path may not be null");
+            }
+            if (path.isEmpty()) {
+                throw new IllegalArgumentException("Path may not be empty");
+            }
+            if (path.charAt(0) != '/') {
+                throw new IllegalArgumentException("Path must start with '/'");
+            }
             this.endpointClass = endpointClass;
             this.path = path;
         }

==================================================
