a616bf385a350175a33a0ebf09d8b6688344e9e3
==================================================
Add support for Unix Domain Sockets (APR Protocol)
==================================================
minfrin minfrin@users.noreply.github.com
==================================================
Fri Jan 15 17:12:51 2021 +0000
==================================================
AprLifecycleListener.java
Add support for Unix Domain Sockets (APR Protocol)

Add support and test case for Unix Domain Sockets in
org.apache.coyote.http11.Http11AprProtocol, to support
users using Java versions older than 16.

Requires tomcat-native 1.2.26 and above.



==================================================
AprEndpoint.java
index acc70ebdc4..dfd43d0828 100644
--- a/java/org/apache/catalina/core/LocalStrings_zh_CN.properties
+++ b/java/org/apache/catalina/core/LocalStrings_zh_CN.properties
@@ -75,7 +75,7 @@ aprListener.aprInitDebug=在java.library.path[{1}]上使用名称[{0}]找不到
 aprListener.aprInitError=基于APR的本地库加载失败.错误报告为[{0}]
 aprListener.currentFIPSMode=当前FIPS模式：[{0}]。
 aprListener.enterAlreadyInFIPSMode=AprLifecycleListener 配置为强制进入FIPS模式，但库已处于FIPS模式[{0}]
-aprListener.flags=APR功能：IPv6[{0}]、sendfile[{1}]、accept filters[{2}]、random[{3}]。
+aprListener.flags=APR功能：IPv6[{0}]、sendfile[{1}]、accept filters[{2}]、random[{3}]、UDS [{4}]。
 aprListener.initializeFIPSFailed=进入FIPS模式失败
 aprListener.initializeFIPSSuccess=成功的进入FIPS 模式
 aprListener.initializedOpenSSL=OpenSSL成功初始化 [{0}]

==================================================
TestUnixDomainSocketServer.java
index bcf697c538..54dd3d94dc 100644
--- a/java/org/apache/tomcat/util/net/LocalStrings.properties
+++ b/java/org/apache/tomcat/util/net/LocalStrings.properties
@@ -88,6 +88,7 @@ endpoint.init.bind=Socket bind failed: [{0}] [{1}]
 endpoint.init.bind.inherited=No inherited channel while the connector was configured to use one
 endpoint.init.listen=Socket listen failed: [{0}] [{1}]
 endpoint.init.notavail=APR not available
+endpoint.init.unixnotavail=Unix Domain Socket support not available
 endpoint.invalidJmxNameSslHost=Unable to generate a valid JMX object name for the SSLHostConfig associated with host [{0}]
 endpoint.invalidJmxNameSslHostCert=Unable to generate a valid JMX object name for the SSLHostConfigCertificate associated with host [{0}] and certificate type [{1}]
 endpoint.jmxRegistrationFailed=Failed to register the JMX object with name [{0}]

==================================================
