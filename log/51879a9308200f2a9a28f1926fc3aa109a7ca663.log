51879a9308200f2a9a28f1926fc3aa109a7ca663
==================================================
Add test for FlushableGZIPOutputStream.write(int).
==================================================
Konstantin Kolinko
==================================================
Mon Nov 7 02:16:17 2011 +0000
==================================================
FlushableGZIPOutputStream.java
Add test for FlushableGZIPOutputStream.write(int).
Remove unneeded &0xff in int->byte conversion from the method.
According to JLS 3rd ed ch.5.1.3, narrowing of int to byte
"simply discards all but the n lowest order bits".

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1198602 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TestFlushableGZIPOutputStream.java
index eeb09476eb..28dc797217 100644
--- a/java/org/apache/coyote/http11/filters/FlushableGZIPOutputStream.java
+++ b/java/org/apache/coyote/http11/filters/FlushableGZIPOutputStream.java
@@ -62,7 +62,7 @@ public class FlushableGZIPOutputStream extends GZIPOutputStream {
     @Override
     public synchronized void write(int i) throws IOException {
         flushLastByte();
-        rememberLastByte((byte) (i & 0xFF));
+        rememberLastByte((byte) i);
     }
 
     @Override

==================================================
