653da8ffe7b686c6590430124459beca7d4693f0
==================================================
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48550
==================================================
Konstantin Prei√üer
==================================================
Wed Dec 18 02:53:35 2013 +0000
==================================================
CookieExample.java
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=48550
Follow-Up to r1511468:
Fix example servlets to output text as UTF-8. This fixes encoding issues with the "Request Parameters" and "Cookies" servlet examples as otherwise the browser would encode the form data with the document encoding (ISO-8859-1) but Tomcat will interpret it as UTF-8.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1551814 13f79535-47bb-0310-9956-ffa450edef68



==================================================
HelloWorldExample.java
index 0d2d9e574d..6c87217c34 100644
--- a/webapps/examples/WEB-INF/classes/CookieExample.java
+++ b/webapps/examples/WEB-INF/classes/CookieExample.java
@@ -57,10 +57,12 @@ public class CookieExample extends HttpServlet {
         }
 
         response.setContentType("text/html");
+        response.setCharacterEncoding("UTF-8");
 
         PrintWriter out = response.getWriter();
-        out.println("<html>");
+        out.println("<!DOCTYPE html><html>");
         out.println("<head>");
+        out.println("<meta charset=\"UTF-8\" />");
 
         String title = RB.getString("cookies.title");
         out.println("<title>" + title + "</title>");

==================================================
RequestHeaderExample.java
index b642aba1ab..1a5ea5a68d 100644
--- a/webapps/examples/WEB-INF/classes/HelloWorldExample.java
+++ b/webapps/examples/WEB-INF/classes/HelloWorldExample.java
@@ -41,10 +41,12 @@ public class HelloWorldExample extends HttpServlet {
         ResourceBundle rb =
             ResourceBundle.getBundle("LocalStrings",request.getLocale());
         response.setContentType("text/html");
+        response.setCharacterEncoding("UTF-8");
         PrintWriter out = response.getWriter();
 
-        out.println("<html>");
+        out.println("<!DOCTYPE html><html>");
         out.println("<head>");
+        out.println("<meta charset=\"UTF-8\" />");
 
         String title = rb.getString("helloworld.title");
 

==================================================
RequestInfoExample.java
index 90c6058d6a..9c4fbb10f1 100644
--- a/webapps/examples/WEB-INF/classes/RequestHeaderExample.java
+++ b/webapps/examples/WEB-INF/classes/RequestHeaderExample.java
@@ -48,10 +48,12 @@ public class RequestHeaderExample extends HttpServlet {
         throws IOException, ServletException
     {
         response.setContentType("text/html");
+        response.setCharacterEncoding("UTF-8");
 
         PrintWriter out = response.getWriter();
-        out.println("<html>");
+        out.println("<!DOCTYPE html><html>");
         out.println("<head>");
+        out.println("<meta charset=\"UTF-8\" />");
 
         String title = RB.getString("requestheader.title");
         out.println("<title>" + title + "</title>");

==================================================
RequestParamExample.java
index 0bae6c59d1..a6f880032d 100644
--- a/webapps/examples/WEB-INF/classes/RequestInfoExample.java
+++ b/webapps/examples/WEB-INF/classes/RequestInfoExample.java
@@ -47,10 +47,12 @@ public class RequestInfoExample extends HttpServlet {
         throws IOException, ServletException
     {
         response.setContentType("text/html");
+        response.setCharacterEncoding("UTF-8");
 
         PrintWriter out = response.getWriter();
-        out.println("<html>");
+        out.println("<!DOCTYPE html><html>");
         out.println("<head>");
+        out.println("<meta charset=\"UTF-8\" />");
 
         String title = RB.getString("requestinfo.title");
         out.println("<title>" + title + "</title>");

==================================================
SessionExample.java
index 5e1577a1c2..01eb695a9c 100644
--- a/webapps/examples/WEB-INF/classes/RequestParamExample.java
+++ b/webapps/examples/WEB-INF/classes/RequestParamExample.java
@@ -47,10 +47,12 @@ public class RequestParamExample extends HttpServlet {
         throws IOException, ServletException
     {
         response.setContentType("text/html");
+        response.setCharacterEncoding("UTF-8");
 
         PrintWriter out = response.getWriter();
-        out.println("<html>");
+        out.println("<!DOCTYPE html><html>");
         out.println("<head>");
+        out.println("<meta charset=\"UTF-8\" />");
 
         String title = RB.getString("requestparams.title");
         out.println("<title>" + title + "</title>");

==================================================
