d2a3a29fd2665818fce1a435b007f8bd208a3158
==================================================
Refactor to reduce the need to deprecate code in 8.5.x
==================================================
Mark Thomas
==================================================
Mon Jun 19 19:56:23 2017 +0000
==================================================
Response.java
Refactor to reduce the need to deprecate code in 8.5.x

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1799272 13f79535-47bb-0310-9956-ffa450edef68



==================================================
Response.java
index 8ad794db4f..d9306c5fb1 100644
--- a/java/org/apache/catalina/connector/Response.java
+++ b/java/org/apache/catalina/connector/Response.java
@@ -803,7 +803,7 @@ public class Response implements HttpServletResponse {
             // Ignore charset if getWriter() has already been called
             if (!usingWriter) {
                 try {
-                    getCoyoteResponse().setCharset(m[1]);
+                    getCoyoteResponse().setCharacterEncoding(m[1]);
                 } catch (UnsupportedEncodingException e) {
                     log.warn(sm.getString("coyoteResponse.encoding.invalid", m[1]), e);
                 }
@@ -840,7 +840,7 @@ public class Response implements HttpServletResponse {
         }
 
         try {
-            getCoyoteResponse().setCharset(charset);
+            getCoyoteResponse().setCharacterEncoding(charset);
         } catch (UnsupportedEncodingException e) {
             log.warn(sm.getString("coyoteResponse.encoding.invalid", charset), e);
             return;
@@ -882,7 +882,7 @@ public class Response implements HttpServletResponse {
         String charset = getContext().getCharset(locale);
         if (charset != null) {
             try {
-                getCoyoteResponse().setCharset(charset);
+                getCoyoteResponse().setCharacterEncoding(charset);
             } catch (UnsupportedEncodingException e) {
                 log.warn(sm.getString("coyoteResponse.encoding.invalid", charset), e);
             }

==================================================
