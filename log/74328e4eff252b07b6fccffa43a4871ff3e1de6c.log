74328e4eff252b07b6fccffa43a4871ff3e1de6c
==================================================
Do not sort lists that have only one element
==================================================
Konstantin Kolinko
==================================================
Tue Oct 4 05:07:52 2011 +0000
==================================================
SerializablePrincipal.java
Do not sort lists that have only one element

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1178684 13f79535-47bb-0310-9956-ffa450edef68



==================================================
GenericPrincipal.java
index 5955791a5d..5d1101fd4c 100644
--- a/java/org/apache/catalina/ha/session/SerializablePrincipal.java
+++ b/java/org/apache/catalina/ha/session/SerializablePrincipal.java
@@ -108,7 +108,7 @@ public class SerializablePrincipal  implements java.io.Serializable {
         if (roles != null) {
             this.roles = new String[roles.size()];
             this.roles = roles.toArray(this.roles);
-            if (this.roles.length > 0)
+            if (this.roles.length > 1)
                 Arrays.sort(this.roles);
         }
         if (userPrincipal instanceof Serializable) {

==================================================
