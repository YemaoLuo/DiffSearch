9eb4c2873f0ef458ffe4d4002048fc902f558e8c
==================================================
SocketWrapper.upgraded is no longer used
==================================================
Mark Thomas
==================================================
Fri Jun 26 15:31:00 2020 +0100
==================================================
AbstractProtocol.java
SocketWrapper.upgraded is no longer used

It used to be used to determine if the processor should be recycled. It
has been replaced by a flag on the processor.


==================================================
SocketWrapperBase.java
index abea68e608..248a26b476 100644
--- a/java/org/apache/coyote/AbstractProtocol.java
+++ b/java/org/apache/coyote/AbstractProtocol.java
@@ -880,8 +880,6 @@ public abstract class AbstractProtocol<S> implements ProtocolHandler,
                                         processor, wrapper));
                             }
                             wrapper.unRead(leftOverInput);
-                            // Mark the connection as upgraded
-                            wrapper.setUpgraded(true);
                             // Associate with the processor with the connection
                             wrapper.setCurrentProcessor(processor);
                             // Initialise the upgrade handler (which may trigger

==================================================
