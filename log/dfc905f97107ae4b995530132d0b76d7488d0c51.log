dfc905f97107ae4b995530132d0b76d7488d0c51
==================================================
Avoid the need for a bunch of null checks.
==================================================
Mark Emlyn
==================================================
Thu Nov 14 16:25:18 2013 +0000
==================================================
TagXml.java
Avoid the need for a bunch of null checks.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1541953 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TaglibXml.java
index a7b245dade..d025aabf1a 100644
--- a/java/org/apache/tomcat/util/descriptor/tld/TagXml.java
+++ b/java/org/apache/tomcat/util/descriptor/tld/TagXml.java
@@ -39,8 +39,8 @@ public class TagXml {
     private String largeIcon;
     private String info;
     private boolean dynamicAttributes;
-    private List<TagAttributeInfo> attributes;
-    private List<TagVariableInfo> variables;
+    private final List<TagAttributeInfo> attributes = new ArrayList<>();
+    private final List<TagVariableInfo> variables = new ArrayList<>();
 
     public String getName() {
         return name;
@@ -115,16 +115,10 @@ public class TagXml {
     }
 
     public List<TagAttributeInfo> getAttributes() {
-        if (attributes == null) {
-            attributes = new ArrayList<>();
-        }
         return attributes;
     }
 
     public List<TagVariableInfo> getVariables() {
-        if (variables == null) {
-            variables = new ArrayList<>();
-        }
         return variables;
     }
 }

==================================================
ValidatorXml.java
index d7c2800d63..93d6fbf8fb 100644
--- a/java/org/apache/tomcat/util/descriptor/tld/TaglibXml.java
+++ b/java/org/apache/tomcat/util/descriptor/tld/TaglibXml.java
@@ -37,10 +37,10 @@ public class TaglibXml {
     private String uri;
     private String info;
     private ValidatorXml validator;
-    private List<TagXml> tags;
-    private List<TagFileXml> tagFiles;
-    private List<String> listeners;
-    private List<FunctionInfo> functions;
+    private final List<TagXml> tags = new ArrayList<>();
+    private final List<TagFileXml> tagFiles = new ArrayList<>();
+    private final List<String> listeners = new ArrayList<>();
+    private final List<FunctionInfo> functions = new ArrayList<>();
 
     public String getTlibVersion() {
         return tlibVersion;
@@ -91,9 +91,6 @@ public class TaglibXml {
     }
 
     public void addTag(TagXml tag) {
-        if (tags == null) {
-            tags = new ArrayList<>();
-        }
         tags.add(tag);
     }
 
@@ -102,9 +99,6 @@ public class TaglibXml {
     }
 
     public void addTagFile(TagFileXml tag) {
-        if (tagFiles == null) {
-            tagFiles = new ArrayList<>();
-        }
         tagFiles.add(tag);
     }
 
@@ -113,9 +107,6 @@ public class TaglibXml {
     }
 
     public void addListener(String listener) {
-        if (listeners == null) {
-            listeners = new ArrayList<>();
-        }
         listeners.add(listener);
     }
 
@@ -124,9 +115,6 @@ public class TaglibXml {
     }
 
     public void addFunction(String name, String klass, String signature) {
-        if (functions == null) {
-            functions = new ArrayList<>();
-        }
         functions.add(new FunctionInfo(name, klass, signature));
     }
 

==================================================
