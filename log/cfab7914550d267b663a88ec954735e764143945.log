cfab7914550d267b663a88ec954735e764143945
==================================================
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50790
==================================================
Mark Emlyn
==================================================
Thu Feb 17 09:59:30 2011 +0000
==================================================
BeanELResolver.java
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50790
Improve method resolution in EL expressions
Add test cases for this bug

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1071561 13f79535-47bb-0310-9956-ffa450edef68



==================================================
AstValue.java
index 4f286cbcf1..7ba9ce02ed 100644
--- a/java/javax/el/BeanELResolver.java
+++ b/java/javax/el/BeanELResolver.java
@@ -413,7 +413,8 @@ public class BeanELResolver extends ELResolver {
             }
             Method[] methods = clazz.getMethods();
             for (Method m : methods) {
-                if (m.getParameterTypes().length == paramCount) {
+                if (methodName.equals(m.getName()) && 
+                        m.getParameterTypes().length == paramCount) {
                     // Same number of parameters - use the first match
                     matchingMethod = m;
                     break;

==================================================
TestMethodExpressionImpl.java
index 02ad92f7b5..92dab46345 100644
--- a/java/org/apache/el/parser/AstValue.java
+++ b/java/org/apache/el/parser/AstValue.java
@@ -156,8 +156,8 @@ public final class AstValue extends SimpleNode {
                 AstMethodParameters mps =
                     (AstMethodParameters) this.children[i+1];
                 // This is a method
-                base = resolver.invoke(ctx, base, suffix,
-                        mps.getParameterTypes(ctx), mps.getParameters(ctx));
+                base = resolver.invoke(ctx, base, suffix, null,
+                        mps.getParameters(ctx));
                 i+=2;
             } else {
                 // This is a property

==================================================
