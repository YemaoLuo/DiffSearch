4f91bdf62bfd60c6601829f3df026a320ea85cda
==================================================
Add context name to leak detection log messages
==================================================
Mark Emlyn
==================================================
Mon Mar 8 12:45:56 2010 +0000
==================================================
WebappClassLoader.java
index b97b385e73..1c4b0403b8 100644
--- a/java/org/apache/catalina/loader/LocalStrings.properties
+++ b/java/org/apache/catalina/loader/LocalStrings.properties
@@ -17,7 +17,6 @@ fileClassLoader.canRead=Repository {0} cannot be read
 fileClassLoader.exists=Repository {0} does not exist
 fileClassLoader.jarFile=Cannot read JAR file {0}
 fileClassLoader.restricted=Cannot load restricted class {0}
-jdbcLeakPrevention.jdbcRemoveFailed=Unable to de-register driver {0}
 standardLoader.addRepository=Adding repository {0}
 standardLoader.alreadyStarted=Loader has already been started
 standardLoader.checkInterval=Cannot set reload check interval to {0} seconds
@@ -30,23 +29,23 @@ standardLoader.removeRepository=Removing repository {0}
 standardLoader.starting=Starting this Loader
 standardLoader.stopping=Stopping this Loader
 webappClassLoader.illegalJarPath=Illegal JAR entry detected with name {0}
-webappClassLoader.jdbcRemoveFailed=JDBC driver de-registration failed
-webappClassLoader.jdbcRemoveStreamError=Exception closing input stream during JDBC driver de-registration
+webappClassLoader.jdbcRemoveFailed=JDBC driver de-registration failed for web application [{0}]
+webappClassLoader.jdbcRemoveStreamError=Exception closing input stream during JDBC driver de-registration for web application [{0}]
 webappClassLoader.stopped=Illegal access: this web application instance has been stopped already.  Could not load {0}.  The eventual following stack trace is caused by an error thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access, and has no functional impact.
 webappClassLoader.readError=Resource read error: Could not load {0}.
-webappClassLoader.clearJbdc=A web application registered the JBDC driver [{0}] but failed to unregister it when the web application was stopped. To prevent a memory leak, the JDBC Driver has been forcibly unregistered.
-webappClassLoader.clearReferencesResourceBundlesCount=Removed [{0}] ResourceBundle references from the cache
-webappClassLoader.clearReferencesResourceBundlesFail=Failed to clear ResourceBundle references
-webappClassLoader.clearRmiInfo=Failed to find class sun.rmi.transport.Target to clear context class loader. This is expected on non-Sun JVMs.
-webappClassLoader.clearRmiFail=Failed to clear context class loader referenced from sun.rmi.transport.Target 
-webappClassLoader.clearThreadLocalDebug=A web application created a ThreadLocal with key of type [{0}] (value [{1}]). The ThreadLocal has been correctly set to null and the key will be removed by GC. However, to simplify the process of tracing memory leaks, the key has been forcibly removed.
-webappClassLoader.clearThreadLocal=A web application created a ThreadLocal with key of type [{0}] (value [{1}]) and a value of type [{2}] (value [{3}]) but failed to remove it when the web application was stopped. To prevent a memory leak, the ThreadLocal has been forcibly removed.
-webappClassLoader.clearThreadLocalFail=Failed to clear ThreadLocal references
-webappClassLoader.stopThreadFail=Failed to terminate thread named [{0}]
-webappClassLoader.stopTimerThreadFail=Failed to terminate TimerThread named [{0}]
+webappClassLoader.clearJbdc=The web application [{0}] registered the JBDC driver [{1}] but failed to unregister it when the web application was stopped. To prevent a memory leak, the JDBC Driver has been forcibly unregistered.
+webappClassLoader.clearReferencesResourceBundlesCount=Removed [{0}] ResourceBundle references from the cache for web application [{1}]
+webappClassLoader.clearReferencesResourceBundlesFail=Failed to clear ResourceBundle references for web application [{0}]
+webappClassLoader.clearRmiInfo=Failed to find class sun.rmi.transport.Target to clear context class loader for web application [{0}]. This is expected on non-Sun JVMs.
+webappClassLoader.clearRmiFail=Failed to clear context class loader referenced from sun.rmi.transport.Target for web application [{0}]
+webappClassLoader.clearThreadLocalDebug=The web application [{0}] created a ThreadLocal with key of type [{1}] (value [{2}]). The ThreadLocal has been correctly set to null and the key will be removed by GC. However, to simplify the process of tracing memory leaks, the key has been forcibly removed.
+webappClassLoader.clearThreadLocal=The web application [{0}] created a ThreadLocal with key of type [{1}] (value [{2}]) and a value of type [{3}] (value [{4}]) but failed to remove it when the web application was stopped. To prevent a memory leak, the ThreadLocal has been forcibly removed.
+webappClassLoader.clearThreadLocalFail=Failed to clear ThreadLocal references for web application [{0}]
+webappClassLoader.stopThreadFail=Failed to terminate thread named [{0}] for web application [{1}]
+webappClassLoader.stopTimerThreadFail=Failed to terminate TimerThread named [{0}] for web application [{1}]
 webappClassLoader.validationErrorJarPath=Unable to validate JAR entry with name {0}
-webappClassLoader.warnThread=A web application appears to have started a thread named [{0}] but has failed to stop it. This is very likely to create a memory leak. 
-webappClassLoader.warnTimerThread=A web application appears to have started a TimerThread named [{0}] via the java.util.Timer API but has failed to stop it. To prevent a memory leak, the timer (and hence the associated thread) has been forcibly cancelled. 
+webappClassLoader.warnThread=The web application [{0}] appears to have started a thread named [{1}] but has failed to stop it. This is very likely to create a memory leak. 
+webappClassLoader.warnTimerThread=The web application [{0}] appears to have started a TimerThread named [{1}] via the java.util.Timer API but has failed to stop it. To prevent a memory leak, the timer (and hence the associated thread) has been forcibly cancelled. 
 webappClassLoader.wrongVersion=(unable to load class {0})
 webappLoader.addRepository=Adding repository {0}
 webappLoader.deploy=Deploying class repositories to work directory {0}

==================================================
