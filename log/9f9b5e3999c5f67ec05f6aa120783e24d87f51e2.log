9f9b5e3999c5f67ec05f6aa120783e24d87f51e2
==================================================
Fix issues spotted while testing with async stock ticker example and curl
==================================================
Mark Thomas
==================================================
Thu Sep 24 15:37:36 2015 +0000
==================================================
Stream.java
Fix issues spotted while testing with async stock ticker example and curl
- Correctly handle errors during flush (e.g. triggered by client disconnect)
- Correctly handle end of async processing

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1705082 13f79535-47bb-0310-9956-ffa450edef68



==================================================
StreamProcessor.java
index 11f82987f3..982263ad0e 100644
--- a/java/org/apache/coyote/http2/Stream.java
+++ b/java/org/apache/coyote/http2/Stream.java
@@ -222,16 +222,11 @@ public class Stream extends AbstractStream implements HeaderEmitter {
     }
 
 
-    void flushData() {
+    void flushData() throws IOException {
         if (log.isDebugEnabled()) {
             log.debug(sm.getString("stream.write", getConnectionId(), getIdentifier()));
         }
-        try {
-            outputBuffer.flush();
-        } catch (IOException e) {
-            // TODO Auto-generated catch block
-            e.printStackTrace();
-        }
+        outputBuffer.flush();
     }
 
 

==================================================
