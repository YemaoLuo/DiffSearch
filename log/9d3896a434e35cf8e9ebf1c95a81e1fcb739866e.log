9d3896a434e35cf8e9ebf1c95a81e1fcb739866e
==================================================
Fix BZ 64849 JPMS provides/uses for EL
==================================================
Mark Thomas
==================================================
Mon Nov 2 19:53:05 2020 +0000
==================================================
ExpressionFactory.java
Fix BZ 64849 JPMS provides/uses for EL

Note this has exposed an issue with the JPMS module-info.class for
org.apache.tomcat.jasper.el


==================================================
ExpressionFactoryImpl.java
index b1ffccc35f..dd17ddda80 100644
--- a/java/jakarta/el/ExpressionFactory.java
+++ b/java/jakarta/el/ExpressionFactory.java
@@ -36,10 +36,13 @@ import java.util.concurrent.locks.Lock;
 import java.util.concurrent.locks.ReadWriteLock;
 import java.util.concurrent.locks.ReentrantReadWriteLock;
 
+import aQute.bnd.annotation.spi.ServiceConsumer;
+
 /**
  *
  * @since 2.1
  */
+@ServiceConsumer(value=jakarta.el.ExpressionFactory.class)
 public abstract class ExpressionFactory {
 
     private static final boolean IS_SECURITY_ENABLED =

==================================================
