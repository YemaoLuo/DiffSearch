c3fccdec0f5927d7cad4c9a81e0c1c1aed21b9d3
==================================================
Fix https://bz.apache.org/bugzilla/show_bug.cgi?id=63249 Lifecycle
==================================================
Mark Thomas
==================================================
Thu Mar 14 12:12:47 2019 +0000
==================================================
StandardContext.java
Fix https://bz.apache.org/bugzilla/show_bug.cgi?id=63249 Lifecycle

Use a consistent log level (ERROR) when logging the LifecycleException
associated with the failure to start or stop a component.


==================================================
StandardService.java
index 5885b02be5..2753ff84ca 100644
--- a/java/org/apache/catalina/core/StandardContext.java
+++ b/java/org/apache/catalina/core/StandardContext.java
@@ -2051,7 +2051,7 @@ public class StandardContext extends ContainerBase
                 oldNamingResources.stop();
                 oldNamingResources.destroy();
             } catch (LifecycleException e) {
-                log.warn(sm.getString("standardContext.namingResource.destroy.fail"), e);
+                log.error(sm.getString("standardContext.namingResource.destroy.fail"), e);
             }
         }
         if (namingResources != null) {
@@ -2059,7 +2059,7 @@ public class StandardContext extends ContainerBase
                 namingResources.init();
                 namingResources.start();
             } catch (LifecycleException e) {
-                log.warn(sm.getString("standardContext.namingResource.init.fail"), e);
+                log.error(sm.getString("standardContext.namingResource.init.fail"), e);
             }
         }
     }

==================================================
HostConfig.java
index 4ed923da13..0a57a17fd3 100644
--- a/java/org/apache/catalina/core/StandardService.java
+++ b/java/org/apache/catalina/core/StandardService.java
@@ -134,25 +134,25 @@ public class StandardService extends LifecycleMBeanBase implements Service {
                 try {
                     this.engine.start();
                 } catch (LifecycleException e) {
-                    log.warn(sm.getString("standardService.engine.startFailed"), e);
+                    log.error(sm.getString("standardService.engine.startFailed"), e);
                 }
             }
             // Restart MapperListener to pick up new engine.
             try {
                 mapperListener.stop();
             } catch (LifecycleException e) {
-                log.warn(sm.getString("standardService.mapperListener.stopFailed"), e);
+                log.error(sm.getString("standardService.mapperListener.stopFailed"), e);
             }
             try {
                 mapperListener.start();
             } catch (LifecycleException e) {
-                log.warn(sm.getString("standardService.mapperListener.startFailed"), e);
+                log.error(sm.getString("standardService.mapperListener.startFailed"), e);
             }
             if (oldEngine != null) {
                 try {
                     oldEngine.stop();
                 } catch (LifecycleException e) {
-                    log.warn(sm.getString("standardService.engine.stopFailed"), e);
+                    log.error(sm.getString("standardService.engine.stopFailed"), e);
                 }
             }
         }

==================================================
LifecycleBase.java
index bed8200531..28a323105c 100644
--- a/java/org/apache/catalina/startup/HostConfig.java
+++ b/java/org/apache/catalina/startup/HostConfig.java
@@ -1411,8 +1411,7 @@ public class HostConfig implements LifecycleListener {
             try {
                 context.start();
             } catch (Exception e) {
-                log.warn(sm.getString
-                         ("hostConfig.context.restart", app.name), e);
+                log.error(sm.getString("hostConfig.context.restart", app.name), e);
             }
         }
     }

==================================================
