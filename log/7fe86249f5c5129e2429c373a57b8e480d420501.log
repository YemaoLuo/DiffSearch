7fe86249f5c5129e2429c373a57b8e480d420501
==================================================
Servlet 4 EG discussion concluded that leading '/' should not be present in match values.
==================================================
Mark Thomas
==================================================
Tue Feb 28 11:16:51 2017 +0000
==================================================
ApplicationMapping.java
Servlet 4 EG discussion concluded that leading '/' should not be present in match values.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1784723 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TestApplicationMapping.java
index 85eab3fb14..1a560df1c9 100644
--- a/java/org/apache/catalina/core/ApplicationMapping.java
+++ b/java/org/apache/catalina/core/ApplicationMapping.java
@@ -44,20 +44,20 @@ public class ApplicationMapping {
                     mapping = new MappingImpl("", "", mappingData.matchType, servletName);
                     break;
                 case DEFAULT:
-                    mapping = new MappingImpl("/", "/", mappingData.matchType, servletName);
+                    mapping = new MappingImpl("", "/", mappingData.matchType, servletName);
                     break;
                 case EXACT:
-                    mapping = new MappingImpl(mappingData.wrapperPath.toString(),
+                    mapping = new MappingImpl(mappingData.wrapperPath.toString().substring(1),
                             mappingData.wrapperPath.toString(), mappingData.matchType, servletName);
                     break;
                 case EXTENSION:
                     String path = mappingData.wrapperPath.toString();
                     int extIndex = path.lastIndexOf('.');
-                    mapping = new MappingImpl(path.substring(0, extIndex),
+                    mapping = new MappingImpl(path.substring(1, extIndex),
                             "*" + path.substring(extIndex), mappingData.matchType, servletName);
                     break;
                 case PATH:
-                    mapping = new MappingImpl(mappingData.pathInfo.toString(),
+                    mapping = new MappingImpl(mappingData.pathInfo.toString().substring(1),
                             mappingData.wrapperPath.toString() + "/*",
                             mappingData.matchType, servletName);
                     break;

==================================================
