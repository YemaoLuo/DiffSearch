732a0c019cd194e574dd8b97fd751ffa6ecad14d
==================================================

==================================================
Mark Thomas
==================================================
Wed May 27 13:43:27 2015 +0000
==================================================
Http11Nio2Protocol.java


git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1682026 13f79535-47bb-0310-9956-ffa450edef68



==================================================
Nio2Endpoint.java
index 49f90bead8..da8bb889d3 100644
--- a/java/org/apache/coyote/http11/Http11Nio2Protocol.java
+++ b/java/org/apache/coyote/http11/Http11Nio2Protocol.java
@@ -105,9 +105,6 @@ public class Http11Nio2Protocol extends AbstractHttp11JsseProtocol<Nio2Channel>
                 Processor processor, boolean addToPoller) {
             processor.recycle();
             recycledProcessors.push(processor);
-            if (socket.isAsync()) {
-                ((Nio2Endpoint) getProtocol().getEndpoint()).removeTimeout(socket);
-            }
             // No need to add to poller. read() will have already been called
             // with an appropriate completion handler.
         }
@@ -117,7 +114,6 @@ public class Http11Nio2Protocol extends AbstractHttp11JsseProtocol<Nio2Channel>
         protected void longPoll(SocketWrapperBase<Nio2Channel> socket, Processor processor) {
             if (processor.isAsync()) {
                 socket.setAsync(true);
-                ((Nio2Endpoint) getProtocol().getEndpoint()).addTimeout(socket);
             } else {
                 // Either:
                 //  - this is an upgraded connection

==================================================
