52cb4267f9f60f963e91dda083e0650085d7413e
==================================================
Add an exists(String) method to Tomcat's JAR interface
==================================================
Mark Thomas
==================================================
Tue Nov 20 14:59:07 2018 +0000
==================================================
Jar.java
Add an exists(String) method to Tomcat's JAR interface

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1847015 13f79535-47bb-0310-9956-ffa450edef68



==================================================
AbstractInputStreamJar.java
index 854c745035..0e2e61b3b6 100644
--- a/java/org/apache/tomcat/Jar.java
+++ b/java/org/apache/tomcat/Jar.java
@@ -64,6 +64,18 @@ public interface Jar extends AutoCloseable {
      */
     long getLastModified(String name) throws IOException;
 
+    /**
+     * Determine if the given resource in present in the JAR.
+     *
+     * @param name  Entry to look for
+     *
+     * @return {@code true} if the entry is present in the JAR, otherwise
+     *         {@code false}
+     *
+     * @throws IOException if an I/O error occurs while processing the JAR file
+     */
+    boolean exists(String name) throws IOException;
+
     /**
      * Close any resources associated with this JAR.
      */

==================================================
JarFileUrlJar.java
index 4d1d6ac31e..dde02dbb30 100644
--- a/java/org/apache/tomcat/util/scan/AbstractInputStreamJar.java
+++ b/java/org/apache/tomcat/util/scan/AbstractInputStreamJar.java
@@ -129,6 +129,13 @@ public abstract class AbstractInputStreamJar implements Jar {
     }
 
 
+    @Override
+    public boolean exists(String name) throws IOException {
+        gotoEntry(name);
+        return entry != null;
+    }
+
+
     @Override
     public String getURL(String entry) {
         StringBuilder result = new StringBuilder("jar:");

==================================================
