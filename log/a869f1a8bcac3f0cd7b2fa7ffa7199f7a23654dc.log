a869f1a8bcac3f0cd7b2fa7ffa7199f7a23654dc
==================================================
Add in configuration options to control the application buffers associated with a NioChannel
==================================================
Filip Hanik
==================================================
Thu Feb 22 20:11:50 2007 +0000
==================================================
NioEndpoint.java
Add in configuration options to control the application buffers associated with a NioChannel


git-svn-id: https://svn.apache.org/repos/asf/tomcat/tc6.0.x/trunk@510639 13f79535-47bb-0310-9956-ffa450edef68



==================================================
SocketProperties.java
index 7fc88c8c73..943de1eee5 100644
--- a/java/org/apache/tomcat/util/net/NioEndpoint.java
+++ b/java/org/apache/tomcat/util/net/NioEndpoint.java
@@ -807,13 +807,13 @@ public class NioEndpoint {
                 if (sslContext != null) {
                     SSLEngine engine = createSSLEngine();
                     int appbufsize = engine.getSession().getApplicationBufferSize();
-                    NioBufferHandler bufhandler = new NioBufferHandler(Math.max(appbufsize,getReadBufSize()),
-                                                                       Math.max(appbufsize,getWriteBufSize()),
+                    NioBufferHandler bufhandler = new NioBufferHandler(Math.max(appbufsize,socketProperties.getAppReadBufSize()),
+                                                                       Math.max(appbufsize,socketProperties.getAppWriteBufSize()),
                                                                        socketProperties.getDirectBuffer());
                     channel = new SecureNioChannel(socket, engine, bufhandler, selectorPool);
                 } else {
-                    NioBufferHandler bufhandler = new NioBufferHandler(getReadBufSize(),
-                                                                       getWriteBufSize(),
+                    NioBufferHandler bufhandler = new NioBufferHandler(socketProperties.getAppReadBufSize(),
+                                                                       socketProperties.getAppWriteBufSize(),
                                                                        socketProperties.getDirectBuffer());
 
                     channel = new NioChannel(socket, bufhandler);

==================================================
