45a32ff6410258307a8a5259179d38fc7ecf304b
==================================================
New tests to ensure changes in coercion rules for nulls don't break any code that uses coerceToBoolean internally
==================================================
Mark Emlyn
==================================================
Tue Jul 16 22:39:37 2013 +0000
==================================================
TestAstAnd.java
New tests to ensure changes in coercion rules for nulls don't break any code that uses coerceToBoolean internally

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1503930 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TestAstChoice.java
new file mode 100644
index 0000000000..0969d5d37c
--- /dev/null
+++ b/test/org/apache/el/parser/TestAstAnd.java
@@ -0,0 +1,53 @@
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *     http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.el.parser;
+
+import javax.el.ELProcessor;
+
+import org.junit.Assert;
+import org.junit.Test;
+
+public class TestAstAnd {
+
+    @Test
+    public void test01() {
+        ELProcessor processor = new ELProcessor();
+        Object result = processor.eval("true && true");
+        Assert.assertEquals(Boolean.TRUE, result);
+    }
+
+    @Test
+    public void test02() {
+        ELProcessor processor = new ELProcessor();
+        Object result = processor.eval("true && null");
+        Assert.assertEquals(Boolean.FALSE, result);
+    }
+
+    @Test
+    public void test03() {
+        ELProcessor processor = new ELProcessor();
+        Object result = processor.eval("null && true");
+        Assert.assertEquals(Boolean.FALSE, result);
+    }
+
+    @Test
+    public void test04() {
+        ELProcessor processor = new ELProcessor();
+        Object result = processor.eval("null && null");
+        Assert.assertEquals(Boolean.FALSE, result);
+    }
+}

==================================================
TestAstNot.java
new file mode 100644
index 0000000000..d85d28e603
--- /dev/null
+++ b/test/org/apache/el/parser/TestAstChoice.java
@@ -0,0 +1,32 @@
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *     http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.el.parser;
+
+import javax.el.ELProcessor;
+
+import org.junit.Assert;
+import org.junit.Test;
+
+public class TestAstChoice {
+
+    @Test
+    public void test01() {
+        ELProcessor processor = new ELProcessor();
+        Object result = processor.eval("null?1:2");
+        Assert.assertEquals(Long.valueOf(2), result);
+    }
+}

==================================================
TestAstOr.java
new file mode 100644
index 0000000000..3dfe6559b2
--- /dev/null
+++ b/test/org/apache/el/parser/TestAstNot.java
@@ -0,0 +1,46 @@
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *     http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.el.parser;
+
+import javax.el.ELProcessor;
+
+import org.junit.Assert;
+import org.junit.Test;
+
+public class TestAstNot {
+
+    @Test
+    public void test01() {
+        ELProcessor processor = new ELProcessor();
+        Object result = processor.eval("!null");
+        Assert.assertEquals(Boolean.TRUE, result);
+    }
+
+    @Test
+    public void test02() {
+        ELProcessor processor = new ELProcessor();
+        Object result = processor.eval("!true");
+        Assert.assertEquals(Boolean.FALSE, result);
+    }
+
+    @Test
+    public void test03() {
+        ELProcessor processor = new ELProcessor();
+        Object result = processor.eval("!false");
+        Assert.assertEquals(Boolean.TRUE, result);
+    }
+}

==================================================
