87ec73a88ed47bd515106e3221a37cde8d2f0f91
==================================================
Somewhat ironically, the call to java.beans.Introspector.flushCaches() that is meant to prevent memory leaks now causes a leak on reload due to a change in 1.6.0_15 onwards.
==================================================
Mark Emlyn
==================================================
Wed Oct 21 20:36:23 2009 +0000
==================================================
JreMemoryLeakPreventionListener.java
index 1f96f3f573..156e542f76 100644
--- a/conf/server.xml
+++ b/conf/server.xml
@@ -25,6 +25,8 @@
   <Listener className="org.apache.catalina.core.AprLifecycleListener" SSLEngine="on" />
   <!--Initialize Jasper prior to webapps are loaded. Documentation at /docs/jasper-howto.html -->
   <Listener className="org.apache.catalina.core.JasperListener" />
+  <!-- Prevent memory leaks due to use of particular java/javax APIs-->
+  <Listener className="org.apache.catalina.core.JreMemoryLeakPreventionListener" />
   <!-- JMX Support for the Tomcat server. Documentation at /docs/non-existent.html -->
   <Listener className="org.apache.catalina.mbeans.ServerLifecycleListener" />
   <Listener className="org.apache.catalina.mbeans.GlobalResourcesLifecycleListener" />

==================================================
