a04977e857faa0ed4128ef0d0eaade9a0b1683e0
==================================================
Add addToBB(byte[],int,int) to base class as an abstract method to
==================================================
Mark Thomas
==================================================
Thu Jan 1 17:14:10 2015 +0000
==================================================
AbstractOutputBuffer.java
Add addToBB(byte[],int,int) to base class as an abstract method to
facilitate future refactoring.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1648901 13f79535-47bb-0310-9956-ffa450edef68



==================================================
InternalAprOutputBuffer.java
index 36fd6e4964..f48df50fa5 100644
--- a/java/org/apache/coyote/http11/AbstractOutputBuffer.java
+++ b/java/org/apache/coyote/http11/AbstractOutputBuffer.java
@@ -586,6 +586,9 @@ public abstract class AbstractOutputBuffer<S> implements OutputBuffer {
     }
 
 
+    protected abstract void addToBB(byte[] buf, int offset, int length) throws IOException;
+
+
     //------------------------------------------------------ Non-blocking writes
 
     protected abstract void registerWriteInterest() throws IOException;

==================================================
InternalNio2OutputBuffer.java
index 1a35db696e..10f60e5140 100644
--- a/java/org/apache/coyote/http11/InternalAprOutputBuffer.java
+++ b/java/org/apache/coyote/http11/InternalAprOutputBuffer.java
@@ -138,7 +138,8 @@ public class InternalAprOutputBuffer extends AbstractOutputBuffer<Long> {
     }
 
 
-    private synchronized void addToBB(byte[] buf, int offset, int length)
+    @Override
+    protected synchronized void addToBB(byte[] buf, int offset, int length)
             throws IOException {
 
         if (length == 0) return;

==================================================
InternalNioOutputBuffer.java
index f0262a65e4..b06579a878 100644
--- a/java/org/apache/coyote/http11/InternalNio2OutputBuffer.java
+++ b/java/org/apache/coyote/http11/InternalNio2OutputBuffer.java
@@ -279,7 +279,8 @@ public class InternalNio2OutputBuffer extends AbstractOutputBuffer<Nio2Channel>
         return false;
     }
 
-    private void addToBB(byte[] buf, int offset, int length)
+    @Override
+    protected void addToBB(byte[] buf, int offset, int length)
             throws IOException {
 
         if (length == 0)

==================================================
TesterOutputBuffer.java
index caad97a6d7..a931550edb 100644
--- a/java/org/apache/coyote/http11/InternalNioOutputBuffer.java
+++ b/java/org/apache/coyote/http11/InternalNioOutputBuffer.java
@@ -172,7 +172,8 @@ public class InternalNioOutputBuffer extends AbstractOutputBuffer<NioChannel> {
     }
 
 
-    private synchronized void addToBB(byte[] buf, int offset, int length)
+    @Override
+    protected synchronized void addToBB(byte[] buf, int offset, int length)
             throws IOException {
 
         if (length == 0) return;

==================================================
