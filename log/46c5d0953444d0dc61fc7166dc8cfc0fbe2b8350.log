46c5d0953444d0dc61fc7166dc8cfc0fbe2b8350
==================================================
Fix some potential resource leaks when reading files and other resources. Reported by Coverity Scan.
==================================================
Violeta Georgieva
==================================================
Wed Sep 3 18:22:14 2014 +0000
==================================================
CharsetMapper.java
Fix some potential resource leaks when reading files and other resources. Reported by Coverity Scan.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1622312 13f79535-47bb-0310-9956-ffa450edef68



==================================================
FragmentJarScannerCallback.java
index 06b3d6de9f..fa8ea65865 100644
--- a/java/org/apache/catalina/util/CharsetMapper.java
+++ b/java/org/apache/catalina/util/CharsetMapper.java
@@ -69,11 +69,8 @@ public class CharsetMapper {
      *  resource could not be loaded for any reason.
      */
     public CharsetMapper(String name) {
-        try {
-            InputStream stream =
-              this.getClass().getResourceAsStream(name);
+        try (InputStream stream = this.getClass().getResourceAsStream(name)) {
             map.load(stream);
-            stream.close();
         } catch (Throwable t) {
             ExceptionUtils.handleThrowable(t);
             throw new IllegalArgumentException(t.toString());

==================================================
