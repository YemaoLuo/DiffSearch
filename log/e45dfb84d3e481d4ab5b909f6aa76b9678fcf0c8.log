e45dfb84d3e481d4ab5b909f6aa76b9678fcf0c8
==================================================
Avoid code duplication for attributes
==================================================
remm remm@apache.org
==================================================
Fri Feb 7 17:12:53 2020 +0100
==================================================
CloudMembershipProvider.java
Avoid code duplication for attributes

The lack of default also cause cosmetic NPEs for store config.


==================================================
CloudMembershipService.java
index 9940673e74..f33aed688e 100644
--- a/java/org/apache/catalina/tribes/membership/cloud/CloudMembershipProvider.java
+++ b/java/org/apache/catalina/tribes/membership/cloud/CloudMembershipProvider.java
@@ -100,13 +100,13 @@ public abstract class CloudMembershipProvider extends MembershipProviderBase imp
     public void init(Properties properties) throws IOException {
         startTime = Instant.now();
 
-        connectionTimeout = Integer.parseInt(properties.getProperty("connectionTimeout", "1000"));
-        readTimeout = Integer.parseInt(properties.getProperty("readTimeout", "1000"));
+        CloudMembershipService service = (CloudMembershipService) this.service;
+        connectionTimeout = service.getConnectTimeout();
+        readTimeout = service.getReadTimeout();
+        expirationTime = service.getExpirationTime();
 
         localIp = InetAddress.getLocalHost().getHostAddress();
         port = Integer.parseInt(properties.getProperty("tcpListenPort"));
-
-        expirationTime = Long.parseLong(properties.getProperty("expirationTime", "5000"));
     }
 
     @Override

==================================================
