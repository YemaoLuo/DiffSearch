9e6f3b7328b89259a222e85c838e6104c9eb2a22
==================================================
Add legacyAppBase property with default of "webapps-javaee"
==================================================
Mark Thomas
==================================================
Thu Feb 11 12:27:30 2021 +0000
==================================================
Host.java
index 455edf90e5..98d180e70c 100644
--- a/build.xml
+++ b/build.xml
@@ -808,6 +808,7 @@
     <mkdir dir="${tomcat.build}/logs"/>
     <mkdir dir="${tomcat.build}/temp"/>
     <mkdir dir="${tomcat.build}/webapps"/>
+    <mkdir dir="${tomcat.build}/webapps-javaee"/>
 
     <!-- Property that determines if manifests need updating -->
     <uptodate property="manifests.uptodate"

==================================================
StandardHost.java
index f1ede08a0e..bcc97e2c8f 100644
--- a/java/org/apache/catalina/core/LocalStrings.properties
+++ b/java/org/apache/catalina/core/LocalStrings.properties
@@ -248,6 +248,7 @@ standardHost.noContext=No Context configured to process this request
 standardHost.notContext=Child of a Host must be a Context
 standardHost.nullName=Host name is required
 standardHost.problematicAppBase=Using an empty string for appBase on host [{0}] will set it to CATALINA_BASE, which is a bad idea
+standardHost.problematicLegacyAppBase=Using an empty string for legacyAppBase on host [{0}] will set it to CATALINA_BASE, which is a bad idea
 
 standardHostValue.customStatusFailed=Custom error page [{0}] could not be dispatched correctly
 

==================================================
TesterHost.java
index c02cff3063..bcef1918f3 100644
--- a/java/org/apache/catalina/core/mbeans-descriptors.xml
+++ b/java/org/apache/catalina/core/mbeans-descriptors.xml
@@ -1129,6 +1129,10 @@
                type="java.lang.String"
                writeable="false" />
 
+    <attribute name="legacyAppBase"
+               description="The legacy (Java EE) application root for this Host"
+               type="java.lang.String"/>
+
     <attribute name="managedResource"
                description="The managed resource this MBean is associated with"
                type="java.lang.Object"/>

==================================================
