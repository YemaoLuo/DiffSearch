cc82ff28f28e565f69c78c91f6ff381bf52fe203
==================================================
Fix some TCK issues. The behaviour is undefined in the spec, so go with the TCK requirements
==================================================
Mark Emlyn
==================================================
Mon Mar 22 13:57:46 2010 +0000
==================================================
FilterDef.java
Fix some TCK issues. The behaviour is undefined in the spec, so go with the TCK requirements

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@926087 13f79535-47bb-0310-9956-ffa450edef68



==================================================
ServletDef.java
index 95c92af0e6..3b1d13254b 100644
--- a/java/org/apache/catalina/deploy/FilterDef.java
+++ b/java/org/apache/catalina/deploy/FilterDef.java
@@ -175,6 +175,11 @@ public class FilterDef implements Serializable {
      */
     public void addInitParameter(String name, String value) {
 
+        if (parameters.containsKey(name)) {
+            // The spec does not define this but the TCK expects the first
+            // definition to take precedence
+            return;
+        }
         parameters.put(name, value);
 
     }

==================================================
