51fd68bfabff2fc931a42d6dca212d77747c3155
==================================================
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47308
==================================================
Filip Hanik
==================================================
Thu Jun 18 17:08:38 2009 +0000
==================================================
McastService.java
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=47308
Patch provided by Keiichi Fujino with one change, default is false


git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@786165 13f79535-47bb-0310-9956-ffa450edef68



==================================================
McastServiceImpl.java
index bb774cae42..5417b3e287 100644
--- a/java/org/apache/catalina/tribes/membership/McastService.java
+++ b/java/org/apache/catalina/tribes/membership/McastService.java
@@ -245,6 +245,9 @@ public class McastService implements MembershipService,MembershipListener,Messag
         properties.setProperty("recoverySleepTime", String.valueOf(recoverySleepTime));
     }
 
+    public void setLocalLoopbackDisabled(boolean localLoopbackDisabled) {
+        properties.setProperty("localLoopbackDisabled",String.valueOf(localLoopbackDisabled));
+    }
 
     /**
      * @deprecated use getPort()
@@ -383,7 +386,8 @@ public class McastService implements MembershipService,MembershipListener,Messag
                                     ttl,
                                     soTimeout,
                                     this,
-                                    this);
+                                    this,
+                                    Boolean.valueOf(properties.getProperty("localLoopbackDisabled","false")).booleanValue());
         String value = properties.getProperty("recoveryEnabled","true");
         boolean recEnabled = Boolean.valueOf(value).booleanValue() ;
         impl.setRecoveryEnabled(recEnabled);

==================================================
