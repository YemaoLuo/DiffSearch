c006d906713fbcd0abd1d1a89525aa1d16a083ae
==================================================
Decode bytes to text sooner so UTF-8 encoding issues are caught early.
==================================================
Mark Emlyn
==================================================
Wed Dec 26 00:39:54 2012 +0000
==================================================
WsFrame.java
index 77aff878a4..f14016146f 100644
--- a/java/org/apache/tomcat/websocket/LocalStrings.properties
+++ b/java/org/apache/tomcat/websocket/LocalStrings.properties
@@ -27,4 +27,5 @@ wsFrame.invalidOpCode= A WebSocket frame was sent with an unrecognised opCode of
 wsFrame.invalidUtf8=A WebSocket text frame was received that could not be decoded to UTF-8 because it contained invalid byte sequences
 wsFrame.noContinuation=A new message was started when a continuation frame was expected
 wsFrame.notMasked=The client frame was not masked but all client frames must be masked
+wsFrame.textMessageTooBig=The decoded text message was too big to fit in the output text message buffer and the endpoint does not support delivery of partial messages
 wsFrame.wrongRsv=The client frame set the reserved bits to [{0}] which was not supported by this endpoint
\ No newline at end of file

==================================================
