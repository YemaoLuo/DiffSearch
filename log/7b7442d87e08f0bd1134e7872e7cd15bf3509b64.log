7b7442d87e08f0bd1134e7872e7cd15bf3509b64
==================================================
Remove bad looking fields access
==================================================
remm remm@apache.org
==================================================
Wed May 15 19:51:48 2019 +0200
==================================================
Nio2Endpoint.java
Remove bad looking fields access

getSelectorPool public -> protected, since it's only used in the socket
wrapper. Move NIO socket wrapper init to setSocketOptions since the
poller is now known.


==================================================
NioEndpoint.java
index ee6a9a15ba..613f0578de 100644
--- a/java/org/apache/tomcat/util/net/Nio2Endpoint.java
+++ b/java/org/apache/tomcat/util/net/Nio2Endpoint.java
@@ -349,6 +349,11 @@ public class Nio2Endpoint extends AbstractJsseEndpoint<Nio2Channel,AsynchronousS
     }
 
 
+    protected SynchronizedStack<Nio2Channel> getNioChannels() {
+        return nioChannels;
+    }
+
+
     @Override
     protected NetworkChannel getServerSocket() {
         return serverSock;
@@ -555,7 +560,7 @@ public class Nio2Endpoint extends AbstractJsseEndpoint<Nio2Channel,AsynchronousS
 
         public Nio2SocketWrapper(Nio2Channel channel, final Nio2Endpoint endpoint) {
             super(channel, endpoint);
-            nioChannels = endpoint.nioChannels;
+            nioChannels = endpoint.getNioChannels();
             socketBufferHandler = channel.getBufHandler();
 
             this.readCompletionHandler = new CompletionHandler<Integer, ByteBuffer>() {

==================================================
