caba79fb5263dd3e66933bd68f8f16c1e2e03c6d
==================================================
Add flags that indicate optional feature support
==================================================
Mark Emlyn
==================================================
Sun Jun 19 21:23:14 2011 +0000
==================================================
AbstractEndpoint.java
Add flags that indicate optional feature support

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1137449 13f79535-47bb-0310-9956-ffa450edef68



==================================================
AprEndpoint.java
index 84fa371cd4..606923d0a9 100644
--- a/java/org/apache/tomcat/util/net/AbstractEndpoint.java
+++ b/java/org/apache/tomcat/util/net/AbstractEndpoint.java
@@ -556,7 +556,10 @@ public abstract class AbstractEndpoint {
     }
 
     protected abstract Log getLog();
+    // Flags to indicate optional feature support
     public abstract boolean getUseSendfile();
+    public abstract boolean getUseComet();
+    public abstract boolean getUseCometTimeout();
     
     protected LimitLatch initializeConnectionLatch() {
         if (connectionLimitLatch==null) {

==================================================
JIoEndpoint.java
index f629171f8e..0128d218db 100644
--- a/java/org/apache/tomcat/util/net/AprEndpoint.java
+++ b/java/org/apache/tomcat/util/net/AprEndpoint.java
@@ -156,7 +156,10 @@ public class AprEndpoint extends AbstractEndpoint {
      */
     protected boolean useComet = true;
     public void setUseComet(boolean useComet) { this.useComet = useComet; }
+    @Override
     public boolean getUseComet() { return useComet; }
+    @Override
+    public boolean getUseCometTimeout() { return false; } // Not supported
 
 
     /**

==================================================
NioEndpoint.java
index baf97e82b0..3ef6a0c1de 100644
--- a/java/org/apache/tomcat/util/net/JIoEndpoint.java
+++ b/java/org/apache/tomcat/util/net/JIoEndpoint.java
@@ -97,26 +97,17 @@ public class JIoEndpoint extends AbstractEndpoint {
     public ServerSocketFactory getServerSocketFactory() { return serverSocketFactory; }
 
 
-    /**
-     * Is sendfile available
+    /*
+     * Optional feature support.
      */
     @Override
-    public boolean getUseSendfile() {
-        // Not supported
-        return false;
-    }
-
-
-    /**
-     * Is deferAccept supported?
-     */
+    public boolean getUseSendfile() { return false; } // Not supported
     @Override
-    public boolean getDeferAccept() {
-        // Not supported
-        return false;
-    }
-    
-    
+    public boolean getUseComet() { return false; } // Not supported
+    @Override
+    public boolean getUseCometTimeout() { return false; } // Not supported
+    @Override
+    public boolean getDeferAccept() { return false; } // Not supported
 
 
     // ------------------------------------------------ Handler Inner Interface

==================================================
