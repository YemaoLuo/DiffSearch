6d8c53ce619345ea2ea540149d3995ef67257b31
==================================================
Read the algorithm, and look at the callers, AJP could be affected as well. Elsewhere there are checks for -1. It is a bit risky to check only on -1 though, but it should work.
==================================================
Remy Maucherat
==================================================
Thu Jun 11 17:04:37 2015 +0000
==================================================
AjpProcessor.java
Read the algorithm, and look at the callers, AJP could be affected as well. Elsewhere there are checks for -1. It is a bit risky to check only on -1 though, but it should work.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1684947 13f79535-47bb-0310-9956-ffa450edef68



==================================================
Http11InputBuffer.java
index e8661aeaa1..d4733d2cca 100644
--- a/java/org/apache/coyote/ajp/AjpProcessor.java
+++ b/java/org/apache/coyote/ajp/AjpProcessor.java
@@ -1532,6 +1532,8 @@ public class AjpProcessor extends AbstractProcessor {
                 left = left - read;
                 start = start + read;
             }
+        } else if (read == -1) {
+            throw new EOFException();
         }
 
         return read > 0;

==================================================
