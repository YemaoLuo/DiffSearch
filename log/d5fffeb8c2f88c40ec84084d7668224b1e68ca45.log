d5fffeb8c2f88c40ec84084d7668224b1e68ca45
==================================================
Use StringManager to provide i18n support in the org.apache.catalina.tribes.group package.
==================================================
Keiichi Fujino
==================================================
Thu May 21 09:48:19 2015 +0000
==================================================
ChannelCoordinator.java
Use StringManager to provide i18n support in the org.apache.catalina.tribes.group package.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1680786 13f79535-47bb-0310-9956-ffa450edef68



==================================================
GroupChannel.java
index 916a6684e2..8b112d1fc1 100644
--- a/java/org/apache/catalina/tribes/group/ChannelCoordinator.java
+++ b/java/org/apache/catalina/tribes/group/ChannelCoordinator.java
@@ -31,6 +31,7 @@ import org.apache.catalina.tribes.transport.SenderState;
 import org.apache.catalina.tribes.transport.nio.NioReceiver;
 import org.apache.catalina.tribes.util.Arrays;
 import org.apache.catalina.tribes.util.Logs;
+import org.apache.catalina.tribes.util.StringManager;
 
 
 /**
@@ -39,6 +40,7 @@ import org.apache.catalina.tribes.util.Logs;
  * This is the last interceptor in the chain.
  */
 public class ChannelCoordinator extends ChannelInterceptorBase implements MessageListener {
+    protected static final StringManager sm = StringManager.getManager(ChannelCoordinator.class);
     private ChannelReceiver clusterReceiver;
     private ChannelSender clusterSender;
     private MembershipService membershipService;
@@ -140,7 +142,7 @@ public class ChannelCoordinator extends ChannelInterceptorBase implements Messag
             if (svc == 0 ) return;//nothing to start
 
             if (svc == (svc & startLevel)) {
-                throw new ChannelException("Channel already started for level:"+svc);
+                throw new ChannelException(sm.getString("channelCoordinator.alreadyStarted", svc));
             }
 
             //must start the receiver first so that we can coordinate the port it
@@ -174,8 +176,7 @@ public class ChannelCoordinator extends ChannelInterceptorBase implements Messag
             }
 
             if (!valid) {
-                throw new IllegalArgumentException("Invalid start level, valid levels are:" +
-                        "SND_RX_SEQ,SND_TX_SEQ,MBR_TX_SEQ,MBR_RX_SEQ");
+                throw new IllegalArgumentException(sm.getString("channelCoordinator.invalid.startLevel"));
             }
             startLevel = (startLevel | svc);
         }catch ( ChannelException cx ) {
@@ -226,8 +227,7 @@ public class ChannelCoordinator extends ChannelInterceptorBase implements Messag
                 membershipService.stop(MembershipService.MBR_TX);
             }
             if ( !valid) {
-                throw new IllegalArgumentException("Invalid start level, valid levels are:" +
-                        "SND_RX_SEQ,SND_TX_SEQ,MBR_TX_SEQ,MBR_RX_SEQ");
+                throw new IllegalArgumentException(sm.getString("channelCoordinator.invalid.startLevel"));
             }
 
             startLevel = (startLevel & (~svc));

==================================================
RpcChannel.java
new file mode 100644
index 0000000000..565578697c
--- /dev/null
+++ b/java/org/apache/catalina/tribes/group/LocalStrings.properties
@@ -0,0 +1,26 @@
+# Licensed to the Apache Software Foundation (ASF) under one or more
+# contributor license agreements.  See the NOTICE file distributed with
+# this work for additional information regarding copyright ownership.
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+channelCoordinator.alreadyStarted=Channel already started for level:{0}
+channelCoordinator.invalid.startLevel=Invalid start level, valid levels are:SND_RX_SEQ,SND_TX_SEQ,MBR_TX_SEQ,MBR_RX_SEQ
+groupChannel.nullMessage=Can't send a NULL message
+groupChannel.noDestination=No destination given
+groupChannel.unable.deserialize=Unable to deserialize message:{0}
+groupChannel.receiving.error=Error receiving message:
+groupChannel.sendFail.noRpcChannelReply=Unable to find rpc channel, failed to send NoRpcChannelReply.
+groupChannel.optionFlag.conflict=Interceptor option flag conflict: {0}
+groupChannel.listener.alreadyExist=Listener already exists:{0}[{1}]
+groupChannel.unable.sendHeartbeat=Unable to send heartbeat through Tribes interceptor stack. Will try to sleep again.
+rpcChannel.replyFailed=Unable to send back reply in RpcChannel.

==================================================
