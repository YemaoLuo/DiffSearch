9dfdd636599d0abc78dd6c5413e25f027213a960
==================================================
Fix some FindBugs warnings
==================================================
Mark Emlyn
==================================================
Mon Sep 26 14:59:59 2011 +0000
==================================================
Embedded.java
Fix some FindBugs warnings

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1175896 13f79535-47bb-0310-9956-ffa450edef68



==================================================
StuckThreadDetectionValve.java
index 9fb781ffab..f221a183ab 100644
--- a/java/org/apache/catalina/startup/Embedded.java
+++ b/java/org/apache/catalina/startup/Embedded.java
@@ -160,7 +160,7 @@ public class Embedded  extends StandardService {
     /**
      * Custom mappings of login methods to authenticators
      */
-    protected HashMap<String,Authenticator> authenticators;
+    protected volatile HashMap<String,Authenticator> authenticators;
 
 
     /**

==================================================
TestLimitLatch.java
index 911da4287b..b0c64ea35e 100644
--- a/java/org/apache/catalina/valves/StuckThreadDetectionValve.java
+++ b/java/org/apache/catalina/valves/StuckThreadDetectionValve.java
@@ -177,7 +177,7 @@ public class StuckThreadDetectionValve extends ValveBase {
         // Keeping a reference to the thread object here does not prevent
         // GC'ing, as the reference is removed from the Map in the finally clause
 
-        Long key = new Long(Thread.currentThread().getId());
+        Long key = Long.valueOf(Thread.currentThread().getId());
         StringBuffer requestUrl = request.getRequestURL();
         if(request.getQueryString()!=null) {
             requestUrl.append("?");
@@ -240,7 +240,7 @@ public class StuckThreadDetectionValve extends ValveBase {
         return result;
     }
 
-    private class MonitoredThread {
+    private static class MonitoredThread {
 
         /**
          * Reference to the thread to get a stack trace from background task
@@ -288,7 +288,7 @@ public class StuckThreadDetectionValve extends ValveBase {
         }
     }
 
-    private class CompletedStuckThread {
+    private static class CompletedStuckThread {
 
         private String threadName;
         private long totalActiveTime;

==================================================
