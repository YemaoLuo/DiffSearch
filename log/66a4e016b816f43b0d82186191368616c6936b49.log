66a4e016b816f43b0d82186191368616c6936b49
==================================================
Check tag file attribute names are valid Java identifiers
==================================================
Mark Emlyn
==================================================
Sun Apr 10 10:35:55 2011 +0000
==================================================
JspUtil.java
Check tag file attribute names are valid Java identifiers

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1090766 13f79535-47bb-0310-9956-ffa450edef68



==================================================
Parser.java
index 7d693cc750..d7b171f18c 100644
--- a/java/org/apache/jasper/compiler/JspUtil.java
+++ b/java/org/apache/jasper/compiler/JspUtil.java
@@ -858,6 +858,31 @@ public class JspUtil {
         return false;
     }
 
+    public static boolean isJavaIdentifier(String key) {
+        // Should not be the case but check to be sure
+        if (key == null || key.length() == 0) {
+            return false;
+        }
+        
+        if (isJavaKeyword(key)) {
+            return false;
+        }
+
+        // Check the start character that has more restrictions
+        if (!Character.isJavaIdentifierStart(key.charAt(0))) {
+            return false;
+        }
+
+        // Check each remaining character used is permitted
+        for (int idx = 1; idx < key.length(); idx++) {
+            if (!Character.isJavaIdentifierPart(key.charAt(idx))) {
+                return false;
+            }
+        }
+        
+        return true;
+    }
+
     static InputStreamReader getReader(String fname, String encoding,
             JarFile jarFile, JspCompilationContext ctxt, ErrorDispatcher err)
             throws JasperException, IOException {

==================================================
