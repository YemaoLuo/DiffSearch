e726e01f94d256957d22131d5b25aee03fb76974
==================================================
More unit tests for BeanNameELResolver and fix a missing exception when trying to write to a read-only bean
==================================================
Mark Emlyn
==================================================
Thu Jul 4 19:43:22 2013 +0000
==================================================
BeanNameELResolver.java
More unit tests for BeanNameELResolver and fix a missing exception when trying to write to a read-only bean

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1499848 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TestBeanNameELResolver.java
index 56ca43461e..344e8a5217 100644
--- a/java/javax/el/LocalStrings.properties
+++ b/java/javax/el/LocalStrings.properties
@@ -23,6 +23,7 @@ propertyReadError=Error reading ''{1}'' on type {0}
 propertyWriteError=Error writing ''{1}'' on type {0}
 objectNotAssignable=Unable to add an object of type [{0}] to an array of objects of type [{1}]
 
+beanNameELResolver.beanReadOnly=The bean name [{0}] is read-only
 elProcessor.defineFunctionInvalidClass=The class [{0}] is not public
 elProcessor.defineFunctionInvalidMethod=The method [{0}] on class [{1}] is not a public static method
 elProcessor.defineFunctionInvalidParameterList=The parameter list [{0}] for method [{1}] on class [{2}] is not valid

==================================================
TesterBeanNameResolver.java
index 9a8f03381a..bfcb9c09eb 100644
--- a/test/javax/el/TestBeanNameELResolver.java
+++ b/test/javax/el/TestBeanNameELResolver.java
@@ -212,7 +212,7 @@ public class TestBeanNameELResolver {
 
 
     /**
-     * Test ceate with create disabled.
+     * Test create with create disabled.
      */
     @Test
     public void testSetValue05() {
@@ -220,6 +220,26 @@ public class TestBeanNameELResolver {
     }
 
 
+    /**
+     * Test replacing a read-only bean with create enabled.
+     */
+    @Test(expected=PropertyNotWritableException.class)
+    public void testSetValue06() {
+        doSetValueCreateReplaceTest(true,
+                TesterBeanNameResolver.READ_ONLY_NAME);
+    }
+
+
+    /**
+     * Test replacing a read-only bean with create disable.
+     */
+    @Test(expected=PropertyNotWritableException.class)
+    public void testSetValue07() {
+        doSetValueCreateReplaceTest(false,
+                TesterBeanNameResolver.READ_ONLY_NAME);
+    }
+
+
     /**
      * Tests adding/replacing beans beans
      */

==================================================
