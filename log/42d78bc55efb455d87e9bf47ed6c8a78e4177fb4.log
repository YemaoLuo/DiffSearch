42d78bc55efb455d87e9bf47ed6c8a78e4177fb4
==================================================
Add a test case that demonstrates Bug 56147 is not reproducible.
==================================================
Mark Emlyn
==================================================
Thu Feb 20 12:55:05 2014 +0000
==================================================
TestELInJsp.java
Add a test case that demonstrates Bug 56147 is not reproducible.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1570176 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TesterBeanD.java
index 550e5daadf..fd9fb65d1e 100644
--- a/test/org/apache/el/TestELInJsp.java
+++ b/test/org/apache/el/TestELInJsp.java
@@ -476,6 +476,32 @@ public class TestELInJsp extends TomcatBaseTest {
     }
 
 
+    @Test
+    public void testBug56147() throws Exception {
+        Tomcat tomcat = getTomcatInstance();
+
+        File appDir = new File("test/webapp");
+        // app dir is relative to server home
+        Context ctx = tomcat.addWebapp(null, "/test", appDir.getAbsolutePath());
+
+        ctx.setResources(new StandardRoot(ctx));
+
+        // Add the JSTL (we need the TLD)
+        File lib = new File("webapps/examples/WEB-INF/lib");
+        ctx.getResources().createWebResourceSet(
+                WebResourceRoot.ResourceSetType.POST, "/WEB-INF/lib",
+                lib.getAbsolutePath(), null, "/");
+
+        tomcat.start();
+
+        ByteChunk res = getUrl("http://localhost:" + getPort() +
+                "/test/bug5nnnn/bug56147.jsp");
+
+        String result = res.toString();
+        assertEcho(result, "00-OK");
+    }
+
+
     // Assertion for text contained with <p></p>, e.g. printed by tags:echo
     private static void assertEcho(String result, String expected) {
         assertTrue(result.indexOf("<p>" + expected + "</p>") > 0);

==================================================
