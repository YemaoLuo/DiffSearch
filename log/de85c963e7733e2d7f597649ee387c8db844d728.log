de85c963e7733e2d7f597649ee387c8db844d728
==================================================
Remove / deprecate unnecessary code
==================================================
Mark Thomas
==================================================
Wed Jun 29 20:36:22 2016 +0000
==================================================
DOMWriter.java
Remove / deprecate unnecessary code

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1750714 13f79535-47bb-0310-9956-ffa450edef68



==================================================
MIME2Java.java
index a37700fde1..787fed01b0 100644
--- a/java/org/apache/catalina/util/DOMWriter.java
+++ b/java/org/apache/catalina/util/DOMWriter.java
@@ -34,10 +34,18 @@ public class DOMWriter {
     /** Default Encoding */
     private static final String PRINTWRITER_ENCODING = "UTF8";
 
-    /** Print writer. */
+    /** Print writer.
+     *
+     * @deprecated Will be made private in Tomcat 9.
+     */
+    @Deprecated
     protected final PrintWriter out;
 
-    /** Canonical output. */
+    /** Canonical output.
+     *
+     * @deprecated Will be made private in Tomcat 9.
+     */
+    @Deprecated
     protected final boolean canonical;
 
 
@@ -47,6 +55,12 @@ public class DOMWriter {
     }
 
 
+    /**
+     * @deprecated Unused. Will be removed in Tomcat 9.
+     *
+     * @return Always <code>UTF-8</code>
+     */
+    @Deprecated
     public static String getWriterEncoding() {
         return (PRINTWRITER_ENCODING);
     }
@@ -68,16 +82,7 @@ public class DOMWriter {
             // print document
             case Node.DOCUMENT_NODE:
                 if (!canonical) {
-                    String Encoding = getWriterEncoding();
-                    if (Encoding.equalsIgnoreCase("DEFAULT"))
-                        Encoding = "UTF-8";
-                    else if (Encoding.equalsIgnoreCase("Unicode"))
-                        Encoding = "UTF-16";
-                    else
-                        Encoding = MIME2Java.reverse(Encoding);
-
-                    out.println("<?xml version=\"1.0\" encoding=\"" + Encoding +
-                            "\"?>");
+                    out.println("<?xml version=\"1.0\" encoding=\"UTF-8\"?>");
                 }
                 print(((Document) node).getDocumentElement());
                 out.flush();
@@ -168,7 +173,10 @@ public class DOMWriter {
      * Returns a sorted list of attributes.
      * @param attrs The map to sort
      * @return a sorted attribute array
+     *
+     * @deprecated Will be made private in Tomcat 9.
      */
+    @Deprecated
     protected Attr[] sortAttributes(NamedNodeMap attrs) {
         if (attrs == null) {
             return new Attr[0];
@@ -206,7 +214,10 @@ public class DOMWriter {
      * Normalizes the given string.
      * @param s The string to escape
      * @return the escaped string
+     *
+     * @deprecated Will be made private in Tomcat 9.
      */
+    @Deprecated
     protected String normalize(String s) {
         if (s == null) {
             return "";

==================================================
