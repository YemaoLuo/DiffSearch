1b2383d5131644cdf3d6ae66305d48f521eb4ead
==================================================
notify user of the actual error and add a todo behavior for buffer copying
==================================================
Filip Hanik
==================================================
Wed Apr 23 11:12:23 2008 +0000
==================================================
McastServiceImpl.java
notify user of the actual error and add a todo behavior for buffer copying




git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@650826 13f79535-47bb-0310-9956-ffa450edef68



==================================================
NioSender.java
index 1c4341a520..052d9631ef 100644
--- a/java/org/apache/catalina/tribes/membership/McastServiceImpl.java
+++ b/java/org/apache/catalina/tribes/membership/McastServiceImpl.java
@@ -230,7 +230,12 @@ public class McastServiceImpl
         boolean valid = false;
         if ( (level & Channel.MBR_RX_SEQ)==Channel.MBR_RX_SEQ ) {
             if ( receiver != null ) throw new IllegalStateException("McastService.receive already running.");
-            if ( sender == null ) socket.joinGroup(address);
+            try {
+                if ( sender == null ) socket.joinGroup(address);
+            }catch (IOException iox) {
+                log.error("Unable to join multicast group, make sure your system has multicasting enabled.");
+                throw iox;
+            }
             doRunReceiver = true;
             receiver = new ReceiverThread();
             receiver.setDaemon(true);

==================================================
