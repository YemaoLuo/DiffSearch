7d93527254d9e9371b342800617f20d13c8b85ad
==================================================
Ensure that when the Default or WebDAV servlets process an error dispatch that the error resource is processed via the doGet() method irrespective of the method used for the original request that triggered the error.
==================================================
Mark Thomas
==================================================
Tue May 2 13:14:00 2017 +0000
==================================================
DefaultServlet.java
Ensure that when the Default or WebDAV servlets process an error dispatch that the error resource is processed via the doGet() method irrespective of the method used for the original request that triggered the error.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1793487 13f79535-47bb-0310-9956-ffa450edef68



==================================================
WebdavServlet.java
index 7b2c2f083a..02dc50cce4 100644
--- a/java/org/apache/catalina/servlets/DefaultServlet.java
+++ b/java/org/apache/catalina/servlets/DefaultServlet.java
@@ -400,6 +400,18 @@ public class DefaultServlet extends HttpServlet {
     }
 
 
+    @Override
+    protected void service(HttpServletRequest req, HttpServletResponse resp)
+            throws ServletException, IOException {
+
+        if (req.getDispatcherType() == DispatcherType.ERROR) {
+            doGet(req, resp);
+        } else {
+            super.service(req, resp);
+        }
+    }
+
+
     /**
      * Process a GET request for the specified resource.
      *

==================================================
