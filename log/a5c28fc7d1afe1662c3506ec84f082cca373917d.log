a5c28fc7d1afe1662c3506ec84f082cca373917d
==================================================
Add flush to send ack in the NIO2 connector, and enable the test which now passes.
==================================================
Remy Maucherat
==================================================
Wed Jan 7 16:42:26 2015 +0000
==================================================
InternalNio2OutputBuffer.java
Add flush to send ack in the NIO2 connector, and enable the test which now passes.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1650114 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TestInternalOutputBuffer.java
index 6859561025..b0b9c67d1f 100644
--- a/java/org/apache/coyote/http11/InternalNio2OutputBuffer.java
+++ b/java/org/apache/coyote/http11/InternalNio2OutputBuffer.java
@@ -243,6 +243,7 @@ public class InternalNio2OutputBuffer extends AbstractOutputBuffer<Nio2Channel>
     public void sendAck() throws IOException {
         if (!committed) {
             addToBB(Constants.ACK_BYTES, 0, Constants.ACK_BYTES.length);
+            flushBuffer(true);
         }
     }
 

==================================================
