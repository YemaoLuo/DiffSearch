a80759ede44e2b2028963950dd473a9cb53dee05
==================================================
Update tests to check correct handling elements added between 3.0 and 3.1
==================================================
Mark Emlyn
==================================================
Wed Feb 19 17:26:36 2014 +0000
==================================================
WebXml.java
Update tests to check correct handling elements added between 3.0 and 3.1
Add missing deny-uncovered-http-methods element from merged web.xml

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1569834 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TestWebXml.java
index e3662946ff..2c71e75bf2 100644
--- a/java/org/apache/tomcat/util/descriptor/web/WebXml.java
+++ b/java/org/apache/tomcat/util/descriptor/web/WebXml.java
@@ -1284,6 +1284,15 @@ public class WebXml {
             }
         }
 
+        // deny-uncovered-http-methods was introduced in Servlet 3.1
+        if (getMajorVersion() > 3 ||
+                (getMajorVersion() == 3 && getMinorVersion() > 0)) {
+            if (denyUncoveredHttpMethods) {
+                sb.append("\n");
+                sb.append("  <deny-uncovered-http-methods/>");
+            }
+        }
+
         sb.append("</web-app>");
         return sb.toString();
     }

==================================================
