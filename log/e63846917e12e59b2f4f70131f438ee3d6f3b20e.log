e63846917e12e59b2f4f70131f438ee3d6f3b20e
==================================================
Fix the recycling of the o.a.t.u.buf.UEncoder.output field. 
==================================================
Violeta Georgieva
==================================================
Thu Mar 14 13:56:32 2013 +0000
==================================================
UEncoder.java
Fix the recycling of the o.a.t.u.buf.UEncoder.output field. 
Fix javadoc. 
Add a test case.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1456440 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TestUEncoder.java
index f491f00e10..60c349436a 100644
--- a/java/org/apache/tomcat/util/buf/UEncoder.java
+++ b/java/org/apache/tomcat/util/buf/UEncoder.java
@@ -51,9 +51,12 @@ public final class UEncoder {
     }
 
 
-    /** URL Encode string, using a specified encoding.
+   /**
+    * URL Encode string, using a specified encoding.
     *
     * @param s string to be encoded
+    * @param start the beginning index, inclusive
+    * @param end the ending index, exclusive
     * @throws IOException If an I/O error occurs
     */
    public CharChunk encodeURL(String s, int start, int end)
@@ -66,6 +69,7 @@ public final class UEncoder {
        } else {
            bb.recycle();
            cb.recycle();
+           output.recycle();
        }
 
        for (int i = start; i < end; i++) {

==================================================
