204c4fa6c05b644dee31b96f0fff2ed64829d0dc
==================================================
Avoid using named classes for closed channel
==================================================
remm remm@apache.org
==================================================
Wed Mar 11 14:44:13 2020 +0100
==================================================
Nio2Channel.java
Avoid using named classes for closed channel

Only the constant is needed.


==================================================
NioChannel.java
index 4980170306..9c57f02d12 100644
--- a/java/org/apache/tomcat/util/net/Nio2Channel.java
+++ b/java/org/apache/tomcat/util/net/Nio2Channel.java
@@ -248,11 +248,7 @@ public class Nio2Channel implements AsynchronousByteChannel {
         }
     };
 
-    static final Nio2Channel CLOSED_NIO2_CHANNEL = new ClosedNio2Channel();
-    public static class ClosedNio2Channel extends Nio2Channel {
-        public ClosedNio2Channel() {
-            super(SocketBufferHandler.EMPTY);
-        }
+    static final Nio2Channel CLOSED_NIO2_CHANNEL = new Nio2Channel(SocketBufferHandler.EMPTY) {
         @Override
         public void close() throws IOException {
         }
@@ -304,5 +300,5 @@ public class Nio2Channel implements AsynchronousByteChannel {
         public String toString() {
             return "Closed Nio2Channel";
         }
-    }
+    };
 }

==================================================
NioEndpoint.java
index 065d23ba4c..f35794c5e2 100644
--- a/java/org/apache/tomcat/util/net/NioChannel.java
+++ b/java/org/apache/tomcat/util/net/NioChannel.java
@@ -230,11 +230,7 @@ public class NioChannel implements ByteChannel, ScatteringByteChannel, Gathering
         return appReadBufHandler;
     }
 
-    static final NioChannel CLOSED_NIO_CHANNEL = new ClosedNioChannel();
-    public static class ClosedNioChannel extends NioChannel {
-        public ClosedNioChannel() {
-            super(SocketBufferHandler.EMPTY);
-        }
+    static final NioChannel CLOSED_NIO_CHANNEL = new NioChannel(SocketBufferHandler.EMPTY) {
         @Override
         public void close() throws IOException {
         }
@@ -274,6 +270,6 @@ public class NioChannel implements ByteChannel, ScatteringByteChannel, Gathering
         public String toString() {
             return "Closed NioChannel";
         }
-    }
+    };
 
 }

==================================================
