191ee8827ed8f23925b5d3d9cc6b9aef0dbb6d50
==================================================
Need local settings for the window size the client is expected to use to communicate with Tomcat, not the remote settings.
==================================================
Mark Thomas
==================================================
Tue Oct 20 22:03:23 2015 +0000
==================================================
Http2UpgradeHandler.java
Need local settings for the window size the client is expected to use to communicate with Tomcat, not the remote settings.
Add some comments to (hopefully) reduce future errors of this nature.
This fixes a CI failure.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1709690 13f79535-47bb-0310-9956-ffa450edef68



==================================================
Stream.java
index d6657d5490..76de1a8910 100644
--- a/java/org/apache/coyote/http2/Http2UpgradeHandler.java
+++ b/java/org/apache/coyote/http2/Http2UpgradeHandler.java
@@ -112,7 +112,15 @@ public class Http2UpgradeHandler extends AbstractStream implements InternalHttpU
             new AtomicReference<>(ConnectionState.NEW);
     private volatile long pausedNanoTime = Long.MAX_VALUE;
 
+    /**
+     * Remote settings are settings defined by the client and sent to Tomcat
+     * that Tomcat must use when communicating with the client.
+     */
     private final ConnectionSettingsRemote remoteSettings = new ConnectionSettingsRemote();
+    /**
+     * Local settings are settings defined by Tomcat and sent to the client that
+     * the client must use when communicating with Tomcat.
+     */
     private final ConnectionSettingsLocal localSettings = new ConnectionSettingsLocal();
 
     private HpackDecoder hpackDecoder;
@@ -341,6 +349,11 @@ public class Http2UpgradeHandler extends AbstractStream implements InternalHttpU
     }
 
 
+    ConnectionSettingsLocal getLocalSettings() {
+        return localSettings;
+    }
+
+
     @Override
     public void pause() {
         if (log.isDebugEnabled()) {

==================================================
