b5fc37046692a37f6e93f533e9a5c6941c271df9
==================================================
Remove unused code
==================================================
Mark Emlyn
==================================================
Sat Jan 15 13:42:01 2011 +0000
==================================================
MessageBytes.java
Remove unused code
Fix FindBugs and Eclipse warnings
Correct typos

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1059322 13f79535-47bb-0310-9956-ffa450edef68



==================================================
Digester.java
index e8cd3b3672..9d8109488b 100644
--- a/java/org/apache/tomcat/util/buf/MessageBytes.java
+++ b/java/org/apache/tomcat/util/buf/MessageBytes.java
@@ -154,19 +154,6 @@ public final class MessageBytes implements Cloneable, Serializable {
         hasLongValue=false;
     }
 
-    /** Remove the cached string value. Use it after a conversion on the
-     *  byte[] or after the encoding is changed
-     *  XXX Is this needed ?
-     */
-    public void resetStringValue() {
-        if( type != T_STR ) {
-            // If this was created as a byte[] or char[], we remove
-            // the old string value
-            hasStrValue=false;
-            strValue=null;
-        }
-    }
-
     /** 
      * Set the content to be a string
      */
@@ -294,7 +281,7 @@ public final class MessageBytes implements Cloneable, Serializable {
     public boolean equals(String s) {
         switch (type) {
         case T_STR:
-            if( strValue==null && s!=null) return false;
+            if (strValue == null) return s == null;
             return strValue.equals( s );
         case T_CHARS:
             return charC.equals( s );
@@ -313,7 +300,7 @@ public final class MessageBytes implements Cloneable, Serializable {
     public boolean equalsIgnoreCase(String s) {
         switch (type) {
         case T_STR:
-            if( strValue==null && s!=null) return false;
+            if (strValue == null) return s == null;
             return strValue.equalsIgnoreCase( s );
         case T_CHARS:
             return charC.equalsIgnoreCase( s );
@@ -324,6 +311,14 @@ public final class MessageBytes implements Cloneable, Serializable {
         }
     }
 
+    @Override
+    public boolean equals(Object obj) {
+        if (obj instanceof MessageBytes) {
+            return equals((MessageBytes) obj);
+        }
+        return false;
+    }
+
     public boolean equals(MessageBytes mb) {
         switch (type) {
         case T_STR:

==================================================
