fef8d0b7a62dc93e5823f4f5a7b8b58ab9b29c36
==================================================
Align code
==================================================
Mark Thomas
==================================================
Tue Sep 29 21:19:36 2015 +0000
==================================================
Http11Processor.java
Align code

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1705927 13f79535-47bb-0310-9956-ffa450edef68



==================================================
StreamProcessor.java
index e9de7a192c..7f164f44bf 100644
--- a/java/org/apache/coyote/http11/Http11Processor.java
+++ b/java/org/apache/coyote/http11/Http11Processor.java
@@ -1698,9 +1698,8 @@ public class Http11Processor extends AbstractProcessor {
     public SocketState dispatch(SocketStatus status) {
 
         if (status == SocketStatus.OPEN_WRITE && response.getWriteListener() != null) {
+            asyncStateMachine.asyncOperation();
             try {
-                asyncStateMachine.asyncOperation();
-
                 if (outputBuffer.hasDataToWrite()) {
                     if (outputBuffer.flushBuffer(false)) {
                         // The buffer wasn't fully flushed so re-register the

==================================================
