5d8e0948e85d9895c44a7dcb5799b5ce5da3c240
==================================================
Fix https://bz.apache.org/bugzilla/show_bug.cgi?id=62666
==================================================
Mark Thomas
==================================================
Fri Aug 31 16:08:45 2018 +0000
==================================================
StatusManagerServlet.java
index 23a140b545..1e78007448 100644
--- a/java/org/apache/catalina/manager/LocalStrings_ru.properties
+++ b/java/org/apache/catalina/manager/LocalStrings_ru.properties
@@ -136,3 +136,38 @@ managerServlet.unknownCommand=ОШИБКА - Неизвестная команд
 managerServlet.vminfo=OK - VM инфо
 statusServlet.title=Состояние сервера
 statusServlet.complete=Состояние сервера
+htmlManagerServlet.osPhysicalMemory=Физическая память:
+htmlManagerServlet.osAvailableMemory=Доступная память:
+htmlManagerServlet.osTotalPageFile=Всего файловых страниц:
+htmlManagerServlet.osFreePageFile=Свободные файловые страницы:
+htmlManagerServlet.osMemoryLoad=Памяти Загружено:
+htmlManagerServlet.osKernelTime=Время Обработки процесса ядром:
+htmlManagerServlet.osUserTime=Время обработки пользователя:
+htmlManagerServlet.jvmFreeMemory=Свободная Память:
+htmlManagerServlet.jvmMaxMemory=Максимум памяти:
+htmlManagerServlet.jvmTotalMemory=Вся память:
+htmlManagerServlet.jvmTableTitleMemoryPool=Области памяти
+htmlManagerServlet.jvmTableTitleType=Тип
+htmlManagerServlet.jvmTableTitleInitial=Изначально
+htmlManagerServlet.jvmTableTitleTotal=Всего
+htmlManagerServlet.jvmTableTitleMaximum=Максимум
+htmlManagerServlet.jvmTableTitleUsed=Используется
+htmlManagerServlet.connectorStateMaxThreads=Максимум процессов:
+htmlManagerServlet.connectorStateThreadCount=Нынешнее число процессов:
+htmlManagerServlet.connectorStateThreadBusy=Нынешнее число занятых процессов:
+htmlManagerServlet.connectorStateAliveSocketCount=Количество всё ещё живых сокетов:
+htmlManagerServlet.connectorStateMaxProcessingTime=Максимальное процессорное время:
+htmlManagerServlet.connectorStateProcessingTime=Процессорное время:
+htmlManagerServlet.connectorStateRequestCount=Количество запросов:
+htmlManagerServlet.connectorStateErrorCount=Количество ошибок:
+htmlManagerServlet.connectorStateBytesRecieved=Байтов получено:
+htmlManagerServlet.connectorStateBytesSent=Байтов отправлено:
+htmlManagerServlet.connectorStateTableTitleStage=Этап
+htmlManagerServlet.connectorStateTableTitleTime=Время
+htmlManagerServlet.connectorStateTableTitleBSent=Б Отпрвлено
+htmlManagerServlet.connectorStateTableTitleBRecv=Б Получено
+htmlManagerServlet.connectorStateTableTitleClientForw=Клиент (Отосланый)
+htmlManagerServlet.connectorStateTableTitleClientAct=Клиент (Настоящий)
+htmlManagerServlet.connectorStateTableTitleVHost=ВХост
+htmlManagerServlet.connectorStateTableTitleRequest=Запросы
+htmlManagerServlet.connectorStateHint=P: Разбирается и готовится к отправки S: Сервис F: Завершение R: Готов K: Продолжает существовать

==================================================
StatusTransformer.java
index ef911bdf63..7f7d634667 100644
--- a/java/org/apache/catalina/manager/StatusManagerServlet.java
+++ b/java/org/apache/catalina/manager/StatusManagerServlet.java
@@ -283,20 +283,59 @@ public class StatusManagerServlet
         try {
 
             // Display operating system statistics using APR if available
-            StatusTransformer.writeOSState(writer,mode);
+            args = new Object[7];
+            args[0] = sm.getString("htmlManagerServlet.osPhysicalMemory");
+            args[1] = sm.getString("htmlManagerServlet.osAvailableMemory");
+            args[2] = sm.getString("htmlManagerServlet.osTotalPageFile");
+            args[3] = sm.getString("htmlManagerServlet.osFreePageFile");
+            args[4] = sm.getString("htmlManagerServlet.osMemoryLoad");
+            args[5] = sm.getString("htmlManagerServlet.osKernelTime");
+            args[6] = sm.getString("htmlManagerServlet.osUserTime");
+            StatusTransformer.writeOSState(writer, mode, args);
 
             // Display virtual machine statistics
-            StatusTransformer.writeVMState(writer,mode);
+            args = new Object[9];
+            args[0] = sm.getString("htmlManagerServlet.jvmFreeMemory");
+            args[1] = sm.getString("htmlManagerServlet.jvmTotalMemory");
+            args[2] = sm.getString("htmlManagerServlet.jvmMaxMemory");
+            args[3] = sm.getString("htmlManagerServlet.jvmTableTitleMemoryPool");
+            args[4] = sm.getString("htmlManagerServlet.jvmTableTitleType");
+            args[5] = sm.getString("htmlManagerServlet.jvmTableTitleInitial");
+            args[6] = sm.getString("htmlManagerServlet.jvmTableTitleTotal");
+            args[7] = sm.getString("htmlManagerServlet.jvmTableTitleMaximum");
+            args[8] = sm.getString("htmlManagerServlet.jvmTableTitleUsed");
+            // use StatusTransformer to output status
+            StatusTransformer.writeVMState(writer,mode, args);
 
             Enumeration<ObjectName> enumeration = threadPools.elements();
             while (enumeration.hasMoreElements()) {
                 ObjectName objectName = enumeration.nextElement();
                 String name = objectName.getKeyProperty("name");
+                args = new Object[19];
+                args[0] = sm.getString("htmlManagerServlet.connectorStateMaxThreads");
+                args[1] = sm.getString("htmlManagerServlet.connectorStateThreadCount");
+                args[2] = sm.getString("htmlManagerServlet.connectorStateThreadBusy");
+                args[3] = sm.getString("htmlManagerServlet.connectorStateAliveSocketCount");
+                args[4] = sm.getString("htmlManagerServlet.connectorStateMaxProcessingTime");
+                args[5] = sm.getString("htmlManagerServlet.connectorStateProcessingTime");
+                args[6] = sm.getString("htmlManagerServlet.connectorStateRequestCount");
+                args[7] = sm.getString("htmlManagerServlet.connectorStateErrorCount");
+                args[8] = sm.getString("htmlManagerServlet.connectorStateBytesRecieved");
+                args[9] = sm.getString("htmlManagerServlet.connectorStateBytesSent");
+                args[10] = sm.getString("htmlManagerServlet.connectorStateTableTitleStage");
+                args[11] = sm.getString("htmlManagerServlet.connectorStateTableTitleTime");
+                args[12] = sm.getString("htmlManagerServlet.connectorStateTableTitleBSent");
+                args[13] = sm.getString("htmlManagerServlet.connectorStateTableTitleBRecv");
+                args[14] = sm.getString("htmlManagerServlet.connectorStateTableTitleClientForw");
+                args[15] = sm.getString("htmlManagerServlet.connectorStateTableTitleClientAct");
+                args[16] = sm.getString("htmlManagerServlet.connectorStateTableTitleVHost");
+                args[17] = sm.getString("htmlManagerServlet.connectorStateTableTitleRequest");
+                args[18] = sm.getString("htmlManagerServlet.connectorStateHint");
                 // use StatusTransformer to output status
                 StatusTransformer.writeConnectorState
                     (writer, objectName,
                      name, mBeanServer, globalRequestProcessors,
-                     requestProcessors, mode);
+                     requestProcessors, mode, args);
             }
 
             if ((request.getPathInfo() != null)

==================================================
