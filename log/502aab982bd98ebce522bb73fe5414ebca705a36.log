502aab982bd98ebce522bb73fe5414ebca705a36
==================================================
Allow JioEndpoint to switch context class loader
==================================================
Rainer Jung
==================================================
Sun Apr 11 17:47:00 2010 +0000
==================================================
SecurityClassLoad.java
Allow JioEndpoint to switch context class loader
under security manager. Code copied from standard session.

Add two more classes to class pre-loading to improve
security manager interoperability.


git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@932953 13f79535-47bb-0310-9956-ffa450edef68



==================================================
JIoEndpoint.java
index 7e8006cfc3..ed1f9756b0 100644
--- a/java/org/apache/catalina/security/SecurityClassLoad.java
+++ b/java/org/apache/catalina/security/SecurityClassLoad.java
@@ -131,6 +131,7 @@ public final class SecurityClassLoad {
         throws Exception {
         String basePackage = "org.apache.catalina.";
         loader.loadClass(basePackage + "util.Enumerator");
+        loader.loadClass(basePackage + "util.ParameterMap");
     }
     
     
@@ -234,6 +235,8 @@ public final class SecurityClassLoad {
         throws Exception {
         String basePackage = "org.apache.tomcat.";
         loader.loadClass(basePackage + "util.net.SSLSupport$CipherData");
+        loader.loadClass
+            (basePackage + "util.net.JIoEndpoint$PrivilegedSetTccl");
     }
 }
 

==================================================
