62e73d0c27f9419282ad8277364749a5eca2c95e
==================================================
- Remove apparently useless fields from the page context.
==================================================
Remy Maucherat
==================================================
Wed Sep 20 01:15:32 2006 +0000
==================================================
JspFactoryImpl.java
- Remove apparently useless fields from the page context.
- Attributes are now a HashMap, since the page context is a per request object.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/tc6.0.x/trunk@448022 13f79535-47bb-0310-9956-ffa450edef68



==================================================
PageContextImpl.java
index 7408eb8348..e1293b27e2 100644
--- a/java/org/apache/jasper/runtime/JspFactoryImpl.java
+++ b/java/org/apache/jasper/runtime/JspFactoryImpl.java
@@ -95,17 +95,17 @@ public class JspFactoryImpl extends JspFactory {
 					       int bufferSize, 
 					       boolean autoflush) {
         try {
-	    PageContext pc;
-	    if( USE_POOL ) {
+            PageContext pc;
+            if( USE_POOL ) {
                 pc = (PageContext) pool.get();
-		if( pc == null ) {
-		    pc= new PageContextImpl(this);
-		}
-	    } else {
-		pc = new PageContextImpl(this);
-	    }
-	    pc.initialize(servlet, request, response, errorPageURL, 
-                          needsSession, bufferSize, autoflush);
+                if( pc == null ) {
+                    pc = new PageContextImpl();
+                }
+            } else {
+                pc = new PageContextImpl();
+            }
+            pc.initialize(servlet, request, response, errorPageURL, 
+                    needsSession, bufferSize, autoflush);
             return pc;
         } catch (Throwable ex) {
             /* FIXME: need to do something reasonable here!! */

==================================================
