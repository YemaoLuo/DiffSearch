1582e975fd76e4324498c1cdbb45edf216ccd599
==================================================
Simplify code: remove unneeded classcast.
==================================================
Konstantin Kolinko
==================================================
Sat Nov 12 12:01:48 2011 +0000
==================================================
ProxyConnection.java
Simplify code: remove unneeded classcast.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1201251 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TrapException.java
index 02d9f99fec..c23685ae0f 100644
--- a/modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/ProxyConnection.java
+++ b/modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/ProxyConnection.java
@@ -108,8 +108,7 @@ public class ProxyConnection extends JdbcInterceptor {
                 return method.invoke(connection.getXAConnection(),args);
             }catch (Throwable t) {
                 if (t instanceof InvocationTargetException) {
-                    InvocationTargetException it = (InvocationTargetException)t;
-                    throw it.getCause()!=null?it.getCause():it;
+                    throw t.getCause() != null ? t.getCause() : t;
                 } else {
                     throw t;
                 }
@@ -130,8 +129,7 @@ public class ProxyConnection extends JdbcInterceptor {
             }
         }catch (Throwable t) {
             if (t instanceof InvocationTargetException) {
-                InvocationTargetException it = (InvocationTargetException)t;
-                throw it.getCause()!=null?it.getCause():it;
+                throw t.getCause() != null ? t.getCause() : t;
             } else {
                 throw t;
             }

==================================================
AbstractQueryReport.java
index ff1e8be0d9..50142a402a 100644
--- a/modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/TrapException.java
+++ b/modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/TrapException.java
@@ -42,7 +42,7 @@ public class TrapException extends JdbcInterceptor {
         }catch (Exception t) {
             Throwable exception = t;
             if (t instanceof InvocationTargetException) {
-                exception = t.getCause()!=null?t.getCause():t;
+                exception = t.getCause() != null ? t.getCause() : t;
             }
             Class<?> exceptionClass = exception.getClass();
             if (!isDeclaredException(method, exceptionClass)) {

==================================================
StatementDecoratorInterceptor.java
index 74ae4e80dc..6f732ea5b9 100644
--- a/modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/interceptor/AbstractQueryReport.java
+++ b/modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/interceptor/AbstractQueryReport.java
@@ -236,8 +236,7 @@ public abstract class AbstractQueryReport extends AbstractCreateStatementInterce
             }catch (Throwable t) {
                 reportFailedQuery(query,args,name,start,t);
                 if (t instanceof InvocationTargetException) {
-                    InvocationTargetException it = (InvocationTargetException)t;
-                    throw it.getCause()!=null?it.getCause():it;
+                    throw t.getCause() != null ? t.getCause() : t;
                 } else {
                     throw t;
                 }

==================================================
