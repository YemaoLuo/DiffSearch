14b28801dbfdc40ec7a3a7f0038825353a6418c6
==================================================
Review comments from kkolinko for r1733077
==================================================
Mark Thomas
==================================================
Tue Mar 1 15:56:47 2016 +0000
==================================================
ClassLoaderFactory.java
Review comments from kkolinko for r1733077

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1733093 13f79535-47bb-0310-9956-ffa450edef68



==================================================
UriUtil.java
index 7c283b340d..c5a245e349 100644
--- a/java/org/apache/catalina/startup/ClassLoaderFactory.java
+++ b/java/org/apache/catalina/startup/ClassLoaderFactory.java
@@ -280,7 +280,7 @@ public final class ClassLoaderFactory {
      * org.apache.tomcat.util.buf.UriUtil but that class is not visible until
      * after the class loaders have been constructed.
      */
-    public static URL buildClassLoaderUrl(String urlString) throws MalformedURLException {
+    private static URL buildClassLoaderUrl(String urlString) throws MalformedURLException {
         // URLs passed to class loaders may point to directories that contain
         // JARs. If these URLs are used to construct URLs for resources in a JAR
         // the URL will be used as is. It is therefore necessary to ensure that
@@ -290,9 +290,9 @@ public final class ClassLoaderFactory {
     }
 
 
-    public static URL buildClassLoaderUrl(File file) throws MalformedURLException {
+    private static URL buildClassLoaderUrl(File file) throws MalformedURLException {
         // Could be a directory or a file
-        String fileUrlString = file.toURI().toURL().toString();
+        String fileUrlString = file.toURI().toString();
         fileUrlString = fileUrlString.replaceAll("!/", "%21/");
         return new URL(fileUrlString);
     }

==================================================
TestUriUtil.java
index ee21ea3511..dce2bfdd88 100644
--- a/java/org/apache/tomcat/util/buf/UriUtil.java
+++ b/java/org/apache/tomcat/util/buf/UriUtil.java
@@ -71,7 +71,7 @@ public final class UriUtil {
 
 
     public static URL buildJarUrl(File jarFile, String entryPath) throws MalformedURLException {
-        return buildJarUrl(jarFile.toURI().toURL().toString(), entryPath);
+        return buildJarUrl(jarFile.toURI().toString(), entryPath);
     }
 
 
@@ -94,7 +94,7 @@ public final class UriUtil {
 
 
     public static URL buildJarSafeUrl(File file) throws MalformedURLException {
-        String safe = makeSafeForJarUrl(file.toURI().toURL().toString());
+        String safe = makeSafeForJarUrl(file.toURI().toString());
         return new URL(safe);
     }
 

==================================================
