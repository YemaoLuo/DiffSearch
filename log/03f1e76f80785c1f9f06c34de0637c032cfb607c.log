03f1e76f80785c1f9f06c34de0637c032cfb607c
==================================================
Remove special handling when setting HTTP content-language header
==================================================
Mark Emlyn
==================================================
Sun Aug 19 19:34:49 2012 +0000
==================================================
Response.java
Remove special handling when setting HTTP content-language header

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1374824 13f79535-47bb-0310-9956-ffa450edef68



==================================================
Response.java
index 4a7b47708b..9f6b78939d 100644
--- a/java/org/apache/catalina/connector/Response.java
+++ b/java/org/apache/catalina/connector/Response.java
@@ -16,7 +16,6 @@
  */
 package org.apache.catalina.connector;
 
-
 import java.io.IOException;
 import java.io.PrintWriter;
 import java.io.StringReader;
@@ -51,7 +50,6 @@ import org.apache.tomcat.util.buf.CharChunk;
 import org.apache.tomcat.util.buf.UEncoder;
 import org.apache.tomcat.util.http.FastHttpDateFormat;
 import org.apache.tomcat.util.http.MimeHeaders;
-import org.apache.tomcat.util.http.ResponseUtil;
 import org.apache.tomcat.util.http.ServerCookie;
 import org.apache.tomcat.util.http.parser.AstMediaType;
 import org.apache.tomcat.util.http.parser.HttpParser;
@@ -1023,9 +1021,9 @@ public class Response
 
     /**
      * An extended version of this exists in {@link org.apache.coyote.Response}.
-     * This check is required here to ensure that the usingWriter checks in
-     * {@link #setContentType(String)} and {@link #setLocale(Locale) are applied
-     * since usingWriter is not visible to {@link org.apache.coyote.Response}
+     * This check is required here to ensure that the usingWriter check in
+     * {@link #setContentType(String)} is applied since usingWriter is not
+     * visible to {@link org.apache.coyote.Response}
      *
      * Called from set/addHeader.
      * Return true if the header is special, no need to set the header.
@@ -1035,15 +1033,6 @@ public class Response
             setContentType(value);
             return true;
         }
-        if (name.equalsIgnoreCase("Content-Language")) {
-            Locale locale = ResponseUtil.getLocaleFromLanguageHeader(value);
-            if (locale == null) {
-                return false;
-            } else {
-                setLocale(locale);
-                return true;
-            }
-        }
         return false;
     }
 

==================================================
ResponseUtil.java
index b237c9fdb0..615bafb758 100644
--- a/java/org/apache/coyote/Response.java
+++ b/java/org/apache/coyote/Response.java
@@ -14,7 +14,6 @@
  *  See the License for the specific language governing permissions and
  *  limitations under the License.
  */
-
 package org.apache.coyote;
 
 import java.io.IOException;
@@ -26,7 +25,6 @@ import javax.servlet.WriteListener;
 import org.apache.coyote.http11.AbstractOutputBuffer;
 import org.apache.tomcat.util.buf.ByteChunk;
 import org.apache.tomcat.util.http.MimeHeaders;
-import org.apache.tomcat.util.http.ResponseUtil;
 import org.apache.tomcat.util.http.parser.AstMediaType;
 import org.apache.tomcat.util.http.parser.HttpParser;
 import org.apache.tomcat.util.http.parser.ParseException;
@@ -343,15 +341,6 @@ public final class Response {
                 return false;
             }
         }
-        if (name.equalsIgnoreCase("Content-Language")) {
-            Locale locale = ResponseUtil.getLocaleFromLanguageHeader(value);
-            if (locale == null) {
-                return false;
-            } else {
-                setLocale(locale);
-                return true;
-            }
-        }
         return false;
     }
 

==================================================
