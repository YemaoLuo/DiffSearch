d54295e2d87650d654da1c2f9800104c39bbbfb6
==================================================
[Bug 66184] Ensure that all root loggers have a level or parent
==================================================
Piotr P.
==================================================
Thu Jul 28 21:04:22 2022 +0200
==================================================
ClassLoaderLogManager.java
[Bug 66184] Ensure that all root loggers have a level or parent

Since Java 8 the default level of a root logger is no longer set in the
constructor. This PR sets the level to INFO (LogManager's default) if it
is absent.


==================================================
TestClassLoaderLogManager.java
index fc5106795e..b4ab262601 100644
--- a/java/org/apache/juli/ClassLoaderLogManager.java
+++ b/java/org/apache/juli/ClassLoaderLogManager.java
@@ -512,6 +512,10 @@ public class ClassLoaderLogManager extends LogManager {
         if (is != null) {
             readConfiguration(is, classLoader);
         }
+
+        if (localRootLogger.getParent() == null && localRootLogger.getLevel() == null) {
+            localRootLogger.setLevel(Level.INFO);
+        }
         try {
             // Use a ThreadLocal to work around
             // https://bugs.openjdk.java.net/browse/JDK-8195096

==================================================
