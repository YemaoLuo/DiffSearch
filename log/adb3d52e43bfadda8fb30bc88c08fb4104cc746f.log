adb3d52e43bfadda8fb30bc88c08fb4104cc746f
==================================================
Move ExceptionUtils so it is visible to the runtime classes when running under a security manager.
==================================================
Mark Thomas
==================================================
Mon Aug 1 09:35:25 2016 +0000
==================================================
JspReader.java
Move ExceptionUtils so it is visible to the runtime classes when running under a security manager.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1754716 13f79535-47bb-0310-9956-ffa450edef68



==================================================
JspRuntimeContext.java
index cfd3cd6a5c..7086235249 100644
--- a/java/org/apache/jasper/compiler/JspReader.java
+++ b/java/org/apache/jasper/compiler/JspReader.java
@@ -23,7 +23,7 @@ import java.io.InputStreamReader;
 
 import org.apache.jasper.JasperException;
 import org.apache.jasper.JspCompilationContext;
-import org.apache.jasper.util.ExceptionUtils;
+import org.apache.jasper.runtime.ExceptionUtils;
 import org.apache.juli.logging.Log;
 import org.apache.juli.logging.LogFactory;
 import org.apache.tomcat.Jar;

==================================================
Localizer.java
index de75f1043e..4e1e95f218 100644
--- a/java/org/apache/jasper/compiler/JspRuntimeContext.java
+++ b/java/org/apache/jasper/compiler/JspRuntimeContext.java
@@ -38,8 +38,8 @@ import javax.servlet.ServletContext;
 import org.apache.jasper.Constants;
 import org.apache.jasper.JspCompilationContext;
 import org.apache.jasper.Options;
+import org.apache.jasper.runtime.ExceptionUtils;
 import org.apache.jasper.servlet.JspServletWrapper;
-import org.apache.jasper.util.ExceptionUtils;
 import org.apache.jasper.util.FastRemovalDequeue;
 import org.apache.juli.logging.Log;
 import org.apache.juli.logging.LogFactory;

==================================================
ExceptionUtils.java
index e202ac414a..8fed5f2eb2 100644
--- a/java/org/apache/jasper/compiler/Localizer.java
+++ b/java/org/apache/jasper/compiler/Localizer.java
@@ -21,7 +21,7 @@ import java.text.MessageFormat;
 import java.util.MissingResourceException;
 import java.util.ResourceBundle;
 
-import org.apache.jasper.util.ExceptionUtils;
+import org.apache.jasper.runtime.ExceptionUtils;
 
 /**
  * Class responsible for converting error codes to corresponding localized

==================================================
JspRuntimeLibrary.java
similarity index 98%
rename from java/org/apache/jasper/util/ExceptionUtils.java
rename to java/org/apache/jasper/runtime/ExceptionUtils.java
index 695b9a8a4f..344bce2aa5 100644
--- a/java/org/apache/jasper/util/ExceptionUtils.java
+++ b/java/org/apache/jasper/runtime/ExceptionUtils.java
@@ -14,7 +14,7 @@
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
-package org.apache.jasper.util;
+package org.apache.jasper.runtime;
 
 import java.lang.reflect.InvocationTargetException;
 

==================================================
TagHandlerPool.java
index 7166947bfb..fe4bbcf7dd 100644
--- a/java/org/apache/jasper/runtime/JspRuntimeLibrary.java
+++ b/java/org/apache/jasper/runtime/JspRuntimeLibrary.java
@@ -35,7 +35,6 @@ import javax.servlet.jsp.tagext.BodyContent;
 
 import org.apache.jasper.JasperException;
 import org.apache.jasper.compiler.Localizer;
-import org.apache.jasper.util.ExceptionUtils;
 
 /**
  * Bunch of util methods that are used by code generated for useBean,

==================================================
JspCServletContext.java
index bef2f265ac..b730c4b6e6 100644
--- a/java/org/apache/jasper/runtime/TagHandlerPool.java
+++ b/java/org/apache/jasper/runtime/TagHandlerPool.java
@@ -22,7 +22,6 @@ import javax.servlet.jsp.JspException;
 import javax.servlet.jsp.tagext.Tag;
 
 import org.apache.jasper.Constants;
-import org.apache.jasper.util.ExceptionUtils;
 import org.apache.juli.logging.Log;
 import org.apache.juli.logging.LogFactory;
 import org.apache.tomcat.InstanceManager;

==================================================
JspServlet.java
index 7974ef9513..f07e44d6eb 100644
--- a/java/org/apache/jasper/servlet/JspCServletContext.java
+++ b/java/org/apache/jasper/servlet/JspCServletContext.java
@@ -48,7 +48,7 @@ import javax.servlet.descriptor.JspConfigDescriptor;
 import org.apache.jasper.Constants;
 import org.apache.jasper.JasperException;
 import org.apache.jasper.compiler.Localizer;
-import org.apache.jasper.util.ExceptionUtils;
+import org.apache.jasper.runtime.ExceptionUtils;
 import org.apache.tomcat.JarScanType;
 import org.apache.tomcat.util.descriptor.web.FragmentJarScannerCallback;
 import org.apache.tomcat.util.descriptor.web.WebXml;

==================================================
JspServletWrapper.java
index 037d100b74..9d0c5a26cd 100644
--- a/java/org/apache/jasper/servlet/JspServlet.java
+++ b/java/org/apache/jasper/servlet/JspServlet.java
@@ -38,8 +38,8 @@ import org.apache.jasper.EmbeddedServletOptions;
 import org.apache.jasper.Options;
 import org.apache.jasper.compiler.JspRuntimeContext;
 import org.apache.jasper.compiler.Localizer;
+import org.apache.jasper.runtime.ExceptionUtils;
 import org.apache.jasper.security.SecurityUtil;
-import org.apache.jasper.util.ExceptionUtils;
 import org.apache.juli.logging.Log;
 import org.apache.juli.logging.LogFactory;
 import org.apache.tomcat.PeriodicEventListener;

==================================================
