1206bda406dca1d4000ae7785c262ac76e135c4a
==================================================
Add getter/setter for JarScanFilter to JarScanner
==================================================
Mark Emlyn
==================================================
Fri Jun 14 07:43:23 2013 +0000
==================================================
ContextRuleSet.java
Add getter/setter for JarScanFilter to JarScanner
Enable JarScanFilter to be configured via a context.xml file (and
server.xml)

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1492980 13f79535-47bb-0310-9956-ffa450edef68



==================================================
JarScanner.java
index 255ffd9979..5a19961673 100644
--- a/java/org/apache/catalina/startup/ContextRuleSet.java
+++ b/java/org/apache/catalina/startup/ContextRuleSet.java
@@ -228,6 +228,14 @@ public class ContextRuleSet extends RuleSetBase {
                             "setJarScanner",
                             "org.apache.tomcat.JarScanner");
 
+        digester.addObjectCreate(prefix + "Context/JarScanner/JarScanFilter",
+                                 "org.apache.tomcat.util.scan.StandardJarScanFilter",
+                                 "className");
+        digester.addSetProperties(prefix + "Context/JarScanner/JarScanFilter");
+        digester.addSetNext(prefix + "Context/JarScanner/JarScanFilter",
+                            "setJarScanFilter",
+                            "org.apache.tomcat.JarScanFilter");
+
     }
 
 }

==================================================
StandardJarScanner.java
index 027caf05e7..27a8f6d4f9 100644
--- a/java/org/apache/tomcat/JarScanner.java
+++ b/java/org/apache/tomcat/JarScanner.java
@@ -39,4 +39,7 @@ public interface JarScanner {
     public void scan(JarScanType scanType, ServletContext context,
             JarScannerCallback callback);
 
+    public JarScanFilter getJarScanFilter();
+
+    public void setJarScanFilter(JarScanFilter jarScanFilter);
 }

==================================================
