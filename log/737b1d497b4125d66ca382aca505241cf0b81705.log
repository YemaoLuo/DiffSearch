737b1d497b4125d66ca382aca505241cf0b81705
==================================================
Generics changes for o.a.c.authenticator
==================================================
Mark Emlyn
==================================================
Sat Dec 27 18:40:24 2008 +0000
==================================================
AuthenticatorBase.java
Generics changes for o.a.c.authenticator
Remove unnecessary casts identified by Eclipse

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@729652 13f79535-47bb-0310-9956-ffa450edef68



==================================================
FormAuthenticator.java
index 2915a9d978..5b3273dadd 100644
--- a/java/org/apache/catalina/authenticator/AuthenticatorBase.java
+++ b/java/org/apache/catalina/authenticator/AuthenticatorBase.java
@@ -630,7 +630,7 @@ public abstract class AuthenticatorBase
 
         if (this.random == null) {
             try {
-                Class clazz = Class.forName(randomClass);
+                Class<?> clazz = Class.forName(randomClass);
                 this.random = (Random) clazz.newInstance();
                 long seed = System.currentTimeMillis();
                 char entropy[] = getEntropy().toCharArray();

==================================================
SavedRequest.java
index 774c8f1b34..834db3b2e7 100644
--- a/java/org/apache/catalina/authenticator/FormAuthenticator.java
+++ b/java/org/apache/catalina/authenticator/FormAuthenticator.java
@@ -395,34 +395,34 @@ public class FormAuthenticator
 
         // Modify our current request to reflect the original one
         request.clearCookies();
-        Iterator cookies = saved.getCookies();
+        Iterator<Cookie> cookies = saved.getCookies();
         while (cookies.hasNext()) {
-            request.addCookie((Cookie) cookies.next());
+            request.addCookie(cookies.next());
         }
 
         MimeHeaders rmh = request.getCoyoteRequest().getMimeHeaders();
         rmh.recycle();
         boolean cachable = "GET".equalsIgnoreCase(saved.getMethod()) ||
                            "HEAD".equalsIgnoreCase(saved.getMethod());
-        Iterator names = saved.getHeaderNames();
+        Iterator<String> names = saved.getHeaderNames();
         while (names.hasNext()) {
-            String name = (String) names.next();
+            String name = names.next();
             // The browser isn't expecting this conditional reposponse now.
             // Assuming that it can quietly recover from an unexpected 412.
             // BZ 43687
             if(!("If-Modified-Since".equalsIgnoreCase(name) ||
                  (cachable && "If-None-Match".equalsIgnoreCase(name)))) {
-                Iterator values = saved.getHeaderValues(name);
+                Iterator<String> values = saved.getHeaderValues(name);
                 while (values.hasNext()) {
-                    rmh.addValue(name).setString( (String)values.next() );
+                    rmh.addValue(name).setString(values.next());
                 }
             }
         }
         
         request.clearLocales();
-        Iterator locales = saved.getLocales();
+        Iterator<Locale> locales = saved.getLocales();
         while (locales.hasNext()) {
-            request.addLocale((Locale) locales.next());
+            request.addLocale(locales.next());
         }
         
         request.getCoyoteRequest().getParameters().recycle();
@@ -478,18 +478,18 @@ public class FormAuthenticator
             for (int i = 0; i < cookies.length; i++)
                 saved.addCookie(cookies[i]);
         }
-        Enumeration names = request.getHeaderNames();
+        Enumeration<String> names = request.getHeaderNames();
         while (names.hasMoreElements()) {
-            String name = (String) names.nextElement();
-            Enumeration values = request.getHeaders(name);
+            String name = names.nextElement();
+            Enumeration<String> values = request.getHeaders(name);
             while (values.hasMoreElements()) {
-                String value = (String) values.nextElement();
+                String value = values.nextElement();
                 saved.addHeader(name, value);
             }
         }
-        Enumeration locales = request.getLocales();
+        Enumeration<Locale> locales = request.getLocales();
         while (locales.hasMoreElements()) {
-            Locale locale = (Locale) locales.nextElement();
+            Locale locale = locales.nextElement();
             saved.addLocale(locale);
         }
 

==================================================
SingleSignOn.java
index 1eac45143e..dcde172a46 100644
--- a/java/org/apache/catalina/authenticator/SavedRequest.java
+++ b/java/org/apache/catalina/authenticator/SavedRequest.java
@@ -54,7 +54,7 @@ public final class SavedRequest {
         cookies.add(cookie);
     }
 
-    public Iterator getCookies() {
+    public Iterator<Cookie> getCookies() {
         return (cookies.iterator());
     }
 
@@ -69,7 +69,7 @@ public final class SavedRequest {
         new HashMap<String,ArrayList<String>>();
 
     public void addHeader(String name, String value) {
-        ArrayList<String> values = (ArrayList<String>) headers.get(name);
+        ArrayList<String> values = headers.get(name);
         if (values == null) {
             values = new ArrayList<String>();
             headers.put(name, values);
@@ -77,14 +77,14 @@ public final class SavedRequest {
         values.add(value);
     }
 
-    public Iterator getHeaderNames() {
+    public Iterator<String> getHeaderNames() {
         return (headers.keySet().iterator());
     }
 
-    public Iterator getHeaderValues(String name) {
-        ArrayList values = (ArrayList) headers.get(name);
+    public Iterator<String> getHeaderValues(String name) {
+        ArrayList<String> values = headers.get(name);
         if (values == null)
-            return ((new ArrayList()).iterator());
+            return ((new ArrayList<String>()).iterator());
         else
             return (values.iterator());
     }
@@ -99,7 +99,7 @@ public final class SavedRequest {
         locales.add(locale);
     }
 
-    public Iterator getLocales() {
+    public Iterator<Locale> getLocales() {
         return (locales.iterator());
     }
 
@@ -131,12 +131,12 @@ public final class SavedRequest {
         parameters.put(name, values);
     }
 
-    public Iterator getParameterNames() {
+    public Iterator<String> getParameterNames() {
         return (parameters.keySet().iterator());
     }
 
     public String[] getParameterValues(String name) {
-        return ((String[]) parameters.get(name));
+        return parameters.get(name);
     }
 
 

==================================================
