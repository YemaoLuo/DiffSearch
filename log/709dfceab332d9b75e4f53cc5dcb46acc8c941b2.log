709dfceab332d9b75e4f53cc5dcb46acc8c941b2
==================================================
Refactor interceptor instantiation a bit
==================================================
Filip Hanik
==================================================
Thu Dec 11 05:17:19 2008 +0000
==================================================
ConnectionPool.java
Refactor interceptor instantiation a bit


git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@725584 13f79535-47bb-0310-9956-ffa450edef68



==================================================
PoolProperties.java
index d9240a2e37..b74dfee510 100644
--- a/modules/jdbc-pool/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java
+++ b/modules/jdbc-pool/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java
@@ -202,11 +202,10 @@ public class ConnectionPool {
             PoolProperties.InterceptorDefinition[] proxies = getPoolProperties().getJdbcInterceptorsAsArray();
             for (int i=proxies.length-1; i>=0; i--) {
                 try {
-                    JdbcInterceptor interceptor =
-                        (JdbcInterceptor) Class.forName(proxies[i].getClassName(), true, Thread.currentThread().getContextClassLoader()).newInstance(); //should this be the class loader?
+                    JdbcInterceptor interceptor = proxies[i].getInterceptorClass().newInstance();
                     interceptor.setProperties(proxies[i].getProperties());
                     interceptor.setNext(handler);
-                    interceptor.reset(this, con); //initialize
+                    interceptor.reset(this, con);
                     handler = interceptor;
                 }catch(Exception x) {
                     SQLException sx = new SQLException("Unable to instantiate interceptor chain.");

==================================================
