4c638a3fb6e785ae47c94d82de4f638d47b8ceba
==================================================
Fix failing tests
==================================================
Mark Emlyn
==================================================
Tue Jun 25 12:17:03 2013 +0000
==================================================
WsServerContainer.java
Fix failing tests

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1496443 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TestWsServerContainer.java
index 20bf1eb591..b1de4d1b7c 100644
--- a/java/org/apache/tomcat/websocket/server/WsServerContainer.java
+++ b/java/org/apache/tomcat/websocket/server/WsServerContainer.java
@@ -77,6 +77,13 @@ public class WsServerContainer extends WsWebSocketContainer
         return result;
     }
 
+    // For unit testing
+    protected static void recycle() {
+        synchronized (classLoaderContainerMapLock) {
+            classLoaderContainerMap.clear();
+        }
+    }
+
     private final WsWriteTimeout wsWriteTimeout = new WsWriteTimeout();
 
     private volatile ServletContext servletContext = null;

==================================================
