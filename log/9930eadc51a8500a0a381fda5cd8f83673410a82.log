9930eadc51a8500a0a381fda5cd8f83673410a82
==================================================
- API change for the constructor of Loader: if not specified, the loader will get the parent CL from the context,
==================================================
Remy Maucherat
==================================================
Fri Sep 1 23:06:02 2006 +0000
==================================================
WebappLoader.java
- API change for the constructor of Loader: if not specified, the loader will get the parent CL from the context,
  avoiding the problems of ignoring the privileged flag in some cases as seen in bug 39704.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/tc6.0.x/trunk@439501 13f79535-47bb-0310-9956-ffa450edef68



==================================================
ContextRuleSet.java
index 10f4f69e06..b7db51fdce 100644
--- a/java/org/apache/catalina/loader/WebappLoader.java
+++ b/java/org/apache/catalina/loader/WebappLoader.java
@@ -770,7 +770,7 @@ public class WebappLoader
         WebappClassLoader classLoader = null;
 
         if (parentClassLoader == null) {
-            parentClassLoader = Thread.currentThread().getContextClassLoader();
+            parentClassLoader = container.getParentClassLoader();
         }
         Class[] argTypes = { ClassLoader.class };
         Object[] args = { parentClassLoader };

==================================================
