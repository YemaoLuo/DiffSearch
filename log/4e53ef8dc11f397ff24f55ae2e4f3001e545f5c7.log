4e53ef8dc11f397ff24f55ae2e4f3001e545f5c7
==================================================
- ThreadLocalLeakPreventionListener: Trigger thread renewals for StandardContext only. (Do not trigger them for FailedContext and similar).
==================================================
Konstantin Kolinko
==================================================
Mon May 12 01:28:30 2014 +0000
==================================================
StandardThreadExecutor.java
- ThreadLocalLeakPreventionListener: Trigger thread renewals for StandardContext only. (Do not trigger them for FailedContext and similar).
- StandardThreadExecutor: Pass 'threadRenewalDelay' to the thread pool executor. Otherwise this setting configured at initialization time is effectively ignored.
- Improve documentation.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1593877 13f79535-47bb-0310-9956-ffa450edef68



==================================================
ThreadLocalLeakPreventionListener.java
index 04da7f5937..9abf8e8060 100644
--- a/java/org/apache/catalina/core/StandardThreadExecutor.java
+++ b/java/org/apache/catalina/core/StandardThreadExecutor.java
@@ -119,6 +119,7 @@ public class StandardThreadExecutor extends LifecycleMBeanBase
         taskqueue = new TaskQueue(maxQueueSize);
         TaskThreadFactory tf = new TaskThreadFactory(namePrefix,daemon,getThreadPriority());
         executor = new ThreadPoolExecutor(getMinSpareThreads(), getMaxThreads(), maxIdleTime, TimeUnit.MILLISECONDS,taskqueue, tf);
+        executor.setThreadRenewalDelay(threadRenewalDelay);
         if (prestartminSpareThreads) {
             executor.prestartAllCoreThreads();
         }

==================================================
