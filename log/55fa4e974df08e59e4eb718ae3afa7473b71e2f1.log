55fa4e974df08e59e4eb718ae3afa7473b71e2f1
==================================================
Fix https://bz.apache.org/bugzilla/show_bug.cgi?id=57969
==================================================
Violeta Georgieva
==================================================
Mon Jun 8 12:43:30 2015 +0000
==================================================
UpgradeUtil.java
Fix https://bz.apache.org/bugzilla/show_bug.cgi?id=57969
Provide path params to POJO via WsPerSessionServerEndpointConfig instead of the 'global' ServerEndpointConfig.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1684172 13f79535-47bb-0310-9956-ffa450edef68



==================================================
WsServerContainer.java
index fbb7324dce..b1cf6974d3 100644
--- a/java/org/apache/tomcat/websocket/server/UpgradeUtil.java
+++ b/java/org/apache/tomcat/websocket/server/UpgradeUtil.java
@@ -223,6 +223,9 @@ public class UpgradeUtil {
                         clazz);
             } else {
                 ep = new PojoEndpointServer();
+                // Need to make path params available to POJO
+                perSessionServerEndpointConfig.getUserProperties().put(
+                        org.apache.tomcat.websocket.pojo.Constants.POJO_PATH_PARAM_KEY, pathParams);
             }
         } catch (InstantiationException e) {
             throw new ServletException(e);

==================================================
