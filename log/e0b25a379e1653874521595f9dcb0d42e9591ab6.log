e0b25a379e1653874521595f9dcb0d42e9591ab6
==================================================
Update terminology - thanks to review by kkolinko
==================================================
Mark Thomas
==================================================
Fri Jan 20 10:53:44 2023 +0000
==================================================
Http11Processor.java
Update terminology - thanks to review by kkolinko


==================================================
StreamProcessor.java
index 951d276593..ac23d73128 100644
--- a/java/org/apache/coyote/http11/Http11Processor.java
+++ b/java/org/apache/coyote/http11/Http11Processor.java
@@ -1057,6 +1057,8 @@ public class Http11Processor extends AbstractProcessor {
             headers.setValue("Server").setString(server);
         }
 
+        // Exclude some HTTP header fields where the value is determined only
+        // while generating the content as per section 9.3.2 of RFC 9110.
         if (head) {
             headers.removeHeader("content-length");
             headers.removeHeader("content-range");

==================================================
HttpServletDoHeadBaseTest.java
index acd9dce237..dba23bd09c 100644
--- a/java/org/apache/coyote/http2/StreamProcessor.java
+++ b/java/org/apache/coyote/http2/StreamProcessor.java
@@ -221,7 +221,8 @@ class StreamProcessor extends AbstractProcessor {
             headers.addValue("date").setString(FastHttpDateFormat.getCurrentDate());
         }
 
-        // Remove payload headers for HEAD requests
+        // Exclude some HTTP header fields where the value is determined only
+        // while generating the content as per section 9.3.2 of RFC 9110.
         if (coyoteRequest != null && "HEAD".equals(coyoteRequest.method().toString())) {
             headers.removeHeader("content-length");
             headers.removeHeader("content-range");

==================================================
TestHttpServlet.java
index e513be2430..a8842431f3 100644
--- a/test/jakarta/servlet/http/HttpServletDoHeadBaseTest.java
+++ b/test/jakarta/servlet/http/HttpServletDoHeadBaseTest.java
@@ -97,8 +97,9 @@ public class HttpServletDoHeadBaseTest extends Http2TestBase {
 
         // Headers should be the same part from:
         // - Date header may be different
-        // - HEAD requests don't include payload headers
-        //   (RFC 7231, section 4.3.2)
+        // Exclude some HTTP header fields where the value is determined only
+        // while generating the content as per section 9.3.2 of RFC 9110.
+        // (previously RFC 7231, section 4.3.2)
         getHeaders.remove("content-length");
         getHeaders.remove("content-range");
         getHeaders.remove("trailer");
@@ -168,7 +169,9 @@ public class HttpServletDoHeadBaseTest extends Http2TestBase {
             int i = 0;
             int j = 0;
             for (; i < getHeaders.length; i++) {
-                // Ignore payload headers
+                // Exclude some HTTP header fields where the value is determined
+                // only while generating the content as per section 9.3.2 of RFC
+                // 9110.
                 if (getHeaders[i].contains("content-length") || getHeaders[i].contains("content-range") ) {
                     // Skip
                 } else {

==================================================
