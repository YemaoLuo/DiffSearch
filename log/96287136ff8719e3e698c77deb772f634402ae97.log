96287136ff8719e3e698c77deb772f634402ae97
==================================================
Implement the Map construction syntax.
==================================================
Mark Emlyn
==================================================
Sun Jul 14 18:06:27 2013 +0000
==================================================
AstMapData.java
Implement the Map construction syntax.
Includes the initial unit tests for this syntax.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1503008 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TestAstMapData.java
index c12369300c..bd711c4b3a 100644
--- a/java/org/apache/el/parser/AstMapData.java
+++ b/java/org/apache/el/parser/AstMapData.java
@@ -17,10 +17,40 @@
 /* Generated By:JJTree: Do not edit this line. AstMapData.java Version 4.3 */
 package org.apache.el.parser;
 
-public
-class AstMapData extends SimpleNode {
-  public AstMapData(int id) {
-    super(id);
-  }
+import java.util.HashMap;
+import java.util.Map;
+
+import javax.el.ELException;
+
+import org.apache.el.lang.EvaluationContext;
+
+public class AstMapData extends SimpleNode {
+
+    public AstMapData(int id) {
+        super(id);
+    }
+
+
+    @Override
+    public Object getValue(EvaluationContext ctx) throws ELException {
+        Map<Object,Object> result = new HashMap<>();
+
+        if (children != null) {
+            for (Node child : children) {
+                AstMapEntry mapEntry = (AstMapEntry) child;
+                Object key = mapEntry.children[0].getValue(ctx);
+                Object value = mapEntry.children[1].getValue(ctx);
+                result.put(key, value);
+            }
+        }
+
+        return result;
+    }
+
+
+    @Override
+    public Class<?> getType(EvaluationContext ctx) throws ELException {
+        return Map.class;
+    }
 }
 /* JavaCC - OriginalChecksum=a68b5c6f0a0708f478fdf8c0e6e1263e (do not edit this line) */

==================================================
