6f866387d5b709a6e0e765afc73150ea18d48cfd
==================================================
When using a Java connector in combination with
==================================================
Rainer Jung
==================================================
Sat Aug 19 20:31:31 2017 +0000
==================================================
OpenSSLContext.java
When using a Java connector in combination with
the OpenSSL TLS implementation, do not configure
each SSL connection object via the OpenSSLEngine.
For OpenSSL the SSL object inherits its settings
from the SSL_CTX which we have already configured.


git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1805525 13f79535-47bb-0310-9956-ffa450edef68



==================================================
OpenSSLEngine.java
index 30a7baacc8..99689b7e97 100644
--- a/java/org/apache/tomcat/util/net/openssl/OpenSSLContext.java
+++ b/java/org/apache/tomcat/util/net/openssl/OpenSSLContext.java
@@ -413,7 +413,7 @@ public class OpenSSLContext implements org.apache.tomcat.util.net.SSLContext {
     @Override
     public SSLEngine createSSLEngine() {
         return new OpenSSLEngine(ctx, defaultProtocol, false, sessionContext,
-                (negotiableProtocols != null && negotiableProtocols.size() > 0));
+                (negotiableProtocols != null && negotiableProtocols.size() > 0), initialized);
     }
 
     @Override

==================================================
