c8635d86618ebc5db486e12a63ad9cb843da6cf2
==================================================
Pull up sendAck()
==================================================
Mark Thomas
==================================================
Thu Jan 8 13:10:10 2015 +0000
==================================================
AbstractOutputBuffer.java
Pull up sendAck()

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1650272 13f79535-47bb-0310-9956-ffa450edef68



==================================================
InternalAprOutputBuffer.java
index 7a87632aa3..2c50b3cdb5 100644
--- a/java/org/apache/coyote/http11/AbstractOutputBuffer.java
+++ b/java/org/apache/coyote/http11/AbstractOutputBuffer.java
@@ -378,7 +378,15 @@ public abstract class AbstractOutputBuffer<S> implements OutputBuffer {
     }
 
 
-    public abstract void sendAck() throws IOException;
+    public void sendAck() throws IOException {
+        if (!committed) {
+            addToBB(Constants.ACK_BYTES, 0, Constants.ACK_BYTES.length);
+            if (flushBuffer(true)) {
+                throw new IOException(sm.getString("iob.failedwrite.ack"));
+            }
+        }
+    }
+
 
     /**
      * Commit the response.

==================================================
InternalNio2OutputBuffer.java
index 1bf748ea1c..27633546c6 100644
--- a/java/org/apache/coyote/http11/InternalAprOutputBuffer.java
+++ b/java/org/apache/coyote/http11/InternalAprOutputBuffer.java
@@ -87,22 +87,6 @@ public class InternalAprOutputBuffer extends AbstractOutputBuffer<Long> {
     }
 
 
-    // ------------------------------------------------ HTTP/1.1 Output Methods
-
-    /**
-     * Send an acknowledgment.
-     */
-    @Override
-    public void sendAck() throws IOException {
-        if (!committed) {
-            addToBB(Constants.ACK_BYTES, 0, Constants.ACK_BYTES.length);
-            if (flushBuffer(true)) {
-                throw new IOException(sm.getString("iob.failedwrite.ack"));
-            }
-        }
-    }
-
-
     // ------------------------------------------------------ Protected Methods
 
     @Override

==================================================
InternalNioOutputBuffer.java
index 6782e7e294..dc25e76665 100644
--- a/java/org/apache/coyote/http11/InternalNio2OutputBuffer.java
+++ b/java/org/apache/coyote/http11/InternalNio2OutputBuffer.java
@@ -223,18 +223,6 @@ public class InternalNio2OutputBuffer extends AbstractOutputBuffer<Nio2Channel>
         writeBufferFlipped = false;
     }
 
-    // ------------------------------------------------ HTTP/1.1 Output Methods
-
-    /**
-     * Send an acknowledgment.
-     */
-    @Override
-    public void sendAck() throws IOException {
-        if (!committed) {
-            addToBB(Constants.ACK_BYTES, 0, Constants.ACK_BYTES.length);
-            flushBuffer(true);
-        }
-    }
 
     // ------------------------------------------------------ Protected Methods
 

==================================================
