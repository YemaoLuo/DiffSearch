aafdd78f716832103a1dc9ee80a89ee8002a7f3f
==================================================
Refactoring towards v014 API (not yet complete)
==================================================
Mark Emlyn
==================================================
Wed Mar 6 14:18:57 2013 +0000
==================================================
SessionException.java
Refactoring towards v014 API (not yet complete)

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1453340 13f79535-47bb-0310-9956-ffa450edef68



==================================================
WebSocketContainer.java
new file mode 100644
index 0000000000..428b82ec04
--- /dev/null
+++ b/java/javax/websocket/SessionException.java
@@ -0,0 +1,35 @@
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *     http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package javax.websocket;
+
+public class SessionException extends Exception {
+
+    private static final long serialVersionUID = 1L;
+
+    private final Session session;
+
+
+    public SessionException(String message, Throwable cause, Session session) {
+        super(message, cause);
+        this.session = session;
+    }
+
+
+    public Session getSession() {
+        return session;
+    }
+}

==================================================
WsWebSocketContainer.java
index d116da2cf6..bfd98e2d2d 100644
--- a/java/javax/websocket/WebSocketContainer.java
+++ b/java/javax/websocket/WebSocketContainer.java
@@ -34,9 +34,31 @@ public interface WebSocketContainer {
      */
     void setAsyncSendTimeout(long timeout);
 
+    Session connectToServer(Object endpoint, URI path)
+            throws DeploymentException, IOException;
+
     Session connectToServer(Class<?> annotatedEndpointClass, URI path)
             throws DeploymentException, IOException;
 
+    /**
+     * Creates a new connection to the WebSocket.
+     *
+     * @param endpoint
+     *            The endpoint instance that will handle responses from the
+     *            server
+     * @param clientEndpointConfiguration
+     *            Used to configure the new connection
+     * @param path
+     *            The full URL of the WebSocket endpoint to connect to
+     *
+     * @return The WebSocket session for the connection
+     *
+     * @throws DeploymentException  If the connection can not be established
+     */
+    Session connectToServer(Endpoint endpoint,
+            ClientEndpointConfig clientEndpointConfiguration, URI path)
+            throws DeploymentException, IOException;
+
     /**
      * Creates a new connection to the WebSocket.
      *

==================================================
