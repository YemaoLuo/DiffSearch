8287fc305224f499035e29447ce15e407fd4a19d
==================================================
Skip maxConnections test, and unskip internal upgrade handler test.
==================================================
Remy Maucherat
==================================================
Tue Jul 21 14:51:22 2015 +0000
==================================================
TestMaxConnections.java
Skip maxConnections test, and unskip internal upgrade handler test.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1692139 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TestUpgradeInternalHandler.java
index c2c3529bf0..449256022b 100644
--- a/test/org/apache/catalina/connector/TestMaxConnections.java
+++ b/test/org/apache/catalina/connector/TestMaxConnections.java
@@ -24,6 +24,7 @@ import javax.servlet.http.HttpServletRequest;
 import javax.servlet.http.HttpServletResponse;
 
 import org.junit.Assert;
+import org.junit.Assume;
 import org.junit.Test;
 
 import org.apache.catalina.core.StandardContext;
@@ -39,6 +40,8 @@ public class TestMaxConnections extends TomcatBaseTest {
     @Test
     public void testConnector() throws Exception {
         init();
+        Assume.assumeFalse("This feature is not available for NIO2 (BZ58103)",
+                getTomcatInstance().getConnector().getProtocolHandlerClassName().contains("Nio2"));
         ConnectThread[] t = new ConnectThread[10];
         for (int i=0; i<t.length; i++) {
             t[i] = new ConnectThread();

==================================================
