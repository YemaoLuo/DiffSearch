cccd0ac67e484eff19742d1897ebbd3fa3bf19e3
==================================================
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54971
==================================================
Mark Emlyn
==================================================
Tue May 28 14:37:50 2013 +0000
==================================================
Request.java
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=54971
Pass the calculated location to AplicationPart rather than it having to recalculate it every time. Now correctly handles relative locations.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1486939 13f79535-47bb-0310-9956-ffa450edef68



==================================================
ApplicationPart.java
index 940ca21f87..a9357e2be6 100644
--- a/java/org/apache/catalina/connector/Request.java
+++ b/java/org/apache/catalina/connector/Request.java
@@ -2621,7 +2621,7 @@ public class Request
                     }
                 }
                 for (FileItem item : items) {
-                    ApplicationPart part = new ApplicationPart(item, mce);
+                    ApplicationPart part = new ApplicationPart(item, location);
                     parts.add(part);
                     if (part.getSubmittedFileName() == null) {
                         String name = part.getName();

==================================================
