08eae2bbe9cee174a56cefd5b61546a73f584757
==================================================
Avoid use of Class.newInstance()
==================================================
Mark Thomas
==================================================
Tue Jul 27 16:47:54 2021 +0100
==================================================
Catalina.java
Avoid use of Class.newInstance()


==================================================
NamingContext.java
index 69f22a08dc..d1e1705434 100644
--- a/java/org/apache/catalina/startup/Catalina.java
+++ b/java/org/apache/catalina/startup/Catalina.java
@@ -583,8 +583,8 @@ public class Catalina {
             // Load loader
             String loaderClassName = generatedCodePackage + ".DigesterGeneratedCodeLoader";
             try {
-                Digester.GeneratedCodeLoader loader =
-                        (Digester.GeneratedCodeLoader) Catalina.class.getClassLoader().loadClass(loaderClassName).newInstance();
+                Digester.GeneratedCodeLoader loader = (Digester.GeneratedCodeLoader)
+                        Catalina.class.getClassLoader().loadClass(loaderClassName).getDeclaredConstructor().newInstance();
                 Digester.setGeneratedCodeLoader(loader);
             } catch (Exception e) {
                 if (log.isDebugEnabled()) {

==================================================
