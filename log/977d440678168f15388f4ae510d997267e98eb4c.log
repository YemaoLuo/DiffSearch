977d440678168f15388f4ae510d997267e98eb4c
==================================================
socketWrapper.secure is no longer used
==================================================
Mark Thomas
==================================================
Fri Jun 26 16:12:34 2020 +0100
==================================================
AprEndpoint.java
socketWrapper.secure is no longer used

It is used in 7.0.x to trigger additional debug logging.


==================================================
Nio2Endpoint.java
index ec9deeea55..3996087200 100644
--- a/java/org/apache/tomcat/util/net/AprEndpoint.java
+++ b/java/org/apache/tomcat/util/net/AprEndpoint.java
@@ -680,7 +680,6 @@ public class AprEndpoint extends AbstractEndpoint<Long,Long> implements SNICallB
             AprSocketWrapper wrapper = new AprSocketWrapper(socket, this);
             connections.put(socket, wrapper);
             wrapper.setKeepAliveLeft(getMaxKeepAliveRequests());
-            wrapper.setSecure(isSSLEnabled());
             wrapper.setReadTimeout(getConnectionTimeout());
             wrapper.setWriteTimeout(getConnectionTimeout());
             getExecutor().execute(new SocketWithOptionsProcessor(wrapper));

==================================================
NioEndpoint.java
index e54a90e016..2e3a5af5b2 100644
--- a/java/org/apache/tomcat/util/net/Nio2Endpoint.java
+++ b/java/org/apache/tomcat/util/net/Nio2Endpoint.java
@@ -319,7 +319,6 @@ public class Nio2Endpoint extends AbstractJsseEndpoint<Nio2Channel,AsynchronousS
             socketWrapper.setReadTimeout(getConnectionTimeout());
             socketWrapper.setWriteTimeout(getConnectionTimeout());
             socketWrapper.setKeepAliveLeft(Nio2Endpoint.this.getMaxKeepAliveRequests());
-            socketWrapper.setSecure(isSSLEnabled());
             // Continue processing on the same thread as the acceptor is async
             return processSocket(socketWrapper, SocketEvent.OPEN_READ, false);
         } catch (Throwable t) {

==================================================
SocketWrapperBase.java
index ce7dfc5b2b..9bff87422a 100644
--- a/java/org/apache/tomcat/util/net/NioEndpoint.java
+++ b/java/org/apache/tomcat/util/net/NioEndpoint.java
@@ -366,7 +366,6 @@ public class NioEndpoint extends AbstractJsseEndpoint<NioChannel,SocketChannel>
             socketWrapper.setReadTimeout(getConnectionTimeout());
             socketWrapper.setWriteTimeout(getConnectionTimeout());
             socketWrapper.setKeepAliveLeft(NioEndpoint.this.getMaxKeepAliveRequests());
-            socketWrapper.setSecure(isSSLEnabled());
             poller.register(channel, socketWrapper);
             return true;
         } catch (Throwable t) {

==================================================
