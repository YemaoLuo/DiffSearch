f528b957e1c3460c8c1b3ab9930109e7eb20c70c
==================================================
Deprecate code that will be removed in Tomcat 10.1
==================================================
Mark Thomas
==================================================
Thu Jun 16 14:35:20 2022 +0100
==================================================
Constants.java
Deprecate code that will be removed in Tomcat 10.1

As of WebSocket 2.1, the deployment restriction described in section 6.4
of the Jakarta WebSocket specification is removed so these settings will
no longer be required.



==================================================
Constants.java
index 85a60347b4..73503186e4 100644
--- a/java/org/apache/tomcat/websocket/Constants.java
+++ b/java/org/apache/tomcat/websocket/Constants.java
@@ -140,6 +140,13 @@ public class Constants {
     public static final String WS_AUTHENTICATION_USER_NAME = "org.apache.tomcat.websocket.WS_AUTHENTICATION_USER_NAME";
     public static final String WS_AUTHENTICATION_PASSWORD = "org.apache.tomcat.websocket.WS_AUTHENTICATION_PASSWORD";
 
+    /**
+     * WebSocket specification compliance flag.
+     *
+     * @deprecated  This is no longer required in Jakarta EE 10 onwards and will
+     *              be removed in Tomcat 10.1.
+     */
+    @Deprecated
     public static final boolean STRICT_SPEC_COMPLIANCE =
             Boolean.getBoolean("org.apache.tomcat.websocket.STRICT_SPEC_COMPLIANCE");
 

==================================================
WsServerContainer.java
index 16768617d8..e900a540a9 100644
--- a/java/org/apache/tomcat/websocket/server/Constants.java
+++ b/java/org/apache/tomcat/websocket/server/Constants.java
@@ -25,6 +25,15 @@ public class Constants {
             "org.apache.tomcat.websocket.binaryBufferSize";
     public static final String TEXT_BUFFER_SIZE_SERVLET_CONTEXT_INIT_PARAM =
             "org.apache.tomcat.websocket.textBufferSize";
+
+    /**
+     * Allows the deployment restriction defined in section 6.4 of the Jakarta
+     * WebSocket specification to be ignored.
+     *
+     * @deprecated  This is no longer required in Jakarta EE 10 onwards and will
+     *              be removed in Tomcat 10.1.
+     */
+    @Deprecated
     public static final String ENFORCE_NO_ADD_AFTER_HANDSHAKE_CONTEXT_INIT_PARAM =
             "org.apache.tomcat.websocket.noAddAfterHandshake";
 

==================================================
