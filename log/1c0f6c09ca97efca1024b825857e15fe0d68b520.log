1c0f6c09ca97efca1024b825857e15fe0d68b520
==================================================
Re-package as per kkolinko's review
==================================================
Mark Emlyn
==================================================
Mon Nov 26 10:54:46 2012 +0000
==================================================
ContainerProvider.java
index 58879e644b..a4c975aa28 100644
--- a/build.xml
+++ b/build.xml
@@ -89,7 +89,7 @@
   <property name="jsp-api.jar" value="${tomcat.build}/lib/jsp-api.jar"/>
   <property name="el-api.jar" value="${tomcat.build}/lib/el-api.jar"/>
   <property name="websocket-api.jar" value="${tomcat.build}/lib/websocket-api.jar"/>
-  <property name="websocket-impl.jar" value="${tomcat.build}/lib/websocket-impl.jar"/>
+  <property name="tomcat-websocket.jar" value="${tomcat.build}/lib/tomcat-websocket.jar"/>
   <property name="catalina.jar" value="${tomcat.build}/lib/catalina.jar"/>
   <property name="catalina-tribes.jar" value="${tomcat.build}/lib/catalina-tribes.jar"/>
   <property name="catalina-ha.jar" value="${tomcat.build}/lib/catalina-ha.jar"/>
@@ -115,7 +115,7 @@
   <property name="jsp-api-src.jar" value="${tomcat.src.jars}/jsp-api-src.jar"/>
   <property name="el-api-src.jar" value="${tomcat.src.jars}/el-api-src.jar"/>
   <property name="websocket-api-src.jar" value="${tomcat.src.jars}/websocket-api-src.jar"/>
-  <property name="websocket-impl-src.jar" value="${tomcat.src.jars}/websocket-impl-src.jar"/>
+  <property name="tomcat-websocket-src.jar" value="${tomcat.src.jars}/tomcat-websocket-src.jar"/>
   <property name="catalina-src.jar" value="${tomcat.src.jars}/catalina-src.jar"/>
   <property name="catalina-tribes-src.jar" value="${tomcat.src.jars}/catalina-tribes-src.jar"/>
   <property name="catalina-ha-src.jar" value="${tomcat.src.jars}/catalina-ha-src.jar"/>
@@ -287,8 +287,8 @@
     <include name="javax/websocket/**" />
   </patternset>
 
-  <patternset id="files.websocket-impl">
-    <include name="org/apache/websocket/**" />
+  <patternset id="files.tomcat-websocket">
+    <include name="org/apache/tomcat/websocket/**" />
   </patternset>
 
   <patternset id="files.bootstrap">
@@ -382,7 +382,7 @@
     <patternset refid="files.el-api" />
     <patternset refid="files.servlet-api" />
     <patternset refid="files.websocket-api" />
-    <patternset refid="files.websocket-impl" />
+    <patternset refid="files.tomcat-websocket" />
     <patternset refid="files.tomcat-api" />
     <!-- These pattern sets conflict so include files directly
       <patternset refid="files.tomcat-coyote" />
@@ -670,10 +670,10 @@
       manifest="${tomcat.manifests}/websocket-api.jar.manifest" />
 
     <!-- WebSocket 1.0 implementation JAR File -->
-    <jarIt jarfile="${websocket-impl.jar}"
+    <jarIt jarfile="${tomcat-websocket.jar}"
       filesDir="${tomcat.classes}"
-      filesId="files.websocket-impl"
-      meta-inf="${tomcat.manifests}/websocket-impl.jar"/>
+      filesId="files.tomcat-websocket"
+      meta-inf="${tomcat.manifests}/tomcat-websocket.jar"/>
 
     <!-- Bootstrap JAR File -->
     <jarIt jarfile="${bootstrap.jar}"
@@ -1723,7 +1723,7 @@ Apache Tomcat ${version} native binaries for Win64 AMD64/EMT64 platform.
         <include name="jasper-el.jar"/>
         <include name="servlet-api.jar"/>
         <include name="websocket-api.jar"/>
-        <include name="websocket-impl.jar"/>
+        <include name="tomcat-websocket.jar"/>
         <include name="tomcat-coyote.jar"/>
         <include name="tomcat-util.jar"/>
       </fileset>
@@ -2260,9 +2260,9 @@ Apache Tomcat ${version} native binaries for Win64 AMD64/EMT64 platform.
       manifest="${tomcat.manifests}/websocket-api.jar.manifest" />
 
     <!-- WebSocket 1.0 implementation JAR File -->
-    <jarIt jarfile="${websocket-impl-src.jar}"
+    <jarIt jarfile="${tomcat-websocket-src.jar}"
       filesDir="java"
-      filesId="files.websocket-impl" />
+      filesId="files.tomcat-websocket" />
 
     <!-- Bootstrap JAR File -->
     <jarIt jarfile="${bootstrap-src.jar}"

==================================================
ClientContainerImpl.java
index 8f7ceff792..074d24a408 100644
--- a/java/javax/websocket/ContainerProvider.java
+++ b/java/javax/websocket/ContainerProvider.java
@@ -22,7 +22,7 @@ import java.lang.reflect.Method;
 public class ContainerProvider {
 
     private static final String CONTAINER_PROVIDER_IMPL =
-            "org.apache.websocket.ServerContainerImpl";
+            "org.apache.tomcat.websocket.ServerContainerImpl";
 
     public static ServerContainer getServerContainer() {
         // TODO SecurityManager

==================================================
ServerContainerImpl.java
similarity index 98%
rename from java/org/apache/websocket/ClientContainerImpl.java
rename to java/org/apache/tomcat/websocket/ClientContainerImpl.java
index f42836de20..006980af92 100644
--- a/java/org/apache/websocket/ClientContainerImpl.java
+++ b/java/org/apache/tomcat/websocket/ClientContainerImpl.java
@@ -14,7 +14,7 @@
  *  See the License for the specific language governing permissions and
  *  limitations under the License.
  */
-package org.apache.websocket;
+package org.apache.tomcat.websocket;
 
 import java.net.URI;
 import java.util.Set;

==================================================
Util.java
similarity index 98%
rename from java/org/apache/websocket/ServerContainerImpl.java
rename to java/org/apache/tomcat/websocket/ServerContainerImpl.java
index 42e3bcdb2a..46f9b191ec 100644
--- a/java/org/apache/websocket/ServerContainerImpl.java
+++ b/java/org/apache/tomcat/websocket/ServerContainerImpl.java
@@ -14,7 +14,7 @@
  *  See the License for the specific language governing permissions and
  *  limitations under the License.
  */
-package org.apache.websocket;
+package org.apache.tomcat.websocket;
 
 import java.util.Map;
 import java.util.WeakHashMap;

==================================================
WsSci.java
similarity index 97%
rename from java/org/apache/websocket/Util.java
rename to java/org/apache/tomcat/websocket/Util.java
index 853a416d18..5d35e6985e 100644
--- a/java/org/apache/websocket/Util.java
+++ b/java/org/apache/tomcat/websocket/Util.java
@@ -14,7 +14,7 @@
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
-package org.apache.websocket;
+package org.apache.tomcat.websocket;
 
 class Util {
 

==================================================
WsServlet.java
similarity index 97%
rename from java/org/apache/websocket/WsSci.java
rename to java/org/apache/tomcat/websocket/WsSci.java
index 50b3d2d0c5..5de9c0f1bf 100644
--- a/java/org/apache/websocket/WsSci.java
+++ b/java/org/apache/tomcat/websocket/WsSci.java
@@ -14,7 +14,7 @@
  *  See the License for the specific language governing permissions and
  *  limitations under the License.
  */
-package org.apache.websocket;
+package org.apache.tomcat.websocket;
 
 import java.util.Set;
 

==================================================
TestUtil.java
index 1894b732f9..f7fc98b276 100644
--- a/res/checkstyle/org-import-control.xml
+++ b/res/checkstyle/org-import-control.xml
@@ -137,11 +137,11 @@
         <allow pkg="org.apache.tomcat" exact-match="true"/>
       </subpackage>
     </subpackage>
-  </subpackage>
-  <subpackage name="websocket">
-    <allow pkg="javax.servlet"/>
-    <allow pkg="javax.websocket"/>
-    <allow pkg="org.apache.juli"/>
-    <allow pkg="org.apache.tomcat.util"/>
+    <subpackage name="websocket">
+      <allow pkg="javax.servlet"/>
+      <allow pkg="javax.websocket"/>
+      <allow pkg="org.apache.juli"/>
+      <allow pkg="org.apache.tomcat.util"/>
+    </subpackage>
   </subpackage>
 </import-control>
\ No newline at end of file

==================================================
