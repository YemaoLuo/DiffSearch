c06cab3bd837b4330988d1275b524908470bed40
==================================================
Move storage location to a dir that is ignored by svn/git
==================================================
Mark Thomas
==================================================
Mon Nov 12 10:16:31 2018 +0000
==================================================
Constants.java
Move storage location to a dir that is ignored by svn/git

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1846389 13f79535-47bb-0310-9956-ffa450edef68



==================================================
Export.java
index 5e8be13eba..403daa6a38 100644
--- a/java/org/apache/tomcat/buildutil/translate/Constants.java
+++ b/java/org/apache/tomcat/buildutil/translate/Constants.java
@@ -23,5 +23,7 @@ public class Constants {
 
     public static final String[] SEARCH_DIRS = new String[] { "java", "webapps" };
 
+    public static final String STORAGE_DIR = ".settings/translations";
+
     public static final String END_PACKAGE_MARKER = ".zzz.";
 }

==================================================
Import.java
index 26cf91849d..604adfad56 100644
--- a/java/org/apache/tomcat/buildutil/translate/Export.java
+++ b/java/org/apache/tomcat/buildutil/translate/Export.java
@@ -110,6 +110,12 @@ public class Export {
 
 
     private static void outputTranslations() {
+
+        File storageDir = new File(Constants.STORAGE_DIR);
+        if (!storageDir.exists()) {
+            storageDir.mkdirs();
+        }
+
         for (Map.Entry<String,Properties> translationEntry : translations.entrySet()) {
             Properties translation = translationEntry.getValue();
 
@@ -118,7 +124,7 @@ public class Export {
                 language = "_" + language;
             }
 
-            File out = new File(Constants.L10N_PREFIX + language + Constants.L10N_SUFFIX);
+            File out = new File(storageDir, Constants.L10N_PREFIX + language + Constants.L10N_SUFFIX);
             try (FileOutputStream fos = new FileOutputStream(out);
                     Writer w = new OutputStreamWriter(fos, StandardCharsets.UTF_8)) {
                 for (Object key : translation.keySet()) {

==================================================
