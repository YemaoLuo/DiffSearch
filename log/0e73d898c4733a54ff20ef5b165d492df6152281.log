0e73d898c4733a54ff20ef5b165d492df6152281
==================================================
First pass at reducing false failures on CI system.
==================================================
Mark Thomas
==================================================
Thu Feb 5 14:28:37 2015 +0000
==================================================
TesterAccessLogValve.java
index 0a0d298c9c..dff3436f0f 100644
--- a/build.xml
+++ b/build.xml
@@ -168,6 +168,7 @@
   <!-- Tests To Run -->
   <property name="test.name" value="**/Test*.java"/>
   <property name="test.formatter" value="-Dorg.apache.juli.formatter=java.util.logging.SimpleFormatter"/>
+  <property name="test.relaxTiming" value="false"/>
 
   <!-- Cobertura code coverage settings -->
   <property name="cobertura.out" value="${tomcat.output}/coverage"/>
@@ -1413,6 +1414,7 @@
         <sysproperty key="tomcat.test.accesslog" value="${test.accesslog}" />
         <sysproperty key="tomcat.test.reports" value="${test.reports}" />
         <sysproperty key="tomcat.test.openssl.path" value="${test.openssl.path}" />
+      	<sysproperty key="tomcat.test.relaxTiming" value="${test.relaxTiming}" /> 
         <!-- File for Cobertura to write coverage results to -->
         <sysproperty key="net.sourceforge.cobertura.datafile" file="${cobertura.datafile}" />
 
@@ -1436,7 +1438,9 @@
             <!-- Exclude the tests known to fail -->
             <exclude name="org/apache/catalina/tribes/test/**" />
             <!-- Exclude the OpenSSL tests unless OpenSSL is available -->
-            <exclude name="org/apache/tomcat/util/net/jsse/openssl/**" unless="${test.openssl.exists}"/>
+            <exclude name="org/apache/tomcat/util/net/jsse/openssl/**" unless="${test.openssl.exists}" />
+          	<!-- Exclude performance tests. E.g. on systems with slow/inconsistent timing -->
+          	<exclude name="**/*Performance.java" if="${test.excludePerformance}" />
           </fileset>
         </batchtest>
       </junit>

==================================================
