d0aa09cb14ccd98799aef97a267547e3afa696a0
==================================================
Use chunked encoding for http 1.1 requests with no content-length (regardless of keep-alive) so client can differentiate between complete and partial responses.
==================================================
Mark Emlyn
==================================================
Wed Apr 7 22:17:19 2010 +0000
==================================================
Http11AprProcessor.java
Use chunked encoding for http 1.1 requests with no content-length (regardless of keep-alive) so client can differentiate between complete and partial responses.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@931709 13f79535-47bb-0310-9956-ffa450edef68



==================================================
Http11NioProcessor.java
index e6af29cb4e..b5d6483844 100644
--- a/java/org/apache/coyote/http11/Http11AprProcessor.java
+++ b/java/org/apache/coyote/http11/Http11AprProcessor.java
@@ -1646,7 +1646,7 @@ public class Http11AprProcessor implements ActionHook {
                 (outputFilters[Constants.IDENTITY_FILTER]);
             contentDelimitation = true;
         } else {
-            if (entityBody && http11 && keepAlive) {
+            if (entityBody && http11) {
                 outputBuffer.addActiveFilter
                     (outputFilters[Constants.CHUNKED_FILTER]);
                 contentDelimitation = true;

==================================================
Http11Processor.java
index 3eeb5bd750..e6ab0cedc1 100644
--- a/java/org/apache/coyote/http11/Http11NioProcessor.java
+++ b/java/org/apache/coyote/http11/Http11NioProcessor.java
@@ -1146,7 +1146,7 @@ public class Http11NioProcessor extends AbstractHttp11Processor implements Actio
                 (outputFilters[Constants.IDENTITY_FILTER]);
             contentDelimitation = true;
         } else {
-            if (entityBody && http11 && keepAlive) {
+            if (entityBody && http11) {
                 outputBuffer.addActiveFilter
                     (outputFilters[Constants.CHUNKED_FILTER]);
                 contentDelimitation = true;

==================================================
