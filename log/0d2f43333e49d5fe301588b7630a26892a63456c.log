0d2f43333e49d5fe301588b7630a26892a63456c
==================================================
UCDetector
==================================================
Mark Emlyn
==================================================
Sat Feb 16 22:33:26 2013 +0000
==================================================
XMLChar.java
UCDetector
 - use final
 - reduce visibility
 - remove unused code

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1446968 13f79535-47bb-0310-9956-ffa450edef68



==================================================
XMLEncodingDetector.java
index 3c4a8d3a24..8ef51e189d 100644
--- a/java/org/apache/jasper/xmlparser/XMLChar.java
+++ b/java/org/apache/jasper/xmlparser/XMLChar.java
@@ -843,32 +843,4 @@ public class XMLChar {
         }
         return false;
     } // isValidIANAEncoding(String):boolean
-
-    /**
-     * Returns true if the encoding name is a valid Java encoding.
-     * This method does not verify that there is a decoder available
-     * for this encoding, only that the characters are valid for an
-     * Java encoding name.
-     *
-     * @param javaEncoding The Java encoding name.
-     */
-    public static boolean isValidJavaEncoding(String javaEncoding) {
-        if (javaEncoding != null) {
-            int length = javaEncoding.length();
-            if (length > 0) {
-                for (int i = 1; i < length; i++) {
-                    char c = javaEncoding.charAt(i);
-                    if ((c < 'A' || c > 'Z') && (c < 'a' || c > 'z') &&
-                        (c < '0' || c > '9') && c != '.' && c != '_' &&
-                        c != '-') {
-                        return false;
-                    }
-                }
-                return true;
-            }
-        }
-        return false;
-    } // isValidIANAEncoding(String):boolean
-
-
 } // class XMLChar

==================================================
XMLStringBuffer.java
index d794cb3470..9397ee655e 100644
--- a/java/org/apache/jasper/xmlparser/XMLEncodingDetector.java
+++ b/java/org/apache/jasper/xmlparser/XMLEncodingDetector.java
@@ -50,10 +50,10 @@ public class XMLEncodingDetector {
     private Reader reader;
 
     // org.apache.xerces.impl.XMLEntityManager fields
-    public static final int DEFAULT_BUFFER_SIZE = 2048;
-    public static final int DEFAULT_XMLDECL_BUFFER_SIZE = 64;
-    private SymbolTable fSymbolTable;
-    private XMLEncodingDetector fCurrentEntity;
+    private static final int DEFAULT_BUFFER_SIZE = 2048;
+    private static final int DEFAULT_XMLDECL_BUFFER_SIZE = 64;
+    private final SymbolTable fSymbolTable;
+    private final XMLEncodingDetector fCurrentEntity;
     private int fBufferSize = DEFAULT_BUFFER_SIZE;
 
     // org.apache.xerces.impl.XMLEntityManager.ScannedEntity fields
@@ -62,15 +62,15 @@ public class XMLEncodingDetector {
     private int count;
 
     // org.apache.xerces.impl.XMLScanner fields
-    private XMLString fString = new XMLString();
-    private XMLStringBuffer fStringBuffer = new XMLStringBuffer();
-    private XMLStringBuffer fStringBuffer2 = new XMLStringBuffer();
+    private final XMLString fString = new XMLString();
+    private final XMLStringBuffer fStringBuffer = new XMLStringBuffer();
+    private final XMLStringBuffer fStringBuffer2 = new XMLStringBuffer();
     private static final String fVersionSymbol = "version";
     private static final String fEncodingSymbol = "encoding";
     private static final String fStandaloneSymbol = "standalone";
 
     // org.apache.xerces.impl.XMLDocumentFragmentScannerImpl fields
-    private String[] fStrings = new String[3];
+    private final String[] fStrings = new String[3];
 
     private ErrorDispatcher err;
 

==================================================
