0e100bdaf86977740a03309d115c6b251071bcf2
==================================================
59365: Avoid basing the test on the only portion of the output that is internationalized. (part 2)
==================================================
Remy Maucherat
==================================================
Fri Apr 22 08:38:17 2016 +0000
==================================================
TestMapperListener.java
59365: Avoid basing the test on the only portion of the output that is internationalized. (part 2)

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1740465 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TestMapperWebapps.java
index e3c3cc21b8..231d522ae4 100644
--- a/test/org/apache/catalina/mapper/TestMapperListener.java
+++ b/test/org/apache/catalina/mapper/TestMapperListener.java
@@ -59,7 +59,7 @@ public class TestMapperListener extends TomcatBaseTest {
         res = getUrl("http://localhost:" + getPort()
                 + "/examples/servlets/servlet/HelloWorldExample");
         text = res.toString();
-        Assert.assertTrue(text, text.contains("<h1>Hello World!</h1>"));
+        Assert.assertTrue(text, text.contains("<a href=\"../helloworld.html\">"));
 
         List<ListenersInfo> listenersFirst = new ArrayList<>();
         populateListenersInfo(listenersFirst, tomcat.getEngine());
@@ -70,7 +70,7 @@ public class TestMapperListener extends TomcatBaseTest {
         res = getUrl("http://localhost:" + getPort()
                 + "/examples/servlets/servlet/HelloWorldExample");
         text = res.toString();
-        Assert.assertTrue(text, text.contains("<h1>Hello World!</h1>"));
+        Assert.assertTrue(text, text.contains("<a href=\"../helloworld.html\">"));
 
         List<ListenersInfo> listenersSecond = new ArrayList<>();
         populateListenersInfo(listenersSecond, tomcat.getEngine());

==================================================
TestTomcat.java
index f9ed5d9ca5..eefce522ff 100644
--- a/test/org/apache/catalina/mapper/TestMapperWebapps.java
+++ b/test/org/apache/catalina/mapper/TestMapperWebapps.java
@@ -107,7 +107,7 @@ public class TestMapperWebapps extends TomcatBaseTest{
         res = getUrl("http://localhost:" + getPort()
                 + "/examples/servlets/servlet/HelloWorldExample");
         text = res.toString();
-        Assert.assertTrue(text, text.contains("<h1>Hello World!</h1>"));
+        Assert.assertTrue(text, text.contains("<a href=\"../helloworld.html\">"));
 
         res = getUrl("http://localhost:" + getPort()
                 + "/examples/jsp/jsp2/el/basic-arithmetic.jsp");
@@ -141,7 +141,7 @@ public class TestMapperWebapps extends TomcatBaseTest{
         res = getUrl("http://localhost:" + getPort()
                 + "/examples/servlets/servlet/HelloWorldExample");
         text = res.toString();
-        Assert.assertTrue(text, text.contains("<h1>Hello World!</h1>"));
+        Assert.assertTrue(text, text.contains("<a href=\"../helloworld.html\">"));
 
         res = getUrl("http://localhost:" + getPort()
                 + "/examples/jsp/jsp2/el/basic-arithmetic.jsp");

==================================================
