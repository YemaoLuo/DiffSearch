0c998188930bea10caadac85a02e625295b62e0f
==================================================
Re-factoring in support of https://issues.apache.org/bugzilla/show_bug.cgi?id=50360
==================================================
Mark Emlyn
==================================================
Wed Dec 8 13:06:46 2010 +0000
==================================================
AbstractProtocolHandler.java
Re-factoring in support of https://issues.apache.org/bugzilla/show_bug.cgi?id=50360
Pull up stop()

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1043399 13f79535-47bb-0310-9956-ffa450edef68



==================================================
AbstractAjpProtocol.java
index 9c50e53681..23f5c4c224 100644
--- a/java/org/apache/coyote/AbstractProtocolHandler.java
+++ b/java/org/apache/coyote/AbstractProtocolHandler.java
@@ -365,12 +365,27 @@ public abstract class AbstractProtocolHandler implements ProtocolHandler,
             endpoint.resume();
         } catch (Exception ex) {
             getLog().error(sm.getString("abstractProtocolHandler.actionError",
-                    "resule", getName()), ex);
+                    "resume", getName()), ex);
             throw ex;
         }
     }
 
 
+    @Override
+    public final void stop() throws Exception {
+        try {
+            endpoint.stop();
+        } catch (Exception ex) {
+            getLog().error(sm.getString("abstractProtocolHandler.action",
+                    "Stopping"), ex);
+            throw ex;
+        }
+        if(getLog().isInfoEnabled())
+            getLog().info(sm.getString("abstractProtocolHandler.actionError",
+                    "stop", getName()));
+    }
+
+
     @Override
     public final void destroy() {
         if(getLog().isInfoEnabled()) {

==================================================
AbstractHttp11Protocol.java
index 46256fcd06..9695d669a8 100644
--- a/java/org/apache/coyote/ajp/LocalStrings_es.properties
+++ b/java/org/apache/coyote/ajp/LocalStrings_es.properties
@@ -18,7 +18,6 @@ ajpprotocol.endpoint.starterror = Error arrancando punto final
 ajpprotocol.init = Inicializando Coyote AJP/1.3 en {0}
 ajpprotocol.proto.error = Error leyendo requerimiento, ignorado
 ajpprotocol.start = Arrancando Coyote AJP/1.3 en {0}
-ajpprotocol.stop = Parando Coyote AJP/1.3 en {0}
 ajpprotocol.failedread = Fallo en lectura de Conector
 ajpprotocol.failedwrite = Fallo en escritura de Conector
 ajpprotocol.request.register = Error registrando procesador de requerimiento en JMX

==================================================
