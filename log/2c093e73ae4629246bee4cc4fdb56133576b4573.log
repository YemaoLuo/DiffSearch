2c093e73ae4629246bee4cc4fdb56133576b4573
==================================================
Minor clean-up. Result is always converted to String so just do it once.
==================================================
Mark Emlyn
==================================================
Thu May 20 12:07:38 2010 +0000
==================================================
AbstractCatalinaTask.java
Minor clean-up. Result is always converted to String so just do it once.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@946604 13f79535-47bb-0310-9956-ffa450edef68



==================================================
JNDIRealm.java
index 411811dd88..480bacce30 100644
--- a/java/org/apache/catalina/ant/AbstractCatalinaTask.java
+++ b/java/org/apache/catalina/ant/AbstractCatalinaTask.java
@@ -199,7 +199,7 @@ public abstract class AbstractCatalinaTask extends BaseRedirectorHelperTask {
 
             // Set up an authorization header with our credentials
             String input = username + ":" + password;
-            String output = new String(Base64.encode(input.getBytes()));
+            String output = Base64.encode(input.getBytes());
             hconn.setRequestProperty("Authorization",
                                      "Basic " + output);
 

==================================================
ManagerBase.java
index 693f576b8a..4d509156a8 100644
--- a/java/org/apache/catalina/realm/JNDIRealm.java
+++ b/java/org/apache/catalina/realm/JNDIRealm.java
@@ -1474,8 +1474,7 @@ public class JNDIRealm extends RealmBase {
                     password = password.substring(5);
                     md.reset();
                     md.update(credentials.getBytes());
-                    String digestedPassword =
-                        new String(Base64.encode(md.digest()));
+                    String digestedPassword = Base64.encode(md.digest());
                     validated = password.equals(digestedPassword);
                 }
             } else if (password.startsWith("{SSHA}")) {

==================================================
Base64.java
index f3df1619fe..0e226167c0 100644
--- a/java/org/apache/catalina/session/ManagerBase.java
+++ b/java/org/apache/catalina/session/ManagerBase.java
@@ -400,7 +400,7 @@ public abstract class ManagerBase extends LifecycleMBeanBase
                 ExceptionUtils.handleThrowable(t);
             }
             if (apr) {
-                setEntropy(new String(Base64.encode(result)));
+                setEntropy(Base64.encode(result));
             } else {
                 setEntropy(this.toString());
             }

==================================================
