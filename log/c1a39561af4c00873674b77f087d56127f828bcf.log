c1a39561af4c00873674b77f087d56127f828bcf
==================================================
Fix test case failure. flip Byte/Char buffers in the right places.
==================================================
Mark Emlyn
==================================================
Tue Feb 21 21:13:54 2012 +0000
==================================================
MessageInbound.java
Fix test case failure. flip Byte/Char buffers in the right places.
Rename method since it ma be writing a binary or text message.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1292030 13f79535-47bb-0310-9956-ffa450edef68



==================================================
WsOutbound.java
index 834db35bbb..5948ddbb9e 100644
--- a/java/org/apache/catalina/websocket/MessageInbound.java
+++ b/java/org/apache/catalina/websocket/MessageInbound.java
@@ -56,8 +56,7 @@ public abstract class MessageInbound extends StreamInbound {
             }
             read = r.read(cb.array(), cb.position(), cb.remaining());
         }
-        cb.limit(cb.position());
-        cb.position(0);
+        cb.flip();
         onTextMessage(cb);
         cb.clear();
     }

==================================================
