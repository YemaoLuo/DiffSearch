4ed2dc843a59ef204f93082d610f8d6f547051ab
==================================================
Rename "javax.annotation.*" to "jakarta.annotation.*"
==================================================
Mark Thomas
==================================================
Wed Nov 27 23:25:20 2019 +0000
==================================================
Generated.java
index 4141d0a885..133fb74dd1 100644
--- a/build.xml
+++ b/build.xml
@@ -327,7 +327,7 @@
   <!-- ========= Pattern sets used to control content of JAR files ========= -->
   <!-- Pattern sets for jar files in standard distributions -->
   <patternset id="files.annotations-api">
-    <include name="javax/annotation/**" />
+    <include name="jakarta/annotation/**" />
   </patternset>
 
   <patternset id="files.servlet-api">
@@ -627,6 +627,12 @@
         <exclude name="build.properties" />
       </fileset>
     </checkstyle>
+    <!-- jakarta package checks -->
+    <checkstyle config="res/checkstyle/jakarta-checkstyle.xml">
+      <fileset dir="java/jakarta" >
+        <include name="**/*.java"/>
+      </fileset>
+    </checkstyle>
     <!-- javax package checks -->
     <checkstyle config="res/checkstyle/javax-checkstyle.xml">
       <fileset dir="java/javax" >
@@ -1879,7 +1885,7 @@ Apache Tomcat ${version} native binaries for Win64 AMD64/EMT64 platform.
 
   <target name="javadoc" depends="dist-source"
     description="Create the Tomcat javadoc" >
-    <javadoc packagenames="javax.annotation.*"
+    <javadoc packagenames="jakarta.annotation.*"
       sourcepath="${tomcat.dist}/src/java"
       destdir="${tomcat.dist}/webapps/docs/annotationapi"
       version="true"

==================================================
ManagedBean.java
similarity index 98%
rename from java/javax/annotation/Generated.java
rename to java/jakarta/annotation/Generated.java
index 06d99bda4d..a2f6913e07 100644
--- a/java/javax/annotation/Generated.java
+++ b/java/jakarta/annotation/Generated.java
@@ -14,7 +14,7 @@
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
-package javax.annotation;
+package jakarta.annotation;
 
 import java.lang.annotation.Documented;
 import java.lang.annotation.ElementType;

==================================================
PostConstruct.java
similarity index 97%
rename from java/javax/annotation/ManagedBean.java
rename to java/jakarta/annotation/ManagedBean.java
index f2739a4d47..a602b0451d 100644
--- a/java/javax/annotation/ManagedBean.java
+++ b/java/jakarta/annotation/ManagedBean.java
@@ -14,7 +14,7 @@
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
-package javax.annotation;
+package jakarta.annotation;
 
 import java.lang.annotation.ElementType;
 import java.lang.annotation.Retention;

==================================================
PreDestroy.java
similarity index 97%
rename from java/javax/annotation/PostConstruct.java
rename to java/jakarta/annotation/PostConstruct.java
index 3ecb25b0ac..62e6096f81 100644
--- a/java/javax/annotation/PostConstruct.java
+++ b/java/jakarta/annotation/PostConstruct.java
@@ -14,7 +14,7 @@
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
-package javax.annotation;
+package jakarta.annotation;
 
 import java.lang.annotation.Documented;
 import java.lang.annotation.ElementType;

==================================================
Priority.java
similarity index 97%
rename from java/javax/annotation/PreDestroy.java
rename to java/jakarta/annotation/PreDestroy.java
index eb1d578f1e..6a07a95b8d 100644
--- a/java/javax/annotation/PreDestroy.java
+++ b/java/jakarta/annotation/PreDestroy.java
@@ -14,7 +14,7 @@
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
-package javax.annotation;
+package jakarta.annotation;
 
 import java.lang.annotation.Documented;
 import java.lang.annotation.ElementType;

==================================================
Resource.java
similarity index 97%
rename from java/javax/annotation/Priority.java
rename to java/jakarta/annotation/Priority.java
index a4980da697..f5b59c1d4a 100644
--- a/java/javax/annotation/Priority.java
+++ b/java/jakarta/annotation/Priority.java
@@ -14,7 +14,7 @@
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
-package javax.annotation;
+package jakarta.annotation;
 
 import java.lang.annotation.Documented;
 import java.lang.annotation.ElementType;

==================================================
Resources.java
similarity index 98%
rename from java/javax/annotation/Resource.java
rename to java/jakarta/annotation/Resource.java
index 498ca225a2..70b4d76b91 100644
--- a/java/javax/annotation/Resource.java
+++ b/java/jakarta/annotation/Resource.java
@@ -14,7 +14,7 @@
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
-package javax.annotation;
+package jakarta.annotation;
 
 import java.lang.annotation.ElementType;
 import java.lang.annotation.Retention;

==================================================
DeclareRoles.java
similarity index 97%
rename from java/javax/annotation/Resources.java
rename to java/jakarta/annotation/Resources.java
index 7b79dda313..12317ed4c4 100644
--- a/java/javax/annotation/Resources.java
+++ b/java/jakarta/annotation/Resources.java
@@ -14,7 +14,7 @@
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
-package javax.annotation;
+package jakarta.annotation;
 
 import java.lang.annotation.Documented;
 import java.lang.annotation.ElementType;

==================================================
DenyAll.java
similarity index 96%
rename from java/javax/annotation/security/DeclareRoles.java
rename to java/jakarta/annotation/security/DeclareRoles.java
index d50e30d9a2..e0f93df5ec 100644
--- a/java/javax/annotation/security/DeclareRoles.java
+++ b/java/jakarta/annotation/security/DeclareRoles.java
@@ -14,7 +14,7 @@
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
-package javax.annotation.security;
+package jakarta.annotation.security;
 
 import java.lang.annotation.Documented;
 import java.lang.annotation.ElementType;

==================================================
PermitAll.java
similarity index 96%
rename from java/javax/annotation/security/DenyAll.java
rename to java/jakarta/annotation/security/DenyAll.java
index 069aca2af7..f722de38db 100644
--- a/java/javax/annotation/security/DenyAll.java
+++ b/java/jakarta/annotation/security/DenyAll.java
@@ -14,7 +14,7 @@
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
-package javax.annotation.security;
+package jakarta.annotation.security;
 
 import java.lang.annotation.Documented;
 import java.lang.annotation.ElementType;

==================================================
RolesAllowed.java
similarity index 96%
rename from java/javax/annotation/security/PermitAll.java
rename to java/jakarta/annotation/security/PermitAll.java
index db1d7b6b88..5ceaa32eed 100644
--- a/java/javax/annotation/security/PermitAll.java
+++ b/java/jakarta/annotation/security/PermitAll.java
@@ -14,7 +14,7 @@
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
-package javax.annotation.security;
+package jakarta.annotation.security;
 
 import java.lang.annotation.Documented;
 import java.lang.annotation.ElementType;

==================================================
RunAs.java
similarity index 97%
rename from java/javax/annotation/security/RolesAllowed.java
rename to java/jakarta/annotation/security/RolesAllowed.java
index f916b6d38e..5c4d14f031 100644
--- a/java/javax/annotation/security/RolesAllowed.java
+++ b/java/jakarta/annotation/security/RolesAllowed.java
@@ -14,7 +14,7 @@
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
-package javax.annotation.security;
+package jakarta.annotation.security;
 
 import java.lang.annotation.Documented;
 import java.lang.annotation.ElementType;

==================================================
DataSourceDefinition.java
similarity index 96%
rename from java/javax/annotation/security/RunAs.java
rename to java/jakarta/annotation/security/RunAs.java
index 8a366e284f..f980219d94 100644
--- a/java/javax/annotation/security/RunAs.java
+++ b/java/jakarta/annotation/security/RunAs.java
@@ -14,7 +14,7 @@
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
-package javax.annotation.security;
+package jakarta.annotation.security;
 
 import java.lang.annotation.Documented;
 import java.lang.annotation.ElementType;

==================================================
DataSourceDefinitions.java
similarity index 98%
rename from java/javax/annotation/sql/DataSourceDefinition.java
rename to java/jakarta/annotation/sql/DataSourceDefinition.java
index feb0758bd5..dd003a76da 100644
--- a/java/javax/annotation/sql/DataSourceDefinition.java
+++ b/java/jakarta/annotation/sql/DataSourceDefinition.java
@@ -14,7 +14,7 @@
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
-package javax.annotation.sql;
+package jakarta.annotation.sql;
 
 import java.lang.annotation.ElementType;
 import java.lang.annotation.Retention;

==================================================
DefaultInstanceManager.java
similarity index 97%
rename from java/javax/annotation/sql/DataSourceDefinitions.java
rename to java/jakarta/annotation/sql/DataSourceDefinitions.java
index 7fcbc05072..23f5a65ae7 100644
--- a/java/javax/annotation/sql/DataSourceDefinitions.java
+++ b/java/jakarta/annotation/sql/DataSourceDefinitions.java
@@ -14,7 +14,7 @@
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
-package javax.annotation.sql;
+package jakarta.annotation.sql;
 
 import java.lang.annotation.ElementType;
 import java.lang.annotation.Retention;

==================================================
WebAnnotationSet.java
index cd47c023bb..18c98d452f 100644
--- a/java/org/apache/catalina/core/DefaultInstanceManager.java
+++ b/java/org/apache/catalina/core/DefaultInstanceManager.java
@@ -35,9 +35,6 @@ import java.util.Map;
 import java.util.Properties;
 import java.util.Set;
 
-import javax.annotation.PostConstruct;
-import javax.annotation.PreDestroy;
-import javax.annotation.Resource;
 import javax.ejb.EJB;
 import javax.naming.Context;
 import javax.naming.NamingException;
@@ -45,6 +42,10 @@ import javax.persistence.PersistenceContext;
 import javax.persistence.PersistenceUnit;
 import javax.xml.ws.WebServiceRef;
 
+import jakarta.annotation.PostConstruct;
+import jakarta.annotation.PreDestroy;
+import jakarta.annotation.Resource;
+
 import org.apache.catalina.ContainerServlet;
 import org.apache.catalina.Globals;
 import org.apache.catalina.security.SecurityUtil;

==================================================
TesterServletWithAnnotations.java
index afa3e61782..269e160d7a 100644
--- a/res/checkstyle/org-import-control.xml
+++ b/res/checkstyle/org-import-control.xml
@@ -36,7 +36,7 @@
   <allow pkg="org.xml.sax"/>
   <allow pkg="org.ietf.jgss"/>
   <subpackage name="catalina">
-    <allow pkg="javax.annotation"/>
+    <allow pkg="jakarta.annotation"/>
     <allow pkg="javax.ejb"/>
     <allow pkg="javax.persistence"/>
     <allow pkg="javax.servlet"/>
@@ -50,7 +50,7 @@
     <subpackage name="ant">
       <allow pkg="org.apache.tools.ant"/>
       <allow class="org.apache.tomcat.util.Base64"/>
-      <disallow pkg="javax.annotation"/>
+      <disallow pkg="jakarta.annotation"/>
       <disallow pkg="javax.ejb"/>
       <disallow pkg="javax.persistence"/>
       <disallow pkg="javax.servlet"/>
@@ -59,7 +59,7 @@
       <disallow pkg="org.apache.naming"/>
     </subpackage>
     <subpackage name="ha">
-      <disallow pkg="javax.annotation"/>
+      <disallow pkg="jakarta.annotation"/>
       <disallow pkg="javax.ejb"/>
       <disallow pkg="javax.persistence"/>
       <disallow pkg="org.apache.coyote"/>
@@ -72,7 +72,7 @@
       <allow pkg="org.apache.catalina.tribes"/>
     </subpackage>
     <subpackage name="tribes">
-      <disallow pkg="javax.annotation"/>
+      <disallow pkg="jakarta.annotation"/>
       <disallow pkg="javax.ejb"/>
       <disallow pkg="javax.persistence"/>
       <disallow pkg="javax.servlet"/>

==================================================
TesterServletWithLifeCycleMethods.java
index 30a019c843..28a1232016 100644
--- a/test/org/apache/catalina/startup/TesterServletWithAnnotations.java
+++ b/test/org/apache/catalina/startup/TesterServletWithAnnotations.java
@@ -19,12 +19,13 @@ package org.apache.catalina.startup;
 
 import java.io.IOException;
 
-import javax.annotation.Resource;
 import javax.servlet.ServletException;
 import javax.servlet.http.HttpServlet;
 import javax.servlet.http.HttpServletRequest;
 import javax.servlet.http.HttpServletResponse;
 
+import jakarta.annotation.Resource;
+
 public class TesterServletWithAnnotations extends HttpServlet {
 
     private static final long serialVersionUID = 1L;

==================================================
