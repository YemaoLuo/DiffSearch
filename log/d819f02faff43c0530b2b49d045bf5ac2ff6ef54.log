d819f02faff43c0530b2b49d045bf5ac2ff6ef54
==================================================
- Fix annotation names.
==================================================
Remy Maucherat
==================================================
Wed Jun 21 09:21:32 2006 +0000
==================================================
DeclareRoles.java
- Fix annotation names.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/tc6.0.x/trunk@415948 13f79535-47bb-0310-9956-ffa450edef68



==================================================
EJB.java
similarity index 93%
rename from java/javax/annotation/security/DeclaresRoles.java
rename to java/javax/annotation/security/DeclareRoles.java
index ccbd951c86..95f8aa1944 100644
--- a/java/javax/annotation/security/DeclaresRoles.java
+++ b/java/javax/annotation/security/DeclareRoles.java
@@ -1,30 +1,30 @@
-/*
- * Copyright 2006 The Apache Software Foundation.
- * 
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- * 
- *      http://www.apache.org/licenses/LICENSE-2.0
- * 
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-
-
-package javax.annotation.security;
-
-import java.lang.annotation.ElementType;
-import java.lang.annotation.Retention;
-import java.lang.annotation.RetentionPolicy;
-import java.lang.annotation.Target;
-
-@Target({ElementType.TYPE})
-@Retention(RetentionPolicy.RUNTIME)
-
-public @interface DeclaresRoles {
-    public String[] value();
-}
+/*
+ * Copyright 2006 The Apache Software Foundation.
+ * 
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ * 
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ * 
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+
+
+package javax.annotation.security;
+
+import java.lang.annotation.ElementType;
+import java.lang.annotation.Retention;
+import java.lang.annotation.RetentionPolicy;
+import java.lang.annotation.Target;
+
+@Target({ElementType.TYPE})
+@Retention(RetentionPolicy.RUNTIME)
+
+public @interface DeclareRoles {
+    public String[] value();
+}

==================================================
EJBs.java
similarity index 94%
rename from java/javax/annotation/EJB.java
rename to java/javax/ejb/EJB.java
index 13b308e6bf..0a4e445566 100644
--- a/java/javax/annotation/EJB.java
+++ b/java/javax/ejb/EJB.java
@@ -1,34 +1,34 @@
-/*
- * Copyright 2006 The Apache Software Foundation.
- * 
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- * 
- *      http://www.apache.org/licenses/LICENSE-2.0
- * 
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-
-
-package javax.annotation;
-
-import java.lang.annotation.ElementType;
-import java.lang.annotation.Retention;
-import java.lang.annotation.RetentionPolicy;
-import java.lang.annotation.Target;
-
-@Target({ElementType.METHOD, ElementType.TYPE, ElementType.FIELD, ElementType.PARAMETER})
-@Retention(RetentionPolicy.RUNTIME)
-
-public @interface EJB {
-   String name() default "";
-   Class businessInterface() default java.lang.Object.class;
-   String beanName() default "";
-   String mappedName() default "";
-   String description() default "";
-}
+/*
+ * Copyright 2006 The Apache Software Foundation.
+ * 
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ * 
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ * 
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+
+
+package javax.ejb;
+
+import java.lang.annotation.ElementType;
+import java.lang.annotation.Retention;
+import java.lang.annotation.RetentionPolicy;
+import java.lang.annotation.Target;
+
+@Target({ElementType.METHOD, ElementType.TYPE, ElementType.FIELD, ElementType.PARAMETER})
+@Retention(RetentionPolicy.RUNTIME)
+
+public @interface EJB {
+   String name() default "";
+   Class businessInterface() default java.lang.Object.class;
+   String beanName() default "";
+   String mappedName() default "";
+   String description() default "";
+}

==================================================
WebAnnotationSet.java
similarity index 94%
rename from java/javax/annotation/EJBs.java
rename to java/javax/ejb/EJBs.java
index 62e7a9ae06..50ed5d9298 100644
--- a/java/javax/annotation/EJBs.java
+++ b/java/javax/ejb/EJBs.java
@@ -1,30 +1,30 @@
-/*
- * Copyright 2006 The Apache Software Foundation.
- * 
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- * 
- *      http://www.apache.org/licenses/LICENSE-2.0
- * 
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-
-
-package javax.annotation;
-
-import java.lang.annotation.ElementType;
-import java.lang.annotation.Retention;
-import java.lang.annotation.RetentionPolicy;
-import java.lang.annotation.Target;
-
-@Target({ElementType.TYPE})
-@Retention(RetentionPolicy.RUNTIME)
-
-public @interface EJBs {
-   EJB[] value();
-}
+/*
+ * Copyright 2006 The Apache Software Foundation.
+ * 
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ * 
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ * 
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+
+
+package javax.ejb;
+
+import java.lang.annotation.ElementType;
+import java.lang.annotation.Retention;
+import java.lang.annotation.RetentionPolicy;
+import java.lang.annotation.Target;
+
+@Target({ElementType.TYPE})
+@Retention(RetentionPolicy.RUNTIME)
+
+public @interface EJBs {
+   EJB[] value();
+}

==================================================
AnnotationProcessor.java
index eef024aa01..f2261d13a9 100644
--- a/java/org/apache/catalina/startup/WebAnnotationSet.java
+++ b/java/org/apache/catalina/startup/WebAnnotationSet.java
@@ -20,7 +20,7 @@ package org.apache.catalina.startup;
 
 import javax.annotation.Resource;
 import javax.annotation.Resources;
-import javax.annotation.security.DeclaresRoles;
+import javax.annotation.security.DeclareRoles;
 import javax.annotation.security.RunAs;
 
 import org.apache.catalina.Container;
@@ -240,9 +240,9 @@ public class WebAnnotationSet {
          * Ref JSR 250, equivalent to the security-role element in
          * the deployment descriptor
          */
-        if (classClass.isAnnotationPresent(DeclaresRoles.class)) {
-            DeclaresRoles annotation = (DeclaresRoles) 
-                classClass.getAnnotation(DeclaresRoles.class);
+        if (classClass.isAnnotationPresent(DeclareRoles.class)) {
+            DeclareRoles annotation = (DeclareRoles) 
+                classClass.getAnnotation(DeclareRoles.class);
             for (int i = 0; annotation.value() != null && i < annotation.value().length; i++) {
                 context.addSecurityRole(annotation.value()[i]);
             }

==================================================
AnnotationProcessor.java
index 9288eb6540..6e11428f6c 100644
--- a/java/org/apache/catalina/util/AnnotationProcessor.java
+++ b/java/org/apache/catalina/util/AnnotationProcessor.java
@@ -21,10 +21,10 @@ import java.lang.reflect.InvocationTargetException;
 import java.lang.reflect.Method;
 import java.lang.reflect.Modifier;
 
-import javax.annotation.EJB;
 import javax.annotation.PostConstruct;
 import javax.annotation.PreDestroy;
 import javax.annotation.Resource;
+import javax.ejb.EJB;
 import javax.naming.NamingException;
 import javax.persistence.PersistenceContext;
 import javax.persistence.PersistenceUnit;

==================================================
