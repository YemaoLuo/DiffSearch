1153498d9dac2001959f980eb69d26efb816ff0b
==================================================
Add a useSendfile attribute for HTTP/2.
==================================================
Remy Maucherat
==================================================
Fri Nov 3 13:23:29 2017 +0000
==================================================
Http2Protocol.java
Add a useSendfile attribute for HTTP/2.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1814181 13f79535-47bb-0310-9956-ffa450edef68



==================================================
Stream.java
index 593e42a4e6..c11361a687 100644
--- a/java/org/apache/coyote/http2/Http2Protocol.java
+++ b/java/org/apache/coyote/http2/Http2Protocol.java
@@ -70,6 +70,7 @@ public class Http2Protocol implements UpgradeProtocol {
     private int maxTrailerCount = Constants.DEFAULT_MAX_TRAILER_COUNT;
     private int maxTrailerSize = Constants.DEFAULT_MAX_TRAILER_SIZE;
     private boolean initiatePingDisabled = false;
+    private boolean useSendfile = true;
 
     @Override
     public String getHttpUpgradeName(boolean isSSLEnabled) {
@@ -189,6 +190,16 @@ public class Http2Protocol implements UpgradeProtocol {
     }
 
 
+    public boolean getUseSendfile() {
+        return useSendfile;
+    }
+
+
+    public void setUseSendfile(boolean useSendfile) {
+        this.useSendfile = useSendfile;
+    }
+
+
     public void setAllowedTrailerHeaders(String commaSeparatedHeaders) {
         // Jump through some hoops so we don't end up with an empty set while
         // doing updates.

==================================================
