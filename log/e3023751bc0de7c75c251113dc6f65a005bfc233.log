e3023751bc0de7c75c251113dc6f65a005bfc233
==================================================
StringBuffer -> StringBuilder for unit tests
==================================================
Mark Emlyn
==================================================
Mon Nov 2 18:48:19 2009 +0000
==================================================
ChannelCreator.java
StringBuffer -> StringBuilder for unit tests

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@832041 13f79535-47bb-0310-9956-ffa450edef68



==================================================
CoordinationDemo.java
index dcee1260e5..c12d1a2da7 100644
--- a/test/org/apache/catalina/tribes/demos/ChannelCreator.java
+++ b/test/org/apache/catalina/tribes/demos/ChannelCreator.java
@@ -53,8 +53,8 @@ import org.apache.catalina.tribes.Member;
 public class ChannelCreator {
     
     
-    public static StringBuffer usage() {
-        StringBuffer buf = new StringBuffer();
+    public static StringBuilder usage() {
+        StringBuilder buf = new StringBuilder();
         buf.append("\n\t\t[-bind tcpbindaddress]")
            .append("\n\t\t[-tcpselto tcpselectortimeout]") 
            .append("\n\t\t[-tcpthreads tcpthreadcount]") 

==================================================
IntrospectionUtils.java
index 8668da3030..43453ef5a2 100644
--- a/test/org/apache/catalina/tribes/demos/CoordinationDemo.java
+++ b/test/org/apache/catalina/tribes/demos/CoordinationDemo.java
@@ -39,7 +39,7 @@ public class CoordinationDemo {
     static int CLEAR_SCREEN = 30;
     static boolean MULTI_THREAD = false;
     static boolean[] VIEW_EVENTS = new boolean[255];
-    StringBuffer statusLine = new StringBuffer();
+    StringBuilder statusLine = new StringBuilder();
     Status[] status = null;
     BufferedReader reader = null;
     /**
@@ -56,7 +56,7 @@ public class CoordinationDemo {
     
     
     public void clearScreen() {
-        StringBuffer buf = new StringBuffer(700);
+        StringBuilder buf = new StringBuilder(700);
         for (int i=0; i<CLEAR_SCREEN; i++ ) buf.append("\n");
         System.out.println(buf);
     }
@@ -90,7 +90,7 @@ public class CoordinationDemo {
         //view-id - 24
         //view count - 8
 
-        StringBuffer buf = new StringBuffer();
+        StringBuilder buf = new StringBuilder();
         buf.append(leftfill("Member",30," "));
         buf.append(leftfill("Running",10," "));
         buf.append(leftfill("Coord",30," "));
@@ -240,7 +240,7 @@ public class CoordinationDemo {
     }    
 
     public static String fill(String value, int length, String ch, boolean left) {
-        StringBuffer buf = new StringBuffer();
+        StringBuilder buf = new StringBuilder();
         if ( !left ) buf.append(value.trim());
         for (int i=value.trim().length(); i<length; i++ ) buf.append(ch);
         if ( left ) buf.append(value.trim());
@@ -266,7 +266,7 @@ public class CoordinationDemo {
             //coord - 30
             //view-id - 24
             //view count - 8
-            StringBuffer buf = new StringBuffer();
+            StringBuilder buf = new StringBuilder();
             String local = "";
             String coord = "";
             String viewId = "";

==================================================
MapDemo.java
index 01dedadac5..0267ab6f55 100644
--- a/test/org/apache/catalina/tribes/demos/IntrospectionUtils.java
+++ b/test/org/apache/catalina/tribes/demos/IntrospectionUtils.java
@@ -466,7 +466,7 @@ public final class IntrospectionUtils {
         if (value.indexOf("$") < 0) {
             return value;
         }
-        StringBuffer sb = new StringBuffer();
+        StringBuilder sb = new StringBuilder();
         int prev = 0;
         // assert value!=nil
         int pos;
@@ -835,7 +835,7 @@ public final class IntrospectionUtils {
 
         if (log.isDebugEnabled()) {
             // debug
-            StringBuffer sb = new StringBuffer();
+            StringBuilder sb = new StringBuilder();
             sb.append("" + target.getClass().getName() + "." + methodN + "( ");
             for (int i = 0; i < params.length; i++) {
                 if (i > 0)

==================================================
Benchmarks.java
index 08db8e616b..ab6e7e1941 100644
--- a/test/org/apache/catalina/tribes/demos/MapDemo.java
+++ b/test/org/apache/catalina/tribes/demos/MapDemo.java
@@ -221,8 +221,8 @@ public class MapDemo implements ChannelListener, MembershipListener{
     
             public int getRowCount() {return map.sizeFull() +1; }
             
-            public StringBuffer getMemberNames(Member[] members){
-                StringBuffer buf = new StringBuffer();
+            public StringBuilder getMemberNames(Member[] members){
+                StringBuilder buf = new StringBuilder();
                 if ( members!=null ) {
                     for (int i=0;i<members.length; i++ ) {
                         buf.append(members[i].getName());
@@ -350,17 +350,17 @@ public class MapDemo implements ChannelListener, MembershipListener{
             System.out.println(e.getActionCommand());
             if ( "add".equals(e.getActionCommand()) ) {
                 System.out.println("Add key:"+txtAddKey.getText()+" value:"+txtAddValue.getText());
-                map.put(txtAddKey.getText(),new StringBuffer(txtAddValue.getText()));
+                map.put(txtAddKey.getText(),new StringBuilder(txtAddValue.getText()));
             }
             if ( "change".equals(e.getActionCommand()) ) {
                 System.out.println("Change key:"+txtChangeKey.getText()+" value:"+txtChangeValue.getText());
-                StringBuffer buf = (StringBuffer)map.get(txtChangeKey.getText());
+                StringBuilder buf = (StringBuilder)map.get(txtChangeKey.getText());
                 if ( buf!=null ) {
                     buf.delete(0,buf.length());
                     buf.append(txtChangeValue.getText());
                     map.replicate(txtChangeKey.getText(),true);
                 } else {
-                    buf = new StringBuffer();
+                    buf = new StringBuilder();
                     buf.append(txtChangeValue.getText());
                     map.put(txtChangeKey.getText(),buf);
                 }
@@ -378,7 +378,7 @@ public class MapDemo implements ChannelListener, MembershipListener{
                     public void run() {
                         for (int i = 0; i < 5; i++) {
                             String key = random(5,0,0,true,true,null);
-                            map.put(key, new StringBuffer(key));
+                            map.put(key, new StringBuilder(key));
                             dataModel.fireTableDataChanged();
                             table.paint(table.getGraphics());
                             try {

==================================================
