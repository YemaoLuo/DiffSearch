640eba1f87881ccdadec0d57c3b33f254b28e5ca
==================================================
Deprecate o.a.jasper.util.Enumerator. Use Collections.enumeration()
==================================================
Mark Emlyn
==================================================
Tue Nov 1 12:24:53 2011 +0000
==================================================
JspContextWrapper.java
Deprecate o.a.jasper.util.Enumerator. Use Collections.enumeration()

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1195955 13f79535-47bb-0310-9956-ffa450edef68



==================================================
PageContextImpl.java
index 934f277efd..b9c96ade8f 100644
--- a/java/org/apache/jasper/runtime/JspContextWrapper.java
+++ b/java/org/apache/jasper/runtime/JspContextWrapper.java
@@ -20,6 +20,7 @@ package org.apache.jasper.runtime;
 import java.io.IOException;
 import java.io.Writer;
 import java.util.ArrayList;
+import java.util.Collections;
 import java.util.Enumeration;
 import java.util.HashMap;
 import java.util.Iterator;
@@ -43,7 +44,6 @@ import javax.servlet.jsp.tagext.BodyContent;
 import javax.servlet.jsp.tagext.VariableInfo;
 
 import org.apache.jasper.compiler.Localizer;
-import org.apache.jasper.util.Enumerator;
 
 /**
  * Implementation of a JSP Context Wrapper.
@@ -233,7 +233,7 @@ public class JspContextWrapper extends PageContext implements VariableResolver {
     @Override
     public Enumeration<String> getAttributeNamesInScope(int scope) {
         if (scope == PAGE_SCOPE) {
-            return new Enumerator<String>(pageAttributes.keySet().iterator());
+            return Collections.enumeration(pageAttributes.keySet());
         }
 
         return invokingJspCtxt.getAttributeNamesInScope(scope);

==================================================
Enumerator.java
index 0d35e169ac..2408eb13ea 100644
--- a/java/org/apache/jasper/runtime/PageContextImpl.java
+++ b/java/org/apache/jasper/runtime/PageContextImpl.java
@@ -23,6 +23,7 @@ import java.security.AccessController;
 import java.security.PrivilegedAction;
 import java.security.PrivilegedActionException;
 import java.security.PrivilegedExceptionAction;
+import java.util.Collections;
 import java.util.Enumeration;
 import java.util.HashMap;
 
@@ -54,7 +55,6 @@ import org.apache.jasper.el.ExpressionEvaluatorImpl;
 import org.apache.jasper.el.FunctionMapperImpl;
 import org.apache.jasper.el.VariableResolverImpl;
 import org.apache.jasper.security.SecurityUtil;
-import org.apache.jasper.util.Enumerator;
 
 /**
  * Implementation of the PageContext class from the JSP spec. Also doubles as a
@@ -522,7 +522,7 @@ public class PageContextImpl extends PageContext {
     private Enumeration<String> doGetAttributeNamesInScope(int scope) {
         switch (scope) {
         case PAGE_SCOPE:
-            return new Enumerator<String>(attributes.keySet().iterator());
+            return Collections.enumeration(attributes.keySet());
 
         case REQUEST_SCOPE:
             return request.getAttributeNames();

==================================================
