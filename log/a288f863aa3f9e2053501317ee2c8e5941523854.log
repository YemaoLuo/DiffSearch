a288f863aa3f9e2053501317ee2c8e5941523854
==================================================
Remove some warning stack traces from the logs and add some TODOs to review the relevant code.
==================================================
Mark Thomas
==================================================
Thu May 21 21:05:09 2015 +0000
==================================================
Http2UpgradeHandler.java
Remove some warning stack traces from the logs and add some TODOs to review the relevant code.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1680953 13f79535-47bb-0310-9956-ffa450edef68



==================================================
LegacyCookieProcessor.java
index 6ddd79bf00..aa69b414ed 100644
--- a/java/org/apache/coyote/http2/Http2UpgradeHandler.java
+++ b/java/org/apache/coyote/http2/Http2UpgradeHandler.java
@@ -56,6 +56,8 @@ import org.apache.tomcat.util.res.StringManager;
  * (tested with v37.0.2) needs to be configured with
  * network.http.spdy.enforce-tls-profile=false in order for FireFox to be able
  * to connect.
+ *
+ * TODO: Review cookie parsing
  */
 public class Http2UpgradeHandler extends AbstractStream implements InternalHttpUpgradeHandler {
 

==================================================
Rfc6265CookieProcessor.java
index 4efc2f07a8..d25ef83ec7 100644
--- a/java/org/apache/tomcat/util/http/LegacyCookieProcessor.java
+++ b/java/org/apache/tomcat/util/http/LegacyCookieProcessor.java
@@ -255,7 +255,8 @@ public final class LegacyCookieProcessor implements CookieProcessor {
             if (cookieValue != null && !cookieValue.isNull() ) {
                 if (cookieValue.getType() != MessageBytes.T_BYTES ) {
                     Exception e = new Exception();
-                    log.warn("Cookies: Parsing cookie as String. Expected bytes.", e);
+                    // TODO: Review this in light of HTTP/2
+                    log.debug("Cookies: Parsing cookie as String. Expected bytes.", e);
                     cookieValue.toBytes();
                 }
                 if (log.isDebugEnabled()) {

==================================================
