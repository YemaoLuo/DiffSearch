0fbe62b9f64469db89f9ca04837ed5832675c416
==================================================
StringBuffer -> StringBuilder for o.a.c.servlets
==================================================
Mark Emlyn
==================================================
Mon Nov 2 18:33:41 2009 +0000
==================================================
CGIServlet.java
StringBuffer -> StringBuilder for o.a.c.servlets

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@832017 13f79535-47bb-0310-9956-ffa450edef68



==================================================
DefaultServlet.java
index 436fb6215e..3841341a59 100644
--- a/java/org/apache/catalina/servlets/CGIServlet.java
+++ b/java/org/apache/catalina/servlets/CGIServlet.java
@@ -1078,8 +1078,8 @@ public final class CGIServlet extends HttpServlet {
          * directory to enable CGI script to be executed.
          */
         protected void expandCGIScript() {
-            StringBuffer srcPath = new StringBuffer();
-            StringBuffer destPath = new StringBuffer();
+            StringBuilder srcPath = new StringBuilder();
+            StringBuilder destPath = new StringBuilder();
             InputStream is = null;
 
             // paths depend on mapping
@@ -1170,7 +1170,7 @@ public final class CGIServlet extends HttpServlet {
          */
         public String toString() {
 
-            StringBuffer sb = new StringBuffer();
+            StringBuilder sb = new StringBuilder();
 
             sb.append("<TABLE border=2>");
 
@@ -1585,7 +1585,7 @@ public final class CGIServlet extends HttpServlet {
             int bufRead = -1;
 
             //create query arguments
-            StringBuffer cmdAndArgs = new StringBuffer();
+            StringBuilder cmdAndArgs = new StringBuilder();
             if (command.indexOf(" ") < 0) {
                 cmdAndArgs.append(command);
             } else {
@@ -1608,7 +1608,7 @@ public final class CGIServlet extends HttpServlet {
                 }
             }
 
-            StringBuffer command = new StringBuffer(cgiExecutable);
+            StringBuilder command = new StringBuilder(cgiExecutable);
             command.append(" ");
             command.append(cmdAndArgs.toString());
             cmdAndArgs = command;

==================================================
WebdavServlet.java
index 44f6f29261..2fd6265074 100644
--- a/java/org/apache/catalina/servlets/DefaultServlet.java
+++ b/java/org/apache/catalina/servlets/DefaultServlet.java
@@ -377,7 +377,7 @@ public class DefaultServlet
     protected void doOptions(HttpServletRequest req, HttpServletResponse resp)
         throws ServletException, IOException {
 
-        StringBuffer allow = new StringBuffer();
+        StringBuilder allow = new StringBuilder();
         // There is a doGet method
         allow.append("GET, HEAD");
         // There is a doPost
@@ -635,7 +635,7 @@ public class DefaultServlet
     /**
      * Display the size of a file.
      */
-    protected void displaySize(StringBuffer buf, int filesize) {
+    protected void displaySize(StringBuilder buf, int filesize) {
 
         int leftside = filesize / 1024;
         int rightside = (filesize % 1024) / 103;  // makes 1 digit
@@ -1149,7 +1149,7 @@ public class DefaultServlet
                                     InputStream xsltInputStream)
         throws IOException, ServletException {
 
-        StringBuffer sb = new StringBuffer();
+        StringBuilder sb = new StringBuilder();
 
         sb.append("<?xml version=\"1.0\"?>");
         sb.append("<listing ");
@@ -1275,7 +1275,7 @@ public class DefaultServlet
         OutputStreamWriter osWriter = new OutputStreamWriter(stream, "UTF8");
         PrintWriter writer = new PrintWriter(osWriter);
 
-        StringBuffer sb = new StringBuffer();
+        StringBuilder sb = new StringBuilder();
         
         // rewriteUrl(contextPath) is expensive. cache result for later reuse
         String rewrittenContextPath =  rewriteUrl(contextPath);

==================================================
