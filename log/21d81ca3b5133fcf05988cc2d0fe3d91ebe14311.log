21d81ca3b5133fcf05988cc2d0fe3d91ebe14311
==================================================
Clean up FastHttpDateFormat initialisation when using a security manager as prompted by Konstantin
==================================================
Mark Emlyn
==================================================
Thu Jun 3 07:56:23 2010 +0000
==================================================
SecurityClassLoad.java
Clean up FastHttpDateFormat initialisation when using a security manager as prompted by Konstantin

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@950905 13f79535-47bb-0310-9956-ffa450edef68



==================================================
Http11AprProcessor.java
index be106063e4..966d2fd474 100644
--- a/java/org/apache/catalina/security/SecurityClassLoad.java
+++ b/java/org/apache/catalina/security/SecurityClassLoad.java
@@ -43,7 +43,6 @@ public final class SecurityClassLoad {
         loadUtilPackage(loader);
         loadJavaxPackage(loader);
         loadCoyotePackage(loader);        
-        loadHttp11Package(loader);        
         loadTomcatPackage(loader);
     }
     
@@ -141,13 +140,6 @@ public final class SecurityClassLoad {
     }
     
 
-    private final static void loadHttp11Package(ClassLoader loader)
-        throws Exception {
-        String basePackage = "org.apache.coyote.http11.";
-        loader.loadClass(basePackage + "Http11Processor$1");
-    }
-    
-    
     private final static void loadCoyotePackage(ClassLoader loader)
         throws Exception {
         String basePackage = "org.apache.catalina.connector.";

==================================================
Http11NioProcessor.java
index 14a7c936b9..b8a927c1ab 100644
--- a/java/org/apache/coyote/http11/Http11AprProcessor.java
+++ b/java/org/apache/coyote/http11/Http11AprProcessor.java
@@ -106,10 +106,6 @@ public class Http11AprProcessor implements ActionHook {
 
         // Cause loading of HexUtils
         HexUtils.load();
-
-        // Cause loading of FastHttpDateFormat
-        FastHttpDateFormat.getCurrentDate();
-
     }
 
 

==================================================
Http11Processor.java
index 993b48b359..6f70794857 100644
--- a/java/org/apache/coyote/http11/Http11NioProcessor.java
+++ b/java/org/apache/coyote/http11/Http11NioProcessor.java
@@ -96,10 +96,6 @@ public class Http11NioProcessor extends AbstractHttp11Processor implements Actio
 
         // Cause loading of HexUtils
         HexUtils.load();
-
-        // Cause loading of FastHttpDateFormat
-        FastHttpDateFormat.getCurrentDate();
-
     }
 
 

==================================================
