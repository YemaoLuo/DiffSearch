8b44ce28a27ffc5a99afc1d4cd6d42f9de9621eb
==================================================
Pull up common code
==================================================
Mark Thomas
==================================================
Sun Nov 23 22:51:39 2014 +0000
==================================================
AbstractHttp11Processor.java
Pull up common code

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1641291 13f79535-47bb-0310-9956-ffa450edef68



==================================================
Http11AprProcessor.java
index f446802eb8..c38c0966cc 100644
--- a/java/org/apache/coyote/http11/AbstractHttp11Processor.java
+++ b/java/org/apache/coyote/http11/AbstractHttp11Processor.java
@@ -1761,6 +1761,7 @@ public abstract class AbstractHttp11Processor<S> extends AbstractProcessor<S> {
         }
         httpUpgradeHandler = null;
         resetErrorState();
+        socketWrapper = null;
         recycleInternal();
     }
 

==================================================
Http11Nio2Processor.java
index af321d12dc..5787f46ea6 100644
--- a/java/org/apache/coyote/http11/Http11AprProcessor.java
+++ b/java/org/apache/coyote/http11/Http11AprProcessor.java
@@ -152,7 +152,6 @@ public class Http11AprProcessor extends AbstractHttp11Processor<Long> {
 
     @Override
     public void recycleInternal() {
-        socketWrapper = null;
         sendfileData = null;
     }
 

==================================================
Http11NioProcessor.java
index ca65e2e0ff..2e26e97713 100644
--- a/java/org/apache/coyote/http11/Http11Nio2Processor.java
+++ b/java/org/apache/coyote/http11/Http11Nio2Processor.java
@@ -191,7 +191,6 @@ public class Http11Nio2Processor extends AbstractHttp11Processor<Nio2Channel> {
 
     @Override
     public void recycleInternal() {
-        socketWrapper = null;
         sendfileData = null;
     }
 

==================================================
