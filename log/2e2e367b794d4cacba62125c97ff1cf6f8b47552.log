2e2e367b794d4cacba62125c97ff1cf6f8b47552
==================================================
Updated Jasper runtime and JspC to use "1.6" as the values for compilerSourceVM, compilerTargetVM options by default,
==================================================
Konstantin Kolinko
==================================================
Wed Jun 24 11:17:24 2009 +0000
==================================================
EmbeddedServletOptions.java
index a51cb29495..c791631278 100644
--- a/conf/web.xml
+++ b/conf/web.xml
@@ -125,9 +125,9 @@
   <!--                       pages.  See the jasper documentation for more  -->
   <!--                       information.                                   -->
   <!--                                                                      -->
-  <!--   compilerSourceVM    Compiler source VM. [1.5]                      -->
+  <!--   compilerSourceVM    Compiler source VM. [1.6]                      -->
   <!--                                                                      -->
-  <!--   compilerTargetVM    Compiler target VM. [1.5]                      -->  
+  <!--   compilerTargetVM    Compiler target VM. [1.6]                      -->
   <!--                                                                      -->
   <!--   development         Is Jasper used in development mode? If true,   -->
   <!--                       the frequency at which JSPs are checked for    -->

==================================================
JspC.java
index f349557a5b..2f7e9b171c 100644
--- a/java/org/apache/jasper/EmbeddedServletOptions.java
+++ b/java/org/apache/jasper/EmbeddedServletOptions.java
@@ -131,12 +131,12 @@ public final class EmbeddedServletOptions implements Options {
     /**
      * Compiler target VM.
      */
-    private String compilerTargetVM = "1.5";
+    private String compilerTargetVM = "1.6";
     
     /**
      * The compiler source VM.
      */
-    private String compilerSourceVM = "1.5";
+    private String compilerSourceVM = "1.6";
     
     /**
      * The compiler class name.
@@ -377,18 +377,6 @@ public final class EmbeddedServletOptions implements Options {
     public EmbeddedServletOptions(ServletConfig config,
             ServletContext context) {
         
-        // JVM version numbers
-        // - not needed, because this version of Tomcat requires at least JDK 1.5
-        // try {
-        //    if (Float.parseFloat(System.getProperty("java.specification.version")) > 1.4) {
-        //        compilerSourceVM = compilerTargetVM = "1.5";
-        //    } else {
-        //        compilerSourceVM = compilerTargetVM = "1.4";
-        //    }
-        // } catch (NumberFormatException e) {
-        //    // Ignore
-        // }
-        
         Enumeration<String> enumeration=config.getInitParameterNames();
         while( enumeration.hasMoreElements() ) {
             String k=enumeration.nextElement();

==================================================
