479a6a932181ee76d316dfec3bfeeaf39c0a2a6d
==================================================
Fix BZ 56181 - return correct remoteHost with RemoteIP[Valve|Filter]
==================================================
Mark Thomas
==================================================
Thu Nov 26 18:57:25 2020 +0000
==================================================
RemoteIpFilter.java
index 2e9f5647f8..5877b76ebf 100644
--- a/java/org/apache/catalina/filters/LocalStrings.properties
+++ b/java/org/apache/catalina/filters/LocalStrings.properties
@@ -58,6 +58,7 @@ remoteCidrFilter.noRemoteIp=Client does not have an IP address. Request denied.
 remoteIpFilter.invalidHostHeader=Invalid value [{0}] found for Host in HTTP header [{1}]
 remoteIpFilter.invalidHostWithPort=Host value [{0}] in HTTP header [{1}] included a port number which will be ignored
 remoteIpFilter.invalidNumber=Illegal number for parameter [{0}]: [{1}]
+remoteIpFilter.invalidRemoteAddress=Unable to determine the remote host because the reported remote address [{0}] is not valid
 
 requestFilter.deny=Denied request for [{0}] based on property [{1}]
 

==================================================
RemoteIpValve.java
index 3379786cf0..25f8332629 100644
--- a/java/org/apache/catalina/valves/LocalStrings.properties
+++ b/java/org/apache/catalina/valves/LocalStrings.properties
@@ -135,6 +135,7 @@ remoteCidrValve.noRemoteIp=Client does not have an IP address. Request denied.
 remoteIpValve.invalidHostHeader=Invalid value [{0}] found for Host in HTTP header [{1}]
 remoteIpValve.invalidHostWithPort=Host value [{0}] in HTTP header [{1}] included a port number which will be ignored
 remoteIpValve.invalidPortHeader=Invalid value [{0}] found for port in HTTP header [{1}]
+remoteIpValve.invalidRemoteAddress=Unable to determine the remote host because the reported remote address [{0}] is not valid
 
 requestFilterValve.configInvalid=One or more invalid configuration settings were provided for the Remote[Addr|Host]Valve which prevented the Valve and its parent containers from starting
 requestFilterValve.deny=Denied request for [{0}] based on property [{1}]

==================================================
