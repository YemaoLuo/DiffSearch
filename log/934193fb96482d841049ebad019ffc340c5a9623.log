934193fb96482d841049ebad019ffc340c5a9623
==================================================
Pull up the request and response objects since they are common between AJP and HTTP
==================================================
Mark Emlyn
==================================================
Sun Jun 5 13:16:02 2011 +0000
==================================================
AbstractProcessor.java
Pull up the request and response objects since they are common between AJP and HTTP

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1132397 13f79535-47bb-0310-9956-ffa450edef68



==================================================
AbstractAjpProcessor.java
index 7cc47f341f..54b136d7f6 100644
--- a/java/org/apache/coyote/AbstractProcessor.java
+++ b/java/org/apache/coyote/AbstractProcessor.java
@@ -20,14 +20,43 @@ import java.util.concurrent.Executor;
 
 import org.apache.tomcat.util.net.AbstractEndpoint;
 
+/**
+ * Provides attributes common to all support protocols (currently HTTP and AJP).
+ * TODO: There are more attributes that can be pulled up
+ */
 public abstract class AbstractProcessor implements ActionHook, Processor {
 
+    /**
+     * The endpoint receiving connections that are handled by this processor.
+     */
     protected AbstractEndpoint endpoint;
-    
     protected AbstractEndpoint getEndpoint() {
         return endpoint;
     }
-    
+
+
+    /**
+     * The request associated with this processor.
+     */
+    protected Request request = null;
+    public Request getRequest() {
+        return request;
+    }
+
+
+    /**
+     * The response associated with this processor.
+     */
+    protected Response response = null;
+
+
+    /*
+     * Expose selected endpoint attributes through the processor
+     */
+
+    /**
+     * Obtain the Executor used by the underlying endpoint.
+     */
     @Override
     public Executor getExecutor() {
         return endpoint.getExecutor();

==================================================
AbstractHttp11Processor.java
index ea3306bc8f..480ddfbaea 100644
--- a/java/org/apache/coyote/ajp/AbstractAjpProcessor.java
+++ b/java/org/apache/coyote/ajp/AbstractAjpProcessor.java
@@ -32,7 +32,6 @@ import org.apache.coyote.AsyncContextCallback;
 import org.apache.coyote.AsyncStateMachine;
 import org.apache.coyote.InputBuffer;
 import org.apache.coyote.Request;
-import org.apache.coyote.Response;
 import org.apache.juli.logging.Log;
 import org.apache.tomcat.util.buf.ByteChunk;
 import org.apache.tomcat.util.buf.HexUtils;
@@ -65,18 +64,6 @@ public abstract class AbstractAjpProcessor extends AbstractProcessor {
     protected Adapter adapter = null;
 
 
-    /**
-     * Request object.
-     */
-    protected Request request = null;
-
-
-    /**
-     * Response object.
-     */
-    protected Response response = null;
-
-
     /**
      * AJP packet size.
      */
@@ -223,15 +210,6 @@ public abstract class AbstractAjpProcessor extends AbstractProcessor {
     // --------------------------------------------------------- Public Methods
 
 
-    /** Get the request associated with this processor.
-    *
-    * @return The request
-    */
-   public Request getRequest() {
-       return request;
-   }
-   
-   
    /**
     * Send an action to the connector.
     *

==================================================
