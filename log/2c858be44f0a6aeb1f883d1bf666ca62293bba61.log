2c858be44f0a6aeb1f883d1bf666ca62293bba61
==================================================
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49905
==================================================
Mark Emlyn
==================================================
Fri Oct 1 16:32:31 2010 +0000
==================================================
MessageDispatch15Interceptor.java
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49905
Prevent memory leak when using aysnc session replication

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1003572 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TcclThreadFactory.java
index d819d66bfa..fe13432095 100644
--- a/java/org/apache/catalina/tribes/group/interceptors/MessageDispatch15Interceptor.java
+++ b/java/org/apache/catalina/tribes/group/interceptors/MessageDispatch15Interceptor.java
@@ -24,6 +24,7 @@ import org.apache.catalina.tribes.ChannelMessage;
 import org.apache.catalina.tribes.Member;
 import org.apache.catalina.tribes.group.InterceptorPayload;
 import org.apache.catalina.tribes.transport.bio.util.LinkObject;
+import org.apache.catalina.tribes.util.TcclThreadFactory;
 
 /**
  * 
@@ -80,7 +81,9 @@ public class MessageDispatch15Interceptor extends MessageDispatchInterceptor {
     @Override
     public void startQueue() {
         if ( run ) return;
-        executor = new ThreadPoolExecutor(maxSpareThreads,maxThreads,keepAliveTime,TimeUnit.MILLISECONDS,runnablequeue);
+        executor = new ThreadPoolExecutor(maxSpareThreads, maxThreads,
+                keepAliveTime, TimeUnit.MILLISECONDS, runnablequeue,
+                new TcclThreadFactory());
         run = true;
     }
 

==================================================
