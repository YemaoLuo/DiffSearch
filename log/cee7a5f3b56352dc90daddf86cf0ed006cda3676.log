cee7a5f3b56352dc90daddf86cf0ed006cda3676
==================================================
EL 3.0 collections operations.
==================================================
Mark Emlyn
==================================================
Mon Jul 15 20:38:21 2013 +0000
==================================================
Stream.java
EL 3.0 collections operations.
Implement limit.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1503465 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TestCollectionOperations.java
index 9271e7408d..55437e2b34 100644
--- a/java/org/apache/el/stream/Stream.java
+++ b/java/org/apache/el/stream/Stream.java
@@ -209,6 +209,26 @@ public class Stream {
     }
 
 
+    public Stream limit(final Number count) {
+
+        Iterator<Object> downStream = new OpIterator() {
+
+            private final int limit = count.intValue();
+            private int itemCount = 0;
+
+            @Override
+            protected void findNext() {
+                if (iterator.hasNext() && itemCount < limit) {
+                    itemCount ++;
+                    next = iterator.next();
+                    foundNext = true;
+                }
+            }
+        };
+        return new Stream(downStream);
+    }
+
+
     public List<Object> toList() {
         List<Object> result = new ArrayList<>();
         while (iterator.hasNext()) {

==================================================
