ac22dd827b425b140079395da40516a1230a91e2
==================================================
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49360
==================================================
Mark Emlyn
==================================================
Mon May 31 16:57:45 2010 +0000
==================================================
BackupManager.java
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=49360
Managers will be restarted on Context reload

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@949807 13f79535-47bb-0310-9956-ffa450edef68



==================================================
DeltaManager.java
index c21c8538f0..f9ff387ca2 100644
--- a/java/org/apache/catalina/ha/session/BackupManager.java
+++ b/java/org/apache/catalina/ha/session/BackupManager.java
@@ -253,8 +253,6 @@ public class BackupManager extends StandardManager implements ClusterManager, Ma
 
         cluster.removeManager(this);
         this.random = null;
-
-        setState(LifecycleState.MUST_DESTROY);
     }
 
     @Override

==================================================
PersistentManagerBase.java
index 1c61021a00..9216120acf 100644
--- a/java/org/apache/catalina/ha/session/DeltaManager.java
+++ b/java/org/apache/catalina/ha/session/DeltaManager.java
@@ -987,8 +987,6 @@ public class DeltaManager extends ClusterManagerBase{
         this.random = null;
         getCluster().removeManager(this);
         replicationValve = null;
-        
-        setState(LifecycleState.MUST_DESTROY);
     }
 
     // ----------------------------------------- PropertyChangeListener Methods

==================================================
