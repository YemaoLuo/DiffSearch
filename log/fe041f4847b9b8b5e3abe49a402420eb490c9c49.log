fe041f4847b9b8b5e3abe49a402420eb490c9c49
==================================================
Revert the swallowing of the Status.APR_EGENERAL. It can't be the SSL handshake failing as that has to have completed for the code to get this far and it appears to be related (the same?) as the random closes when using the drawing board example.
==================================================
Mark Emlyn
==================================================
Mon Oct 21 14:04:19 2013 +0000
==================================================
AprServletInputStream.java
Revert the swallowing of the Status.APR_EGENERAL. It can't be the SSL handshake failing as that has to have completed for the code to get this far and it appears to be related (the same?) as the random closes when using the drawing board example.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1534165 13f79535-47bb-0310-9956-ffa450edef68



==================================================
AprServletOutputStream.java
index c8f0bea2cd..62c04aed55 100644
--- a/java/org/apache/coyote/http11/upgrade/AprServletInputStream.java
+++ b/java/org/apache/coyote/http11/upgrade/AprServletInputStream.java
@@ -100,9 +100,6 @@ public class AprServletInputStream extends AbstractServletInputStream {
                 (-result == Status.APR_OS_START_SYSERR + 10053)) {
             // 10053 on Windows is connection aborted
             throw new EOFException(sm.getString("apr.clientAbort"));
-        } else if (-result == Status.APR_EGENERAL && wrapper.isSecure()) {
-            // Connection abort by client during SSL handshake
-            throw new EOFException(sm.getString("apr.clientAbort"));
         } else {
             throw new IOException(sm.getString("apr.read.error",
                     Integer.valueOf(-result), Long.valueOf(socket)));

==================================================
