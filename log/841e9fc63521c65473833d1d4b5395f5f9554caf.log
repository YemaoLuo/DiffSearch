841e9fc63521c65473833d1d4b5395f5f9554caf
==================================================
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=41673
==================================================
Mark Emlyn
==================================================
Wed Aug 10 18:37:56 2011 +0000
==================================================
DefaultErrorHandler.java
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=41673
Use platform line endings when reporting error messages

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1156304 13f79535-47bb-0310-9956-ffa450edef68



==================================================
ErrorDispatcher.java
index 444d96591b..2b54e51ae8 100644
--- a/java/org/apache/jasper/compiler/DefaultErrorHandler.java
+++ b/java/org/apache/jasper/compiler/DefaultErrorHandler.java
@@ -17,6 +17,7 @@
 
 package org.apache.jasper.compiler;
 
+import org.apache.jasper.Constants;
 import org.apache.jasper.JasperException;
 
 /**
@@ -76,24 +77,28 @@ class DefaultErrorHandler implements ErrorHandler {
                 args = new Object[] {
                         Integer.valueOf(details[i].getJspBeginLineNumber()), 
                         details[i].getJspFileName() };
-                buf.append("\n\n");
+                buf.append(Constants.NEWLINE);
+                buf.append(Constants.NEWLINE);
                 buf.append(Localizer.getMessage("jsp.error.single.line.number",
                         args));
-                buf.append("\n");
+                buf.append(Constants.NEWLINE);
                 buf.append(details[i].getErrorMessage());
-                buf.append("\n");
+                buf.append(Constants.NEWLINE);
                 buf.append(details[i].getJspExtract());
             } else {
                 args = new Object[] {
                         Integer.valueOf(details[i].getJavaLineNumber()) };
-                buf.append("\n\n");
+                buf.append(Constants.NEWLINE);
+                buf.append(Constants.NEWLINE);
                 buf.append(Localizer.getMessage("jsp.error.java.line.number",
                         args));
-                buf.append("\n");
+                buf.append(Constants.NEWLINE);
                 buf.append(details[i].getErrorMessage());
             }
         }
-        buf.append("\n\nStacktrace:");
+        buf.append(Constants.NEWLINE);
+        buf.append(Constants.NEWLINE);
+        buf.append("Stacktrace:");
         throw new JasperException(
                 Localizer.getMessage("jsp.error.unable.compile") + ": " + buf);
     }

==================================================
