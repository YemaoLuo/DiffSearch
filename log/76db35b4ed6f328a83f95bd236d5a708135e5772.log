76db35b4ed6f328a83f95bd236d5a708135e5772
==================================================
For https://bz.apache.org/bugzilla/show_bug.cgi?id=58541
==================================================
Konstantin Kolinko
==================================================
Fri Nov 6 03:18:07 2015 +0000
==================================================
ApplicationContext.java
For https://bz.apache.org/bugzilla/show_bug.cgi?id=58541
String.lastIndexOf(String) -> String.lastIndexOf(char) where possible


git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1712905 13f79535-47bb-0310-9956-ffa450edef68



==================================================
RealmBase.java
index 654a82e9ea..d58444556a 100644
--- a/java/org/apache/catalina/core/ApplicationContext.java
+++ b/java/org/apache/catalina/core/ApplicationContext.java
@@ -346,7 +346,7 @@ public class ApplicationContext
 
         if (file == null)
             return (null);
-        int period = file.lastIndexOf(".");
+        int period = file.lastIndexOf('.');
         if (period < 0)
             return (null);
         String extension = file.substring(period + 1);

==================================================
CGIServlet.java
index 47097a8379..fc25fca70a 100644
--- a/java/org/apache/catalina/realm/RealmBase.java
+++ b/java/org/apache/catalina/realm/RealmBase.java
@@ -655,8 +655,8 @@ public abstract class RealmBase extends LifecycleMBeanBase implements Realm {
                 for(int k=0; k < patterns.length && !matched; k++) {
                     String pattern = patterns[k];
                     if(pattern.startsWith("*.")){
-                        int slash = uri.lastIndexOf("/");
-                        int dot = uri.lastIndexOf(".");
+                        int slash = uri.lastIndexOf('/');
+                        int dot = uri.lastIndexOf('.');
                         if(slash >= 0 && dot > slash &&
                            dot != uri.length()-1 &&
                            uri.length()-dot == pattern.length()-1) {

==================================================
FileResource.java
index ac670b6da6..822f5b3fa6 100644
--- a/java/org/apache/catalina/servlets/CGIServlet.java
+++ b/java/org/apache/catalina/servlets/CGIServlet.java
@@ -1166,7 +1166,7 @@ public final class CGIServlet extends HttpServlet {
 
             // create directories
             String dirPath = destPath.toString().substring(
-                    0,destPath.toString().lastIndexOf("/"));
+                    0,destPath.toString().lastIndexOf('/'));
             File dir = new File(dirPath);
             if (!dir.mkdirs() && !dir.isDirectory()) {
                 if (debug >= 2) {

==================================================
ImplicitTagLibraryInfo.java
index 7b1ee8b597..1fa5e936fe 100644
--- a/java/org/apache/catalina/webresources/FileResource.java
+++ b/java/org/apache/catalina/webresources/FileResource.java
@@ -59,7 +59,7 @@ public class FileResource extends AbstractResource {
                 // Need to return the mounted name, not the real name
                 int endOfName = webAppPath.length() - 1;
                 name = webAppPath.substring(
-                        webAppPath.lastIndexOf("/", endOfName - 1) + 1,
+                        webAppPath.lastIndexOf('/', endOfName - 1) + 1,
                         endOfName);
             }
         } else {

==================================================
ParserController.java
index edbb9a9d6e..6f724e29d3 100644
--- a/java/org/apache/jasper/compiler/ImplicitTagLibraryInfo.java
+++ b/java/org/apache/jasper/compiler/ImplicitTagLibraryInfo.java
@@ -111,7 +111,7 @@ class ImplicitTagLibraryInfo extends TagLibraryInfo {
                      */
                     String suffix = path.endsWith(TAG_FILE_SUFFIX) ?
                             TAG_FILE_SUFFIX : TAGX_FILE_SUFFIX;
-                    String tagName = path.substring(path.lastIndexOf("/") + 1);
+                    String tagName = path.substring(path.lastIndexOf('/') + 1);
                     tagName = tagName.substring(0,
                             tagName.lastIndexOf(suffix));
                     tagFileMap.put(tagName, path);

==================================================
JdkLoggerFormatter.java
index 178f05a135..905a488d65 100644
--- a/java/org/apache/jasper/compiler/ParserController.java
+++ b/java/org/apache/jasper/compiler/ParserController.java
@@ -501,7 +501,7 @@ class ParserController implements TagConstants {
         fileName = isAbsolute ? fileName
                 : baseDirStack.peek() + fileName;
         String baseDir =
-            fileName.substring(0, fileName.lastIndexOf("/") + 1);
+            fileName.substring(0, fileName.lastIndexOf('/') + 1);
         baseDirStack.push(baseDir);
         return fileName;
     }

==================================================
URL.java
index 0c99177736..37b5d1a960 100644
--- a/java/org/apache/juli/JdkLoggerFormatter.java
+++ b/java/org/apache/juli/JdkLoggerFormatter.java
@@ -57,7 +57,7 @@ public class JdkLoggerFormatter extends Formatter {
 
 
         if( name.indexOf('.') >= 0 )
-            name = name.substring(name.lastIndexOf(".") + 1);
+            name = name.substring(name.lastIndexOf('.') + 1);
 
         // Use a string buffer for better performance
         StringBuilder buf = new StringBuilder();

==================================================
