712854ff0341f94792c7448953780268c7a575e7
==================================================
Correct logic of check- thanks to Han Li
==================================================
Mark Thomas
==================================================
Mon Aug 8 15:03:09 2022 +0100
==================================================
Stream.java
Correct logic of check- thanks to Han Li


==================================================
TestHttp2Section_8_1.java
index 24f68c7e24..538ed0ba4d 100644
--- a/java/org/apache/coyote/http2/Stream.java
+++ b/java/org/apache/coyote/http2/Stream.java
@@ -472,7 +472,7 @@ class Stream extends AbstractNonZeroStream implements HeaderEmitter {
             throw new HpackException(sm.getString("stream.header.invalid",
                     getConnectionId(), getIdAsString(), "host", value));
         }
-        if (i == -1 && value.equals(coyoteRequest.serverName().getString()) ||
+        if (i == -1 && !value.equals(coyoteRequest.serverName().getString()) ||
                 i > -1 && ((!value.substring(0, i).equals(coyoteRequest.serverName().getString()) ||
                     Integer.parseInt(value.substring(i + 1)) != coyoteRequest.getServerPort()))) {
             // Host value inconsistent

==================================================
