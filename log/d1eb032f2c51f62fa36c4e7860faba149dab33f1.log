d1eb032f2c51f62fa36c4e7860faba149dab33f1
==================================================
Generics changes for o.a.c.ant
==================================================
Mark Emlyn
==================================================
Sat Dec 27 18:47:38 2008 +0000
==================================================
AbstractCatalinaTask.java
Generics changes for o.a.c.ant
Fix various Eclipse warnings (use of deprecated code etc)

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@729655 13f79535-47bb-0310-9956-ffa450edef68



==================================================
ValidatorTask.java
index fa579c1bb5..c44bf6cd82 100644
--- a/java/org/apache/catalina/ant/AbstractCatalinaTask.java
+++ b/java/org/apache/catalina/ant/AbstractCatalinaTask.java
@@ -269,7 +269,7 @@ public abstract class AbstractCatalinaTask extends BaseRedirectorHelperTask {
                 try {
                     reader.close();
                 } catch (Throwable u) {
-                    ;
+                    // Ignore
                 }
                 reader = null;
             }
@@ -277,7 +277,7 @@ public abstract class AbstractCatalinaTask extends BaseRedirectorHelperTask {
                 try {
                     istream.close();
                 } catch (Throwable u) {
-                    ;
+                    // Ignore
                 }
                 istream = null;
             }

==================================================
JMXAccessorCreateTask.java
index ae9a3bad1a..c8e65631d3 100644
--- a/java/org/apache/catalina/ant/ValidatorTask.java
+++ b/java/org/apache/catalina/ant/ValidatorTask.java
@@ -94,7 +94,8 @@ public class ValidatorTask extends BaseRedirectorHelperTask {
             file = file.getCanonicalFile();
             InputStream stream = 
                 new BufferedInputStream(new FileInputStream(file));
-            InputSource is = new InputSource(file.toURL().toExternalForm());
+            InputSource is =
+                new InputSource(file.toURI().toURL().toExternalForm());
             is.setByteStream(stream);
             digester.parse(is);
             handleOutput("web.xml validated");

==================================================
JMXAccessorInvokeTask.java
index 78861a0898..c7739802e8 100644
--- a/java/org/apache/catalina/ant/jmx/JMXAccessorCreateTask.java
+++ b/java/org/apache/catalina/ant/jmx/JMXAccessorCreateTask.java
@@ -63,7 +63,7 @@ public class JMXAccessorCreateTask extends JMXAccessorTask {
 
     private String className;
     private String classLoader;
-    private List args=new ArrayList();
+    private List<Arg> args=new ArrayList<Arg>();
 
     // ----------------------------------------------------- Instance Info
 
@@ -121,13 +121,13 @@ public class JMXAccessorCreateTask extends JMXAccessorTask {
     /**
      * @return Returns the args.
      */
-    public List getArgs() {
+    public List<Arg> getArgs() {
         return args;
     }
     /**
      * @param args The args to set.
      */
-    public void setArgs(List args) {
+    public void setArgs(List<Arg> args) {
         this.args = args;
     }
 
@@ -170,7 +170,7 @@ public class JMXAccessorCreateTask extends JMXAccessorTask {
            argsA = new Object[ args.size()];
            sigA = new String[args.size()];
            for( int i=0; i<args.size(); i++ ) {
-               Arg arg=(Arg)args.get(i);
+               Arg arg=args.get(i);
                if( arg.type==null) {
                    arg.type="java.lang.String";
                    sigA[i]=arg.getType();

==================================================
JMXAccessorQueryTask.java
index 277753d2f4..f5fa9a05f9 100644
--- a/java/org/apache/catalina/ant/jmx/JMXAccessorInvokeTask.java
+++ b/java/org/apache/catalina/ant/jmx/JMXAccessorInvokeTask.java
@@ -97,7 +97,7 @@ public class JMXAccessorInvokeTask extends JMXAccessorTask {
     // ----------------------------------------------------- Instance Variables
 
     private String operation ;
-    private List args=new ArrayList();
+    private List<Arg> args=new ArrayList<Arg>();
 
     // ----------------------------------------------------- Instance Info
 
@@ -139,13 +139,13 @@ public class JMXAccessorInvokeTask extends JMXAccessorTask {
     /**
      * @return Returns the args.
      */
-    public List getArgs() {
+    public List<Arg> getArgs() {
         return args;
     }
     /**
      * @param args The args to set.
      */
-    public void setArgs(List args) {
+    public void setArgs(List<Arg> args) {
         this.args = args;
     }
     
@@ -185,7 +185,7 @@ public class JMXAccessorInvokeTask extends JMXAccessorTask {
             Object argsA[]=new Object[ args.size()];
             String sigA[]=new String[args.size()];
             for( int i=0; i<args.size(); i++ ) {
-                Arg arg=(Arg)args.get(i);
+                Arg arg=args.get(i);
                 if( arg.type==null) {
                     arg.type="java.lang.String";
                     sigA[i]=arg.getType();

==================================================
JMXAccessorTask.java
index 1c292bbedc..b6666d5e93 100644
--- a/java/org/apache/catalina/ant/jmx/JMXAccessorQueryTask.java
+++ b/java/org/apache/catalina/ant/jmx/JMXAccessorQueryTask.java
@@ -132,7 +132,7 @@ public class JMXAccessorQueryTask extends JMXAccessorTask {
     protected String jmxQuery(MBeanServerConnection jmxServerConnection,
             String qry) {
         String isError = null;
-        Set names = null;
+        Set<ObjectName> names = null;
         String resultproperty = getResultproperty();
         try {
             names = jmxServerConnection.queryNames(new ObjectName(qry), null);
@@ -146,11 +146,11 @@ public class JMXAccessorQueryTask extends JMXAccessorTask {
         }
 
         if (resultproperty != null) {
-            Iterator it = names.iterator();
+            Iterator<ObjectName> it = names.iterator();
             int oindex = 0;
             String pname = null;
             while (it.hasNext()) {
-                ObjectName oname = (ObjectName) it.next();
+                ObjectName oname = it.next();
                 pname = resultproperty + "." + Integer.toString(oindex) + ".";
                 oindex++;
                     setProperty(pname + "Name", oname.toString());

==================================================
