f59852d19750493daaf496d0853ef2ad34701ec3
==================================================
Partial code clean-up for o.a.catalina.tribes
==================================================
Mark Emlyn
==================================================
Sun Jul 29 18:26:51 2012 +0000
==================================================
BufferPool.java
Partial code clean-up for o.a.catalina.tribes
 - Add final prompted by UCDetector
 - Java 7 use of <>

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1366885 13f79535-47bb-0310-9956-ffa450edef68



==================================================
BufferPool15Impl.java
index 54ebd71ed2..0b721b7fd1 100644
--- a/java/org/apache/catalina/tribes/io/BufferPool.java
+++ b/java/org/apache/catalina/tribes/io/BufferPool.java
@@ -34,7 +34,7 @@ public class BufferPool {
 
 
     protected static volatile BufferPool instance = null;
-    protected BufferPoolAPI pool = null;
+    protected final BufferPoolAPI pool;
 
     private BufferPool(BufferPoolAPI pool) {
         this.pool = pool;

==================================================
DirectByteArrayOutputStream.java
index 54b4a0b5a0..27273d72eb 100644
--- a/java/org/apache/catalina/tribes/io/BufferPool15Impl.java
+++ b/java/org/apache/catalina/tribes/io/BufferPool15Impl.java
@@ -26,8 +26,9 @@ import java.util.concurrent.atomic.AtomicInteger;
  */
 class BufferPool15Impl implements BufferPool.BufferPoolAPI {
     protected int maxSize;
-    protected AtomicInteger size = new AtomicInteger(0);
-    protected ConcurrentLinkedQueue<XByteBuffer> queue = new ConcurrentLinkedQueue<XByteBuffer>();
+    protected final AtomicInteger size = new AtomicInteger(0);
+    protected final ConcurrentLinkedQueue<XByteBuffer> queue =
+            new ConcurrentLinkedQueue<>();
 
     @Override
     public void setMaxSize(int bytes) {

==================================================
XByteBuffer.java
index ee1e85fcd9..adff091ddf 100644
--- a/java/org/apache/catalina/tribes/io/DirectByteArrayOutputStream.java
+++ b/java/org/apache/catalina/tribes/io/DirectByteArrayOutputStream.java
@@ -28,7 +28,7 @@ import java.io.OutputStream;
  */
 public class DirectByteArrayOutputStream extends OutputStream {
 
-    private XByteBuffer buffer;
+    private final XByteBuffer buffer;
 
     public DirectByteArrayOutputStream(int size) {
         buffer = new XByteBuffer(size,false);

==================================================
