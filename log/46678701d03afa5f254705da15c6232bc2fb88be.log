46678701d03afa5f254705da15c6232bc2fb88be
==================================================
Ensure DeltaRequest is created with correct recordAllActions value
==================================================
Mark Thomas
==================================================
Wed May 22 09:11:43 2019 +0100
==================================================
DeltaManager.java
Ensure DeltaRequest is created with correct recordAllActions value


==================================================
DeltaSession.java
index 6c5b3bd0cb..29ed8d274e 100644
--- a/java/org/apache/catalina/ha/session/DeltaManager.java
+++ b/java/org/apache/catalina/ha/session/DeltaManager.java
@@ -978,7 +978,7 @@ public class DeltaManager extends ClusterManagerBase{
             DeltaRequest newDeltaRequest = deltaRequestPool.pop();
             if (newDeltaRequest == null) {
                 // Will be configured in replaceDeltaRequest()
-                newDeltaRequest = new DeltaRequest();
+                newDeltaRequest = new DeltaRequest(null, isRecordAllActions());
             }
             deltaRequest = session.replaceDeltaRequest(newDeltaRequest);
             if (deltaRequest.getSize() > 0) {

==================================================
