177353e96b1f370c3e3846cca91e8aa227da3a0d
==================================================
Tackle some of the Proxy related Java 9 deprecation warnings
==================================================
Mark Thomas
==================================================
Fri Oct 6 10:18:33 2017 +0000
==================================================
ReplicationStream.java
Tackle some of the Proxy related Java 9 deprecation warnings

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1811317 13f79535-47bb-0310-9956-ffa450edef68



==================================================
CustomObjectInputStream.java
index acf80ff7e2..8aafaec800 100644
--- a/java/org/apache/catalina/tribes/io/ReplicationStream.java
+++ b/java/org/apache/catalina/tribes/io/ReplicationStream.java
@@ -132,8 +132,11 @@ public final class ReplicationStream extends ObjectInputStream {
             classObjs[i] = cl;
         }
         try {
-            return Proxy.getProxyClass(hasNonPublicInterface ? nonPublicLoader
+
+            @SuppressWarnings("deprecation")
+            Class<?> proxyClass = Proxy.getProxyClass(hasNonPublicInterface ? nonPublicLoader
                     : latestLoader, classObjs);
+            return proxyClass;
         } catch (IllegalArgumentException e) {
             throw new ClassNotFoundException(null, e);
         }

==================================================
DataSourceLinkFactory.java
index 38f6e1d5a2..b437a852c6 100644
--- a/java/org/apache/catalina/util/CustomObjectInputStream.java
+++ b/java/org/apache/catalina/util/CustomObjectInputStream.java
@@ -185,7 +185,9 @@ public final class CustomObjectInputStream extends ObjectInputStream {
         }
 
         try {
-            return Proxy.getProxyClass(classLoader, cinterfaces);
+            @SuppressWarnings("deprecation")
+            Class<?> proxyClass = Proxy.getProxyClass(classLoader, cinterfaces);
+            return proxyClass;
         } catch (IllegalArgumentException e) {
             throw new ClassNotFoundException(null, e);
         }

==================================================
