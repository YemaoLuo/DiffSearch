93dd0c2e2a15b9e5d37a92b4d435c4f53de3c00d
==================================================
Fix MethodExpression.getMethodInfo() when parameters are provided
==================================================
Mark Thomas
==================================================
Fri Sep 17 21:32:38 2021 +0100
==================================================
AstValue.java
Fix MethodExpression.getMethodInfo() when parameters are provided


==================================================
TestMethodExpressionImpl.java
index d926867b30..5a07ef4315 100644
--- a/java/org/apache/el/parser/AstValue.java
+++ b/java/org/apache/el/parser/AstValue.java
@@ -213,10 +213,18 @@ public final class AstValue extends SimpleNode {
             @SuppressWarnings("rawtypes") Class[] paramTypes)
             throws ELException {
         Target t = getTarget(ctx);
-        Method m = ReflectionUtil.getMethod(
-                ctx, t.base, t.property, paramTypes, null);
-        return new MethodInfo(m.getName(), m.getReturnType(), m
-                .getParameterTypes());
+        Class<?>[] types = null;
+        if (isParametersProvided()) {
+            if (isParametersProvided()) {
+                Object[] values = ((AstMethodParameters) this.jjtGetChild(
+                        this.jjtGetNumChildren() - 1)).getParameters(ctx);
+                types = getTypesFromValues(values);
+            } else {
+                types = paramTypes;
+            }
+        }
+        Method m = ReflectionUtil.getMethod(ctx, t.base, t.property, types, null);
+        return new MethodInfo(m.getName(), m.getReturnType(), m.getParameterTypes());
     }
 
     @Override

==================================================
