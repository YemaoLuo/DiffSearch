ede4f778283789449e56e083c7f99fa7b833cfe0
==================================================
Remove Response methods where the only function is to call action() and call action() directly.
==================================================
Mark Emlyn
==================================================
Thu May 29 10:28:23 2014 +0000
==================================================
OutputBuffer.java
Remove Response methods where the only function is to call action() and call action() directly.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1598246 13f79535-47bb-0310-9956-ffa450edef68



==================================================
Response.java
index 048bff3d56..0b31a38fbb 100644
--- a/java/org/apache/catalina/connector/OutputBuffer.java
+++ b/java/org/apache/catalina/connector/OutputBuffer.java
@@ -300,8 +300,7 @@ public class OutputBuffer extends Writer
                 CoyoteAdapter.ADAPTER_NOTES);
         req.inputBuffer.close();
 
-        coyoteResponse.finish();
-
+        coyoteResponse.action(ActionCode.CLOSE, null);
     }
 
 

==================================================
Response.java
index d876dcca43..4cc5ccaf04 100644
--- a/java/org/apache/catalina/connector/Response.java
+++ b/java/org/apache/catalina/connector/Response.java
@@ -45,6 +45,7 @@ import org.apache.catalina.Wrapper;
 import org.apache.catalina.security.SecurityUtil;
 import org.apache.catalina.util.RequestUtil;
 import org.apache.catalina.util.SessionConfig;
+import org.apache.coyote.ActionCode;
 import org.apache.tomcat.util.buf.CharChunk;
 import org.apache.tomcat.util.buf.UEncoder;
 import org.apache.tomcat.util.http.FastHttpDateFormat;
@@ -1137,7 +1138,7 @@ public class Response
 
 
     /**
-     * Send an acknowledgment of a request.
+     * Send an acknowledgement of a request.
      *
      * @exception IOException if an input/output error occurs
      */
@@ -1153,8 +1154,7 @@ public class Response
             return;
         }
 
-        coyoteResponse.acknowledge();
-
+        coyoteResponse.action(ActionCode.ACK, null);
     }
 
 

==================================================
SpdyProcessor.java
index bcce9c6d1e..d7040746dd 100644
--- a/java/org/apache/coyote/Response.java
+++ b/java/org/apache/coyote/Response.java
@@ -292,16 +292,6 @@ public final class Response {
     }
 
 
-    public void finish() {
-        action(ActionCode.CLOSE, this);
-    }
-
-
-    public void acknowledge() {
-        action(ActionCode.ACK, this);
-    }
-
-
     // -------------------- Headers --------------------
     /**
      * Warning: This method always returns <code>false<code> for Content-Type

==================================================
