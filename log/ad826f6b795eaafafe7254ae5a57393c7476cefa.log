ad826f6b795eaafafe7254ae5a57393c7476cefa
==================================================
UCDetector clean-up
==================================================
Mark Emlyn
==================================================
Fri Jul 13 22:31:38 2012 +0000
==================================================
CatalinaCluster.java
UCDetector clean-up
 - Remove unused code
 - Use final where appropriate

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1361424 13f79535-47bb-0310-9956-ffa450edef68



==================================================
ClusterMessage.java
index f74a44f508..a883aa65e3 100644
--- a/java/org/apache/catalina/ha/CatalinaCluster.java
+++ b/java/org/apache/catalina/ha/CatalinaCluster.java
@@ -20,13 +20,10 @@ package org.apache.catalina.ha;
 import java.util.Map;
 
 import org.apache.catalina.Cluster;
-import org.apache.catalina.LifecycleException;
 import org.apache.catalina.Manager;
 import org.apache.catalina.Valve;
 import org.apache.catalina.tribes.Channel;
 import org.apache.catalina.tribes.Member;
-import org.apache.juli.logging.Log;
-
 
 
 /**
@@ -40,25 +37,6 @@ import org.apache.juli.logging.Log;
 public interface CatalinaCluster extends Cluster {
     // ----------------------------------------------------- Instance Variables
 
-    /**
-     * Start the cluster, the owning container will invoke this
-     * @throws Exception - if failure to start cluster
-     */
-    public void start() throws Exception;
-
-    /**
-     * Stops the cluster, the owning container will invoke this
-     * @throws LifecycleException
-     */
-    public void stop() throws LifecycleException;
-
-    /**
-     * Returns the associates logger with this cluster.
-     *
-     * @return Log
-     */
-    public Log getLogger();
-
     /**
      * Sends a message to all the members in the cluster
      * @param msg ClusterMessage

==================================================
ClusterMessageBase.java
index af66aca9b0..fbc23b3874 100644
--- a/java/org/apache/catalina/ha/ClusterMessage.java
+++ b/java/org/apache/catalina/ha/ClusterMessage.java
@@ -29,7 +29,6 @@ public interface ClusterMessage extends Serializable {
     public Member getAddress();
     public void setAddress(Member member);
     public String getUniqueId();
-    public void setUniqueId(String id);
     public long getTimestamp();
     public void setTimestamp(long timestamp);
 }

==================================================
ClusterRuleSet.java
index 4b4b5c0e9e..0231f74753 100644
--- a/java/org/apache/catalina/ha/ClusterMessageBase.java
+++ b/java/org/apache/catalina/ha/ClusterMessageBase.java
@@ -30,12 +30,11 @@ import org.apache.catalina.tribes.Member;
  * @author not attributable
  * @version 1.0
  */
-public class ClusterMessageBase implements ClusterMessage {
+public abstract class ClusterMessageBase implements ClusterMessage {
 
     private static final long serialVersionUID = 1L;
 
     protected transient Member address;
-    private String uniqueId;
     private long timestamp;
     public ClusterMessageBase() {
         // NO-OP
@@ -52,11 +51,6 @@ public class ClusterMessageBase implements ClusterMessage {
         return address;
     }
 
-    @Override
-    public String getUniqueId() {
-        return uniqueId;
-    }
-
     @Override
     public long getTimestamp() {
         return timestamp;
@@ -73,11 +67,6 @@ public class ClusterMessageBase implements ClusterMessage {
         this.address = member;
     }
 
-    @Override
-    public void setUniqueId(String uniqueId) {
-        this.uniqueId = uniqueId;
-    }
-
     @Override
     public void setTimestamp(long timestamp) {
         this.timestamp = timestamp;

==================================================
SingleSignOnMessage.java
index bff7cde544..55346ca346 100644
--- a/java/org/apache/catalina/ha/ClusterRuleSet.java
+++ b/java/org/apache/catalina/ha/ClusterRuleSet.java
@@ -41,7 +41,7 @@ public class ClusterRuleSet extends RuleSetBase {
     /**
      * The matching pattern prefix to use for recognizing our elements.
      */
-    protected String prefix = null;
+    protected final String prefix;
 
 
     // ------------------------------------------------------------ Constructor

==================================================
UndeployMessage.java
index fabc0c40be..eed3ad18d5 100644
--- a/java/org/apache/catalina/ha/authenticator/SingleSignOnMessage.java
+++ b/java/org/apache/catalina/ha/authenticator/SingleSignOnMessage.java
@@ -117,11 +117,6 @@ public class SingleSignOnMessage implements ClusterMessage {
         return result.toString();
     }
 
-    @Override
-    public void setUniqueId(String uniqueId) {
-        this.uniqueId = uniqueId;
-    }
-
     public int getAction() {
         return action;
     }

==================================================
SessionMessageImpl.java
index eafc6cae5d..49797496ec 100644
--- a/java/org/apache/catalina/ha/deploy/UndeployMessage.java
+++ b/java/org/apache/catalina/ha/deploy/UndeployMessage.java
@@ -63,11 +63,6 @@ public class UndeployMessage implements ClusterMessage {
         return uniqueId;
     }
 
-    @Override
-    public void setUniqueId(String uniqueId) {
-        this.uniqueId = uniqueId;
-    }
-
     public String getContextName() {
         return contextName;
     }

==================================================
SimpleTcpCluster.java
index b483718ba3..1f1c11e34c 100644
--- a/java/org/apache/catalina/ha/session/SessionMessageImpl.java
+++ b/java/org/apache/catalina/ha/session/SessionMessageImpl.java
@@ -158,14 +158,11 @@ public class SessionMessageImpl extends ClusterMessageBase implements SessionMes
     public String getContextName() {
        return mContextName;
     }
+
     @Override
     public String getUniqueId() {
         return uniqueId;
     }
-    @Override
-    public void setUniqueId(String uniqueId) {
-        this.uniqueId = uniqueId;
-    }
 
     @Override
     public String toString() {

==================================================
