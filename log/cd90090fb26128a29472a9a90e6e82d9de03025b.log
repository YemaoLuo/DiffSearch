cd90090fb26128a29472a9a90e6e82d9de03025b
==================================================
Add default implementation to reduce duplication
==================================================
Mark Thomas
==================================================
Fri Aug 12 07:47:39 2016 +0000
==================================================
AbstractProcessor.java
Add default implementation to reduce duplication

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1756107 13f79535-47bb-0310-9956-ffa450edef68



==================================================
Http11Processor.java
index b162ca1790..3613cd6b51 100644
--- a/java/org/apache/coyote/AbstractProcessor.java
+++ b/java/org/apache/coyote/AbstractProcessor.java
@@ -571,7 +571,16 @@ public abstract class AbstractProcessor extends AbstractProcessorLight implement
     protected abstract void disableSwallowRequest();
 
 
-    protected abstract boolean getPopulateRequestAttributesFromSocket();
+    /**
+     * Processors that populate request attributes directly (e.g. AJP) should
+     * over-ride this method and return {@code false}.
+     *
+     * @return {@code true} if the SocketWrapper should be used to populate the
+     *         request attributes, otherwise {@code false}.
+     */
+    protected boolean getPopulateRequestAttributesFromSocket() {
+        return true;
+    }
 
 
     protected abstract void populateRequestAttributeRemoteHost();

==================================================
StreamProcessor.java
index 30512ed244..5eb9b74cfd 100644
--- a/java/org/apache/coyote/http11/Http11Processor.java
+++ b/java/org/apache/coyote/http11/Http11Processor.java
@@ -1537,12 +1537,6 @@ public class Http11Processor extends AbstractProcessor {
     }
 
 
-    @Override
-    protected final boolean getPopulateRequestAttributesFromSocket() {
-        return true;
-    }
-
-
     @Override
     protected final void populateRequestAttributeRemoteHost() {
         if (getPopulateRequestAttributesFromSocket() && socketWrapper != null) {

==================================================
