1a56bc4bba3a1eab1456d3cb0f2fac183fc0f8c2
==================================================
stupid eclipse
==================================================
Filip Hanik
==================================================
Tue Oct 28 22:26:03 2008 +0000
==================================================
ConnectionPool.java
stupid eclipse


git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@708702 13f79535-47bb-0310-9956-ffa450edef68



==================================================
FairBlockingQueue.java
index 03c4d9e3a2..e66355a144 100644
--- a/modules/jdbc-pool/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java
+++ b/modules/jdbc-pool/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java
@@ -489,12 +489,12 @@ public class ConnectionPool {
                     throw new SQLException("Failed to validate a newly established connection.");
                 }
             } catch (Exception x) {
-                release(con);                
+                release(con);
                 setToNull = true;
                 if (x instanceof SQLException) {
                     throw (SQLException)x;
                 } else {
-                    throw new SQLException(x);
+                    throw new SQLException(getStackTrace(x));
                 }
             }
         } finally {
@@ -514,7 +514,7 @@ public class ConnectionPool {
             //if the connection pool is closed
             //close the connection instead of returning it
             release(con);
-            return; 
+            return;
         } //end if
 
         if (con != null) {

==================================================
