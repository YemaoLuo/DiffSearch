df205be3fa1808e5ea722fe929b723642254cca6
==================================================
Handle ping frames in the middle of fragmented messages
==================================================
Mark Emlyn
==================================================
Thu Feb 23 00:41:22 2012 +0000
==================================================
StreamInbound.java
Handle ping frames in the middle of fragmented messages

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1292601 13f79535-47bb-0310-9956-ffa450edef68



==================================================
WsInputStream.java
index cd034ba860..a78d781d4f 100644
--- a/java/org/apache/catalina/websocket/StreamInbound.java
+++ b/java/org/apache/catalina/websocket/StreamInbound.java
@@ -52,7 +52,7 @@ public abstract class StreamInbound implements UpgradeInbound {
         // Must be start the start of a frame or series of frames
 
         try {
-            WsInputStream wsIs = new WsInputStream(processor);
+            WsInputStream wsIs = new WsInputStream(processor, outbound);
 
             WsFrame frame = wsIs.getFrame();
 

==================================================
