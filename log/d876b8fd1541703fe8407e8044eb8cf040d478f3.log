d876b8fd1541703fe8407e8044eb8cf040d478f3
==================================================
Refactor so clone() works correctly for sub-classes (it seemed reasonable that this might get sub-classed)
==================================================
Mark Thomas
==================================================
Mon Dec 4 12:46:55 2017 +0000
==================================================
Membership.java
Refactor so clone() works correctly for sub-classes (it seemed reasonable that this might get sub-classed)

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1817088 13f79535-47bb-0310-9956-ffa450edef68



==================================================
TestMembership.java
index 27d9195809..d7cae525d7 100644
--- a/res/findbugs/filter-false-positives.xml
+++ b/res/findbugs/filter-false-positives.xml
@@ -437,6 +437,12 @@
     </Or>
     <Bug pattern="UG_SYNC_SET_UNSYNC_GET"/>
   </Match>
+  <Match>
+    <!-- lock is in clone so this is safe -->
+    <Class name="org.apache.catalina.tribes.membership.Membership" />
+    <Method name="clone" />
+    <Bug pattern="ML_SYNC_ON_FIELD_TO_GUARD_CHANGING_THAT_FIELD" />
+  </Match>
   <Match>
     <!-- Intentional in case thread is waiting -->
     <Class name="org.apache.catalina.tribes.transport.RxTaskPool"/>

==================================================
