6ee5a22be9b0496aaf8cc0ebbdae017a33face50
==================================================
BZ 51477: Support all SSL protocol combinations in the
==================================================
Rainer Jung
==================================================
Mon Jul 11 15:44:10 2011 +0000
==================================================
Library.java
BZ 51477: Support all SSL protocol combinations in the
APR/native connector.

This only works when using the native library
version 1.1.21 or later which is not yet released.

Older tcnative versions will use an unchanged
config parser. Otherwise non-supported protocol
combinations would be unnoticed.

For easier review of the changes in AprEndpoint
use "svn -x -w" to ignore white space.


git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1145209 13f79535-47bb-0310-9956-ffa450edef68



==================================================
AprEndpoint.java
index de71253e80..3c6634ffc7 100644
--- a/java/org/apache/tomcat/jni/Library.java
+++ b/java/org/apache/tomcat/jni/Library.java
@@ -102,6 +102,8 @@ public final class Library {
     public static int TCN_PATCH_VERSION  = 0;
     /* TCN_IS_DEV_VERSION */
     public static int TCN_IS_DEV_VERSION = 0;
+    /* TCN_FULL_VERSION */
+    public static int TCN_FULL_VERSION   = 0;
     /* APR_MAJOR_VERSION */
     public static int APR_MAJOR_VERSION  = 0;
     /* APR_MINOR_VERSION */
@@ -178,6 +180,9 @@ public final class Library {
             TCN_MINOR_VERSION  = version(0x02);
             TCN_PATCH_VERSION  = version(0x03);
             TCN_IS_DEV_VERSION = version(0x04);
+            TCN_FULL_VERSION   = TCN_MAJOR_VERSION * 1000 +
+                                 TCN_MINOR_VERSION * 100 +
+                                 TCN_PATCH_VERSION;
             APR_MAJOR_VERSION  = version(0x11);
             APR_MINOR_VERSION  = version(0x12);
             APR_PATCH_VERSION  = version(0x13);

==================================================
