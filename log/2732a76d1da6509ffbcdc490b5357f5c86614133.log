2732a76d1da6509ffbcdc490b5357f5c86614133
==================================================
Fix NPEs
==================================================
Mark Thomas
==================================================
Thu May 4 21:17:55 2017 +0000
==================================================
Request.java
Fix NPEs

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1793910 13f79535-47bb-0310-9956-ffa450edef68



==================================================
Parameters.java
index 3146c5a671..4fa593e4c8 100644
--- a/java/org/apache/catalina/connector/Request.java
+++ b/java/org/apache/catalina/connector/Request.java
@@ -2826,8 +2826,7 @@ public class Request implements HttpServletRequest {
                         String name = part.getName();
                         String value = null;
                         try {
-                            Charset paramCharset = parameters.getCharset();
-                            value = part.getString(paramCharset.name());
+                            value = part.getString(charset.name());
                         } catch (UnsupportedEncodingException uee) {
                             // Not possible
                         }

==================================================
