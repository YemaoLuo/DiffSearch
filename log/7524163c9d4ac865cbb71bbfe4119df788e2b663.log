7524163c9d4ac865cbb71bbfe4119df788e2b663
==================================================
Avoid NPEs when attempting to destroy contexts that failed to start.
==================================================
Mark Emlyn
==================================================
Tue May 14 21:36:08 2013 +0000
==================================================
StandardContext.java
Avoid NPEs when attempting to destroy contexts that failed to start.

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1482602 13f79535-47bb-0310-9956-ffa450edef68



==================================================
StandardRoot.java
index ac4822b36f..ceee4af447 100644
--- a/java/org/apache/catalina/core/StandardContext.java
+++ b/java/org/apache/catalina/core/StandardContext.java
@@ -5755,7 +5755,7 @@ public class StandardContext extends ContainerBase
         ClassLoader oldContextClassLoader =
             Thread.currentThread().getContextClassLoader();
 
-        if (getLoader().getClassLoader() != null) {
+        if (getLoader() != null && getLoader().getClassLoader() != null) {
             Thread.currentThread().setContextClassLoader
                 (getLoader().getClassLoader());
         }

==================================================
