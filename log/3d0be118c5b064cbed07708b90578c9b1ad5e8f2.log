3d0be118c5b064cbed07708b90578c9b1ad5e8f2
==================================================
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=56953
==================================================
Mark Emlyn
==================================================
Wed Sep 17 10:34:51 2014 +0000
==================================================
ClassParser.java
Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=56953
Further performance improvements to BCEL parser.
Based on a patch by hzhang9

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1625504 13f79535-47bb-0310-9956-ffa450edef68



==================================================
FastDataInputStream.java
index cb6b703ea9..bcaa6b0aed 100644
--- a/java/org/apache/tomcat/util/bcel/classfile/ClassParser.java
+++ b/java/org/apache/tomcat/util/bcel/classfile/ClassParser.java
@@ -17,9 +17,7 @@
  */
 package org.apache.tomcat.util.bcel.classfile;
 
-import java.io.BufferedInputStream;
 import java.io.DataInput;
-import java.io.DataInputStream;
 import java.io.IOException;
 import java.io.InputStream;
 
@@ -59,7 +57,7 @@ public final class ClassParser {
      * @param file Input stream
      */
     public ClassParser(InputStream file) {
-        this.file = new DataInputStream(new BufferedInputStream(file, BUFSIZE));
+        this.file = new FastDataInputStream(file, BUFSIZE);
     }
 
 

==================================================
