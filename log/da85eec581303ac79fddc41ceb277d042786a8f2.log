da85eec581303ac79fddc41ceb277d042786a8f2
==================================================
Reset sendfile data in recycle method so prepareRequest can be pulled up
==================================================
Mark Emlyn
==================================================
Sun Jun 19 21:15:22 2011 +0000
==================================================
Http11AprProcessor.java
Reset sendfile data in recycle method so prepareRequest can be pulled up

git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1137440 13f79535-47bb-0310-9956-ffa450edef68



==================================================
Http11NioProcessor.java
index 49a90a620b..5506e5f160 100644
--- a/java/org/apache/coyote/http11/Http11AprProcessor.java
+++ b/java/org/apache/coyote/http11/Http11AprProcessor.java
@@ -390,7 +390,8 @@ public class Http11AprProcessor extends AbstractHttp11Processor {
 
     @Override
     public void recycleInternal() {
-        this.socket = null;
+        socket = null;
+        sendfileData = null;
     }
     
 
@@ -636,7 +637,6 @@ public class Http11AprProcessor extends AbstractHttp11Processor {
         http09 = false;
         contentDelimitation = false;
         expectation = false;
-        sendfileData = null;
         if (endpoint.isSSLEnabled()) {
             request.scheme().setString("https");
         }

==================================================
